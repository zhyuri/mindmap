var Qo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function wo(h,l,p){return p={path:l,exports:{},require:function(v,w){return WT(v,w??p.path)}},h(p,p.exports),p.exports}function WT(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var C2=Object.getOwnPropertySymbols,KT=Object.prototype.hasOwnProperty,_T=Object.prototype.propertyIsEnumerable;function $T(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function ZT(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var l={},p=0;p<10;p++)l["_"+String.fromCharCode(p)]=p;var v=Object.getOwnPropertyNames(l).map(function(P){return l[P]});if(v.join("")!=="0123456789")return!1;var w={};return"abcdefghijklmnopqrst".split("").forEach(function(P){w[P]=P}),Object.keys(Object.assign({},w)).join("")==="abcdefghijklmnopqrst"}catch(P){return!1}}var Fe=ZT()?Object.assign:function(h,l){for(var p,v=$T(h),w,P=1;P<arguments.length;P++){p=Object(arguments[P]);for(var L in p)KT.call(p,L)&&(v[L]=p[L]);if(C2){w=C2(p);for(var A=0;A<w.length;A++)_T.call(p,w[A])&&(v[w[A]]=p[w[A]])}}return v},JT=wo(function(h,l){var p=60103,v=60106;l.Fragment=60107,l.StrictMode=60108,l.Profiler=60114;var w=60109,P=60110,L=60112;l.Suspense=60113;var A=60115,B=60116;if(typeof Symbol=="function"&&Symbol.for){var Q=Symbol.for;p=Q("react.element"),v=Q("react.portal"),l.Fragment=Q("react.fragment"),l.StrictMode=Q("react.strict_mode"),l.Profiler=Q("react.profiler"),w=Q("react.provider"),P=Q("react.context"),L=Q("react.forward_ref"),l.Suspense=Q("react.suspense"),A=Q("react.memo"),B=Q("react.lazy")}var xt=typeof Symbol=="function"&&Symbol.iterator;function ut(tt){return tt===null||typeof tt!="object"?null:(tt=xt&&tt[xt]||tt["@@iterator"],typeof tt=="function"?tt:null)}function X(tt){for(var ht="https://reactjs.org/docs/error-decoder.html?invariant="+tt,Yt=1;Yt<arguments.length;Yt++)ht+="&args[]="+encodeURIComponent(arguments[Yt]);return"Minified React error #"+tt+"; visit "+ht+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Et={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kt={};function Y(tt,ht,Yt){this.props=tt,this.context=ht,this.refs=Kt,this.updater=Yt||Et}Y.prototype.isReactComponent={},Y.prototype.setState=function(tt,ht){if(typeof tt!="object"&&typeof tt!="function"&&tt!=null)throw Error(X(85));this.updater.enqueueSetState(this,tt,ht,"setState")},Y.prototype.forceUpdate=function(tt){this.updater.enqueueForceUpdate(this,tt,"forceUpdate")};function _(){}_.prototype=Y.prototype;function U(tt,ht,Yt){this.props=tt,this.context=ht,this.refs=Kt,this.updater=Yt||Et}var H=U.prototype=new _;H.constructor=U,Fe(H,Y.prototype),H.isPureReactComponent=!0;var it={current:null},E=Object.prototype.hasOwnProperty,et={key:!0,ref:!0,__self:!0,__source:!0};function lt(tt,ht,Yt){var kt,ft={},Tt=null,Bt=null;if(ht!=null)for(kt in ht.ref!==void 0&&(Bt=ht.ref),ht.key!==void 0&&(Tt=""+ht.key),ht)E.call(ht,kt)&&!et.hasOwnProperty(kt)&&(ft[kt]=ht[kt]);var ee=arguments.length-2;if(ee===1)ft.children=Yt;else if(1<ee){for(var te=Array(ee),hi=0;hi<ee;hi++)te[hi]=arguments[hi+2];ft.children=te}if(tt&&tt.defaultProps)for(kt in ee=tt.defaultProps,ee)ft[kt]===void 0&&(ft[kt]=ee[kt]);return{$$typeof:p,type:tt,key:Tt,ref:Bt,props:ft,_owner:it.current}}function wt(tt,ht){return{$$typeof:p,type:tt.type,key:ht,ref:tt.ref,props:tt.props,_owner:tt._owner}}function Jt(tt){return typeof tt=="object"&&tt!==null&&tt.$$typeof===p}function at(tt){var ht={"=":"=0",":":"=2"};return"$"+tt.replace(/[=:]/g,function(Yt){return ht[Yt]})}var jt=/\/+/g;function Ge(tt,ht){return typeof tt=="object"&&tt!==null&&tt.key!=null?at(""+tt.key):ht.toString(36)}function In(tt,ht,Yt,kt,ft){var Tt=typeof tt;(Tt==="undefined"||Tt==="boolean")&&(tt=null);var Bt=!1;if(tt===null)Bt=!0;else switch(Tt){case"string":case"number":Bt=!0;break;case"object":switch(tt.$$typeof){case p:case v:Bt=!0}}if(Bt)return Bt=tt,ft=ft(Bt),tt=kt===""?"."+Ge(Bt,0):kt,Array.isArray(ft)?(Yt="",tt!=null&&(Yt=tt.replace(jt,"$&/")+"/"),In(ft,ht,Yt,"",function(hi){return hi})):ft!=null&&(Jt(ft)&&(ft=wt(ft,Yt+(!ft.key||Bt&&Bt.key===ft.key?"":(""+ft.key).replace(jt,"$&/")+"/")+tt)),ht.push(ft)),1;if(Bt=0,kt=kt===""?".":kt+":",Array.isArray(tt))for(var ee=0;ee<tt.length;ee++){Tt=tt[ee];var te=kt+Ge(Tt,ee);Bt+=In(Tt,ht,Yt,te,ft)}else if(te=ut(tt),typeof te=="function")for(tt=te.call(tt),ee=0;!(Tt=tt.next()).done;)Tt=Tt.value,te=kt+Ge(Tt,ee++),Bt+=In(Tt,ht,Yt,te,ft);else if(Tt==="object")throw ht=""+tt,Error(X(31,ht==="[object Object]"?"object with keys {"+Object.keys(tt).join(", ")+"}":ht));return Bt}function Ve(tt,ht,Yt){if(tt==null)return tt;var kt=[],ft=0;return In(tt,kt,"","",function(Tt){return ht.call(Yt,Tt,ft++)}),kt}function Dt(tt){if(tt._status===-1){var ht=tt._result;ht=ht(),tt._status=0,tt._result=ht,ht.then(function(Yt){tt._status===0&&(Yt=Yt.default,tt._status=1,tt._result=Yt)},function(Yt){tt._status===0&&(tt._status=2,tt._result=Yt)})}if(tt._status===1)return tt._result;throw tt._result}var Xt={current:null};function Ee(){var tt=Xt.current;if(tt===null)throw Error(X(321));return tt}var Xe={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:it,IsSomeRendererActing:{current:!1},assign:Fe};l.Children={map:Ve,forEach:function(tt,ht,Yt){Ve(tt,function(){ht.apply(this,arguments)},Yt)},count:function(tt){var ht=0;return Ve(tt,function(){ht++}),ht},toArray:function(tt){return Ve(tt,function(ht){return ht})||[]},only:function(tt){if(!Jt(tt))throw Error(X(143));return tt}},l.Component=Y,l.PureComponent=U,l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xe,l.cloneElement=function(tt,ht,Yt){if(tt==null)throw Error(X(267,tt));var kt=Fe({},tt.props),ft=tt.key,Tt=tt.ref,Bt=tt._owner;if(ht!=null){if(ht.ref!==void 0&&(Tt=ht.ref,Bt=it.current),ht.key!==void 0&&(ft=""+ht.key),tt.type&&tt.type.defaultProps)var ee=tt.type.defaultProps;for(te in ht)E.call(ht,te)&&!et.hasOwnProperty(te)&&(kt[te]=ht[te]===void 0&&ee!==void 0?ee[te]:ht[te])}var te=arguments.length-2;if(te===1)kt.children=Yt;else if(1<te){ee=Array(te);for(var hi=0;hi<te;hi++)ee[hi]=arguments[hi+2];kt.children=ee}return{$$typeof:p,type:tt.type,key:ft,ref:Tt,props:kt,_owner:Bt}},l.createContext=function(tt,ht){return ht===void 0&&(ht=null),tt={$$typeof:P,_calculateChangedBits:ht,_currentValue:tt,_currentValue2:tt,_threadCount:0,Provider:null,Consumer:null},tt.Provider={$$typeof:w,_context:tt},tt.Consumer=tt},l.createElement=lt,l.createFactory=function(tt){var ht=lt.bind(null,tt);return ht.type=tt,ht},l.createRef=function(){return{current:null}},l.forwardRef=function(tt){return{$$typeof:L,render:tt}},l.isValidElement=Jt,l.lazy=function(tt){return{$$typeof:B,_payload:{_status:-1,_result:tt},_init:Dt}},l.memo=function(tt,ht){return{$$typeof:A,type:tt,compare:ht===void 0?null:ht}},l.useCallback=function(tt,ht){return Ee().useCallback(tt,ht)},l.useContext=function(tt,ht){return Ee().useContext(tt,ht)},l.useDebugValue=function(){},l.useEffect=function(tt,ht){return Ee().useEffect(tt,ht)},l.useImperativeHandle=function(tt,ht,Yt){return Ee().useImperativeHandle(tt,ht,Yt)},l.useLayoutEffect=function(tt,ht){return Ee().useLayoutEffect(tt,ht)},l.useMemo=function(tt,ht){return Ee().useMemo(tt,ht)},l.useReducer=function(tt,ht,Yt){return Ee().useReducer(tt,ht,Yt)},l.useRef=function(tt){return Ee().useRef(tt)},l.useState=function(tt){return Ee().useState(tt)},l.version="17.0.2"}),Zt=wo(function(h){h.exports=JT});var QT=wo(function(h,l){var p,v,w,P;if(typeof performance=="object"&&typeof performance.now=="function"){var L=performance;l.unstable_now=function(){return L.now()}}else{var A=Date,B=A.now();l.unstable_now=function(){return A.now()-B}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var Q=null,xt=null,ut=function(){if(Q!==null)try{var ft=l.unstable_now();Q(!0,ft),Q=null}catch(Tt){throw setTimeout(ut,0),Tt}};p=function(ft){Q!==null?setTimeout(p,0,ft):(Q=ft,setTimeout(ut,0))},v=function(ft,Tt){xt=setTimeout(ft,Tt)},w=function(){clearTimeout(xt)},l.unstable_shouldYield=function(){return!1},P=l.unstable_forceFrameRate=function(){}}else{var X=window.setTimeout,Et=window.clearTimeout;if(typeof console!="undefined"){var Kt=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Kt!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Y=!1,_=null,U=-1,H=5,it=0;l.unstable_shouldYield=function(){return l.unstable_now()>=it},P=function(){},l.unstable_forceFrameRate=function(ft){0>ft||125<ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<ft?Math.floor(1e3/ft):5};var E=new MessageChannel,et=E.port2;E.port1.onmessage=function(){if(_!==null){var ft=l.unstable_now();it=ft+H;try{_(!0,ft)?et.postMessage(null):(Y=!1,_=null)}catch(Tt){throw et.postMessage(null),Tt}}else Y=!1},p=function(ft){_=ft,Y||(Y=!0,et.postMessage(null))},v=function(ft,Tt){U=X(function(){ft(l.unstable_now())},Tt)},w=function(){Et(U),U=-1}}function lt(ft,Tt){var Bt=ft.length;ft.push(Tt);t:for(;;){var ee=Bt-1>>>1,te=ft[ee];if(te!==void 0&&0<at(te,Tt))ft[ee]=Tt,ft[Bt]=te,Bt=ee;else break t}}function wt(ft){return ft=ft[0],ft===void 0?null:ft}function Jt(ft){var Tt=ft[0];if(Tt!==void 0){var Bt=ft.pop();if(Bt!==Tt){ft[0]=Bt;t:for(var ee=0,te=ft.length;ee<te;){var hi=2*(ee+1)-1,qr=ft[hi],os=hi+1,K=ft[os];if(qr!==void 0&&0>at(qr,Bt))K!==void 0&&0>at(K,qr)?(ft[ee]=K,ft[os]=Bt,ee=os):(ft[ee]=qr,ft[hi]=Bt,ee=hi);else if(K!==void 0&&0>at(K,Bt))ft[ee]=K,ft[os]=Bt,ee=os;else break t}}return Tt}return null}function at(ft,Tt){var Bt=ft.sortIndex-Tt.sortIndex;return Bt!==0?Bt:ft.id-Tt.id}var jt=[],Ge=[],In=1,Ve=null,Dt=3,Xt=!1,Ee=!1,Xe=!1;function tt(ft){for(var Tt=wt(Ge);Tt!==null;){if(Tt.callback===null)Jt(Ge);else if(Tt.startTime<=ft)Jt(Ge),Tt.sortIndex=Tt.expirationTime,lt(jt,Tt);else break;Tt=wt(Ge)}}function ht(ft){if(Xe=!1,tt(ft),!Ee)if(wt(jt)!==null)Ee=!0,p(Yt);else{var Tt=wt(Ge);Tt!==null&&v(ht,Tt.startTime-ft)}}function Yt(ft,Tt){Ee=!1,Xe&&(Xe=!1,w()),Xt=!0;var Bt=Dt;try{for(tt(Tt),Ve=wt(jt);Ve!==null&&(!(Ve.expirationTime>Tt)||ft&&!l.unstable_shouldYield());){var ee=Ve.callback;if(typeof ee=="function"){Ve.callback=null,Dt=Ve.priorityLevel;var te=ee(Ve.expirationTime<=Tt);Tt=l.unstable_now(),typeof te=="function"?Ve.callback=te:Ve===wt(jt)&&Jt(jt),tt(Tt)}else Jt(jt);Ve=wt(jt)}if(Ve!==null)var hi=!0;else{var qr=wt(Ge);qr!==null&&v(ht,qr.startTime-Tt),hi=!1}return hi}finally{Ve=null,Dt=Bt,Xt=!1}}var kt=P;l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(ft){ft.callback=null},l.unstable_continueExecution=function(){Ee||Xt||(Ee=!0,p(Yt))},l.unstable_getCurrentPriorityLevel=function(){return Dt},l.unstable_getFirstCallbackNode=function(){return wt(jt)},l.unstable_next=function(ft){switch(Dt){case 1:case 2:case 3:var Tt=3;break;default:Tt=Dt}var Bt=Dt;Dt=Tt;try{return ft()}finally{Dt=Bt}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=kt,l.unstable_runWithPriority=function(ft,Tt){switch(ft){case 1:case 2:case 3:case 4:case 5:break;default:ft=3}var Bt=Dt;Dt=ft;try{return Tt()}finally{Dt=Bt}},l.unstable_scheduleCallback=function(ft,Tt,Bt){var ee=l.unstable_now();switch(typeof Bt=="object"&&Bt!==null?(Bt=Bt.delay,Bt=typeof Bt=="number"&&0<Bt?ee+Bt:ee):Bt=ee,ft){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Bt+te,ft={id:In++,callback:Tt,priorityLevel:ft,startTime:Bt,expirationTime:te,sortIndex:-1},Bt>ee?(ft.sortIndex=Bt,lt(Ge,ft),wt(jt)===null&&ft===wt(Ge)&&(Xe?w():Xe=!0,v(ht,Bt-ee))):(ft.sortIndex=te,lt(jt,ft),Ee||Xt||(Ee=!0,p(Yt))),ft},l.unstable_wrapCallback=function(ft){var Tt=Dt;return function(){var Bt=Dt;Dt=Tt;try{return ft.apply(this,arguments)}finally{Dt=Bt}}}}),un=wo(function(h){h.exports=QT});function vt(h){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+h,p=1;p<arguments.length;p++)l+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+h+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Zt)throw Error(vt(227));var L2=new Set,Rf={};function au(h,l){Hh(h,l),Hh(h+"Capture",l)}function Hh(h,l){for(Rf[h]=l,h=0;h<l.length;h++)L2.add(l[h])}var Ds=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),qT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j2=Object.prototype.hasOwnProperty,D2={},E2={};function bT(h){return j2.call(E2,h)?!0:j2.call(D2,h)?!1:qT.test(h)?E2[h]=!0:(D2[h]=!0,!1)}function tC(h,l,p,v){if(p!==null&&p.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return v?!1:p!==null?!p.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function eC(h,l,p,v){if(l===null||typeof l=="undefined"||tC(h,l,p,v))return!0;if(v)return!1;if(p!==null)switch(p.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function _n(h,l,p,v,w,P,L){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=v,this.attributeNamespace=w,this.mustUseProperty=p,this.propertyName=h,this.type=l,this.sanitizeURL=P,this.removeEmptyString=L}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){mn[h]=new _n(h,0,!1,h,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var l=h[0];mn[l]=new _n(l,1,!1,h[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(h){mn[h]=new _n(h,2,!1,h.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){mn[h]=new _n(h,2,!1,h,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){mn[h]=new _n(h,3,!1,h.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(h){mn[h]=new _n(h,3,!0,h,null,!1,!1)});["capture","download"].forEach(function(h){mn[h]=new _n(h,4,!1,h,null,!1,!1)});["cols","rows","size","span"].forEach(function(h){mn[h]=new _n(h,6,!1,h,null,!1,!1)});["rowSpan","start"].forEach(function(h){mn[h]=new _n(h,5,!1,h.toLowerCase(),null,!1,!1)});var Qm=/[\-:]([a-z])/g;function qm(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var l=h.replace(Qm,qm);mn[l]=new _n(l,1,!1,h,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var l=h.replace(Qm,qm);mn[l]=new _n(l,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(h){var l=h.replace(Qm,qm);mn[l]=new _n(l,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(h){mn[h]=new _n(h,1,!1,h.toLowerCase(),null,!1,!1)});mn.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(h){mn[h]=new _n(h,1,!1,h.toLowerCase(),null,!0,!0)});function bm(h,l,p,v){var w=mn.hasOwnProperty(l)?mn[l]:null,P=w!==null?w.type===0:v?!1:!(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N");P||(eC(l,p,w,v)&&(p=null),v||w===null?bT(l)&&(p===null?h.removeAttribute(l):h.setAttribute(l,""+p)):w.mustUseProperty?h[w.propertyName]=p===null?w.type===3?!1:"":p:(l=w.attributeName,v=w.attributeNamespace,p===null?h.removeAttribute(l):(w=w.type,p=w===3||w===4&&p===!0?"":""+p,v?h.setAttributeNS(v,l,p):h.setAttribute(l,p))))}var fu=Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ff=60103,cu=60106,qs=60107,tv=60108,Vf=60114,ev=60109,iv=60110,$d=60112,zf=60113,Zd=60120,Jd=60115,nv=60116,rv=60121,ov=60128,O2=60129,sv=60130,lv=60131;typeof Symbol=="function"&&Symbol.for&&(Zi=Symbol.for,Ff=Zi("react.element"),cu=Zi("react.portal"),qs=Zi("react.fragment"),tv=Zi("react.strict_mode"),Vf=Zi("react.profiler"),ev=Zi("react.provider"),iv=Zi("react.context"),$d=Zi("react.forward_ref"),zf=Zi("react.suspense"),Zd=Zi("react.suspense_list"),Jd=Zi("react.memo"),nv=Zi("react.lazy"),rv=Zi("react.block"),Zi("react.scope"),ov=Zi("react.opaque.id"),O2=Zi("react.debug_trace_mode"),sv=Zi("react.offscreen"),lv=Zi("react.legacy_hidden"));var Zi,A2=typeof Symbol=="function"&&Symbol.iterator;function Uf(h){return h===null||typeof h!="object"?null:(h=A2&&h[A2]||h["@@iterator"],typeof h=="function"?h:null)}var uv;function Yf(h){if(uv===void 0)try{throw Error()}catch(p){var l=p.stack.trim().match(/\n( *(at )?)/);uv=l&&l[1]||""}return`
`+uv+h}var hv=!1;function Qd(h,l){if(!h||hv)return"";hv=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(B){var v=B}Reflect.construct(h,[],l)}else{try{l.call()}catch(B){v=B}h.call(l.prototype)}else{try{throw Error()}catch(B){v=B}h()}}catch(B){if(B&&v&&typeof B.stack=="string"){for(var w=B.stack.split(`
`),P=v.stack.split(`
`),L=w.length-1,A=P.length-1;1<=L&&0<=A&&w[L]!==P[A];)A--;for(;1<=L&&0<=A;L--,A--)if(w[L]!==P[A]){if(L!==1||A!==1)do if(L--,A--,0>A||w[L]!==P[A])return`
`+w[L].replace(" at new "," at ");while(1<=L&&0<=A);break}}}finally{hv=!1,Error.prepareStackTrace=p}return(h=h?h.displayName||h.name:"")?Yf(h):""}function iC(h){switch(h.tag){case 5:return Yf(h.type);case 16:return Yf("Lazy");case 13:return Yf("Suspense");case 19:return Yf("SuspenseList");case 0:case 2:case 15:return h=Qd(h.type,!1),h;case 11:return h=Qd(h.type.render,!1),h;case 22:return h=Qd(h.type._render,!1),h;case 1:return h=Qd(h.type,!0),h;default:return""}}function Wh(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case qs:return"Fragment";case cu:return"Portal";case Vf:return"Profiler";case tv:return"StrictMode";case zf:return"Suspense";case Zd:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case iv:return(h.displayName||"Context")+".Consumer";case ev:return(h._context.displayName||"Context")+".Provider";case $d:var l=h.render;return l=l.displayName||l.name||"",h.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case Jd:return Wh(h.type);case rv:return Wh(h._render);case nv:l=h._payload,h=h._init;try{return Wh(h(l))}catch(p){}}return null}function bs(h){switch(typeof h){case"boolean":case"number":case"object":case"string":case"undefined":return h;default:return""}}function I2(h){var l=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function nC(h){var l=I2(h)?"checked":"value",p=Object.getOwnPropertyDescriptor(h.constructor.prototype,l),v=""+h[l];if(!h.hasOwnProperty(l)&&typeof p!="undefined"&&typeof p.get=="function"&&typeof p.set=="function"){var w=p.get,P=p.set;return Object.defineProperty(h,l,{configurable:!0,get:function(){return w.call(this)},set:function(L){v=""+L,P.call(this,L)}}),Object.defineProperty(h,l,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(L){v=""+L},stopTracking:function(){h._valueTracker=null,delete h[l]}}}}function qd(h){h._valueTracker||(h._valueTracker=nC(h))}function B2(h){if(!h)return!1;var l=h._valueTracker;if(!l)return!0;var p=l.getValue(),v="";return h&&(v=I2(h)?h.checked?"true":"false":h.value),h=v,h!==p?(l.setValue(h),!0):!1}function bd(h){if(h=h||(typeof document!="undefined"?document:void 0),typeof h=="undefined")return null;try{return h.activeElement||h.body}catch(l){return h.body}}function av(h,l){var p=l.checked;return Fe({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??h._wrapperState.initialChecked})}function R2(h,l){var p=l.defaultValue==null?"":l.defaultValue,v=l.checked!=null?l.checked:l.defaultChecked;p=bs(l.value!=null?l.value:p),h._wrapperState={initialChecked:v,initialValue:p,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function F2(h,l){l=l.checked,l!=null&&bm(h,"checked",l,!1)}function cv(h,l){F2(h,l);var p=bs(l.value),v=l.type;if(p!=null)v==="number"?(p===0&&h.value===""||h.value!=p)&&(h.value=""+p):h.value!==""+p&&(h.value=""+p);else if(v==="submit"||v==="reset"){h.removeAttribute("value");return}l.hasOwnProperty("value")?fv(h,l.type,p):l.hasOwnProperty("defaultValue")&&fv(h,l.type,bs(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(h.defaultChecked=!!l.defaultChecked)}function V2(h,l,p){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var v=l.type;if(!(v!=="submit"&&v!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+h._wrapperState.initialValue,p||l===h.value||(h.value=l),h.defaultValue=l}p=h.name,p!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,p!==""&&(h.name=p)}function fv(h,l,p){(l!=="number"||bd(h.ownerDocument)!==h)&&(p==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+p&&(h.defaultValue=""+p))}function rC(h){var l="";return Zt.Children.forEach(h,function(p){p!=null&&(l+=p)}),l}function pv(h,l){return h=Fe({children:void 0},l),(l=rC(l.children))&&(h.children=l),h}function Kh(h,l,p,v){if(h=h.options,l){l={};for(var w=0;w<p.length;w++)l["$"+p[w]]=!0;for(p=0;p<h.length;p++)w=l.hasOwnProperty("$"+h[p].value),h[p].selected!==w&&(h[p].selected=w),w&&v&&(h[p].defaultSelected=!0)}else{for(p=""+bs(p),l=null,w=0;w<h.length;w++){if(h[w].value===p){h[w].selected=!0,v&&(h[w].defaultSelected=!0);return}l!==null||h[w].disabled||(l=h[w])}l!==null&&(l.selected=!0)}}function dv(h,l){if(l.dangerouslySetInnerHTML!=null)throw Error(vt(91));return Fe({},l,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function z2(h,l){var p=l.value;if(p==null){if(p=l.children,l=l.defaultValue,p!=null){if(l!=null)throw Error(vt(92));if(Array.isArray(p)){if(!(1>=p.length))throw Error(vt(93));p=p[0]}l=p}l==null&&(l=""),p=l}h._wrapperState={initialValue:bs(p)}}function U2(h,l){var p=bs(l.value),v=bs(l.defaultValue);p!=null&&(p=""+p,p!==h.value&&(h.value=p),l.defaultValue==null&&h.defaultValue!==p&&(h.defaultValue=p)),v!=null&&(h.defaultValue=""+v)}function Y2(h){var l=h.textContent;l===h._wrapperState.initialValue&&l!==""&&l!==null&&(h.value=l)}var gv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function G2(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yv(h,l){return h==null||h==="http://www.w3.org/1999/xhtml"?G2(l):h==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var tg,X2=function(h){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(l,p,v,w){MSApp.execUnsafeLocalFunction(function(){return h(l,p,v,w)})}:h}(function(h,l){if(h.namespaceURI!==gv.svg||"innerHTML"in h)h.innerHTML=l;else{for(tg=tg||document.createElement("div"),tg.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=tg.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;l.firstChild;)h.appendChild(l.firstChild)}});function Gf(h,l){if(l){var p=h.firstChild;if(p&&p===h.lastChild&&p.nodeType===3){p.nodeValue=l;return}}h.textContent=l}var Xf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oC=["Webkit","ms","Moz","O"];Object.keys(Xf).forEach(function(h){oC.forEach(function(l){l=l+h.charAt(0).toUpperCase()+h.substring(1),Xf[l]=Xf[h]})});function H2(h,l,p){return l==null||typeof l=="boolean"||l===""?"":p||typeof l!="number"||l===0||Xf.hasOwnProperty(h)&&Xf[h]?(""+l).trim():l+"px"}function W2(h,l){h=h.style;for(var p in l)if(l.hasOwnProperty(p)){var v=p.indexOf("--")===0,w=H2(p,l[p],v);p==="float"&&(p="cssFloat"),v?h.setProperty(p,w):h[p]=w}}var sC=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mv(h,l){if(l){if(sC[h]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(vt(137,h));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(vt(60));if(!(typeof l.dangerouslySetInnerHTML=="object"&&"__html"in l.dangerouslySetInnerHTML))throw Error(vt(61))}if(l.style!=null&&typeof l.style!="object")throw Error(vt(62))}}function vv(h,l){if(h.indexOf("-")===-1)return typeof l.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xv(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var wv=null,_h=null,$h=null;function K2(h){if(h=Hf(h)){if(typeof wv!="function")throw Error(vt(280));var l=h.stateNode;l&&(l=eg(l),wv(h.stateNode,h.type,l))}}function _2(h){_h?$h?$h.push(h):$h=[h]:_h=h}function $2(){if(_h){var h=_h,l=$h;if($h=_h=null,K2(h),l)for(h=0;h<l.length;h++)K2(l[h])}}function Mv(h,l){return h(l)}function Z2(h,l,p,v,w){return h(l,p,v,w)}function Sv(){}var J2=Mv,pu=!1,kv=!1;function Pv(){(_h!==null||$h!==null)&&(Sv(),$2())}function lC(h,l,p){if(kv)return h(l,p);kv=!0;try{return J2(h,l,p)}finally{kv=!1,Pv()}}function Wf(h,l){var p=h.stateNode;if(p===null)return null;var v=eg(p);if(v===null)return null;p=v[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(h=h.type,v=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!v;break t;default:h=!1}if(h)return null;if(p&&typeof p!="function")throw Error(vt(231,l,typeof p));return p}var Nv=!1;if(Ds)try{Zh={},Object.defineProperty(Zh,"passive",{get:function(){Nv=!0}}),window.addEventListener("test",Zh,Zh),window.removeEventListener("test",Zh,Zh)}catch(h){Nv=!1}var Zh;function uC(h,l,p,v,w,P,L,A,B){var Q=Array.prototype.slice.call(arguments,3);try{l.apply(p,Q)}catch(xt){this.onError(xt)}}var Kf=!1,ig=null,ng=!1,Tv=null,hC={onError:function(h){Kf=!0,ig=h}};function aC(h,l,p,v,w,P,L,A,B){Kf=!1,ig=null,uC.apply(hC,arguments)}function fC(h,l,p,v,w,P,L,A,B){if(aC.apply(this,arguments),Kf){if(Kf){var Q=ig;Kf=!1,ig=null}else throw Error(vt(198));ng||(ng=!0,Tv=Q)}}function du(h){var l=h,p=h;if(h.alternate)for(;l.return;)l=l.return;else{h=l;do l=h,(l.flags&1026)!=0&&(p=l.return),h=l.return;while(h)}return l.tag===3?p:null}function Q2(h){if(h.tag===13){var l=h.memoizedState;if(l===null&&(h=h.alternate,h!==null&&(l=h.memoizedState)),l!==null)return l.dehydrated}return null}function q2(h){if(du(h)!==h)throw Error(vt(188))}function cC(h){var l=h.alternate;if(!l){if(l=du(h),l===null)throw Error(vt(188));return l!==h?null:h}for(var p=h,v=l;;){var w=p.return;if(w===null)break;var P=w.alternate;if(P===null){if(v=w.return,v!==null){p=v;continue}break}if(w.child===P.child){for(P=w.child;P;){if(P===p)return q2(w),h;if(P===v)return q2(w),l;P=P.sibling}throw Error(vt(188))}if(p.return!==v.return)p=w,v=P;else{for(var L=!1,A=w.child;A;){if(A===p){L=!0,p=w,v=P;break}if(A===v){L=!0,v=w,p=P;break}A=A.sibling}if(!L){for(A=P.child;A;){if(A===p){L=!0,p=P,v=w;break}if(A===v){L=!0,v=P,p=w;break}A=A.sibling}if(!L)throw Error(vt(189))}}if(p.alternate!==v)throw Error(vt(190))}if(p.tag!==3)throw Error(vt(188));return p.stateNode.current===p?h:l}function b2(h){if(h=cC(h),!h)return null;for(var l=h;;){if(l.tag===5||l.tag===6)return l;if(l.child)l.child.return=l,l=l.child;else{if(l===h)break;for(;!l.sibling;){if(!l.return||l.return===h)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}}return null}function tk(h,l){for(var p=h.alternate;l!==null;){if(l===h||l===p)return!0;l=l.return}return!1}var ek,Cv,ik,nk,Lv=!1,qo=[],tl=null,el=null,il=null,_f=new Map,$f=new Map,Zf=[],rk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jv(h,l,p,v,w){return{blockedOn:h,domEventName:l,eventSystemFlags:p|16,nativeEvent:w,targetContainers:[v]}}function ok(h,l){switch(h){case"focusin":case"focusout":tl=null;break;case"dragenter":case"dragleave":el=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":_f.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":$f.delete(l.pointerId)}}function Jf(h,l,p,v,w,P){return h===null||h.nativeEvent!==P?(h=jv(l,p,v,w,P),l!==null&&(l=Hf(l),l!==null&&Cv(l)),h):(h.eventSystemFlags|=v,l=h.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),h)}function pC(h,l,p,v,w){switch(l){case"focusin":return tl=Jf(tl,h,l,p,v,w),!0;case"dragenter":return el=Jf(el,h,l,p,v,w),!0;case"mouseover":return il=Jf(il,h,l,p,v,w),!0;case"pointerover":var P=w.pointerId;return _f.set(P,Jf(_f.get(P)||null,h,l,p,v,w)),!0;case"gotpointercapture":return P=w.pointerId,$f.set(P,Jf($f.get(P)||null,h,l,p,v,w)),!0}return!1}function dC(h){var l=gu(h.target);if(l!==null){var p=du(l);if(p!==null){if(l=p.tag,l===13){if(l=Q2(p),l!==null){h.blockedOn=l,nk(h.lanePriority,function(){un.unstable_runWithPriority(h.priority,function(){ik(p)})});return}}else if(l===3&&p.stateNode.hydrate){h.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}h.blockedOn=null}function rg(h){if(h.blockedOn!==null)return!1;for(var l=h.targetContainers;0<l.length;){var p=Dv(h.domEventName,h.eventSystemFlags,l[0],h.nativeEvent);if(p!==null)return l=Hf(p),l!==null&&Cv(l),h.blockedOn=p,!1;l.shift()}return!0}function sk(h,l,p){rg(h)&&p.delete(l)}function gC(){for(Lv=!1;0<qo.length;){var h=qo[0];if(h.blockedOn!==null){h=Hf(h.blockedOn),h!==null&&ek(h);break}for(var l=h.targetContainers;0<l.length;){var p=Dv(h.domEventName,h.eventSystemFlags,l[0],h.nativeEvent);if(p!==null){h.blockedOn=p;break}l.shift()}h.blockedOn===null&&qo.shift()}tl!==null&&rg(tl)&&(tl=null),el!==null&&rg(el)&&(el=null),il!==null&&rg(il)&&(il=null),_f.forEach(sk),$f.forEach(sk)}function Qf(h,l){h.blockedOn===l&&(h.blockedOn=null,Lv||(Lv=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,gC)))}function lk(h){function l(w){return Qf(w,h)}if(0<qo.length){Qf(qo[0],h);for(var p=1;p<qo.length;p++){var v=qo[p];v.blockedOn===h&&(v.blockedOn=null)}}for(tl!==null&&Qf(tl,h),el!==null&&Qf(el,h),il!==null&&Qf(il,h),_f.forEach(l),$f.forEach(l),p=0;p<Zf.length;p++)v=Zf[p],v.blockedOn===h&&(v.blockedOn=null);for(;0<Zf.length&&(p=Zf[0],p.blockedOn===null);)dC(p),p.blockedOn===null&&Zf.shift()}function og(h,l){var p={};return p[h.toLowerCase()]=l.toLowerCase(),p["Webkit"+h]="webkit"+l,p["Moz"+h]="moz"+l,p}var Jh={animationend:og("Animation","AnimationEnd"),animationiteration:og("Animation","AnimationIteration"),animationstart:og("Animation","AnimationStart"),transitionend:og("Transition","TransitionEnd")},Ev={},uk={};Ds&&(uk=document.createElement("div").style,"AnimationEvent"in window||(delete Jh.animationend.animation,delete Jh.animationiteration.animation,delete Jh.animationstart.animation),"TransitionEvent"in window||delete Jh.transitionend.transition);function sg(h){if(Ev[h])return Ev[h];if(!Jh[h])return h;var l=Jh[h],p;for(p in l)if(l.hasOwnProperty(p)&&p in uk)return Ev[h]=l[p];return h}var hk=sg("animationend"),ak=sg("animationiteration"),fk=sg("animationstart"),ck=sg("transitionend"),pk=new Map,Ov=new Map,yC=["abort","abort",hk,"animationEnd",ak,"animationIteration",fk,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ck,"transitionEnd","waiting","waiting"];function Av(h,l){for(var p=0;p<h.length;p+=2){var v=h[p],w=h[p+1];w="on"+(w[0].toUpperCase()+w.slice(1)),Ov.set(v,l),pk.set(v,w),au(w,[v])}}var mC=un.unstable_now;mC();var Ke=8;function Qh(h){if((1&h)!=0)return Ke=15,1;if((2&h)!=0)return Ke=14,2;if((4&h)!=0)return Ke=13,4;var l=24&h;return l!==0?(Ke=12,l):(h&32)!=0?(Ke=11,32):(l=192&h,l!==0?(Ke=10,l):(h&256)!=0?(Ke=9,256):(l=3584&h,l!==0?(Ke=8,l):(h&4096)!=0?(Ke=7,4096):(l=4186112&h,l!==0?(Ke=6,l):(l=62914560&h,l!==0?(Ke=5,l):h&67108864?(Ke=4,67108864):(h&134217728)!=0?(Ke=3,134217728):(l=805306368&h,l!==0?(Ke=2,l):(1073741824&h)!=0?(Ke=1,1073741824):(Ke=8,h))))))}function vC(h){switch(h){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function xC(h){switch(h){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(vt(358,h))}}function qf(h,l){var p=h.pendingLanes;if(p===0)return Ke=0;var v=0,w=0,P=h.expiredLanes,L=h.suspendedLanes,A=h.pingedLanes;if(P!==0)v=P,w=Ke=15;else if(P=p&134217727,P!==0){var B=P&~L;B!==0?(v=Qh(B),w=Ke):(A&=P,A!==0&&(v=Qh(A),w=Ke))}else P=p&~L,P!==0?(v=Qh(P),w=Ke):A!==0&&(v=Qh(A),w=Ke);if(v===0)return 0;if(v=31-nl(v),v=p&((0>v?0:1<<v)<<1)-1,l!==0&&l!==v&&(l&L)==0){if(Qh(l),w<=Ke)return l;Ke=w}if(l=h.entangledLanes,l!==0)for(h=h.entanglements,l&=v;0<l;)p=31-nl(l),w=1<<p,v|=h[p],l&=~w;return v}function dk(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function lg(h,l){switch(h){case 15:return 1;case 14:return 2;case 12:return h=qh(24&~l),h===0?lg(10,l):h;case 10:return h=qh(192&~l),h===0?lg(8,l):h;case 8:return h=qh(3584&~l),h===0&&(h=qh(4186112&~l),h===0&&(h=512)),h;case 2:return l=qh(805306368&~l),l===0&&(l=268435456),l}throw Error(vt(358,h))}function qh(h){return h&-h}function Iv(h){for(var l=[],p=0;31>p;p++)l.push(h);return l}function ug(h,l,p){h.pendingLanes|=l;var v=l-1;h.suspendedLanes&=v,h.pingedLanes&=v,h=h.eventTimes,l=31-nl(l),h[l]=p}var nl=Math.clz32?Math.clz32:wC,MC=Math.log,SC=Math.LN2;function wC(h){return h===0?32:31-(MC(h)/SC|0)|0}var kC=un.unstable_UserBlockingPriority,PC=un.unstable_runWithPriority,hg=!0;function NC(h,l,p,v){pu||Sv();var w=Bv,P=pu;pu=!0;try{Z2(w,h,l,p,v)}finally{(pu=P)||Pv()}}function TC(h,l,p,v){PC(kC,Bv.bind(null,h,l,p,v))}function Bv(h,l,p,v){if(hg){var w;if((w=(l&4)==0)&&0<qo.length&&-1<rk.indexOf(h))h=jv(null,h,l,p,v),qo.push(h);else{var P=Dv(h,l,p,v);if(P===null)w&&ok(h,v);else{if(w){if(-1<rk.indexOf(h)){h=jv(P,h,l,p,v),qo.push(h);return}if(pC(P,h,l,p,v))return;ok(h,v)}gk(h,l,v,null,p)}}}}function Dv(h,l,p,v){var w=xv(v);if(w=gu(w),w!==null){var P=du(w);if(P===null)w=null;else{var L=P.tag;if(L===13){if(w=Q2(P),w!==null)return w;w=null}else if(L===3){if(P.stateNode.hydrate)return P.tag===3?P.stateNode.containerInfo:null;w=null}else P!==w&&(w=null)}}return gk(h,l,v,w,p),null}var rl=null,Rv=null,ag=null;function yk(){if(ag)return ag;var h,l=Rv,p=l.length,v,w="value"in rl?rl.value:rl.textContent,P=w.length;for(h=0;h<p&&l[h]===w[h];h++);var L=p-h;for(v=1;v<=L&&l[p-v]===w[P-v];v++);return ag=w.slice(h,1<v?1-v:void 0)}function fg(h){var l=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&l===13&&(h=13)):h=l,h===10&&(h=13),32<=h||h===13?h:0}function cg(){return!0}function mk(){return!1}function Pr(h){function l(p,v,w,P,L){this._reactName=p,this._targetInst=w,this.type=v,this.nativeEvent=P,this.target=L,this.currentTarget=null;for(var A in h)h.hasOwnProperty(A)&&(p=h[A],this[A]=p?p(P):P[A]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?cg:mk,this.isPropagationStopped=mk,this}return Fe(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=cg)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=cg)},persist:function(){},isPersistent:cg}),l}var bh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fv=Pr(bh),bf=Fe({},bh,{view:0,detail:0}),CC=Pr(bf),Vv,zv,tc,pg=Fe({},bf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uv,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==tc&&(tc&&h.type==="mousemove"?(Vv=h.screenX-tc.screenX,zv=h.screenY-tc.screenY):zv=Vv=0,tc=h),Vv)},movementY:function(h){return"movementY"in h?h.movementY:zv}}),vk=Pr(pg),LC=Fe({},pg,{dataTransfer:0}),jC=Pr(LC),DC=Fe({},bf,{relatedTarget:0}),Yv=Pr(DC),EC=Fe({},bh,{animationName:0,elapsedTime:0,pseudoElement:0}),OC=Pr(EC),AC=Fe({},bh,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),IC=Pr(AC),BC=Fe({},bh,{data:0}),xk=Pr(BC),RC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zC(h){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(h):(h=VC[h])?!!l[h]:!1}function Uv(){return zC}var UC=Fe({},bf,{key:function(h){if(h.key){var l=RC[h.key]||h.key;if(l!=="Unidentified")return l}return h.type==="keypress"?(h=fg(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?FC[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uv,charCode:function(h){return h.type==="keypress"?fg(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?fg(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),YC=Pr(UC),GC=Fe({},pg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wk=Pr(GC),XC=Fe({},bf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uv}),HC=Pr(XC),WC=Fe({},bh,{propertyName:0,elapsedTime:0,pseudoElement:0}),KC=Pr(WC),_C=Fe({},pg,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),$C=Pr(_C),ZC=[9,13,27,32],Gv=Ds&&"CompositionEvent"in window,ec=null;Ds&&"documentMode"in document&&(ec=document.documentMode);var JC=Ds&&"TextEvent"in window&&!ec,Mk=Ds&&(!Gv||ec&&8<ec&&11>=ec),Sk=String.fromCharCode(32),kk=!1;function Pk(h,l){switch(h){case"keyup":return ZC.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nk(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var ta=!1;function QC(h,l){switch(h){case"compositionend":return Nk(l);case"keypress":return l.which!==32?null:(kk=!0,Sk);case"textInput":return h=l.data,h===Sk&&kk?null:h;default:return null}}function qC(h,l){if(ta)return h==="compositionend"||!Gv&&Pk(h,l)?(h=yk(),ag=Rv=rl=null,ta=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Mk&&l.locale!=="ko"?null:l.data;default:return null}}var bC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tk(h){var l=h&&h.nodeName&&h.nodeName.toLowerCase();return l==="input"?!!bC[h.type]:l==="textarea"}function Ck(h,l,p,v){_2(v),l=dg(l,"onChange"),0<l.length&&(p=new Fv("onChange","change",null,p,v),h.push({event:p,listeners:l}))}var ic=null,nc=null;function tL(h){Lk(h,0)}function gg(h){var l=ea(h);if(B2(l))return h}function eL(h,l){if(h==="change")return l}var jk=!1;Ds&&(Ds?(mg="oninput"in document,mg||(Xv=document.createElement("div"),Xv.setAttribute("oninput","return;"),mg=typeof Xv.oninput=="function"),yg=mg):yg=!1,jk=yg&&(!document.documentMode||9<document.documentMode));var yg,mg,Xv;function Ek(){ic&&(ic.detachEvent("onpropertychange",Dk),nc=ic=null)}function Dk(h){if(h.propertyName==="value"&&gg(nc)){var l=[];if(Ck(l,nc,h,xv(h)),h=tL,pu)h(l);else{pu=!0;try{Mv(h,l)}finally{pu=!1,Pv()}}}}function iL(h,l,p){h==="focusin"?(Ek(),ic=l,nc=p,ic.attachEvent("onpropertychange",Dk)):h==="focusout"&&Ek()}function nL(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return gg(nc)}function rL(h,l){if(h==="click")return gg(l)}function oL(h,l){if(h==="input"||h==="change")return gg(l)}function sL(h,l){return h===l&&(h!==0||1/h==1/l)||h!==h&&l!==l}var _r=typeof Object.is=="function"?Object.is:sL,lL=Object.prototype.hasOwnProperty;function rc(h,l){if(_r(h,l))return!0;if(typeof h!="object"||h===null||typeof l!="object"||l===null)return!1;var p=Object.keys(h),v=Object.keys(l);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++)if(!lL.call(l,p[v])||!_r(h[p[v]],l[p[v]]))return!1;return!0}function Ok(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Ak(h,l){var p=Ok(h);h=0;for(var v;p;){if(p.nodeType===3){if(v=h+p.textContent.length,h<=l&&v>=l)return{node:p,offset:l-h};h=v}t:{for(;p;){if(p.nextSibling){p=p.nextSibling;break t}p=p.parentNode}p=void 0}p=Ok(p)}}function Ik(h,l){return h&&l?h===l?!0:h&&h.nodeType===3?!1:l&&l.nodeType===3?Ik(h,l.parentNode):"contains"in h?h.contains(l):h.compareDocumentPosition?!!(h.compareDocumentPosition(l)&16):!1:!1}function Bk(){for(var h=window,l=bd();l instanceof h.HTMLIFrameElement;){try{var p=typeof l.contentWindow.location.href=="string"}catch(v){p=!1}if(p)h=l.contentWindow;else break;l=bd(h.document)}return l}function Hv(h){var l=h&&h.nodeName&&h.nodeName.toLowerCase();return l&&(l==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||l==="textarea"||h.contentEditable==="true")}var uL=Ds&&"documentMode"in document&&11>=document.documentMode,ia=null,Wv=null,oc=null,Kv=!1;function Rk(h,l,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Kv||ia==null||ia!==bd(v)||(v=ia,"selectionStart"in v&&Hv(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),oc&&rc(oc,v)||(oc=v,v=dg(Wv,"onSelect"),0<v.length&&(l=new Fv("onSelect","select",null,l,p),h.push({event:l,listeners:v}),l.target=ia)))}Av("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Av("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Av(yC,2);for(var Fk="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_v=0;_v<Fk.length;_v++)Ov.set(Fk[_v],0);Hh("onMouseEnter",["mouseout","mouseover"]);Hh("onMouseLeave",["mouseout","mouseover"]);Hh("onPointerEnter",["pointerout","pointerover"]);Hh("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vk=new Set("cancel close invalid load scroll toggle".split(" ").concat(sc));function zk(h,l,p){var v=h.type||"unknown-event";h.currentTarget=p,fC(v,l,void 0,h),h.currentTarget=null}function Lk(h,l){l=(l&4)!=0;for(var p=0;p<h.length;p++){var v=h[p],w=v.event;v=v.listeners;t:{var P=void 0;if(l)for(var L=v.length-1;0<=L;L--){var A=v[L],B=A.instance,Q=A.currentTarget;if(A=A.listener,B!==P&&w.isPropagationStopped())break t;zk(w,A,Q),P=B}else for(L=0;L<v.length;L++){if(A=v[L],B=A.instance,Q=A.currentTarget,A=A.listener,B!==P&&w.isPropagationStopped())break t;zk(w,A,Q),P=B}}}if(ng)throw h=Tv,ng=!1,Tv=null,h}function Je(h,l){var p=Yk(l),v=h+"__bubble";p.has(v)||(Uk(l,h,2,!1),p.add(v))}var Gk="_reactListening"+Math.random().toString(36).slice(2);function Hk(h){h[Gk]||(h[Gk]=!0,L2.forEach(function(l){Vk.has(l)||Xk(l,!1,h,null),Xk(l,!0,h,null)}))}function Xk(h,l,p,v){var w=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,P=p;if(h==="selectionchange"&&p.nodeType!==9&&(P=p.ownerDocument),v!==null&&!l&&Vk.has(h)){if(h!=="scroll")return;w|=2,P=v}var L=Yk(P),A=h+"__"+(l?"capture":"bubble");L.has(A)||(l&&(w|=4),Uk(P,h,w,l),L.add(A))}function Uk(h,l,p,v){var w=Ov.get(l);switch(w===void 0?2:w){case 0:w=NC;break;case 1:w=TC;break;default:w=Bv}p=w.bind(null,l,p,h),w=void 0,!Nv||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),v?w!==void 0?h.addEventListener(l,p,{capture:!0,passive:w}):h.addEventListener(l,p,!0):w!==void 0?h.addEventListener(l,p,{passive:w}):h.addEventListener(l,p,!1)}function gk(h,l,p,v,w){var P=v;if((l&1)==0&&(l&2)==0&&v!==null)t:for(;;){if(v===null)return;var L=v.tag;if(L===3||L===4){var A=v.stateNode.containerInfo;if(A===w||A.nodeType===8&&A.parentNode===w)break;if(L===4)for(L=v.return;L!==null;){var B=L.tag;if((B===3||B===4)&&(B=L.stateNode.containerInfo,B===w||B.nodeType===8&&B.parentNode===w))return;L=L.return}for(;A!==null;){if(L=gu(A),L===null)return;if(B=L.tag,B===5||B===6){v=P=L;continue t}A=A.parentNode}}v=v.return}lC(function(){var Q=P,xt=xv(p),ut=[];t:{var X=pk.get(h);if(X!==void 0){var Et=Fv,Kt=h;switch(h){case"keypress":if(fg(p)===0)break t;case"keydown":case"keyup":Et=YC;break;case"focusin":Kt="focus",Et=Yv;break;case"focusout":Kt="blur",Et=Yv;break;case"beforeblur":case"afterblur":Et=Yv;break;case"click":if(p.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=vk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=jC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=HC;break;case hk:case ak:case fk:Et=OC;break;case ck:Et=KC;break;case"scroll":Et=CC;break;case"wheel":Et=$C;break;case"copy":case"cut":case"paste":Et=IC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=wk}var Y=(l&4)!=0,_=!Y&&h==="scroll",U=Y?X!==null?X+"Capture":null:X;Y=[];for(var H=Q,it;H!==null;){it=H;var E=it.stateNode;if(it.tag===5&&E!==null&&(it=E,U!==null&&(E=Wf(H,U),E!=null&&Y.push(lc(H,E,it)))),_)break;H=H.return}0<Y.length&&(X=new Et(X,Kt,null,p,xt),ut.push({event:X,listeners:Y}))}}if((l&7)==0){t:{if(X=h==="mouseover"||h==="pointerover",Et=h==="mouseout"||h==="pointerout",X&&(l&16)==0&&(Kt=p.relatedTarget||p.fromElement)&&(gu(Kt)||Kt[ra]))break t;if((Et||X)&&(X=xt.window===xt?xt:(X=xt.ownerDocument)?X.defaultView||X.parentWindow:window,Et?(Kt=p.relatedTarget||p.toElement,Et=Q,Kt=Kt?gu(Kt):null,Kt!==null&&(_=du(Kt),Kt!==_||Kt.tag!==5&&Kt.tag!==6)&&(Kt=null)):(Et=null,Kt=Q),Et!==Kt)){if(Y=vk,E="onMouseLeave",U="onMouseEnter",H="mouse",(h==="pointerout"||h==="pointerover")&&(Y=wk,E="onPointerLeave",U="onPointerEnter",H="pointer"),_=Et==null?X:ea(Et),it=Kt==null?X:ea(Kt),X=new Y(E,H+"leave",Et,p,xt),X.target=_,X.relatedTarget=it,E=null,gu(xt)===Q&&(Y=new Y(U,H+"enter",Kt,p,xt),Y.target=it,Y.relatedTarget=_,E=Y),_=E,Et&&Kt)e:{for(Y=Et,U=Kt,H=0,it=Y;it;it=na(it))H++;for(it=0,E=U;E;E=na(E))it++;for(;0<H-it;)Y=na(Y),H--;for(;0<it-H;)U=na(U),it--;for(;H--;){if(Y===U||U!==null&&Y===U.alternate)break e;Y=na(Y),U=na(U)}Y=null}else Y=null;Et!==null&&Wk(ut,X,Et,Y,!1),Kt!==null&&_!==null&&Wk(ut,_,Kt,Y,!0)}}t:{if(X=Q?ea(Q):window,Et=X.nodeName&&X.nodeName.toLowerCase(),Et==="select"||Et==="input"&&X.type==="file")var et=eL;else if(Tk(X))if(jk)et=oL;else{et=nL;var lt=iL}else(Et=X.nodeName)&&Et.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(et=rL);if(et&&(et=et(h,Q))){Ck(ut,et,p,xt);break t}lt&&lt(h,X,Q),h==="focusout"&&(lt=X._wrapperState)&&lt.controlled&&X.type==="number"&&fv(X,"number",X.value)}switch(lt=Q?ea(Q):window,h){case"focusin":(Tk(lt)||lt.contentEditable==="true")&&(ia=lt,Wv=Q,oc=null);break;case"focusout":oc=Wv=ia=null;break;case"mousedown":Kv=!0;break;case"contextmenu":case"mouseup":case"dragend":Kv=!1,Rk(ut,p,xt);break;case"selectionchange":if(uL)break;case"keydown":case"keyup":Rk(ut,p,xt)}var wt;if(Gv)t:{switch(h){case"compositionstart":var Jt="onCompositionStart";break t;case"compositionend":Jt="onCompositionEnd";break t;case"compositionupdate":Jt="onCompositionUpdate";break t}Jt=void 0}else ta?Pk(h,p)&&(Jt="onCompositionEnd"):h==="keydown"&&p.keyCode===229&&(Jt="onCompositionStart");Jt&&(Mk&&p.locale!=="ko"&&(ta||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&ta&&(wt=yk()):(rl=xt,Rv="value"in rl?rl.value:rl.textContent,ta=!0)),lt=dg(Q,Jt),0<lt.length&&(Jt=new xk(Jt,h,null,p,xt),ut.push({event:Jt,listeners:lt}),wt?Jt.data=wt:(wt=Nk(p),wt!==null&&(Jt.data=wt)))),(wt=JC?QC(h,p):qC(h,p))&&(Q=dg(Q,"onBeforeInput"),0<Q.length&&(xt=new xk("onBeforeInput","beforeinput",null,p,xt),ut.push({event:xt,listeners:Q}),xt.data=wt))}Lk(ut,l)})}function lc(h,l,p){return{instance:h,listener:l,currentTarget:p}}function dg(h,l){for(var p=l+"Capture",v=[];h!==null;){var w=h,P=w.stateNode;w.tag===5&&P!==null&&(w=P,P=Wf(h,p),P!=null&&v.unshift(lc(h,P,w)),P=Wf(h,l),P!=null&&v.push(lc(h,P,w))),h=h.return}return v}function na(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function Wk(h,l,p,v,w){for(var P=l._reactName,L=[];p!==null&&p!==v;){var A=p,B=A.alternate,Q=A.stateNode;if(B!==null&&B===v)break;A.tag===5&&Q!==null&&(A=Q,w?(B=Wf(p,P),B!=null&&L.unshift(lc(p,B,A))):w||(B=Wf(p,P),B!=null&&L.push(lc(p,B,A)))),p=p.return}L.length!==0&&h.push({event:l,listeners:L})}function vg(){}var $v=null,Zv=null;function Kk(h,l){switch(h){case"button":case"input":case"select":case"textarea":return!!l.autoFocus}return!1}function Jv(h,l){return h==="textarea"||h==="option"||h==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var _k=typeof setTimeout=="function"?setTimeout:void 0,hL=typeof clearTimeout=="function"?clearTimeout:void 0;function Qv(h){h.nodeType===1?h.textContent="":h.nodeType===9&&(h=h.body,h!=null&&(h.textContent=""))}function oa(h){for(;h!=null;h=h.nextSibling){var l=h.nodeType;if(l===1||l===3)break}return h}function $k(h){h=h.previousSibling;for(var l=0;h;){if(h.nodeType===8){var p=h.data;if(p==="$"||p==="$!"||p==="$?"){if(l===0)return h;l--}else p==="/$"&&l++}h=h.previousSibling}return null}var qv=0;function aL(h){return{$$typeof:ov,toString:h,valueOf:h}}var xg=Math.random().toString(36).slice(2),ol="__reactFiber$"+xg,wg="__reactProps$"+xg,ra="__reactContainer$"+xg,Zk="__reactEvents$"+xg;function gu(h){var l=h[ol];if(l)return l;for(var p=h.parentNode;p;){if(l=p[ra]||p[ol]){if(p=l.alternate,l.child!==null||p!==null&&p.child!==null)for(h=$k(h);h!==null;){if(p=h[ol])return p;h=$k(h)}return l}h=p,p=h.parentNode}return null}function Hf(h){return h=h[ol]||h[ra],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function ea(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(vt(33))}function eg(h){return h[wg]||null}function Yk(h){var l=h[Zk];return l===void 0&&(l=h[Zk]=new Set),l}var bv=[],sa=-1;function sl(h){return{current:h}}function Qe(h){0>sa||(h.current=bv[sa],bv[sa]=null,sa--)}function Pi(h,l){sa++,bv[sa]=h.current,h.current=l}var ll={},Dn=sl(ll),cr=sl(!1),yu=ll;function la(h,l){var p=h.type.contextTypes;if(!p)return ll;var v=h.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===l)return v.__reactInternalMemoizedMaskedChildContext;var w={},P;for(P in p)w[P]=l[P];return v&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=l,h.__reactInternalMemoizedMaskedChildContext=w),w}function pr(h){return h=h.childContextTypes,h!=null}function Mg(){Qe(cr),Qe(Dn)}function Jk(h,l,p){if(Dn.current!==ll)throw Error(vt(168));Pi(Dn,l),Pi(cr,p)}function Qk(h,l,p){var v=h.stateNode;if(h=l.childContextTypes,typeof v.getChildContext!="function")return p;v=v.getChildContext();for(var w in v)if(!(w in h))throw Error(vt(108,Wh(l)||"Unknown",w));return Fe({},p,v)}function Sg(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||ll,yu=Dn.current,Pi(Dn,h),Pi(cr,cr.current),!0}function qk(h,l,p){var v=h.stateNode;if(!v)throw Error(vt(169));p?(h=Qk(h,l,yu),v.__reactInternalMemoizedMergedChildContext=h,Qe(cr),Qe(Dn),Pi(Dn,h)):Qe(cr),Pi(cr,p)}var t1=null,mu=null,fL=un.unstable_runWithPriority,e1=un.unstable_scheduleCallback,i1=un.unstable_cancelCallback,cL=un.unstable_shouldYield,bk=un.unstable_requestPaint,n1=un.unstable_now,pL=un.unstable_getCurrentPriorityLevel,kg=un.unstable_ImmediatePriority,tP=un.unstable_UserBlockingPriority,eP=un.unstable_NormalPriority,iP=un.unstable_LowPriority,nP=un.unstable_IdlePriority,r1={},dL=bk!==void 0?bk:function(){},Es=null,Pg=null,o1=!1,rP=n1(),En=1e4>rP?n1:function(){return n1()-rP};function ua(){switch(pL()){case kg:return 99;case tP:return 98;case eP:return 97;case iP:return 96;case nP:return 95;default:throw Error(vt(332))}}function oP(h){switch(h){case 99:return kg;case 98:return tP;case 97:return eP;case 96:return iP;case 95:return nP;default:throw Error(vt(332))}}function vu(h,l){return h=oP(h),fL(h,l)}function uc(h,l,p){return h=oP(h),e1(h,l,p)}function bo(){if(Pg!==null){var h=Pg;Pg=null,i1(h)}sP()}function sP(){if(!o1&&Es!==null){o1=!0;var h=0;try{var l=Es;vu(99,function(){for(;h<l.length;h++){var p=l[h];do p=p(!0);while(p!==null)}}),Es=null}catch(p){throw Es!==null&&(Es=Es.slice(h+1)),e1(kg,bo),p}finally{o1=!1}}}var gL=fu.ReactCurrentBatchConfig;function Mo(h,l){if(h&&h.defaultProps){l=Fe({},l),h=h.defaultProps;for(var p in h)l[p]===void 0&&(l[p]=h[p]);return l}return l}var Ng=sl(null),Tg=null,ha=null,Cg=null;function s1(){Cg=ha=Tg=null}function l1(h){var l=Ng.current;Qe(Ng),h.type._context._currentValue=l}function lP(h,l){for(;h!==null;){var p=h.alternate;if((h.childLanes&l)===l){if(p===null||(p.childLanes&l)===l)break;p.childLanes|=l}else h.childLanes|=l,p!==null&&(p.childLanes|=l);h=h.return}}function aa(h,l){Tg=h,Cg=ha=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&l)!=0&&(So=!0),h.firstContext=null)}function $r(h,l){if(Cg!==h&&l!==!1&&l!==0)if((typeof l!="number"||l===1073741823)&&(Cg=h,l=1073741823),l={context:h,observedBits:l,next:null},ha===null){if(Tg===null)throw Error(vt(308));ha=l,Tg.dependencies={lanes:0,firstContext:l,responders:null}}else ha=ha.next=l;return h._currentValue}var ul=!1;function u1(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function uP(h,l){h=h.updateQueue,l.updateQueue===h&&(l.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function hl(h,l){return{eventTime:h,lane:l,tag:0,payload:null,callback:null,next:null}}function al(h,l){if(h=h.updateQueue,h!==null){h=h.shared;var p=h.pending;p===null?l.next=l:(l.next=p.next,p.next=l),h.pending=l}}function hP(h,l){var p=h.updateQueue,v=h.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var w=null,P=null;if(p=p.firstBaseUpdate,p!==null){do{var L={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};P===null?w=P=L:P=P.next=L,p=p.next}while(p!==null);P===null?w=P=l:P=P.next=l}else w=P=l;p={baseState:v.baseState,firstBaseUpdate:w,lastBaseUpdate:P,shared:v.shared,effects:v.effects},h.updateQueue=p;return}h=p.lastBaseUpdate,h===null?p.firstBaseUpdate=l:h.next=l,p.lastBaseUpdate=l}function ac(h,l,p,v){var w=h.updateQueue;ul=!1;var P=w.firstBaseUpdate,L=w.lastBaseUpdate,A=w.shared.pending;if(A!==null){w.shared.pending=null;var B=A,Q=B.next;B.next=null,L===null?P=Q:L.next=Q,L=B;var xt=h.alternate;if(xt!==null){xt=xt.updateQueue;var ut=xt.lastBaseUpdate;ut!==L&&(ut===null?xt.firstBaseUpdate=Q:ut.next=Q,xt.lastBaseUpdate=B)}}if(P!==null){ut=w.baseState,L=0,xt=Q=B=null;do{A=P.lane;var X=P.eventTime;if((v&A)===A){xt!==null&&(xt=xt.next={eventTime:X,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var Et=h,Kt=P;switch(A=l,X=p,Kt.tag){case 1:if(Et=Kt.payload,typeof Et=="function"){ut=Et.call(X,ut,A);break t}ut=Et;break t;case 3:Et.flags=Et.flags&-4097|64;case 0:if(Et=Kt.payload,A=typeof Et=="function"?Et.call(X,ut,A):Et,A==null)break t;ut=Fe({},ut,A);break t;case 2:ul=!0}}P.callback!==null&&(h.flags|=32,A=w.effects,A===null?w.effects=[P]:A.push(P))}else X={eventTime:X,lane:A,tag:P.tag,payload:P.payload,callback:P.callback,next:null},xt===null?(Q=xt=X,B=ut):xt=xt.next=X,L|=A;if(P=P.next,P===null){if(A=w.shared.pending,A===null)break;P=A.next,A.next=null,w.lastBaseUpdate=A,w.shared.pending=null}}while(1);xt===null&&(B=ut),w.baseState=B,w.firstBaseUpdate=Q,w.lastBaseUpdate=xt,hc|=L,h.lanes=L,h.memoizedState=ut}}function aP(h,l,p){if(h=l.effects,l.effects=null,h!==null)for(l=0;l<h.length;l++){var v=h[l],w=v.callback;if(w!==null){if(v.callback=null,v=p,typeof w!="function")throw Error(vt(191,w));w.call(v)}}}var fP=new Zt.Component().refs;function Lg(h,l,p,v){l=h.memoizedState,p=p(v,l),p=p==null?l:Fe({},l,p),h.memoizedState=p,h.lanes===0&&(h.updateQueue.baseState=p)}var jg={isMounted:function(h){return(h=h._reactInternals)?du(h)===h:!1},enqueueSetState:function(h,l,p){h=h._reactInternals;var v=Nr(),w=fl(h),P=hl(v,w);P.payload=l,p!=null&&(P.callback=p),al(h,P),cl(h,w,v)},enqueueReplaceState:function(h,l,p){h=h._reactInternals;var v=Nr(),w=fl(h),P=hl(v,w);P.tag=1,P.payload=l,p!=null&&(P.callback=p),al(h,P),cl(h,w,v)},enqueueForceUpdate:function(h,l){h=h._reactInternals;var p=Nr(),v=fl(h),w=hl(p,v);w.tag=2,l!=null&&(w.callback=l),al(h,w),cl(h,v,p)}};function cP(h,l,p,v,w,P,L){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(v,P,L):l.prototype&&l.prototype.isPureReactComponent?!rc(p,v)||!rc(w,P):!0}function pP(h,l,p){var v=!1,w=ll,P=l.contextType;return typeof P=="object"&&P!==null?P=$r(P):(w=pr(l)?yu:Dn.current,v=l.contextTypes,P=(v=v!=null)?la(h,w):ll),l=new l(p,P),h.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=jg,h.stateNode=l,l._reactInternals=h,v&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=w,h.__reactInternalMemoizedMaskedChildContext=P),l}function dP(h,l,p,v){h=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,v),l.state!==h&&jg.enqueueReplaceState(l,l.state,null)}function h1(h,l,p,v){var w=h.stateNode;w.props=p,w.state=h.memoizedState,w.refs=fP,u1(h);var P=l.contextType;typeof P=="object"&&P!==null?w.context=$r(P):(P=pr(l)?yu:Dn.current,w.context=la(h,P)),ac(h,p,w,v),w.state=h.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(Lg(h,l,P,p),w.state=h.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(l=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),l!==w.state&&jg.enqueueReplaceState(w,w.state,null),ac(h,p,w,v),w.state=h.memoizedState),typeof w.componentDidMount=="function"&&(h.flags|=4)}var Dg=Array.isArray;function fc(h,l,p){if(h=p.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(vt(309));var v=p.stateNode}if(!v)throw Error(vt(147,h));var w=""+h;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===w?l.ref:(l=function(P){var L=v.refs;L===fP&&(L=v.refs={}),P===null?delete L[w]:L[w]=P},l._stringRef=w,l)}if(typeof h!="string")throw Error(vt(284));if(!p._owner)throw Error(vt(290,h))}return h}function Eg(h,l){if(h.type!=="textarea")throw Error(vt(31,Object.prototype.toString.call(l)==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":l))}function gP(h){function l(_,U){if(h){var H=_.lastEffect;H!==null?(H.nextEffect=U,_.lastEffect=U):_.firstEffect=_.lastEffect=U,U.nextEffect=null,U.flags=8}}function p(_,U){if(!h)return null;for(;U!==null;)l(_,U),U=U.sibling;return null}function v(_,U){for(_=new Map;U!==null;)U.key!==null?_.set(U.key,U):_.set(U.index,U),U=U.sibling;return _}function w(_,U){return _=pl(_,U),_.index=0,_.sibling=null,_}function P(_,U,H){return _.index=H,h?(H=_.alternate,H!==null?(H=H.index,H<U?(_.flags=2,U):H):(_.flags=2,U)):U}function L(_){return h&&_.alternate===null&&(_.flags=2),_}function A(_,U,H,it){return U===null||U.tag!==6?(U=a1(H,_.mode,it),U.return=_,U):(U=w(U,H),U.return=_,U)}function B(_,U,H,it){return U!==null&&U.elementType===H.type?(it=w(U,H.props),it.ref=fc(_,U,H),it.return=_,it):(it=Og(H.type,H.key,H.props,null,_.mode,it),it.ref=fc(_,U,H),it.return=_,it)}function Q(_,U,H,it){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=f1(H,_.mode,it),U.return=_,U):(U=w(U,H.children||[]),U.return=_,U)}function xt(_,U,H,it,E){return U===null||U.tag!==7?(U=fa(H,_.mode,it,E),U.return=_,U):(U=w(U,H),U.return=_,U)}function ut(_,U,H){if(typeof U=="string"||typeof U=="number")return U=a1(""+U,_.mode,H),U.return=_,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Ff:return H=Og(U.type,U.key,U.props,null,_.mode,H),H.ref=fc(_,null,U),H.return=_,H;case cu:return U=f1(U,_.mode,H),U.return=_,U}if(Dg(U)||Uf(U))return U=fa(U,_.mode,H,null),U.return=_,U;Eg(_,U)}return null}function X(_,U,H,it){var E=U!==null?U.key:null;if(typeof H=="string"||typeof H=="number")return E!==null?null:A(_,U,""+H,it);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Ff:return H.key===E?H.type===qs?xt(_,U,H.props.children,it,E):B(_,U,H,it):null;case cu:return H.key===E?Q(_,U,H,it):null}if(Dg(H)||Uf(H))return E!==null?null:xt(_,U,H,it,null);Eg(_,H)}return null}function Et(_,U,H,it,E){if(typeof it=="string"||typeof it=="number")return _=_.get(H)||null,A(U,_,""+it,E);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case Ff:return _=_.get(it.key===null?H:it.key)||null,it.type===qs?xt(U,_,it.props.children,E,it.key):B(U,_,it,E);case cu:return _=_.get(it.key===null?H:it.key)||null,Q(U,_,it,E)}if(Dg(it)||Uf(it))return _=_.get(H)||null,xt(U,_,it,E,null);Eg(U,it)}return null}function Kt(_,U,H,it){for(var E=null,et=null,lt=U,wt=U=0,Jt=null;lt!==null&&wt<H.length;wt++){lt.index>wt?(Jt=lt,lt=null):Jt=lt.sibling;var at=X(_,lt,H[wt],it);if(at===null){lt===null&&(lt=Jt);break}h&&lt&&at.alternate===null&&l(_,lt),U=P(at,U,wt),et===null?E=at:et.sibling=at,et=at,lt=Jt}if(wt===H.length)return p(_,lt),E;if(lt===null){for(;wt<H.length;wt++)lt=ut(_,H[wt],it),lt!==null&&(U=P(lt,U,wt),et===null?E=lt:et.sibling=lt,et=lt);return E}for(lt=v(_,lt);wt<H.length;wt++)Jt=Et(lt,_,wt,H[wt],it),Jt!==null&&(h&&Jt.alternate!==null&&lt.delete(Jt.key===null?wt:Jt.key),U=P(Jt,U,wt),et===null?E=Jt:et.sibling=Jt,et=Jt);return h&&lt.forEach(function(jt){return l(_,jt)}),E}function Y(_,U,H,it){var E=Uf(H);if(typeof E!="function")throw Error(vt(150));if(H=E.call(H),H==null)throw Error(vt(151));for(var et=E=null,lt=U,wt=U=0,Jt=null,at=H.next();lt!==null&&!at.done;wt++,at=H.next()){lt.index>wt?(Jt=lt,lt=null):Jt=lt.sibling;var jt=X(_,lt,at.value,it);if(jt===null){lt===null&&(lt=Jt);break}h&&lt&&jt.alternate===null&&l(_,lt),U=P(jt,U,wt),et===null?E=jt:et.sibling=jt,et=jt,lt=Jt}if(at.done)return p(_,lt),E;if(lt===null){for(;!at.done;wt++,at=H.next())at=ut(_,at.value,it),at!==null&&(U=P(at,U,wt),et===null?E=at:et.sibling=at,et=at);return E}for(lt=v(_,lt);!at.done;wt++,at=H.next())at=Et(lt,_,wt,at.value,it),at!==null&&(h&&at.alternate!==null&&lt.delete(at.key===null?wt:at.key),U=P(at,U,wt),et===null?E=at:et.sibling=at,et=at);return h&&lt.forEach(function(Ge){return l(_,Ge)}),E}return function(_,U,H,it){var E=typeof H=="object"&&H!==null&&H.type===qs&&H.key===null;E&&(H=H.props.children);var et=typeof H=="object"&&H!==null;if(et)switch(H.$$typeof){case Ff:t:{for(et=H.key,E=U;E!==null;){if(E.key===et){switch(E.tag){case 7:if(H.type===qs){p(_,E.sibling),U=w(E,H.props.children),U.return=_,_=U;break t}break;default:if(E.elementType===H.type){p(_,E.sibling),U=w(E,H.props),U.ref=fc(_,E,H),U.return=_,_=U;break t}}p(_,E);break}else l(_,E);E=E.sibling}H.type===qs?(U=fa(H.props.children,_.mode,it,H.key),U.return=_,_=U):(it=Og(H.type,H.key,H.props,null,_.mode,it),it.ref=fc(_,U,H),it.return=_,_=it)}return L(_);case cu:t:{for(E=H.key;U!==null;){if(U.key===E)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){p(_,U.sibling),U=w(U,H.children||[]),U.return=_,_=U;break t}else{p(_,U);break}else l(_,U);U=U.sibling}U=f1(H,_.mode,it),U.return=_,_=U}return L(_)}if(typeof H=="string"||typeof H=="number")return H=""+H,U!==null&&U.tag===6?(p(_,U.sibling),U=w(U,H),U.return=_,_=U):(p(_,U),U=a1(H,_.mode,it),U.return=_,_=U),L(_);if(Dg(H))return Kt(_,U,H,it);if(Uf(H))return Y(_,U,H,it);if(et&&Eg(_,H),typeof H=="undefined"&&!E)switch(_.tag){case 1:case 22:case 0:case 11:case 15:throw Error(vt(152,Wh(_.type)||"Component"))}return p(_,U)}}var Ag=gP(!0),yP=gP(!1),cc={},ts=sl(cc),pc=sl(cc),dc=sl(cc);function xu(h){if(h===cc)throw Error(vt(174));return h}function c1(h,l){switch(Pi(dc,l),Pi(pc,h),Pi(ts,cc),h=l.nodeType,h){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:yv(null,"");break;default:h=h===8?l.parentNode:l,l=h.namespaceURI||null,h=h.tagName,l=yv(l,h)}Qe(ts),Pi(ts,l)}function ca(){Qe(ts),Qe(pc),Qe(dc)}function mP(h){xu(dc.current);var l=xu(ts.current),p=yv(l,h.type);l!==p&&(Pi(pc,h),Pi(ts,p))}function p1(h){pc.current===h&&(Qe(ts),Qe(pc))}var Ni=sl(0);function Ig(h){for(var l=h;l!==null;){if(l.tag===13){var p=l.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&64)!=0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break;for(;l.sibling===null;){if(l.return===null||l.return===h)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Os=null,dl=null,es=!1;function vP(h,l){var p=Zr(5,null,null,0);p.elementType="DELETED",p.type="DELETED",p.stateNode=l,p.return=h,p.flags=8,h.lastEffect!==null?(h.lastEffect.nextEffect=p,h.lastEffect=p):h.firstEffect=h.lastEffect=p}function xP(h,l){switch(h.tag){case 5:var p=h.type;return l=l.nodeType!==1||p.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(h.stateNode=l,!0):!1;case 6:return l=h.pendingProps===""||l.nodeType!==3?null:l,l!==null?(h.stateNode=l,!0):!1;case 13:return!1;default:return!1}}function d1(h){if(es){var l=dl;if(l){var p=l;if(!xP(h,l)){if(l=oa(p.nextSibling),!l||!xP(h,l)){h.flags=h.flags&-1025|2,es=!1,Os=h;return}vP(Os,p)}Os=h,dl=oa(l.firstChild)}else h.flags=h.flags&-1025|2,es=!1,Os=h}}function wP(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Os=h}function Bg(h){if(h!==Os)return!1;if(!es)return wP(h),es=!0,!1;var l=h.type;if(h.tag!==5||l!=="head"&&l!=="body"&&!Jv(l,h.memoizedProps))for(l=dl;l;)vP(h,l),l=oa(l.nextSibling);if(wP(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(vt(317));t:{for(h=h.nextSibling,l=0;h;){if(h.nodeType===8){var p=h.data;if(p==="/$"){if(l===0){dl=oa(h.nextSibling);break t}l--}else p!=="$"&&p!=="$!"&&p!=="$?"||l++}h=h.nextSibling}dl=null}}else dl=Os?oa(h.stateNode.nextSibling):null;return!0}function g1(){dl=Os=null,es=!1}var pa=[];function y1(){for(var h=0;h<pa.length;h++)pa[h]._workInProgressVersionPrimary=null;pa.length=0}var gc=fu.ReactCurrentDispatcher,Jr=fu.ReactCurrentBatchConfig,yc=0,Ii=null,On=null,vn=null,Rg=!1,mc=!1;function dr(){throw Error(vt(321))}function m1(h,l){if(l===null)return!1;for(var p=0;p<l.length&&p<h.length;p++)if(!_r(h[p],l[p]))return!1;return!0}function v1(h,l,p,v,w,P){if(yc=P,Ii=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,gc.current=h===null||h.memoizedState===null?yL:mL,h=p(v,w),mc){P=0;do{if(mc=!1,!(25>P))throw Error(vt(301));P+=1,vn=On=null,l.updateQueue=null,gc.current=vL,h=p(v,w)}while(mc)}if(gc.current=Fg,l=On!==null&&On.next!==null,yc=0,vn=On=Ii=null,Rg=!1,l)throw Error(vt(300));return h}function wu(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Ii.memoizedState=vn=h:vn=vn.next=h,vn}function Mu(){if(On===null){var h=Ii.alternate;h=h!==null?h.memoizedState:null}else h=On.next;var l=vn===null?Ii.memoizedState:vn.next;if(l!==null)vn=l,On=h;else{if(h===null)throw Error(vt(310));On=h,h={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},vn===null?Ii.memoizedState=vn=h:vn=vn.next=h}return vn}function is(h,l){return typeof l=="function"?l(h):l}function vc(h){var l=Mu(),p=l.queue;if(p===null)throw Error(vt(311));p.lastRenderedReducer=h;var v=On,w=v.baseQueue,P=p.pending;if(P!==null){if(w!==null){var L=w.next;w.next=P.next,P.next=L}v.baseQueue=w=P,p.pending=null}if(w!==null){w=w.next,v=v.baseState;var A=L=P=null,B=w;do{var Q=B.lane;if((yc&Q)===Q)A!==null&&(A=A.next={lane:0,action:B.action,eagerReducer:B.eagerReducer,eagerState:B.eagerState,next:null}),v=B.eagerReducer===h?B.eagerState:h(v,B.action);else{var xt={lane:Q,action:B.action,eagerReducer:B.eagerReducer,eagerState:B.eagerState,next:null};A===null?(L=A=xt,P=v):A=A.next=xt,Ii.lanes|=Q,hc|=Q}B=B.next}while(B!==null&&B!==w);A===null?P=v:A.next=L,_r(v,l.memoizedState)||(So=!0),l.memoizedState=v,l.baseState=P,l.baseQueue=A,p.lastRenderedState=v}return[l.memoizedState,p.dispatch]}function xc(h){var l=Mu(),p=l.queue;if(p===null)throw Error(vt(311));p.lastRenderedReducer=h;var v=p.dispatch,w=p.pending,P=l.memoizedState;if(w!==null){p.pending=null;var L=w=w.next;do P=h(P,L.action),L=L.next;while(L!==w);_r(P,l.memoizedState)||(So=!0),l.memoizedState=P,l.baseQueue===null&&(l.baseState=P),p.lastRenderedState=P}return[P,v]}function MP(h,l,p){var v=l._getVersion;v=v(l._source);var w=l._workInProgressVersionPrimary;if(w!==null?h=w===v:(h=h.mutableReadLanes,(h=(yc&h)===h)&&(l._workInProgressVersionPrimary=v,pa.push(l))),h)return p(l._source);throw pa.push(l),Error(vt(350))}function SP(h,l,p,v){var w=$n;if(w===null)throw Error(vt(349));var P=l._getVersion,L=P(l._source),A=gc.current,B=A.useState(function(){return MP(w,l,p)}),Q=B[1],xt=B[0];B=vn;var ut=h.memoizedState,X=ut.refs,Et=X.getSnapshot,Kt=ut.source;ut=ut.subscribe;var Y=Ii;return h.memoizedState={refs:X,source:l,subscribe:v},A.useEffect(function(){X.getSnapshot=p,X.setSnapshot=Q;var _=P(l._source);if(!_r(L,_)){_=p(l._source),_r(xt,_)||(Q(_),_=fl(Y),w.mutableReadLanes|=_&w.pendingLanes),_=w.mutableReadLanes,w.entangledLanes|=_;for(var U=w.entanglements,H=_;0<H;){var it=31-nl(H),E=1<<it;U[it]|=_,H&=~E}}},[p,l,v]),A.useEffect(function(){return v(l._source,function(){var _=X.getSnapshot,U=X.setSnapshot;try{U(_(l._source));var H=fl(Y);w.mutableReadLanes|=H&w.pendingLanes}catch(it){U(function(){throw it})}})},[l,v]),_r(Et,p)&&_r(Kt,l)&&_r(ut,v)||(h={pending:null,dispatch:null,lastRenderedReducer:is,lastRenderedState:xt},h.dispatch=Q=x1.bind(null,Ii,h),B.queue=h,B.baseQueue=null,xt=MP(w,l,p),B.memoizedState=B.baseState=xt),xt}function kP(h,l,p){var v=Mu();return SP(v,h,l,p)}function wc(h){var l=wu();return typeof h=="function"&&(h=h()),l.memoizedState=l.baseState=h,h=l.queue={pending:null,dispatch:null,lastRenderedReducer:is,lastRenderedState:h},h=h.dispatch=x1.bind(null,Ii,h),[l.memoizedState,h]}function Vg(h,l,p,v){return h={tag:h,create:l,destroy:p,deps:v,next:null},l=Ii.updateQueue,l===null?(l={lastEffect:null},Ii.updateQueue=l,l.lastEffect=h.next=h):(p=l.lastEffect,p===null?l.lastEffect=h.next=h:(v=p.next,p.next=h,h.next=v,l.lastEffect=h)),h}function PP(h){var l=wu();return h={current:h},l.memoizedState=h}function zg(){return Mu().memoizedState}function w1(h,l,p,v){var w=wu();Ii.flags|=h,w.memoizedState=Vg(1|l,p,void 0,v===void 0?null:v)}function M1(h,l,p,v){var w=Mu();v=v===void 0?null:v;var P=void 0;if(On!==null){var L=On.memoizedState;if(P=L.destroy,v!==null&&m1(v,L.deps)){Vg(l,p,P,v);return}}Ii.flags|=h,w.memoizedState=Vg(1|l,p,P,v)}function NP(h,l){return w1(516,4,h,l)}function Ug(h,l){return M1(516,4,h,l)}function TP(h,l){return M1(4,2,h,l)}function CP(h,l){if(typeof l=="function")return h=h(),l(h),function(){l(null)};if(l!=null)return h=h(),l.current=h,function(){l.current=null}}function LP(h,l,p){return p=p!=null?p.concat([h]):null,M1(4,2,CP.bind(null,l,h),p)}function S1(){}function jP(h,l){var p=Mu();l=l===void 0?null:l;var v=p.memoizedState;return v!==null&&l!==null&&m1(l,v[1])?v[0]:(p.memoizedState=[h,l],h)}function DP(h,l){var p=Mu();l=l===void 0?null:l;var v=p.memoizedState;return v!==null&&l!==null&&m1(l,v[1])?v[0]:(h=h(),p.memoizedState=[h,l],h)}function xL(h,l){var p=ua();vu(98>p?98:p,function(){h(!0)}),vu(97<p?97:p,function(){var v=Jr.transition;Jr.transition=1;try{h(!1),l()}finally{Jr.transition=v}})}function x1(h,l,p){var v=Nr(),w=fl(h),P={lane:w,action:p,eagerReducer:null,eagerState:null,next:null},L=l.pending;if(L===null?P.next=P:(P.next=L.next,L.next=P),l.pending=P,L=h.alternate,h===Ii||L!==null&&L===Ii)mc=Rg=!0;else{if(h.lanes===0&&(L===null||L.lanes===0)&&(L=l.lastRenderedReducer,L!==null))try{var A=l.lastRenderedState,B=L(A,p);if(P.eagerReducer=L,P.eagerState=B,_r(B,A))return}catch(Q){}finally{}cl(h,w,v)}}var Fg={readContext:$r,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useLayoutEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useMutableSource:dr,useOpaqueIdentifier:dr,unstable_isNewReconciler:!1},yL={readContext:$r,useCallback:function(h,l){return wu().memoizedState=[h,l===void 0?null:l],h},useContext:$r,useEffect:NP,useImperativeHandle:function(h,l,p){return p=p!=null?p.concat([h]):null,w1(4,2,CP.bind(null,l,h),p)},useLayoutEffect:function(h,l){return w1(4,2,h,l)},useMemo:function(h,l){var p=wu();return l=l===void 0?null:l,h=h(),p.memoizedState=[h,l],h},useReducer:function(h,l,p){var v=wu();return l=p!==void 0?p(l):l,v.memoizedState=v.baseState=l,h=v.queue={pending:null,dispatch:null,lastRenderedReducer:h,lastRenderedState:l},h=h.dispatch=x1.bind(null,Ii,h),[v.memoizedState,h]},useRef:PP,useState:wc,useDebugValue:S1,useDeferredValue:function(h){var l=wc(h),p=l[0],v=l[1];return NP(function(){var w=Jr.transition;Jr.transition=1;try{v(h)}finally{Jr.transition=w}},[h]),p},useTransition:function(){var h=wc(!1),l=h[0];return h=xL.bind(null,h[1]),PP(h),[h,l]},useMutableSource:function(h,l,p){var v=wu();return v.memoizedState={refs:{getSnapshot:l,setSnapshot:null},source:h,subscribe:p},SP(v,h,l,p)},useOpaqueIdentifier:function(){if(es){var h=!1,l=aL(function(){throw h||(h=!0,p("r:"+(qv++).toString(36))),Error(vt(355))}),p=wc(l)[1];return(Ii.mode&2)==0&&(Ii.flags|=516,Vg(5,function(){p("r:"+(qv++).toString(36))},void 0,null)),l}return l="r:"+(qv++).toString(36),wc(l),l},unstable_isNewReconciler:!1},mL={readContext:$r,useCallback:jP,useContext:$r,useEffect:Ug,useImperativeHandle:LP,useLayoutEffect:TP,useMemo:DP,useReducer:vc,useRef:zg,useState:function(){return vc(is)},useDebugValue:S1,useDeferredValue:function(h){var l=vc(is),p=l[0],v=l[1];return Ug(function(){var w=Jr.transition;Jr.transition=1;try{v(h)}finally{Jr.transition=w}},[h]),p},useTransition:function(){var h=vc(is)[0];return[zg().current,h]},useMutableSource:kP,useOpaqueIdentifier:function(){return vc(is)[0]},unstable_isNewReconciler:!1},vL={readContext:$r,useCallback:jP,useContext:$r,useEffect:Ug,useImperativeHandle:LP,useLayoutEffect:TP,useMemo:DP,useReducer:xc,useRef:zg,useState:function(){return xc(is)},useDebugValue:S1,useDeferredValue:function(h){var l=xc(is),p=l[0],v=l[1];return Ug(function(){var w=Jr.transition;Jr.transition=1;try{v(h)}finally{Jr.transition=w}},[h]),p},useTransition:function(){var h=xc(is)[0];return[zg().current,h]},useMutableSource:kP,useOpaqueIdentifier:function(){return xc(is)[0]},unstable_isNewReconciler:!1},wL=fu.ReactCurrentOwner,So=!1;function gr(h,l,p,v){l.child=h===null?yP(l,null,p,v):Ag(l,h.child,p,v)}function EP(h,l,p,v,w){p=p.render;var P=l.ref;return aa(l,w),v=v1(h,l,p,v,P,w),h!==null&&!So?(l.updateQueue=h.updateQueue,l.flags&=-517,h.lanes&=~w,As(h,l,w)):(l.flags|=1,gr(h,l,v,w),l.child)}function AP(h,l,p,v,w,P){if(h===null){var L=p.type;return typeof L=="function"&&!k1(L)&&L.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(l.tag=15,l.type=L,OP(h,l,L,v,w,P)):(h=Og(p.type,null,v,l,l.mode,P),h.ref=l.ref,h.return=l,l.child=h)}return L=h.child,(w&P)==0&&(w=L.memoizedProps,p=p.compare,p=p!==null?p:rc,p(w,v)&&h.ref===l.ref)?As(h,l,P):(l.flags|=1,h=pl(L,v),h.ref=l.ref,h.return=l,l.child=h)}function OP(h,l,p,v,w,P){if(h!==null&&rc(h.memoizedProps,v)&&h.ref===l.ref)if(So=!1,(P&w)!=0)(h.flags&16384)!=0&&(So=!0);else return l.lanes=h.lanes,As(h,l,P);return P1(h,l,p,v,P)}function N1(h,l,p){var v=l.pendingProps,w=v.children,P=h!==null?h.memoizedState:null;if(v.mode==="hidden"||v.mode==="unstable-defer-without-hiding")if((l.mode&4)==0)l.memoizedState={baseLanes:0},Yg(l,p);else if((p&1073741824)!=0)l.memoizedState={baseLanes:0},Yg(l,P!==null?P.baseLanes:p);else return h=P!==null?P.baseLanes|p:p,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:h},Yg(l,h),null;else P!==null?(v=P.baseLanes|p,l.memoizedState=null):v=p,Yg(l,v);return gr(h,l,w,p),l.child}function IP(h,l){var p=l.ref;(h===null&&p!==null||h!==null&&h.ref!==p)&&(l.flags|=128)}function P1(h,l,p,v,w){var P=pr(p)?yu:Dn.current;return P=la(l,P),aa(l,w),p=v1(h,l,p,v,P,w),h!==null&&!So?(l.updateQueue=h.updateQueue,l.flags&=-517,h.lanes&=~w,As(h,l,w)):(l.flags|=1,gr(h,l,p,w),l.child)}function BP(h,l,p,v,w){if(pr(p)){var P=!0;Sg(l)}else P=!1;if(aa(l,w),l.stateNode===null)h!==null&&(h.alternate=null,l.alternate=null,l.flags|=2),pP(l,p,v),h1(l,p,v,w),v=!0;else if(h===null){var L=l.stateNode,A=l.memoizedProps;L.props=A;var B=L.context,Q=p.contextType;typeof Q=="object"&&Q!==null?Q=$r(Q):(Q=pr(p)?yu:Dn.current,Q=la(l,Q));var xt=p.getDerivedStateFromProps,ut=typeof xt=="function"||typeof L.getSnapshotBeforeUpdate=="function";ut||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(A!==v||B!==Q)&&dP(l,L,v,Q),ul=!1;var X=l.memoizedState;L.state=X,ac(l,v,L,w),B=l.memoizedState,A!==v||X!==B||cr.current||ul?(typeof xt=="function"&&(Lg(l,p,xt,v),B=l.memoizedState),(A=ul||cP(l,p,A,v,X,B,Q))?(ut||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(l.flags|=4)):(typeof L.componentDidMount=="function"&&(l.flags|=4),l.memoizedProps=v,l.memoizedState=B),L.props=v,L.state=B,L.context=Q,v=A):(typeof L.componentDidMount=="function"&&(l.flags|=4),v=!1)}else{L=l.stateNode,uP(h,l),A=l.memoizedProps,Q=l.type===l.elementType?A:Mo(l.type,A),L.props=Q,ut=l.pendingProps,X=L.context,B=p.contextType,typeof B=="object"&&B!==null?B=$r(B):(B=pr(p)?yu:Dn.current,B=la(l,B));var Et=p.getDerivedStateFromProps;(xt=typeof Et=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(A!==ut||X!==B)&&dP(l,L,v,B),ul=!1,X=l.memoizedState,L.state=X,ac(l,v,L,w);var Kt=l.memoizedState;A!==ut||X!==Kt||cr.current||ul?(typeof Et=="function"&&(Lg(l,p,Et,v),Kt=l.memoizedState),(Q=ul||cP(l,p,Q,v,X,Kt,B))?(xt||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(v,Kt,B),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(v,Kt,B)),typeof L.componentDidUpdate=="function"&&(l.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(l.flags|=256)):(typeof L.componentDidUpdate!="function"||A===h.memoizedProps&&X===h.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||A===h.memoizedProps&&X===h.memoizedState||(l.flags|=256),l.memoizedProps=v,l.memoizedState=Kt),L.props=v,L.state=Kt,L.context=B,v=Q):(typeof L.componentDidUpdate!="function"||A===h.memoizedProps&&X===h.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||A===h.memoizedProps&&X===h.memoizedState||(l.flags|=256),v=!1)}return T1(h,l,p,v,P,w)}function T1(h,l,p,v,w,P){IP(h,l);var L=(l.flags&64)!=0;if(!v&&!L)return w&&qk(l,p,!1),As(h,l,P);v=l.stateNode,wL.current=l;var A=L&&typeof p.getDerivedStateFromError!="function"?null:v.render();return l.flags|=1,h!==null&&L?(l.child=Ag(l,h.child,null,P),l.child=Ag(l,null,A,P)):gr(h,l,A,P),l.memoizedState=v.state,w&&qk(l,p,!0),l.child}function RP(h){var l=h.stateNode;l.pendingContext?Jk(h,l.pendingContext,l.pendingContext!==l.context):l.context&&Jk(h,l.context,!1),c1(h,l.containerInfo)}var Gg={dehydrated:null,retryLane:0};function UP(h,l,p){var v=l.pendingProps,w=Ni.current,P=!1,L;return(L=(l.flags&64)!=0)||(L=h!==null&&h.memoizedState===null?!1:(w&2)!=0),L?(P=!0,l.flags&=-65):h!==null&&h.memoizedState===null||v.fallback===void 0||v.unstable_avoidThisFallback===!0||(w|=1),Pi(Ni,w&1),h===null?(v.fallback!==void 0&&d1(l),h=v.children,w=v.fallback,P?(h=FP(l,h,w,p),l.child.memoizedState={baseLanes:p},l.memoizedState=Gg,h):typeof v.unstable_expectedLoadTime=="number"?(h=FP(l,h,w,p),l.child.memoizedState={baseLanes:p},l.memoizedState=Gg,l.lanes=33554432,h):(p=C1({mode:"visible",children:h},l.mode,p,null),p.return=l,l.child=p)):h.memoizedState!==null?P?(v=zP(h,l,v.children,v.fallback,p),P=l.child,w=h.child.memoizedState,P.memoizedState=w===null?{baseLanes:p}:{baseLanes:w.baseLanes|p},P.childLanes=h.childLanes&~p,l.memoizedState=Gg,v):(p=VP(h,l,v.children,p),l.memoizedState=null,p):P?(v=zP(h,l,v.children,v.fallback,p),P=l.child,w=h.child.memoizedState,P.memoizedState=w===null?{baseLanes:p}:{baseLanes:w.baseLanes|p},P.childLanes=h.childLanes&~p,l.memoizedState=Gg,v):(p=VP(h,l,v.children,p),l.memoizedState=null,p)}function FP(h,l,p,v){var w=h.mode,P=h.child;return l={mode:"hidden",children:l},(w&2)==0&&P!==null?(P.childLanes=0,P.pendingProps=l):P=C1(l,w,0,null),p=fa(p,w,v,null),P.return=h,p.return=h,P.sibling=p,h.child=P,p}function VP(h,l,p,v){var w=h.child;return h=w.sibling,p=pl(w,{mode:"visible",children:p}),(l.mode&2)==0&&(p.lanes=v),p.return=l,p.sibling=null,h!==null&&(h.nextEffect=null,h.flags=8,l.firstEffect=l.lastEffect=h),l.child=p}function zP(h,l,p,v,w){var P=l.mode,L=h.child;h=L.sibling;var A={mode:"hidden",children:p};return(P&2)==0&&l.child!==L?(p=l.child,p.childLanes=0,p.pendingProps=A,L=p.lastEffect,L!==null?(l.firstEffect=p.firstEffect,l.lastEffect=L,L.nextEffect=null):l.firstEffect=l.lastEffect=null):p=pl(L,A),h!==null?v=pl(h,v):(v=fa(v,P,w,null),v.flags|=2),v.return=l,p.return=l,p.sibling=v,l.child=p,v}function YP(h,l){h.lanes|=l;var p=h.alternate;p!==null&&(p.lanes|=l),lP(h.return,l)}function L1(h,l,p,v,w,P){var L=h.memoizedState;L===null?h.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:w,lastEffect:P}:(L.isBackwards=l,L.rendering=null,L.renderingStartTime=0,L.last=v,L.tail=p,L.tailMode=w,L.lastEffect=P)}function GP(h,l,p){var v=l.pendingProps,w=v.revealOrder,P=v.tail;if(gr(h,l,v.children,p),v=Ni.current,(v&2)!=0)v=v&1|2,l.flags|=64;else{if(h!==null&&(h.flags&64)!=0)t:for(h=l.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&YP(h,p);else if(h.tag===19)YP(h,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break t;for(;h.sibling===null;){if(h.return===null||h.return===l)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}v&=1}if(Pi(Ni,v),(l.mode&2)==0)l.memoizedState=null;else switch(w){case"forwards":for(p=l.child,w=null;p!==null;)h=p.alternate,h!==null&&Ig(h)===null&&(w=p),p=p.sibling;p=w,p===null?(w=l.child,l.child=null):(w=p.sibling,p.sibling=null),L1(l,!1,w,p,P,l.lastEffect);break;case"backwards":for(p=null,w=l.child,l.child=null;w!==null;){if(h=w.alternate,h!==null&&Ig(h)===null){l.child=w;break}h=w.sibling,w.sibling=p,p=w,w=h}L1(l,!0,p,null,P,l.lastEffect);break;case"together":L1(l,!1,null,null,void 0,l.lastEffect);break;default:l.memoizedState=null}return l.child}function As(h,l,p){if(h!==null&&(l.dependencies=h.dependencies),hc|=l.lanes,(p&l.childLanes)!=0){if(h!==null&&l.child!==h.child)throw Error(vt(153));if(l.child!==null){for(h=l.child,p=pl(h,h.pendingProps),l.child=p,p.return=l;h.sibling!==null;)h=h.sibling,p=p.sibling=pl(h,h.pendingProps),p.return=l;p.sibling=null}return l.child}return null}var XP,j1,HP,WP;XP=function(h,l){for(var p=l.child;p!==null;){if(p.tag===5||p.tag===6)h.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return}p.sibling.return=p.return,p=p.sibling}};j1=function(){};HP=function(h,l,p,v){var w=h.memoizedProps;if(w!==v){h=l.stateNode,xu(ts.current);var P=null;switch(p){case"input":w=av(h,w),v=av(h,v),P=[];break;case"option":w=pv(h,w),v=pv(h,v),P=[];break;case"select":w=Fe({},w,{value:void 0}),v=Fe({},v,{value:void 0}),P=[];break;case"textarea":w=dv(h,w),v=dv(h,v),P=[];break;default:typeof w.onClick!="function"&&typeof v.onClick=="function"&&(h.onclick=vg)}mv(p,v);var L;p=null;for(Q in w)if(!v.hasOwnProperty(Q)&&w.hasOwnProperty(Q)&&w[Q]!=null)if(Q==="style"){var A=w[Q];for(L in A)A.hasOwnProperty(L)&&(p||(p={}),p[L]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(Rf.hasOwnProperty(Q)?P||(P=[]):(P=P||[]).push(Q,null));for(Q in v){var B=v[Q];if(A=w!=null?w[Q]:void 0,v.hasOwnProperty(Q)&&B!==A&&(B!=null||A!=null))if(Q==="style")if(A){for(L in A)!A.hasOwnProperty(L)||B&&B.hasOwnProperty(L)||(p||(p={}),p[L]="");for(L in B)B.hasOwnProperty(L)&&A[L]!==B[L]&&(p||(p={}),p[L]=B[L])}else p||(P||(P=[]),P.push(Q,p)),p=B;else Q==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,A=A?A.__html:void 0,B!=null&&A!==B&&(P=P||[]).push(Q,B)):Q==="children"?typeof B!="string"&&typeof B!="number"||(P=P||[]).push(Q,""+B):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(Rf.hasOwnProperty(Q)?(B!=null&&Q==="onScroll"&&Je("scroll",h),P||A===B||(P=[])):typeof B=="object"&&B!==null&&B.$$typeof===ov?B.toString():(P=P||[]).push(Q,B))}p&&(P=P||[]).push("style",p);var Q=P;(l.updateQueue=Q)&&(l.flags|=4)}};WP=function(h,l,p,v){p!==v&&(l.flags|=4)};function Mc(h,l){if(!es)switch(h.tailMode){case"hidden":l=h.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?h.tail=null:p.sibling=null;break;case"collapsed":p=h.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?l||h.tail===null?h.tail=null:h.tail.sibling=null:v.sibling=null}}function ML(h,l,p){var v=l.pendingProps;switch(l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pr(l.type)&&Mg(),null;case 3:return ca(),Qe(cr),Qe(Dn),y1(),v=l.stateNode,v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(h===null||h.child===null)&&(Bg(l)?l.flags|=4:v.hydrate||(l.flags|=256)),j1(l),null;case 5:p1(l);var w=xu(dc.current);if(p=l.type,h!==null&&l.stateNode!=null)HP(h,l,p,v,w),h.ref!==l.ref&&(l.flags|=128);else{if(!v){if(l.stateNode===null)throw Error(vt(166));return null}if(h=xu(ts.current),Bg(l)){v=l.stateNode,p=l.type;var P=l.memoizedProps;switch(v[ol]=l,v[wg]=P,p){case"dialog":Je("cancel",v),Je("close",v);break;case"iframe":case"object":case"embed":Je("load",v);break;case"video":case"audio":for(h=0;h<sc.length;h++)Je(sc[h],v);break;case"source":Je("error",v);break;case"img":case"image":case"link":Je("error",v),Je("load",v);break;case"details":Je("toggle",v);break;case"input":R2(v,P),Je("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!P.multiple},Je("invalid",v);break;case"textarea":z2(v,P),Je("invalid",v)}mv(p,P),h=null;for(var L in P)P.hasOwnProperty(L)&&(w=P[L],L==="children"?typeof w=="string"?v.textContent!==w&&(h=["children",w]):typeof w=="number"&&v.textContent!==""+w&&(h=["children",""+w]):Rf.hasOwnProperty(L)&&w!=null&&L==="onScroll"&&Je("scroll",v));switch(p){case"input":qd(v),V2(v,P,!0);break;case"textarea":qd(v),Y2(v);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(v.onclick=vg)}v=h,l.updateQueue=v,v!==null&&(l.flags|=4)}else{switch(L=w.nodeType===9?w:w.ownerDocument,h===gv.html&&(h=G2(p)),h===gv.html?p==="script"?(h=L.createElement("div"),h.innerHTML="<script></script>",h=h.removeChild(h.firstChild)):typeof v.is=="string"?h=L.createElement(p,{is:v.is}):(h=L.createElement(p),p==="select"&&(L=h,v.multiple?L.multiple=!0:v.size&&(L.size=v.size))):h=L.createElementNS(h,p),h[ol]=l,h[wg]=v,XP(h,l,!1,!1),l.stateNode=h,L=vv(p,v),p){case"dialog":Je("cancel",h),Je("close",h),w=v;break;case"iframe":case"object":case"embed":Je("load",h),w=v;break;case"video":case"audio":for(w=0;w<sc.length;w++)Je(sc[w],h);w=v;break;case"source":Je("error",h),w=v;break;case"img":case"image":case"link":Je("error",h),Je("load",h),w=v;break;case"details":Je("toggle",h),w=v;break;case"input":R2(h,v),w=av(h,v),Je("invalid",h);break;case"option":w=pv(h,v);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},w=Fe({},v,{value:void 0}),Je("invalid",h);break;case"textarea":z2(h,v),w=dv(h,v),Je("invalid",h);break;default:w=v}mv(p,w);var A=w;for(P in A)if(A.hasOwnProperty(P)){var B=A[P];P==="style"?W2(h,B):P==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&X2(h,B)):P==="children"?typeof B=="string"?(p!=="textarea"||B!=="")&&Gf(h,B):typeof B=="number"&&Gf(h,""+B):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(Rf.hasOwnProperty(P)?B!=null&&P==="onScroll"&&Je("scroll",h):B!=null&&bm(h,P,B,L))}switch(p){case"input":qd(h),V2(h,v,!1);break;case"textarea":qd(h),Y2(h);break;case"option":v.value!=null&&h.setAttribute("value",""+bs(v.value));break;case"select":h.multiple=!!v.multiple,P=v.value,P!=null?Kh(h,!!v.multiple,P,!1):v.defaultValue!=null&&Kh(h,!!v.multiple,v.defaultValue,!0);break;default:typeof w.onClick=="function"&&(h.onclick=vg)}Kk(p,v)&&(l.flags|=4)}l.ref!==null&&(l.flags|=128)}return null;case 6:if(h&&l.stateNode!=null)WP(h,l,h.memoizedProps,v);else{if(typeof v!="string"&&l.stateNode===null)throw Error(vt(166));p=xu(dc.current),xu(ts.current),Bg(l)?(v=l.stateNode,p=l.memoizedProps,v[ol]=l,v.nodeValue!==p&&(l.flags|=4)):(v=(p.nodeType===9?p:p.ownerDocument).createTextNode(v),v[ol]=l,l.stateNode=v)}return null;case 13:return Qe(Ni),v=l.memoizedState,(l.flags&64)!=0?(l.lanes=p,l):(v=v!==null,p=!1,h===null?l.memoizedProps.fallback!==void 0&&Bg(l):p=h.memoizedState!==null,v&&!p&&(l.mode&2)!=0&&(h===null&&l.memoizedProps.unstable_avoidThisFallback!==!0||(Ni.current&1)!=0?xn===0&&(xn=3):((xn===0||xn===3)&&(xn=4),$n===null||(hc&134217727)==0&&(da&134217727)==0||ga($n,An))),(v||p)&&(l.flags|=4),null);case 4:return ca(),j1(l),h===null&&Hk(l.stateNode.containerInfo),null;case 10:return l1(l),null;case 17:return pr(l.type)&&Mg(),null;case 19:if(Qe(Ni),v=l.memoizedState,v===null)return null;if(P=(l.flags&64)!=0,L=v.rendering,L===null)if(P)Mc(v,!1);else{if(xn!==0||h!==null&&(h.flags&64)!=0)for(h=l.child;h!==null;){if(L=Ig(h),L!==null){for(l.flags|=64,Mc(v,!1),P=L.updateQueue,P!==null&&(l.updateQueue=P,l.flags|=4),v.lastEffect===null&&(l.firstEffect=null),l.lastEffect=v.lastEffect,v=p,p=l.child;p!==null;)P=p,h=v,P.flags&=2,P.nextEffect=null,P.firstEffect=null,P.lastEffect=null,L=P.alternate,L===null?(P.childLanes=0,P.lanes=h,P.child=null,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=L.childLanes,P.lanes=L.lanes,P.child=L.child,P.memoizedProps=L.memoizedProps,P.memoizedState=L.memoizedState,P.updateQueue=L.updateQueue,P.type=L.type,h=L.dependencies,P.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),p=p.sibling;return Pi(Ni,Ni.current&1|2),l.child}h=h.sibling}v.tail!==null&&En()>D1&&(l.flags|=64,P=!0,Mc(v,!1),l.lanes=33554432)}else{if(!P)if(h=Ig(L),h!==null){if(l.flags|=64,P=!0,p=h.updateQueue,p!==null&&(l.updateQueue=p,l.flags|=4),Mc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!L.alternate&&!es)return l=l.lastEffect=v.lastEffect,l!==null&&(l.nextEffect=null),null}else 2*En()-v.renderingStartTime>D1&&p!==1073741824&&(l.flags|=64,P=!0,Mc(v,!1),l.lanes=33554432);v.isBackwards?(L.sibling=l.child,l.child=L):(p=v.last,p!==null?p.sibling=L:l.child=L,v.last=L)}return v.tail!==null?(p=v.tail,v.rendering=p,v.tail=p.sibling,v.lastEffect=l.lastEffect,v.renderingStartTime=En(),p.sibling=null,l=Ni.current,Pi(Ni,P?l&1|2:l&1),p):null;case 23:case 24:return E1(),h!==null&&h.memoizedState!==null!=(l.memoizedState!==null)&&v.mode!=="unstable-defer-without-hiding"&&(l.flags|=4),null}throw Error(vt(156,l.tag))}function SL(h){switch(h.tag){case 1:pr(h.type)&&Mg();var l=h.flags;return l&4096?(h.flags=l&-4097|64,h):null;case 3:if(ca(),Qe(cr),Qe(Dn),y1(),l=h.flags,(l&64)!=0)throw Error(vt(285));return h.flags=l&-4097|64,h;case 5:return p1(h),null;case 13:return Qe(Ni),l=h.flags,l&4096?(h.flags=l&-4097|64,h):null;case 19:return Qe(Ni),null;case 4:return ca(),null;case 10:return l1(h),null;case 23:case 24:return E1(),null;default:return null}}function O1(h,l){try{var p="",v=l;do p+=iC(v),v=v.return;while(v);var w=p}catch(P){w=`
Error generating stack: `+P.message+`
`+P.stack}return{value:h,source:l,stack:w}}function A1(h,l){try{console.error(l.value)}catch(p){setTimeout(function(){throw p})}}var kL=typeof WeakMap=="function"?WeakMap:Map;function KP(h,l,p){p=hl(-1,p),p.tag=3,p.payload={element:null};var v=l.value;return p.callback=function(){Xg||(Xg=!0,I1=v),A1(h,l)},p}function _P(h,l,p){p=hl(-1,p),p.tag=3;var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var w=l.value;p.payload=function(){return A1(h,l),v(w)}}var P=h.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(p.callback=function(){typeof v!="function"&&(ns===null?ns=new Set([this]):ns.add(this),A1(h,l));var L=l.stack;this.componentDidCatch(l.value,{componentStack:L!==null?L:""})}),p}var PL=typeof WeakSet=="function"?WeakSet:Set;function $P(h){var l=h.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(p){gl(h,p)}else l.current=null}function NL(h,l){switch(l.tag){case 0:case 11:case 15:case 22:return;case 1:if(l.flags&256&&h!==null){var p=h.memoizedProps,v=h.memoizedState;h=l.stateNode,l=h.getSnapshotBeforeUpdate(l.elementType===l.type?p:Mo(l.type,p),v),h.__reactInternalSnapshotBeforeUpdate=l}return;case 3:l.flags&256&&Qv(l.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(vt(163))}function CL(h,l,p){switch(p.tag){case 0:case 11:case 15:case 22:if(l=p.updateQueue,l=l!==null?l.lastEffect:null,l!==null){h=l=l.next;do{if((h.tag&3)==3){var v=h.create;h.destroy=v()}h=h.next}while(h!==l)}if(l=p.updateQueue,l=l!==null?l.lastEffect:null,l!==null){h=l=l.next;do{var w=h;v=w.next,w=w.tag,(w&4)!=0&&(w&1)!=0&&(ZP(p,h),TL(p,h)),h=v}while(h!==l)}return;case 1:h=p.stateNode,p.flags&4&&(l===null?h.componentDidMount():(v=p.elementType===p.type?l.memoizedProps:Mo(p.type,l.memoizedProps),h.componentDidUpdate(v,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate))),l=p.updateQueue,l!==null&&aP(p,l,h);return;case 3:if(l=p.updateQueue,l!==null){if(h=null,p.child!==null)switch(p.child.tag){case 5:h=p.child.stateNode;break;case 1:h=p.child.stateNode}aP(p,l,h)}return;case 5:h=p.stateNode,l===null&&p.flags&4&&Kk(p.type,p.memoizedProps)&&h.focus();return;case 6:return;case 4:return;case 12:return;case 13:p.memoizedState===null&&(p=p.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&lk(p))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(vt(163))}function JP(h,l){for(var p=h;;){if(p.tag===5){var v=p.stateNode;if(l)v=v.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{v=p.stateNode;var w=p.memoizedProps.style;w=w!=null&&w.hasOwnProperty("display")?w.display:null,v.style.display=H2("display",w)}}else if(p.tag===6)p.stateNode.nodeValue=l?"":p.memoizedProps;else if((p.tag!==23&&p.tag!==24||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return;p=p.return}p.sibling.return=p.return,p=p.sibling}}function qP(h,l){if(mu&&typeof mu.onCommitFiberUnmount=="function")try{mu.onCommitFiberUnmount(t1,l)}catch(P){}switch(l.tag){case 0:case 11:case 14:case 15:case 22:if(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var p=h=h.next;do{var v=p,w=v.destroy;if(v=v.tag,w!==void 0)if((v&4)!=0)ZP(l,p);else{v=l;try{w()}catch(P){gl(v,P)}}p=p.next}while(p!==h)}break;case 1:if($P(l),h=l.stateNode,typeof h.componentWillUnmount=="function")try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(P){gl(l,P)}break;case 5:$P(l);break;case 4:QP(h,l)}}function bP(h){h.alternate=null,h.child=null,h.dependencies=null,h.firstEffect=null,h.lastEffect=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.return=null,h.updateQueue=null}function tN(h){return h.tag===5||h.tag===3||h.tag===4}function eN(h){t:{for(var l=h.return;l!==null;){if(tN(l))break t;l=l.return}throw Error(vt(160))}var p=l;switch(l=p.stateNode,p.tag){case 5:var v=!1;break;case 3:l=l.containerInfo,v=!0;break;case 4:l=l.containerInfo,v=!0;break;default:throw Error(vt(161))}p.flags&16&&(Gf(l,""),p.flags&=-17);t:e:for(p=h;;){for(;p.sibling===null;){if(p.return===null||tN(p.return)){p=null;break t}p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2)){p=p.stateNode;break t}}v?B1(h,p,l):R1(h,p,l)}function B1(h,l,p){var v=h.tag,w=v===5||v===6;if(w)h=w?h.stateNode:h.stateNode.instance,l?p.nodeType===8?p.parentNode.insertBefore(h,l):p.insertBefore(h,l):(p.nodeType===8?(l=p.parentNode,l.insertBefore(h,p)):(l=p,l.appendChild(h)),p=p._reactRootContainer,p!=null||l.onclick!==null||(l.onclick=vg));else if(v!==4&&(h=h.child,h!==null))for(B1(h,l,p),h=h.sibling;h!==null;)B1(h,l,p),h=h.sibling}function R1(h,l,p){var v=h.tag,w=v===5||v===6;if(w)h=w?h.stateNode:h.stateNode.instance,l?p.insertBefore(h,l):p.appendChild(h);else if(v!==4&&(h=h.child,h!==null))for(R1(h,l,p),h=h.sibling;h!==null;)R1(h,l,p),h=h.sibling}function QP(h,l){for(var p=l,v=!1,w,P;;){if(!v){v=p.return;t:for(;;){if(v===null)throw Error(vt(160));switch(w=v.stateNode,v.tag){case 5:P=!1;break t;case 3:w=w.containerInfo,P=!0;break t;case 4:w=w.containerInfo,P=!0;break t}v=v.return}v=!0}if(p.tag===5||p.tag===6){t:for(var L=h,A=p,B=A;;)if(qP(L,B),B.child!==null&&B.tag!==4)B.child.return=B,B=B.child;else{if(B===A)break t;for(;B.sibling===null;){if(B.return===null||B.return===A)break t;B=B.return}B.sibling.return=B.return,B=B.sibling}P?(L=w,A=p.stateNode,L.nodeType===8?L.parentNode.removeChild(A):L.removeChild(A)):w.removeChild(p.stateNode)}else if(p.tag===4){if(p.child!==null){w=p.stateNode.containerInfo,P=!0,p.child.return=p,p=p.child;continue}}else if(qP(h,p),p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break;for(;p.sibling===null;){if(p.return===null||p.return===l)return;p=p.return,p.tag===4&&(v=!1)}p.sibling.return=p.return,p=p.sibling}}function V1(h,l){switch(l.tag){case 0:case 11:case 14:case 15:case 22:var p=l.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do(v.tag&3)==3&&(h=v.destroy,v.destroy=void 0,h!==void 0&&h()),v=v.next;while(v!==p)}return;case 1:return;case 5:if(p=l.stateNode,p!=null){v=l.memoizedProps;var w=h!==null?h.memoizedProps:v;h=l.type;var P=l.updateQueue;if(l.updateQueue=null,P!==null){for(p[wg]=v,h==="input"&&v.type==="radio"&&v.name!=null&&F2(p,v),vv(h,w),l=vv(h,v),w=0;w<P.length;w+=2){var L=P[w],A=P[w+1];L==="style"?W2(p,A):L==="dangerouslySetInnerHTML"?X2(p,A):L==="children"?Gf(p,A):bm(p,L,A,l)}switch(h){case"input":cv(p,v);break;case"textarea":U2(p,v);break;case"select":h=p._wrapperState.wasMultiple,p._wrapperState.wasMultiple=!!v.multiple,P=v.value,P!=null?Kh(p,!!v.multiple,P,!1):h!==!!v.multiple&&(v.defaultValue!=null?Kh(p,!!v.multiple,v.defaultValue,!0):Kh(p,!!v.multiple,v.multiple?[]:"",!1))}}}return;case 6:if(l.stateNode===null)throw Error(vt(162));l.stateNode.nodeValue=l.memoizedProps;return;case 3:p=l.stateNode,p.hydrate&&(p.hydrate=!1,lk(p.containerInfo));return;case 12:return;case 13:l.memoizedState!==null&&(F1=En(),JP(l.child,!0)),iN(l);return;case 19:iN(l);return;case 17:return;case 23:case 24:JP(l,l.memoizedState!==null);return}throw Error(vt(163))}function iN(h){var l=h.updateQueue;if(l!==null){h.updateQueue=null;var p=h.stateNode;p===null&&(p=h.stateNode=new PL),l.forEach(function(v){var w=LL.bind(null,h,v);p.has(v)||(p.add(v),v.then(w,w))})}}function jL(h,l){return h!==null&&(h=h.memoizedState,h===null||h.dehydrated!==null)?(l=l.memoizedState,l!==null&&l.dehydrated===null):!1}var DL=Math.ceil,Hg=fu.ReactCurrentDispatcher,z1=fu.ReactCurrentOwner,ne=0,$n=null,Ji=null,An=0,Su=0,U1=sl(0),xn=0,Wg=null,ya=0,hc=0,da=0,Y1=0,G1=null,F1=0,D1=Infinity;function ma(){D1=En()+500}var Vt=null,Xg=!1,I1=null,ns=null,yl=!1,Sc=null,kc=90,X1=[],H1=[],Is=null,Pc=0,W1=null,Kg=-1,Bs=0,_g=0,Nc=null,$g=!1;function Nr(){return(ne&48)!=0?En():Kg!==-1?Kg:Kg=En()}function fl(h){if(h=h.mode,(h&2)==0)return 1;if((h&4)==0)return ua()===99?1:2;if(Bs===0&&(Bs=ya),gL.transition!==0){_g!==0&&(_g=G1!==null?G1.pendingLanes:0),h=Bs;var l=4186112&~_g;return l&=-l,l===0&&(h=4186112&~h,l=h&-h,l===0&&(l=8192)),l}return h=ua(),(ne&4)!=0&&h===98?h=lg(12,Bs):(h=vC(h),h=lg(h,Bs)),h}function cl(h,l,p){if(50<Pc)throw Pc=0,W1=null,Error(vt(185));if(h=Zg(h,l),h===null)return null;ug(h,l,p),h===$n&&(da|=l,xn===4&&ga(h,An));var v=ua();l===1?(ne&8)!=0&&(ne&48)==0?K1(h):(Qr(h,p),ne===0&&(ma(),bo())):((ne&4)==0||v!==98&&v!==99||(Is===null?Is=new Set([h]):Is.add(h)),Qr(h,p)),G1=h}function Zg(h,l){h.lanes|=l;var p=h.alternate;for(p!==null&&(p.lanes|=l),p=h,h=h.return;h!==null;)h.childLanes|=l,p=h.alternate,p!==null&&(p.childLanes|=l),p=h,h=h.return;return p.tag===3?p.stateNode:null}function Qr(h,l){for(var p=h.callbackNode,v=h.suspendedLanes,w=h.pingedLanes,P=h.expirationTimes,L=h.pendingLanes;0<L;){var A=31-nl(L),B=1<<A,Q=P[A];if(Q===-1){if((B&v)==0||(B&w)!=0){Q=l,Qh(B);var xt=Ke;P[A]=10<=xt?Q+250:6<=xt?Q+5e3:-1}}else Q<=l&&(h.expiredLanes|=B);L&=~B}if(v=qf(h,h===$n?An:0),l=Ke,v===0)p!==null&&(p!==r1&&i1(p),h.callbackNode=null,h.callbackPriority=0);else{if(p!==null){if(h.callbackPriority===l)return;p!==r1&&i1(p)}l===15?(p=K1.bind(null,h),Es===null?(Es=[p],Pg=e1(kg,sP)):Es.push(p),p=r1):l===14?p=uc(99,K1.bind(null,h)):(p=xC(l),p=uc(p,nN.bind(null,h))),h.callbackPriority=l,h.callbackNode=p}}function nN(h){if(Kg=-1,_g=Bs=0,(ne&48)!=0)throw Error(vt(327));var l=h.callbackNode;if(ml()&&h.callbackNode!==l)return null;var p=qf(h,h===$n?An:0);if(p===0)return null;var v=p,w=ne;ne|=16;var P=oN();($n!==h||An!==v)&&(ma(),va(h,v));do try{EL();break}catch(A){rN(h,A)}while(1);if(s1(),Hg.current=P,ne=w,Ji!==null?v=0:($n=null,An=0,v=xn),(ya&da)!=0)va(h,0);else if(v!==0){if(v===2&&(ne|=64,h.hydrate&&(h.hydrate=!1,Qv(h.containerInfo)),p=dk(h),p!==0&&(v=Tc(h,p))),v===1)throw l=Wg,va(h,0),ga(h,p),Qr(h,En()),l;switch(h.finishedWork=h.current.alternate,h.finishedLanes=p,v){case 0:case 1:throw Error(vt(345));case 2:ku(h);break;case 3:if(ga(h,p),(p&62914560)===p&&(v=F1+500-En(),10<v)){if(qf(h,0)!==0)break;if(w=h.suspendedLanes,(w&p)!==p){Nr(),h.pingedLanes|=h.suspendedLanes&w;break}h.timeoutHandle=_k(ku.bind(null,h),v);break}ku(h);break;case 4:if(ga(h,p),(p&4186112)===p)break;for(v=h.eventTimes,w=-1;0<p;){var L=31-nl(p);P=1<<L,L=v[L],L>w&&(w=L),p&=~P}if(p=w,p=En()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*DL(p/1960))-p,10<p){h.timeoutHandle=_k(ku.bind(null,h),p);break}ku(h);break;case 5:ku(h);break;default:throw Error(vt(329))}}return Qr(h,En()),h.callbackNode===l?nN.bind(null,h):null}function ga(h,l){for(l&=~Y1,l&=~da,h.suspendedLanes|=l,h.pingedLanes&=~l,h=h.expirationTimes;0<l;){var p=31-nl(l),v=1<<p;h[p]=-1,l&=~v}}function K1(h){if((ne&48)!=0)throw Error(vt(327));if(ml(),h===$n&&(h.expiredLanes&An)!=0){var l=An,p=Tc(h,l);(ya&da)!=0&&(l=qf(h,l),p=Tc(h,l))}else l=qf(h,0),p=Tc(h,l);if(h.tag!==0&&p===2&&(ne|=64,h.hydrate&&(h.hydrate=!1,Qv(h.containerInfo)),l=dk(h),l!==0&&(p=Tc(h,l))),p===1)throw p=Wg,va(h,0),ga(h,l),Qr(h,En()),p;return h.finishedWork=h.current.alternate,h.finishedLanes=l,ku(h),Qr(h,En()),null}function OL(){if(Is!==null){var h=Is;Is=null,h.forEach(function(l){l.expiredLanes|=24&l.pendingLanes,Qr(l,En())})}bo()}function sN(h,l){var p=ne;ne|=1;try{return h(l)}finally{ne=p,ne===0&&(ma(),bo())}}function lN(h,l){var p=ne;ne&=-2,ne|=8;try{return h(l)}finally{ne=p,ne===0&&(ma(),bo())}}function Yg(h,l){Pi(U1,Su),Su|=l,ya|=l}function E1(){Su=U1.current,Qe(U1)}function va(h,l){h.finishedWork=null,h.finishedLanes=0;var p=h.timeoutHandle;if(p!==-1&&(h.timeoutHandle=-1,hL(p)),Ji!==null)for(p=Ji.return;p!==null;){var v=p;switch(v.tag){case 1:v=v.type.childContextTypes,v!=null&&Mg();break;case 3:ca(),Qe(cr),Qe(Dn),y1();break;case 5:p1(v);break;case 4:ca();break;case 13:Qe(Ni);break;case 19:Qe(Ni);break;case 10:l1(v);break;case 23:case 24:E1()}p=p.return}$n=h,Ji=pl(h.current,null),An=Su=ya=l,xn=0,Wg=null,Y1=da=hc=0}function rN(h,l){do{var p=Ji;try{if(s1(),gc.current=Fg,Rg){for(var v=Ii.memoizedState;v!==null;){var w=v.queue;w!==null&&(w.pending=null),v=v.next}Rg=!1}if(yc=0,vn=On=Ii=null,mc=!1,z1.current=null,p===null||p.return===null){xn=1,Wg=l,Ji=null;break}t:{var P=h,L=p.return,A=p,B=l;if(l=An,A.flags|=2048,A.firstEffect=A.lastEffect=null,B!==null&&typeof B=="object"&&typeof B.then=="function"){var Q=B;if((A.mode&2)==0){var xt=A.alternate;xt?(A.updateQueue=xt.updateQueue,A.memoizedState=xt.memoizedState,A.lanes=xt.lanes):(A.updateQueue=null,A.memoizedState=null)}var ut=(Ni.current&1)!=0,X=L;do{var Et;if(Et=X.tag===13){var Kt=X.memoizedState;if(Kt!==null)Et=Kt.dehydrated!==null;else{var Y=X.memoizedProps;Et=Y.fallback===void 0?!1:Y.unstable_avoidThisFallback!==!0?!0:!ut}}if(Et){var _=X.updateQueue;if(_===null){var U=new Set;U.add(Q),X.updateQueue=U}else _.add(Q);if((X.mode&2)==0){if(X.flags|=64,A.flags|=16384,A.flags&=-2981,A.tag===1)if(A.alternate===null)A.tag=17;else{var H=hl(-1,1);H.tag=2,al(A,H)}A.lanes|=1;break t}B=void 0,A=l;var it=P.pingCache;if(it===null?(it=P.pingCache=new kL,B=new Set,it.set(Q,B)):(B=it.get(Q),B===void 0&&(B=new Set,it.set(Q,B))),!B.has(A)){B.add(A);var E=AL.bind(null,P,Q,A);Q.then(E,E)}X.flags|=4096,X.lanes=l;break t}X=X.return}while(X!==null);B=Error((Wh(A.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}xn!==5&&(xn=2),B=O1(B,A),X=L;do{switch(X.tag){case 3:P=B,X.flags|=4096,l&=-l,X.lanes|=l;var et=KP(X,P,l);hP(X,et);break t;case 1:P=B;var lt=X.type,wt=X.stateNode;if((X.flags&64)==0&&(typeof lt.getDerivedStateFromError=="function"||wt!==null&&typeof wt.componentDidCatch=="function"&&(ns===null||!ns.has(wt)))){X.flags|=4096,l&=-l,X.lanes|=l;var Jt=_P(X,P,l);hP(X,Jt);break t}}X=X.return}while(X!==null)}uN(p)}catch(at){l=at,Ji===p&&p!==null&&(Ji=p=p.return);continue}break}while(1)}function oN(){var h=Hg.current;return Hg.current=Fg,h===null?Fg:h}function Tc(h,l){var p=ne;ne|=16;var v=oN();$n===h&&An===l||va(h,l);do try{IL();break}catch(w){rN(h,w)}while(1);if(s1(),ne=p,Hg.current=v,Ji!==null)throw Error(vt(261));return $n=null,An=0,xn}function IL(){for(;Ji!==null;)hN(Ji)}function EL(){for(;Ji!==null&&!cL();)hN(Ji)}function hN(h){var l=aN(h.alternate,h,Su);h.memoizedProps=h.pendingProps,l===null?uN(h):Ji=l,z1.current=null}function uN(h){var l=h;do{var p=l.alternate;if(h=l.return,(l.flags&2048)==0){if(p=ML(p,l,Su),p!==null){Ji=p;return}if(p=l,p.tag!==24&&p.tag!==23||p.memoizedState===null||(Su&1073741824)!=0||(p.mode&4)==0){for(var v=0,w=p.child;w!==null;)v|=w.lanes|w.childLanes,w=w.sibling;p.childLanes=v}h!==null&&(h.flags&2048)==0&&(h.firstEffect===null&&(h.firstEffect=l.firstEffect),l.lastEffect!==null&&(h.lastEffect!==null&&(h.lastEffect.nextEffect=l.firstEffect),h.lastEffect=l.lastEffect),1<l.flags&&(h.lastEffect!==null?h.lastEffect.nextEffect=l:h.firstEffect=l,h.lastEffect=l))}else{if(p=SL(l),p!==null){p.flags&=2047,Ji=p;return}h!==null&&(h.firstEffect=h.lastEffect=null,h.flags|=2048)}if(l=l.sibling,l!==null){Ji=l;return}Ji=l=h}while(l!==null);xn===0&&(xn=5)}function ku(h){var l=ua();return vu(99,BL.bind(null,h,l)),null}function BL(h,l){do ml();while(Sc!==null);if((ne&48)!=0)throw Error(vt(327));var p=h.finishedWork;if(p===null)return null;if(h.finishedWork=null,h.finishedLanes=0,p===h.current)throw Error(vt(177));h.callbackNode=null;var v=p.lanes|p.childLanes,w=v,P=h.pendingLanes&~w;h.pendingLanes=w,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=w,h.mutableReadLanes&=w,h.entangledLanes&=w,w=h.entanglements;for(var L=h.eventTimes,A=h.expirationTimes;0<P;){var B=31-nl(P),Q=1<<B;w[B]=0,L[B]=-1,A[B]=-1,P&=~Q}if(Is!==null&&(v&24)==0&&Is.has(h)&&Is.delete(h),h===$n&&(Ji=$n=null,An=0),1<p.flags?p.lastEffect!==null?(p.lastEffect.nextEffect=p,v=p.firstEffect):v=p:v=p.firstEffect,v!==null){if(w=ne,ne|=32,z1.current=null,$v=hg,L=Bk(),Hv(L)){if("selectionStart"in L)A={start:L.selectionStart,end:L.selectionEnd};else t:if(A=(A=L.ownerDocument)&&A.defaultView||window,(Q=A.getSelection&&A.getSelection())&&Q.rangeCount!==0){A=Q.anchorNode,P=Q.anchorOffset,B=Q.focusNode,Q=Q.focusOffset;try{A.nodeType,B.nodeType}catch(at){A=null;break t}var xt=0,ut=-1,X=-1,Et=0,Kt=0,Y=L,_=null;e:for(;;){for(var U;Y!==A||P!==0&&Y.nodeType!==3||(ut=xt+P),Y!==B||Q!==0&&Y.nodeType!==3||(X=xt+Q),Y.nodeType===3&&(xt+=Y.nodeValue.length),(U=Y.firstChild)!==null;)_=Y,Y=U;for(;;){if(Y===L)break e;if(_===A&&++Et===P&&(ut=xt),_===B&&++Kt===Q&&(X=xt),(U=Y.nextSibling)!==null)break;Y=_,_=Y.parentNode}Y=U}A=ut===-1||X===-1?null:{start:ut,end:X}}else A=null;A=A||{start:0,end:0}}else A=null;Zv={focusedElem:L,selectionRange:A},hg=!1,Nc=null,$g=!1,Vt=v;do try{RL()}catch(at){if(Vt===null)throw Error(vt(330));gl(Vt,at),Vt=Vt.nextEffect}while(Vt!==null);Nc=null,Vt=v;do try{for(L=h;Vt!==null;){var H=Vt.flags;if(H&16&&Gf(Vt.stateNode,""),H&128){var it=Vt.alternate;if(it!==null){var E=it.ref;E!==null&&(typeof E=="function"?E(null):E.current=null)}}switch(H&1038){case 2:eN(Vt),Vt.flags&=-3;break;case 6:eN(Vt),Vt.flags&=-3,V1(Vt.alternate,Vt);break;case 1024:Vt.flags&=-1025;break;case 1028:Vt.flags&=-1025,V1(Vt.alternate,Vt);break;case 4:V1(Vt.alternate,Vt);break;case 8:A=Vt,QP(L,A);var et=A.alternate;bP(A),et!==null&&bP(et)}Vt=Vt.nextEffect}}catch(at){if(Vt===null)throw Error(vt(330));gl(Vt,at),Vt=Vt.nextEffect}while(Vt!==null);if(E=Zv,it=Bk(),H=E.focusedElem,L=E.selectionRange,it!==H&&H&&H.ownerDocument&&Ik(H.ownerDocument.documentElement,H)){for(L!==null&&Hv(H)&&(it=L.start,E=L.end,E===void 0&&(E=it),"selectionStart"in H?(H.selectionStart=it,H.selectionEnd=Math.min(E,H.value.length)):(E=(it=H.ownerDocument||document)&&it.defaultView||window,E.getSelection&&(E=E.getSelection(),A=H.textContent.length,et=Math.min(L.start,A),L=L.end===void 0?et:Math.min(L.end,A),!E.extend&&et>L&&(A=L,L=et,et=A),A=Ak(H,et),P=Ak(H,L),A&&P&&(E.rangeCount!==1||E.anchorNode!==A.node||E.anchorOffset!==A.offset||E.focusNode!==P.node||E.focusOffset!==P.offset)&&(it=it.createRange(),it.setStart(A.node,A.offset),E.removeAllRanges(),et>L?(E.addRange(it),E.extend(P.node,P.offset)):(it.setEnd(P.node,P.offset),E.addRange(it)))))),it=[],E=H;E=E.parentNode;)E.nodeType===1&&it.push({element:E,left:E.scrollLeft,top:E.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<it.length;H++)E=it[H],E.element.scrollLeft=E.left,E.element.scrollTop=E.top}hg=!!$v,Zv=$v=null,h.current=p,Vt=v;do try{for(H=h;Vt!==null;){var lt=Vt.flags;if(lt&36&&CL(H,Vt.alternate,Vt),lt&128){it=void 0;var wt=Vt.ref;if(wt!==null){var Jt=Vt.stateNode;switch(Vt.tag){case 5:it=Jt;break;default:it=Jt}typeof wt=="function"?wt(it):wt.current=it}}Vt=Vt.nextEffect}}catch(at){if(Vt===null)throw Error(vt(330));gl(Vt,at),Vt=Vt.nextEffect}while(Vt!==null);Vt=null,dL(),ne=w}else h.current=p;if(yl)yl=!1,Sc=h,kc=l;else for(Vt=v;Vt!==null;)l=Vt.nextEffect,Vt.nextEffect=null,Vt.flags&8&&(lt=Vt,lt.sibling=null,lt.stateNode=null),Vt=l;if(v=h.pendingLanes,v===0&&(ns=null),v===1?h===W1?Pc++:(Pc=0,W1=h):Pc=0,p=p.stateNode,mu&&typeof mu.onCommitFiberRoot=="function")try{mu.onCommitFiberRoot(t1,p,void 0,(p.current.flags&64)==64)}catch(at){}if(Qr(h,En()),Xg)throw Xg=!1,h=I1,I1=null,h;return(ne&8)!=0||bo(),null}function RL(){for(;Vt!==null;){var h=Vt.alternate;$g||Nc===null||((Vt.flags&8)!=0?tk(Vt,Nc)&&($g=!0):Vt.tag===13&&jL(h,Vt)&&tk(Vt,Nc)&&($g=!0));var l=Vt.flags;(l&256)!=0&&NL(h,Vt),(l&512)==0||yl||(yl=!0,uc(97,function(){return ml(),null})),Vt=Vt.nextEffect}}function ml(){if(kc!==90){var h=97<kc?97:kc;return kc=90,vu(h,FL)}return!1}function TL(h,l){X1.push(l,h),yl||(yl=!0,uc(97,function(){return ml(),null}))}function ZP(h,l){H1.push(l,h),yl||(yl=!0,uc(97,function(){return ml(),null}))}function FL(){if(Sc===null)return!1;var h=Sc;if(Sc=null,(ne&48)!=0)throw Error(vt(331));var l=ne;ne|=32;var p=H1;H1=[];for(var v=0;v<p.length;v+=2){var w=p[v],P=p[v+1],L=w.destroy;if(w.destroy=void 0,typeof L=="function")try{L()}catch(B){if(P===null)throw Error(vt(330));gl(P,B)}}for(p=X1,X1=[],v=0;v<p.length;v+=2){w=p[v],P=p[v+1];try{var A=w.create;w.destroy=A()}catch(B){if(P===null)throw Error(vt(330));gl(P,B)}}for(A=h.current.firstEffect;A!==null;)h=A.nextEffect,A.nextEffect=null,A.flags&8&&(A.sibling=null,A.stateNode=null),A=h;return ne=l,bo(),!0}function fN(h,l,p){l=O1(p,l),l=KP(h,l,1),al(h,l),l=Nr(),h=Zg(h,1),h!==null&&(ug(h,1,l),Qr(h,l))}function gl(h,l){if(h.tag===3)fN(h,h,l);else for(var p=h.return;p!==null;){if(p.tag===3){fN(p,h,l);break}else if(p.tag===1){var v=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ns===null||!ns.has(v))){h=O1(l,h);var w=_P(p,h,1);if(al(p,w),w=Nr(),p=Zg(p,1),p!==null)ug(p,1,w),Qr(p,w);else if(typeof v.componentDidCatch=="function"&&(ns===null||!ns.has(v)))try{v.componentDidCatch(l,h)}catch(P){}break}}p=p.return}}function AL(h,l,p){var v=h.pingCache;v!==null&&v.delete(l),l=Nr(),h.pingedLanes|=h.suspendedLanes&p,$n===h&&(An&p)===p&&(xn===4||xn===3&&(An&62914560)===An&&500>En()-F1?va(h,0):Y1|=p),Qr(h,l)}function LL(h,l){var p=h.stateNode;p!==null&&p.delete(l),l=0,l===0&&(l=h.mode,(l&2)==0?l=1:(l&4)==0?l=ua()===99?1:2:(Bs===0&&(Bs=ya),l=qh(62914560&~Bs),l===0&&(l=4194304))),p=Nr(),h=Zg(h,l),h!==null&&(ug(h,l,p),Qr(h,p))}var aN;aN=function(h,l,p){var v=l.lanes;if(h!==null)if(h.memoizedProps!==l.pendingProps||cr.current)So=!0;else if((p&v)!=0)So=(h.flags&16384)!=0;else{switch(So=!1,l.tag){case 3:RP(l),g1();break;case 5:mP(l);break;case 1:pr(l.type)&&Sg(l);break;case 4:c1(l,l.stateNode.containerInfo);break;case 10:v=l.memoizedProps.value;var w=l.type._context;Pi(Ng,w._currentValue),w._currentValue=v;break;case 13:if(l.memoizedState!==null)return(p&l.child.childLanes)!=0?UP(h,l,p):(Pi(Ni,Ni.current&1),l=As(h,l,p),l!==null?l.sibling:null);Pi(Ni,Ni.current&1);break;case 19:if(v=(p&l.childLanes)!=0,(h.flags&64)!=0){if(v)return GP(h,l,p);l.flags|=64}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Pi(Ni,Ni.current),v)break;return null;case 23:case 24:return l.lanes=0,N1(h,l,p)}return As(h,l,p)}else So=!1;switch(l.lanes=0,l.tag){case 2:if(v=l.type,h!==null&&(h.alternate=null,l.alternate=null,l.flags|=2),h=l.pendingProps,w=la(l,Dn.current),aa(l,p),w=v1(null,l,v,h,w,p),l.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0){if(l.tag=1,l.memoizedState=null,l.updateQueue=null,pr(v)){var P=!0;Sg(l)}else P=!1;l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,u1(l);var L=v.getDerivedStateFromProps;typeof L=="function"&&Lg(l,v,L,h),w.updater=jg,l.stateNode=w,w._reactInternals=l,h1(l,v,h,p),l=T1(null,l,v,!0,P,p)}else l.tag=0,gr(null,l,w,p),l=l.child;return l;case 16:w=l.elementType;t:{switch(h!==null&&(h.alternate=null,l.alternate=null,l.flags|=2),h=l.pendingProps,P=w._init,w=P(w._payload),l.type=w,P=l.tag=VL(w),h=Mo(w,h),P){case 0:l=P1(null,l,w,h,p);break t;case 1:l=BP(null,l,w,h,p);break t;case 11:l=EP(null,l,w,h,p);break t;case 14:l=AP(null,l,w,Mo(w.type,h),v,p);break t}throw Error(vt(306,w,""))}return l;case 0:return v=l.type,w=l.pendingProps,w=l.elementType===v?w:Mo(v,w),P1(h,l,v,w,p);case 1:return v=l.type,w=l.pendingProps,w=l.elementType===v?w:Mo(v,w),BP(h,l,v,w,p);case 3:if(RP(l),v=l.updateQueue,h===null||v===null)throw Error(vt(282));if(v=l.pendingProps,w=l.memoizedState,w=w!==null?w.element:null,uP(h,l),ac(l,v,null,p),v=l.memoizedState.element,v===w)g1(),l=As(h,l,p);else{if(w=l.stateNode,(P=w.hydrate)&&(dl=oa(l.stateNode.containerInfo.firstChild),Os=l,P=es=!0),P){if(h=w.mutableSourceEagerHydrationData,h!=null)for(w=0;w<h.length;w+=2)P=h[w],P._workInProgressVersionPrimary=h[w+1],pa.push(P);for(p=yP(l,null,v,p),l.child=p;p;)p.flags=p.flags&-3|1024,p=p.sibling}else gr(h,l,v,p),g1();l=l.child}return l;case 5:return mP(l),h===null&&d1(l),v=l.type,w=l.pendingProps,P=h!==null?h.memoizedProps:null,L=w.children,Jv(v,w)?L=null:P!==null&&Jv(v,P)&&(l.flags|=16),IP(h,l),gr(h,l,L,p),l.child;case 6:return h===null&&d1(l),null;case 13:return UP(h,l,p);case 4:return c1(l,l.stateNode.containerInfo),v=l.pendingProps,h===null?l.child=Ag(l,null,v,p):gr(h,l,v,p),l.child;case 11:return v=l.type,w=l.pendingProps,w=l.elementType===v?w:Mo(v,w),EP(h,l,v,w,p);case 7:return gr(h,l,l.pendingProps,p),l.child;case 8:return gr(h,l,l.pendingProps.children,p),l.child;case 12:return gr(h,l,l.pendingProps.children,p),l.child;case 10:t:{v=l.type._context,w=l.pendingProps,L=l.memoizedProps,P=w.value;var A=l.type._context;if(Pi(Ng,A._currentValue),A._currentValue=P,L!==null)if(A=L.value,P=_r(A,P)?0:(typeof v._calculateChangedBits=="function"?v._calculateChangedBits(A,P):1073741823)|0,P===0){if(L.children===w.children&&!cr.current){l=As(h,l,p);break t}}else for(A=l.child,A!==null&&(A.return=l);A!==null;){var B=A.dependencies;if(B!==null){L=A.child;for(var Q=B.firstContext;Q!==null;){if(Q.context===v&&(Q.observedBits&P)!=0){A.tag===1&&(Q=hl(-1,p&-p),Q.tag=2,al(A,Q)),A.lanes|=p,Q=A.alternate,Q!==null&&(Q.lanes|=p),lP(A.return,p),B.lanes|=p;break}Q=Q.next}}else L=A.tag===10&&A.type===l.type?null:A.child;if(L!==null)L.return=A;else for(L=A;L!==null;){if(L===l){L=null;break}if(A=L.sibling,A!==null){A.return=L.return,L=A;break}L=L.return}A=L}gr(h,l,w.children,p),l=l.child}return l;case 9:return w=l.type,P=l.pendingProps,v=P.children,aa(l,p),w=$r(w,P.unstable_observedBits),v=v(w),l.flags|=1,gr(h,l,v,p),l.child;case 14:return w=l.type,P=Mo(w,l.pendingProps),P=Mo(w.type,P),AP(h,l,w,P,v,p);case 15:return OP(h,l,l.type,l.pendingProps,v,p);case 17:return v=l.type,w=l.pendingProps,w=l.elementType===v?w:Mo(v,w),h!==null&&(h.alternate=null,l.alternate=null,l.flags|=2),l.tag=1,pr(v)?(h=!0,Sg(l)):h=!1,aa(l,p),pP(l,v,w),h1(l,v,w,p),T1(null,l,v,!0,h,p);case 19:return GP(h,l,p);case 23:return N1(h,l,p);case 24:return N1(h,l,p)}throw Error(vt(156,l.tag))};function zL(h,l,p,v){this.tag=h,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(h,l,p,v){return new zL(h,l,p,v)}function k1(h){return h=h.prototype,!(!h||!h.isReactComponent)}function VL(h){if(typeof h=="function")return k1(h)?1:0;if(h!=null){if(h=h.$$typeof,h===$d)return 11;if(h===Jd)return 14}return 2}function pl(h,l){var p=h.alternate;return p===null?(p=Zr(h.tag,l,h.key,h.mode),p.elementType=h.elementType,p.type=h.type,p.stateNode=h.stateNode,p.alternate=h,h.alternate=p):(p.pendingProps=l,p.type=h.type,p.flags=0,p.nextEffect=null,p.firstEffect=null,p.lastEffect=null),p.childLanes=h.childLanes,p.lanes=h.lanes,p.child=h.child,p.memoizedProps=h.memoizedProps,p.memoizedState=h.memoizedState,p.updateQueue=h.updateQueue,l=h.dependencies,p.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},p.sibling=h.sibling,p.index=h.index,p.ref=h.ref,p}function Og(h,l,p,v,w,P){var L=2;if(v=h,typeof h=="function")k1(h)&&(L=1);else if(typeof h=="string")L=5;else t:switch(h){case qs:return fa(p.children,w,P,l);case O2:L=8,w|=16;break;case tv:L=8,w|=1;break;case Vf:return h=Zr(12,p,l,w|8),h.elementType=Vf,h.type=Vf,h.lanes=P,h;case zf:return h=Zr(13,p,l,w),h.type=zf,h.elementType=zf,h.lanes=P,h;case Zd:return h=Zr(19,p,l,w),h.elementType=Zd,h.lanes=P,h;case sv:return C1(p,w,P,l);case lv:return h=Zr(24,p,l,w),h.elementType=lv,h.lanes=P,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case ev:L=10;break t;case iv:L=9;break t;case $d:L=11;break t;case Jd:L=14;break t;case nv:L=16,v=null;break t;case rv:L=22;break t}throw Error(vt(130,h==null?h:typeof h,""))}return l=Zr(L,p,l,w),l.elementType=h,l.type=v,l.lanes=P,l}function fa(h,l,p,v){return h=Zr(7,h,v,l),h.lanes=p,h}function C1(h,l,p,v){return h=Zr(23,h,v,l),h.elementType=sv,h.lanes=p,h}function a1(h,l,p){return h=Zr(6,h,null,l),h.lanes=p,h}function f1(h,l,p){return l=Zr(4,h.children!==null?h.children:[],h.key,l),l.lanes=p,l.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},l}function UL(h,l,p){this.tag=l,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=p,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Iv(0),this.expirationTimes=Iv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iv(0),this.mutableSourceEagerHydrationData=null}function YL(h,l,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cu,key:v==null?null:""+v,children:h,containerInfo:l,implementation:p}}function Jg(h,l,p,v){var w=l.current,P=Nr(),L=fl(w);t:if(p){p=p._reactInternals;e:{if(du(p)!==p||p.tag!==1)throw Error(vt(170));var A=p;do{switch(A.tag){case 3:A=A.stateNode.context;break e;case 1:if(pr(A.type)){A=A.stateNode.__reactInternalMemoizedMergedChildContext;break e}}A=A.return}while(A!==null);throw Error(vt(171))}if(p.tag===1){var B=p.type;if(pr(B)){p=Qk(p,B,A);break t}}p=A}else p=ll;return l.context===null?l.context=p:l.pendingContext=p,l=hl(P,L),l.payload={element:h},v=v===void 0?null:v,v!==null&&(l.callback=v),al(w,l),cl(w,L,P),L}function _1(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function cN(h,l){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var p=h.retryLane;h.retryLane=p!==0&&p<l?p:l}}function $1(h,l){cN(h,l),(h=h.alternate)&&cN(h,l)}function GL(){return null}function Z1(h,l,p){var v=p!=null&&p.hydrationOptions!=null&&p.hydrationOptions.mutableSources||null;if(p=new UL(h,l,p!=null&&p.hydrate===!0),l=Zr(3,null,null,l===2?7:l===1?3:0),p.current=l,l.stateNode=p,u1(l),h[ra]=p.current,Hk(h.nodeType===8?h.parentNode:h),v)for(h=0;h<v.length;h++){l=v[h];var w=l._getVersion;w=w(l._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[l,w]:p.mutableSourceEagerHydrationData.push(l,w)}this._internalRoot=p}Z1.prototype.render=function(h){Jg(h,this._internalRoot,null,null)};Z1.prototype.unmount=function(){var h=this._internalRoot,l=h.containerInfo;Jg(null,h,null,function(){l[ra]=null})};function Cc(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function XL(h,l){if(l||(l=h?h.nodeType===9?h.documentElement:h.firstChild:null,l=!(!l||l.nodeType!==1||!l.hasAttribute("data-reactroot"))),!l)for(var p;p=h.lastChild;)h.removeChild(p);return new Z1(h,0,l?{hydrate:!0}:void 0)}function Qg(h,l,p,v,w){var P=p._reactRootContainer;if(P){var L=P._internalRoot;if(typeof w=="function"){var A=w;w=function(){var Q=_1(L);A.call(Q)}}Jg(l,L,h,w)}else{if(P=p._reactRootContainer=XL(p,v),L=P._internalRoot,typeof w=="function"){var B=w;w=function(){var Q=_1(L);B.call(Q)}}lN(function(){Jg(l,L,h,w)})}return _1(L)}ek=function(h){if(h.tag===13){var l=Nr();cl(h,4,l),$1(h,4)}};Cv=function(h){if(h.tag===13){var l=Nr();cl(h,67108864,l),$1(h,67108864)}};ik=function(h){if(h.tag===13){var l=Nr(),p=fl(h);cl(h,p,l),$1(h,p)}};nk=function(h,l){return l()};wv=function(h,l,p){switch(l){case"input":if(cv(h,p),l=p.name,p.type==="radio"&&l!=null){for(p=h;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<p.length;l++){var v=p[l];if(v!==h&&v.form===h.form){var w=eg(v);if(!w)throw Error(vt(90));B2(v),cv(v,w)}}}break;case"textarea":U2(h,p);break;case"select":l=p.value,l!=null&&Kh(h,!!p.multiple,l,!1)}};Mv=sN;Z2=function(h,l,p,v,w){var P=ne;ne|=4;try{return vu(98,h.bind(null,l,p,v,w))}finally{ne=P,ne===0&&(ma(),bo())}};Sv=function(){(ne&49)==0&&(OL(),ml())};J2=function(h,l){var p=ne;ne|=2;try{return h(l)}finally{ne=p,ne===0&&(ma(),bo())}};function pN(h,l){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cc(l))throw Error(vt(200));return YL(h,l,null,p)}var HL={Events:[Hf,ea,eg,_2,$2,ml,{current:!1}]},Lc={findFiberByHostInstance:gu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},WL={bundleType:Lc.bundleType,version:Lc.version,rendererPackageName:Lc.rendererPackageName,rendererConfig:Lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fu.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=b2(h),h===null?null:h.stateNode},findFiberByHostInstance:Lc.findFiberByHostInstance||GL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(jc=__REACT_DEVTOOLS_GLOBAL_HOOK__,!jc.isDisabled&&jc.supportsFiber))try{t1=jc.inject(WL),mu=jc}catch(h){}var jc,KL=HL,_L=pN,$L=function(h){if(h==null)return null;if(h.nodeType===1)return h;var l=h._reactInternals;if(l===void 0)throw typeof h.render=="function"?Error(vt(188)):Error(vt(268,Object.keys(h)));return h=b2(l),h=h===null?null:h.stateNode,h},ZL=function(h,l){var p=ne;if((p&48)!=0)return h(l);ne|=1;try{if(h)return vu(99,h.bind(null,l))}finally{ne=p,bo()}},JL=function(h,l,p){if(!Cc(l))throw Error(vt(200));return Qg(null,h,l,!0,p)},QL=function(h,l,p){if(!Cc(l))throw Error(vt(200));return Qg(null,h,l,!1,p)},qL=function(h){if(!Cc(h))throw Error(vt(40));return h._reactRootContainer?(lN(function(){Qg(null,null,h,!1,function(){h._reactRootContainer=null,h[ra]=null})}),!0):!1},bL=sN,tj=function(h,l){return pN(h,l,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)},ej=function(h,l,p,v){if(!Cc(p))throw Error(vt(200));if(h==null||h._reactInternals===void 0)throw Error(vt(38));return Qg(h,l,p,!1,v)},ij="17.0.2",nj={__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:KL,createPortal:_L,findDOMNode:$L,flushSync:ZL,hydrate:JL,render:QL,unmountComponentAtNode:qL,unstable_batchedUpdates:bL,unstable_createPortal:tj,unstable_renderSubtreeIntoContainer:ej,version:ij},rj=wo(function(h){function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(p){console.error(p)}}l(),h.exports=nj}),dN=rj.render;function oj(h,l,p){return l in h?Object.defineProperty(h,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[l]=p,h}function gN(h,l){var p=Object.keys(h);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(h);l&&(v=v.filter(function(w){return Object.getOwnPropertyDescriptor(h,w).enumerable})),p.push.apply(p,v)}return p}function yN(h){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?gN(Object(p),!0).forEach(function(v){oj(h,v,p[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(p)):gN(Object(p)).forEach(function(v){Object.defineProperty(h,v,Object.getOwnPropertyDescriptor(p,v))})}return h}function aj(h,l){return sj(h)||lj(h,l)||uj(h,l)||hj()}function sj(h){if(Array.isArray(h))return h}function lj(h,l){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(h)))){var p=[],v=!0,w=!1,P=void 0;try{for(var L=h[Symbol.iterator](),A;!(v=(A=L.next()).done)&&(p.push(A.value),!(l&&p.length===l));v=!0);}catch(B){w=!0,P=B}finally{try{!v&&L.return!=null&&L.return()}finally{if(w)throw P}}return p}}function uj(h,l){if(!!h){if(typeof h=="string")return mN(h,l);var p=Object.prototype.toString.call(h).slice(8,-1);if(p==="Object"&&h.constructor&&(p=h.constructor.name),p==="Map"||p==="Set")return Array.from(h);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return mN(h,l)}}function mN(h,l){(l==null||l>h.length)&&(l=h.length);for(var p=0,v=new Array(l);p<l;p++)v[p]=h[p];return v}function hj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fj(h,l,p){return l in h?Object.defineProperty(h,l,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[l]=p,h}function vN(h,l){var p=Object.keys(h);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(h);l&&(v=v.filter(function(w){return Object.getOwnPropertyDescriptor(h,w).enumerable})),p.push.apply(p,v)}return p}function xN(h){for(var l=1;l<arguments.length;l++){var p=arguments[l]!=null?arguments[l]:{};l%2?vN(Object(p),!0).forEach(function(v){fj(h,v,p[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(p)):vN(Object(p)).forEach(function(v){Object.defineProperty(h,v,Object.getOwnPropertyDescriptor(p,v))})}return h}function cj(){for(var h=arguments.length,l=new Array(h),p=0;p<h;p++)l[p]=arguments[p];return function(v){return l.reduceRight(function(w,P){return P(w)},v)}}function Dc(h){return function l(){for(var p=this,v=arguments.length,w=new Array(v),P=0;P<v;P++)w[P]=arguments[P];return w.length>=h.length?h.apply(this,w):function(){for(var L=arguments.length,A=new Array(L),B=0;B<L;B++)A[B]=arguments[B];return l.apply(p,[].concat(w,A))}}}function qg(h){return{}.toString.call(h).includes("Object")}function pj(h){return!Object.keys(h).length}function Ec(h){return typeof h=="function"}function dj(h,l){return Object.prototype.hasOwnProperty.call(h,l)}function gj(h,l){return qg(l)||vl("changeType"),Object.keys(l).some(function(p){return!dj(h,p)})&&vl("changeField"),l}function yj(h){Ec(h)||vl("selectorType")}function mj(h){Ec(h)||qg(h)||vl("handlerType"),qg(h)&&Object.values(h).some(function(l){return!Ec(l)})&&vl("handlersType")}function vj(h){h||vl("initialIsRequired"),qg(h)||vl("initialType"),pj(h)&&vl("initialContent")}function xj(h,l){throw new Error(h[l]||h.default)}var wj={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},vl=Dc(xj)(wj),bg={changes:gj,selector:yj,handler:mj,initial:vj};function Pj(h){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bg.initial(h),bg.handler(l);var p={current:h},v=Dc(kj)(p,l),w=Dc(Sj)(p),P=Dc(bg.changes)(h),L=Dc(Mj)(p);function A(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(xt){return xt};return bg.selector(Q),Q(p.current)}function B(Q){cj(v,w,P,L)(Q)}return[A,B]}function Mj(h,l){return Ec(l)?l(h.current):l}function Sj(h,l){return h.current=xN(xN({},h.current),l),l}function kj(h,l,p){return Ec(l)?l(h.current):Object.keys(p).forEach(function(v){var w;return(w=l[v])===null||w===void 0?void 0:w.call(l,h.current[v])}),p}var wN={create:Pj},Nj={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.23.0/min/vs"}};function Tj(h){return function l(){for(var p=this,v=arguments.length,w=new Array(v),P=0;P<v;P++)w[P]=arguments[P];return w.length>=h.length?h.apply(this,w):function(){for(var L=arguments.length,A=new Array(L),B=0;B<L;B++)A[B]=arguments[B];return l.apply(p,[].concat(w,A))}}}function Cj(h){return{}.toString.call(h).includes("Object")}function jj(h){return h||MN("configIsRequired"),Cj(h)||MN("configType"),h.urls?(Lj(),{paths:{vs:h.urls.monacoBase}}):h}function Lj(){console.warn(SN.deprecation)}function Dj(h,l){throw new Error(h[l]||h.default)}var SN={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},MN=Tj(Dj)(SN),Ej={config:jj},Oj=function(){for(var l=arguments.length,p=new Array(l),v=0;v<l;v++)p[v]=arguments[v];return function(w){return p.reduceRight(function(P,L){return L(P)},w)}};function kN(h,l){return Object.keys(l).forEach(function(p){l[p]instanceof Object&&h[p]&&Object.assign(l[p],kN(h[p],l[p]))}),yN(yN({},h),l)}var Aj={type:"cancelation",msg:"operation is manually canceled"};function PN(h){var l=!1,p=new Promise(function(v,w){h.then(function(P){return l?w(Aj):v(P)}),h.catch(w)});return p.cancel=function(){return l=!0},p}var Ij=wN.create({config:Nj,isInitialized:!1,resolve:null,reject:null,monaco:null}),NN=aj(Ij,2),Oc=NN[0],ty=NN[1];function Bj(h){ty(function(l){return{config:kN(l.config,Ej.config(h))}})}function Uj(){var h=Oc(function(l){var p=l.isInitialized;return{isInitialized:p}});if(!h.isInitialized){if(window.monaco&&window.monaco.editor)return TN(window.monaco),PN(Promise.resolve(window.monaco));Oj(Rj,Fj)(Vj),ty({isInitialized:!0})}return PN(zj)}function Rj(h){return document.body.appendChild(h)}function Yj(h){var l=document.createElement("script");return h&&(l.src=h),l}function Fj(h){var l=Oc(function(v){var w=v.config,P=v.reject;return{config:w,reject:P}}),p=Yj("".concat(l.config.paths.vs,"/loader.js"));return p.onload=function(){return h()},p.onerror=l.reject,p}function Vj(){var h=Oc(function(p){var v=p.config,w=p.resolve,P=p.reject;return{config:v,resolve:w,reject:P}}),l=window.require;l.config(h.config),l(["vs/editor/editor.main"],function(p){TN(p),h.resolve(p)},function(p){h.reject(p)})}function TN(h){Oc().monaco||ty({monaco:h})}function Gj(){return Oc(function(h){var l=h.monaco;return l})}var zj=new Promise(function(h,l){return ty({resolve:h,reject:l})}),Xj={config:Bj,init:Uj,__getMonacoInstance:Gj},Hj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Wj=Hj;function CN(){}function LN(){}LN.resetWarningCache=CN;var Kj=function(){function h(v,w,P,L,A,B){if(B!==Wj){var Q=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Q.name="Invariant Violation",Q}}h.isRequired=h;function l(){return h}var p={array:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:l,element:h,elementType:h,instanceOf:l,node:h,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:LN,resetWarningCache:CN};return p.PropTypes=p,p},Ut=wo(function(h){h.exports=Kj()}),_j={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};function $j({content:h}){return Zt.createElement("div",{style:_j},h)}var J1={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function jN({width:h,height:l,isEditorReady:p,loading:v,_ref:w,className:P,wrapperClassName:L}){return Zt.createElement("section",{style:{...J1.wrapper,width:h,height:l},className:L},!p&&Zt.createElement($j,{content:v}),Zt.createElement("div",{ref:w,style:{...J1.fullWidth,...!p&&J1.hide},className:P}))}jN.propTypes={width:Ut.oneOfType([Ut.number,Ut.string]).isRequired,height:Ut.oneOfType([Ut.number,Ut.string]).isRequired,loading:Ut.oneOfType([Ut.element,Ut.string]).isRequired,isEditorReady:Ut.bool.isRequired,className:Ut.string,wrapperClassName:Ut.string};var Zj=Zt.memo(jN);function Jj(h){Zt.useEffect(h,[])}function xa(h,l,p=!0){let v=Zt.useRef(!0);Zt.useEffect(v.current||!p?()=>{v.current=!1}:h,l)}function Q1(){}function DN(h,l,p,v){return Qj(h,v)||qj(h,l,p,v)}function Qj(h,l){return h.editor.getModel(EN(h,l))}function qj(h,l,p,v){return h.editor.createModel(l,p,v&&EN(h,v))}function EN(h,l){return h.Uri.parse(l)}function bj(h){return h===void 0}Ut.string,Ut.string,Ut.string,Ut.string,Ut.string,Ut.string,Ut.string,Ut.bool,Ut.bool,Ut.string,Ut.oneOfType([Ut.element,Ut.string]),Ut.object,Ut.oneOfType([Ut.number,Ut.string]),Ut.oneOfType([Ut.number,Ut.string]),Ut.string,Ut.string,Ut.func,Ut.func;function tD(h){let l=Zt.useRef();return Zt.useEffect(()=>{l.current=h},[h]),l.current}var[ON,eD]=wN.create({backup:null}),ey=new Map;function q1({defaultValue:h,defaultLanguage:l,defaultPath:p,value:v,language:w,path:P,theme:L,line:A,loading:B,options:Q,overrideServices:xt,saveViewState:ut,keepCurrentModel:X,width:Et,height:Kt,className:Y,wrapperClassName:_,beforeMount:U,onMount:H,onChange:it,onValidate:E}){let[et,lt]=Zt.useState(!1),[wt,Jt]=Zt.useState(!0),at=Zt.useRef(null),jt=Zt.useRef(null),Ge=Zt.useRef(null),In=Zt.useRef(H),Ve=Zt.useRef(U),Dt=Zt.useRef(null),Xt=Zt.useRef(v),Ee=tD(P);Jj(()=>{let ht=Xj.init();return ht.then(Yt=>(at.current=Yt)&&Jt(!1)).catch(Yt=>(Yt==null?void 0:Yt.type)!=="cancelation"&&console.error("Monaco initialization: error:",Yt)),()=>jt.current?tt():ht.cancel()}),xa(()=>{let ht=DN(at.current,h||v,l||w,P);ht!==jt.current.getModel()&&(ut&&ey.set(Ee,jt.current.saveViewState()),jt.current.setModel(ht),ut&&jt.current.restoreViewState(ey.get(P)))},[P],et),xa(()=>{jt.current.updateOptions(Q)},[Q],et),xa(()=>{jt.current.getOption(at.current.editor.EditorOption.readOnly)?jt.current.setValue(v):v!==jt.current.getValue()&&(jt.current.executeEdits("",[{range:jt.current.getModel().getFullModelRange(),text:v,forceMoveMarkers:!0}]),jt.current.pushUndoStop())},[v],et),xa(()=>{at.current.editor.setModelLanguage(jt.current.getModel(),w)},[w],et),xa(()=>{bj(A)||jt.current.revealLine(A)},[A],et),xa(()=>{at.current.editor.setTheme(L)},[L],et);let Xe=Zt.useCallback(()=>{Ve.current(at.current);let ht=P||p,Yt=DN(at.current,v||h,l||w,ht);jt.current=at.current.editor.create(Ge.current,{model:Yt,automaticLayout:!0,...Q},xt),ut&&jt.current.restoreViewState(ey.get(ht)),at.current.editor.setTheme(L),ON().backup||eD({backup:at.current.editor.setModelMarkers}),lt(!0)},[h,l,p,v,w,P,Q,xt,ut,L]);Zt.useEffect(()=>{et&&In.current(jt.current,at.current)},[et]),Zt.useEffect(()=>{!wt&&!et&&Xe()},[wt,et,Xe]),Xt.current=v,Zt.useEffect(()=>{if(et&&it){var ht,Yt;(ht=Dt.current)===null||ht===void 0||ht.dispose(),Dt.current=(Yt=jt.current)===null||Yt===void 0?void 0:Yt.onDidChangeModelContent(kt=>{let ft=jt.current.getValue();Xt.current!==ft&&it(ft,kt)})}},[et,it]),Zt.useEffect(()=>{et&&(at.current.editor.setModelMarkers=function(ht,Yt,kt){var ft;(ft=ON().backup)===null||ft===void 0||ft.call(at.current.editor,ht,Yt,kt),E==null||E(kt)})},[et,E]);function tt(){var ht;if((ht=Dt.current)===null||ht===void 0||ht.dispose(),X)ut&&ey.set(P,jt.current.saveViewState());else{var Yt;(Yt=jt.current.getModel())===null||Yt===void 0||Yt.dispose()}jt.current.dispose()}return Zt.createElement(Zj,{width:Et,height:Kt,isEditorReady:et,loading:B,_ref:Ge,className:Y,wrapperClassName:_})}q1.propTypes={defaultValue:Ut.string,defaultPath:Ut.string,defaultLanguage:Ut.string,value:Ut.string,language:Ut.string,path:Ut.string,theme:Ut.string,line:Ut.number,loading:Ut.oneOfType([Ut.element,Ut.string]),options:Ut.object,overrideServices:Ut.object,saveViewState:Ut.bool,keepCurrentModel:Ut.bool,width:Ut.oneOfType([Ut.number,Ut.string]),height:Ut.oneOfType([Ut.number,Ut.string]),className:Ut.string,wrapperClassName:Ut.string,beforeMount:Ut.func,onMount:Ut.func,onChange:Ut.func,onValidate:Ut.func};q1.defaultProps={theme:"light",loading:"Loading...",options:{},overrideServices:{},saveViewState:!0,keepCurrentModel:!1,width:"100%",height:"100%",beforeMount:Q1,onMount:Q1,onValidate:Q1};var iD=Zt.memo(q1),AN=iD;var IN=h=>Zt.createElement(AN,{theme:"vs-dark",defaultLanguage:"yaml",defaultValue:h.defaultValue,options:{fontSize:18,suggestFontSize:16,fontFamily:"monospace",minimap:{enabled:!1},scrollbar:{vertical:"hidden",horizontal:"hidden"},overviewRulerLanes:0,quickSuggestions:!0,quickSuggestionsDelay:0}});var yt=wo(function(h){(function(){var l;function p(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function v(t){var e=typeof Symbol!="undefined"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:p(t)}}function w(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}var P=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},L;if(typeof Object.setPrototypeOf=="function")L=Object.setPrototypeOf;else{var A;t:{var B={a:!0},Q={};try{Q.__proto__=B,A=Q.a;break t}catch(t){}A=!1}L=A?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var xt=L;function ut(t,e){if(t.prototype=P(e.prototype),t.prototype.constructor=t,xt)xt(t,e);else for(var i in e)if(i!="prototype")if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(t,i,n)}else t[i]=e[i];t.zB=e.prototype}var X=typeof window!="undefined"&&window===self?self:typeof Qo!="undefined"&&Qo!=null?Qo:self,Et=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)};function Kt(t){if(t){for(var e=X,i=["Array","prototype","fill"],n=0;n<i.length-1;n++){var r=i[n];r in e||(e[r]={}),e=e[r]}i=i[i.length-1],n=e[i],t=t(n),t!=n&&t!=null&&Et(e,i,{writable:!0,value:t})}}Kt(function(t){return t||function(e,i,n){var r=this.length||0;for(0>i&&(i=Math.max(0,r+i)),(n==null||n>r)&&(n=r),n=Number(n),0>n&&(n=Math.max(0,r+n)),i=Number(i||0);i<n;i++)this[i]=e;return this}});var Y=typeof self=="object"&&self.self===self&&self||typeof Qo=="object"&&Qo.global===Qo&&Qo||typeof window=="object"&&window.window===window&&window||{};Y.requestAnimationFrame===void 0&&(Y.setImmediate===void 0?Y.requestAnimationFrame=function(t){Y.setTimeout(t,0)}:Y.requestAnimationFrame=Y.setImmediate);function _(){}function U(t,e){var i=-1;return function(){var n=this,r=arguments;i!==-1&&Y.clearTimeout(i),i=H(function(){i=-1,t.apply(n,r)},e)}}function H(t,e){return Y.setTimeout(t,e)}function it(t){return Y.document.createElement(t)}function E(t){throw Error(t)}function et(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),e!==void 0&&(t+="  to value: "+e),E(t)}function lt(t,e,i,n){i=i===null?"*":typeof i=="string"?i:typeof i=="function"&&typeof i.className=="string"?i.className:"",n!==void 0&&(i+="."+n),E(i+" is not in the range "+e+": "+t)}function wt(t){Y.console&&Y.console.log(t)}function Jt(){Y.console&&Y.console.log("Warning: List/Map/Set constructors no longer take an argument that enforces type.Instead they take an optional collection of Values to add to the collection. See 2.0 changelog for details.")}function at(t){return typeof t=="object"&&t!==null}function jt(t){return Array.isArray(t)||Y.NodeList&&t instanceof Y.NodeList||Y.HTMLCollection&&t instanceof Y.HTMLCollection}function Ge(t){return Array.prototype.slice.call(t)}function In(t,e,i){Array.isArray(t)?e>=t.length?t.push(i):t.splice(e,0,i):E("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+e)}function Ve(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):E("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Dt(){var t=qr.pop();return t===void 0?[]:t}function Xt(t){t.length=0,qr.push(t)}function Ee(t){if(typeof t=="function"){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(e=e.substring(9,e.indexOf("(")).trim(),e!=="")return t._className=e}else if(at(t)&&t.constructor)return Ee(t.constructor);return typeof t}function Xe(t){var e=t;return at(t)&&(t.text?e=t.text:t.name?e=t.name:t.key!==void 0?e=t.key:t.id!==void 0?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:t.Key!==void 0?e=t.Key:t.Id!==void 0?e=t.Id:t.ID!==void 0&&(e=t.ID))),e===void 0?"undefined":e===null?"null":e.toString()}function tt(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var i=t.kB;if(i&&i[e])return!0;t=Object.getPrototypeOf(t)}return!1}function ht(t,e,i){Object.defineProperty(he.prototype,t,{get:e,set:i})}function Yt(){var t=os;if(Y.document===void 0)return t;if(t.length===0)for(var e=Y.document.getElementsByTagName("canvas"),i=e.length,n=0;n<i;n++){var r=e[n];r.parentElement&&r.parentElement.B&&t.push(r.parentElement.B)}return t}function kt(t){for(var e=[],i=0;256>i;i++)e["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(i&15)]=String.fromCharCode(i);t.length%2&&(t="0"+t),i=[];for(var n=0,r=0;r<t.length;r+=2)i[n++]=e[t.substr(r,2)];for(t=i.join(""),t=t===""?"0":t,e=[],i=0;256>i;i++)e[i]=i;for(i=n=0;256>i;i++)n=(n+e[i]+119)%256,r=e[i],e[i]=e[n],e[n]=r;n=i=0;for(var o="",s=0;s<t.length;s++)i=(i+1)%256,n=(n+e[i])%256,r=e[i],e[i]=e[n],e[n]=r,o+=String.fromCharCode(t.charCodeAt(s)^e[(e[i]+e[n])%256]);return o}var ft=Y.navigator!==void 0&&0<Y.navigator.userAgent.indexOf("MSIE 9.0"),Tt=Y.navigator!==void 0&&0<Y.navigator.userAgent.indexOf("MSIE 10.0"),Bt=Y.navigator!==void 0&&0<Y.navigator.userAgent.indexOf("Trident/7"),ee=Y.navigator!==void 0&&0<Y.navigator.userAgent.indexOf("Edge/"),te=Y.navigator!==void 0&&Y.navigator.platform!==void 0&&0<=Y.navigator.platform.toUpperCase().indexOf("MAC"),hi=Y.navigator!==void 0&&Y.navigator.platform!==void 0&&Y.navigator.platform.match(/(iPhone|iPod|iPad)/i)!==null,qr=[];Object.freeze([]);var os=[];_.className="Util",_.Dx="32ab5ff3b26f42dc0ed90f21452913b5",_.adym="gojs.net",_.vfo="28e647fdb06f",_.className="Util";function K(t,e,i){Oe(this),this.l=t,this.Qa=e,this.v=i}K.prototype.toString=function(){return"EnumValue."+this.Qa};function br(t,e){return e==null||e===""?null:t[e]}X.Object.defineProperties(K.prototype,{classType:{get:function(){return this.l}},name:{get:function(){return this.Qa}},value:{get:function(){return this.v}}}),K.className="EnumValue";function Ac(){this.qx=[]}Ac.prototype.toString=function(){return this.qx.join("")},Ac.prototype.add=function(t){t!==""&&this.qx.push(t)},Ac.className="StringBuilder";function Qi(){}Qi.className="PropertyCollection";var Ic={mB:!1,rB:!1,oB:!1,qB:!1,wB:!1,uB:!1,ny:!1,nB:null,trace:function(t){Y.console&&Y.console.log(t)},pB:function(t,e,i,n){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(i,i),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(n.left,n.top+20),t.lineTo(n.left,n.top),t.lineTo(n.left+20,n.top),t.moveTo(n.right,n.bottom-20),t.lineTo(n.right,n.bottom),t.lineTo(n.right-20,n.bottom),t.stroke(),t.fillText("DB: "+Math.round(n.x)+", "+Math.round(n.y)+", "+Math.round(n.width)+", "+Math.round(n.height),n.left,n.top-5)},lB:function(t){var e={},i;for(i in t){if(e.x=i,e.x!=="licenseKey"){var n=t[e.x];if(n.prototype!==void 0){e.Hm=Object.getOwnPropertyNames(n.prototype);for(var r={xk:0};r.xk<e.Hm.length;r={xk:r.xk},r.xk++){var o=Object.getOwnPropertyDescriptor(n.prototype,e.Hm[r.xk]);o.get!==void 0&&o.set===void 0&&Object.defineProperty(n.prototype,e.Hm[r.xk],{set:function(s,u){return function(){throw Error("Property "+s.Hm[u.xk]+" of "+s.x+" is read-only.")}}(e,r)})}}}e={Hm:e.Hm,x:e.x}}}};function ai(){}ai.prototype.reset=function(){},ai.prototype.next=function(){return!1},ai.prototype.sd=function(){return!1},ai.prototype.first=function(){return null},ai.prototype.any=function(){return!1},ai.prototype.all=function(){return!0},ai.prototype.each=function(){return this},ai.prototype.map=function(){return this},ai.prototype.filter=function(){return this},ai.prototype.Pd=function(){},ai.prototype.toString=function(){return"EmptyIterator"},X.Object.defineProperties(ai.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),ai.prototype.first=ai.prototype.first,ai.prototype.hasNext=ai.prototype.sd,ai.prototype.next=ai.prototype.next,ai.prototype.reset=ai.prototype.reset;var Bn=null;ai.className="EmptyIterator",Bn=new ai;function ze(t){this.key=-1,this.value=t}ze.prototype.reset=function(){this.key=-1},ze.prototype.next=function(){return this.key===-1?(this.key=0,!0):!1},ze.prototype.sd=function(){return this.next()},ze.prototype.first=function(){return this.key=0,this.value},ze.prototype.any=function(t){return this.key=-1,t(this.value)},ze.prototype.all=function(t){return this.key=-1,t(this.value)},ze.prototype.each=function(t){return this.key=-1,t(this.value),this},ze.prototype.map=function(t){return new ze(t(this.value))},ze.prototype.filter=function(t){return t(this.value)?new ze(this.value):Bn},ze.prototype.Pd=function(){this.value=null},ze.prototype.toString=function(){return"SingletonIterator("+this.value+")"},X.Object.defineProperties(ze.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),ze.prototype.first=ze.prototype.first,ze.prototype.hasNext=ze.prototype.sd,ze.prototype.next=ze.prototype.next,ze.prototype.reset=ze.prototype.reset,ze.className="SingletonIterator";function Ie(t){this.tb=t,this.gf=null,t.Ha=null,this.ia=t.Aa,this.Pa=-1}Ie.prototype.reset=function(){var t=this.tb;t.Ha=null,this.ia=t.Aa,this.Pa=-1},Ie.prototype.next=function(){var t=this.tb;if(t.Aa!==this.ia&&0>this.key)return!1;t=t.j;var e=t.length,i=++this.Pa,n=this.gf;if(n!==null)for(;i<e;){var r=t[i];if(n(r))return this.key=this.Pa=i,this.value=r,!0;i++}else{if(i<e)return this.key=i,this.value=t[i],!0;this.Pd()}return!1},Ie.prototype.sd=function(){return this.next()},Ie.prototype.first=function(){var t=this.tb;this.ia=t.Aa,this.Pa=0,t=t.j;var e=t.length,i=this.gf;if(i!==null){for(var n=0;n<e;){var r=t[n];if(i(r))return this.key=this.Pa=n,this.value=r;n++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},Ie.prototype.any=function(t){var e=this.tb;e.Ha=null,this.Pa=-1,e=e.j;for(var i=e.length,n=this.gf,r=0;r<i;r++){var o=e[r];if((n===null||n(o))&&t(o))return!0}return!1},Ie.prototype.all=function(t){var e=this.tb;e.Ha=null,this.Pa=-1,e=e.j;for(var i=e.length,n=this.gf,r=0;r<i;r++){var o=e[r];if((n===null||n(o))&&!t(o))return!1}return!0},Ie.prototype.each=function(t){var e=this.tb;e.Ha=null,this.Pa=-1,e=e.j;for(var i=e.length,n=this.gf,r=0;r<i;r++){var o=e[r];(n===null||n(o))&&t(o)}return this},Ie.prototype.map=function(t){var e=this.tb;e.Ha=null,this.Pa=-1;var i=[];e=e.j;for(var n=e.length,r=this.gf,o=0;o<n;o++){var s=e[o];(r===null||r(s))&&i.push(t(s))}return t=new J,t.j=i,t.ob(),t.iterator},Ie.prototype.filter=function(t){var e=this.tb;e.Ha=null,this.Pa=-1;var i=[];e=e.j;for(var n=e.length,r=this.gf,o=0;o<n;o++){var s=e[o];(r===null||r(s))&&t(s)&&i.push(s)}return t=new J,t.j=i,t.ob(),t.iterator},Ie.prototype.Pd=function(){this.key=-1,this.value=null,this.ia=-1,this.gf=null,this.tb.Ha=this},Ie.prototype.toString=function(){return"ListIterator@"+this.Pa+"/"+this.tb.count},X.Object.defineProperties(Ie.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.gf},set:function(t){this.gf=t}},count:{get:function(){var t=this.gf;if(t!==null){for(var e=0,i=this.tb.j,n=i.length,r=0;r<n;r++)t(i[r])&&e++;return e}return this.tb.j.length}}}),Ie.prototype.first=Ie.prototype.first,Ie.prototype.hasNext=Ie.prototype.sd,Ie.prototype.next=Ie.prototype.next,Ie.prototype.reset=Ie.prototype.reset,Ie.className="ListIterator";function fi(t){this.tb=t,t.gh=null,this.ia=t.Aa,this.Pa=t.j.length}fi.prototype.reset=function(){var t=this.tb;t.gh=null,this.ia=t.Aa,this.Pa=t.j.length},fi.prototype.next=function(){var t=this.tb;if(t.Aa!==this.ia&&0>this.key)return!1;var e=--this.Pa;return 0<=e?(this.key=e,this.value=t.j[e],!0):(this.Pd(),!1)},fi.prototype.sd=function(){return this.next()},fi.prototype.first=function(){var t=this.tb;this.ia=t.Aa;var e=t.j;return this.Pa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},fi.prototype.any=function(t){var e=this.tb;e.gh=null,e=e.j;var i=e.length;for(this.Pa=i,--i;0<=i;i--)if(t(e[i]))return!0;return!1},fi.prototype.all=function(t){var e=this.tb;e.gh=null,e=e.j;var i=e.length;for(this.Pa=i,--i;0<=i;i--)if(!t(e[i]))return!1;return!0},fi.prototype.each=function(t){var e=this.tb;e.gh=null,e=e.j;var i=e.length;for(this.Pa=i,--i;0<=i;i--)t(e[i]);return this},fi.prototype.map=function(t){var e=this.tb;e.gh=null;var i=[];e=e.j;var n=e.length;for(this.Pa=n,--n;0<=n;n--)i.push(t(e[n]));return t=new J,t.j=i,t.ob(),t.iterator},fi.prototype.filter=function(t){var e=this.tb;e.gh=null;var i=[];e=e.j;var n=e.length;for(this.Pa=n,--n;0<=n;n--){var r=e[n];t(r)&&i.push(r)}return t=new J,t.j=i,t.ob(),t.iterator},fi.prototype.Pd=function(){this.key=-1,this.value=null,this.ia=-1,this.tb.gh=this},fi.prototype.toString=function(){return"ListIteratorBackwards("+this.Pa+"/"+this.tb.count+")"},X.Object.defineProperties(fi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.tb.j.length}}}),fi.prototype.first=fi.prototype.first,fi.prototype.hasNext=fi.prototype.sd,fi.prototype.next=fi.prototype.next,fi.prototype.reset=fi.prototype.reset,fi.className="ListIteratorBackwards";function J(t){Oe(this),this.s=!1,this.j=[],this.Aa=0,this.gh=this.Ha=null,t!==void 0&&(typeof t=="function"||typeof t=="string"?Jt():this.addAll(t))}l=J.prototype,l.ob=function(){var t=this.Aa;t++,999999999<t&&(t=0),this.Aa=t},l.freeze=function(){return this.s=!0,this},l.ea=function(){return this.s=!1,this},l.toString=function(){return"List()#"+Ne(this)},l.add=function(t){return t===null?this:(this.s&&et(this,t),this.j.push(t),this.ob(),this)},l.push=function(t){this.add(t)},l.addAll=function(t){if(t===null)return this;this.s&&et(this);var e=this.j;if(jt(t))for(var i=t.length,n=0;n<i;n++)e.push(t[n]);else for(t=t.iterator;t.next();)e.push(t.value);return this.ob(),this},l.clear=function(){this.s&&et(this),this.j.length=0,this.ob()},l.contains=function(t){return t===null?!1:this.j.indexOf(t)!==-1},l.has=function(t){return this.contains(t)},l.indexOf=function(t){return t===null?-1:this.j.indexOf(t)},l.J=function(t){var e=this.j;return(0>t||t>=e.length)&&lt(t,"0 <= i < length",J,"elt:i"),e[t]},l.get=function(t){return this.J(t)},l.Qc=function(t,e){var i=this.j;(0>t||t>=i.length)&&lt(t,"0 <= i < length",J,"setElt:i"),this.s&&et(this,t),i[t]=e},l.set=function(t,e){this.Qc(t,e)},l.first=function(){var t=this.j;return t.length===0?null:t[0]},l.Xb=function(){var t=this.j,e=t.length;return 0<e?t[e-1]:null},l.pop=function(){this.s&&et(this);var t=this.j;return 0<t.length?t.pop():null},J.prototype.any=function(t){for(var e=this.j,i=e.length,n=0;n<i;n++)if(t(e[n]))return!0;return!1},J.prototype.all=function(t){for(var e=this.j,i=e.length,n=0;n<i;n++)if(!t(e[n]))return!1;return!0},J.prototype.each=function(t){for(var e=this.j,i=e.length,n=0;n<i;n++)t(e[n]);return this},J.prototype.map=function(t){for(var e=new J,i=[],n=this.j,r=n.length,o=0;o<r;o++)i.push(t(n[o]));return e.j=i,e.ob(),e},J.prototype.filter=function(t){for(var e=new J,i=[],n=this.j,r=n.length,o=0;o<r;o++){var s=n[o];t(s)&&i.push(s)}return e.j=i,e.ob(),e},l=J.prototype,l.wb=function(t,e){0>t&&lt(t,">= 0",J,"insertAt:i"),this.s&&et(this,t);var i=this.j;t>=i.length?i.push(e):i.splice(t,0,e),this.ob()},l.remove=function(t){if(t===null)return!1;this.s&&et(this,t);var e=this.j;return t=e.indexOf(t),t===-1?!1:(t===e.length-1?e.pop():e.splice(t,1),this.ob(),!0)},l.delete=function(t){return this.remove(t)},l.cb=function(t){var e=this.j;(0>t||t>=e.length)&&lt(t,"0 <= i < length",J,"removeAt:i"),this.s&&et(this,t),t===e.length-1?e.pop():e.splice(t,1),this.ob()},l.removeRange=function(t,e){var i=this.j,n=i.length;if(0>t)t=0;else if(t>=n)return this;if(0>e)return this;if(e>=n&&(e=n-1),t>e)return this;this.s&&et(this);for(var r=t,o=e+1;o<n;)i[r++]=i[o++];return i.length=n-(e-t+1),this.ob(),this},J.prototype.copy=function(){var t=new J,e=this.j;return 0<e.length&&(t.j=Array.prototype.slice.call(e)),t},l=J.prototype,l.ma=function(){for(var t=this.j,e=this.count,i=Array(e),n=0;n<e;n++)i[n]=t[n];return i},l.Lw=function(){for(var t=new W,e=this.j,i=this.count,n=0;n<i;n++)t.add(e[n]);return t},l.sort=function(t){return this.s&&et(this),this.j.sort(t),this.ob(),this},l.tj=function(t,e,i){var n=this.j,r=n.length;e===void 0&&(e=0),i===void 0&&(i=r),this.s&&et(this);var o=i-e;if(1>=o)return this;if((0>e||e>=r-1)&&lt(e,"0 <= from < length",J,"sortRange:from"),o===2)return i=n[e],r=n[e+1],0<t(i,r)&&(n[e]=r,n[e+1]=i,this.ob()),this;if(e===0)if(i>=r)n.sort(t);else for(e=n.slice(0,i),e.sort(t),t=0;t<i;t++)n[t]=e[t];else if(i>=r)for(i=n.slice(e),i.sort(t),t=e;t<r;t++)n[t]=i[t-e];else for(r=n.slice(e,i),r.sort(t),t=e;t<i;t++)n[t]=r[t-e];return this.ob(),this},l.reverse=function(){return this.s&&et(this),this.j.reverse(),this.ob(),this},X.Object.defineProperties(J.prototype,{_dataArray:{get:function(){return this.j}},count:{get:function(){return this.j.length}},size:{get:function(){return this.j.length}},length:{get:function(){return this.j.length}},iterator:{get:function(){if(0>=this.j.length)return Bn;var t=this.Ha;return t!==null?(t.reset(),t):new Ie(this)}},iteratorBackwards:{get:function(){if(0>=this.j.length)return Bn;var t=this.gh;return t!==null?(t.reset(),t):new fi(this)}}}),J.prototype.reverse=J.prototype.reverse,J.prototype.sortRange=J.prototype.tj,J.prototype.sort=J.prototype.sort,J.prototype.toSet=J.prototype.Lw,J.prototype.toArray=J.prototype.ma,J.prototype.removeRange=J.prototype.removeRange,J.prototype.removeAt=J.prototype.cb,J.prototype.delete=J.prototype.delete,J.prototype.remove=J.prototype.remove,J.prototype.insertAt=J.prototype.wb,J.prototype.pop=J.prototype.pop,J.prototype.last=J.prototype.Xb,J.prototype.first=J.prototype.first,J.prototype.set=J.prototype.set,J.prototype.setElt=J.prototype.Qc,J.prototype.get=J.prototype.get,J.prototype.elt=J.prototype.J,J.prototype.indexOf=J.prototype.indexOf,J.prototype.has=J.prototype.has,J.prototype.contains=J.prototype.contains,J.prototype.clear=J.prototype.clear,J.prototype.addAll=J.prototype.addAll,J.prototype.push=J.prototype.push,J.prototype.add=J.prototype.add,J.prototype.thaw=J.prototype.ea,J.prototype.freeze=J.prototype.freeze,J.className="List";function ci(t){this.vg=t,t.Ha=null,this.ia=t.Aa,this.ka=null}ci.prototype.reset=function(){var t=this.vg;t.Ha=null,this.ia=t.Aa,this.ka=null},ci.prototype.next=function(){var t=this.vg;if(t.Aa!==this.ia&&this.key===null)return!1;var e=this.ka;return e=e===null?t.ba:e.oa,e!==null?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Pd(),!1)},ci.prototype.sd=function(){return this.next()},ci.prototype.first=function(){var t=this.vg;if(this.ia=t.Aa,t=t.ba,t!==null){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},ci.prototype.any=function(t){var e=this.vg;for(this.ka=e.Ha=null,e=e.ba;e!==null;){if(t(e.value))return!0;e=e.oa}return!1},ci.prototype.all=function(t){var e=this.vg;for(this.ka=e.Ha=null,e=e.ba;e!==null;){if(!t(e.value))return!1;e=e.oa}return!0},ci.prototype.each=function(t){var e=this.vg;for(this.ka=e.Ha=null,e=e.ba;e!==null;)t(e.value),e=e.oa;return this},ci.prototype.map=function(t){var e=this.vg;e.Ha=null;var i=new J;for(e=e.ba;e!==null;)i.add(t(e.value)),e=e.oa;return i.iterator},ci.prototype.filter=function(t){var e=this.vg;e.Ha=null;var i=new J;for(e=e.ba;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.oa}return i.iterator},ci.prototype.Pd=function(){this.value=this.key=null,this.ia=-1,this.vg.Ha=this},ci.prototype.toString=function(){return this.ka!==null?"SetIterator@"+this.ka.value:"SetIterator"},X.Object.defineProperties(ci.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.vg.Gb}}}),ci.prototype.first=ci.prototype.first,ci.prototype.hasNext=ci.prototype.sd,ci.prototype.next=ci.prototype.next,ci.prototype.reset=ci.prototype.reset,ci.className="SetIterator";function W(t){Oe(this),this.s=!1,this.Ib={},this.Gb=0,this.Ha=null,this.Aa=0,this.af=this.ba=null,t!==void 0&&(typeof t=="function"||typeof t=="string"?Jt():this.addAll(t))}l=W.prototype,l.ob=function(){var t=this.Aa;t++,999999999<t&&(t=0),this.Aa=t},l.freeze=function(){return this.s=!0,this},l.ea=function(){return this.s=!1,this},l.toString=function(){return"Set()#"+Ne(this)},l.add=function(t){if(t===null)return this;this.s&&et(this,t);var e=t;return at(t)&&(e=xl(t)),this.Ib[e]===void 0&&(this.Gb++,t=new wa(t,t),this.Ib[e]=t,e=this.af,e===null?this.ba=t:(t.Vl=e,e.oa=t),this.af=t,this.ob()),this},l.addAll=function(t){if(t===null)return this;if(this.s&&et(this),jt(t))for(var e=t.length,i=0;i<e;i++)this.add(t[i]);else for(t=t.iterator;t.next();)this.add(t.value);return this},l.contains=function(t){if(t===null)return!1;var e=t;return at(t)&&(e=Ne(t),e===void 0)?!1:this.Ib[e]!==void 0},l.has=function(t){return this.contains(t)},l.Ez=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},l.Fz=function(t){if(t===null)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},l.first=function(){var t=this.ba;return t===null?null:t.value},W.prototype.any=function(t){for(var e=this.ba;e!==null;){if(t(e.value))return!0;e=e.oa}return!1},W.prototype.all=function(t){for(var e=this.ba;e!==null;){if(!t(e.value))return!1;e=e.oa}return!0},W.prototype.each=function(t){for(var e=this.ba;e!==null;)t(e.value),e=e.oa;return this},W.prototype.map=function(t){for(var e=new W,i=this.ba;i!==null;)e.add(t(i.value)),i=i.oa;return e},W.prototype.filter=function(t){for(var e=new W,i=this.ba;i!==null;){var n=i.value;t(n)&&e.add(n),i=i.oa}return e},l=W.prototype,l.remove=function(t){if(t===null)return!1;this.s&&et(this,t);var e=t;if(at(t)&&(e=Ne(t),e===void 0)||(t=this.Ib[e],t===void 0))return!1;var i=t.oa,n=t.Vl;return i!==null&&(i.Vl=n),n!==null&&(n.oa=i),this.ba===t&&(this.ba=i),this.af===t&&(this.af=n),delete this.Ib[e],this.Gb--,this.ob(),!0},l.delete=function(t){return this.remove(t)},l.Yq=function(t){if(t===null)return this;if(this.s&&et(this),jt(t))for(var e=t.length,i=0;i<e;i++)this.remove(t[i]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},l.VA=function(t){if(t===null||this.count===0)return this;this.s&&et(this);var e=new W;e.addAll(t),t=[];for(var i=this.iterator;i.next();){var n=i.value;e.contains(n)||t.push(n)}return this.Yq(t),this},l.clear=function(){this.s&&et(this),this.Ib={},this.Gb=0,this.Ha!==null&&this.Ha.reset(),this.af=this.ba=null,this.ob()},W.prototype.copy=function(){var t=new W,e=this.Ib,i;for(i in e)t.add(e[i].value);return t},W.prototype.ma=function(){var t=Array(this.Gb),e=this.Ib,i=0,n;for(n in e)t[i]=e[n].value,i++;return t},W.prototype.Kw=function(){var t=new J,e=this.Ib,i;for(i in e)t.add(e[i].value);return t};function Oe(t){t.__gohashid=ko++}function xl(t){var e=t.__gohashid;return e===void 0&&(e=ko++,t.__gohashid=e),e}function Ne(t){return t.__gohashid}X.Object.defineProperties(W.prototype,{count:{get:function(){return this.Gb}},size:{get:function(){return this.Gb}},iterator:{get:function(){if(0>=this.Gb)return Bn;var t=this.Ha;return t!==null?(t.reset(),t):new ci(this)}}}),W.prototype.toList=W.prototype.Kw,W.prototype.toArray=W.prototype.ma,W.prototype.clear=W.prototype.clear,W.prototype.retainAll=W.prototype.VA,W.prototype.removeAll=W.prototype.Yq,W.prototype.delete=W.prototype.delete,W.prototype.remove=W.prototype.remove,W.prototype.first=W.prototype.first,W.prototype.containsAny=W.prototype.Fz,W.prototype.containsAll=W.prototype.Ez,W.prototype.has=W.prototype.has,W.prototype.contains=W.prototype.contains,W.prototype.addAll=W.prototype.addAll,W.prototype.add=W.prototype.add,W.prototype.thaw=W.prototype.ea,W.prototype.freeze=W.prototype.freeze;var ko=1;W.className="Set",W.uniqueHash=Oe,W.hashIdUnique=xl,W.hashId=Ne;function ii(t){this.ga=t,this.ia=t.Aa,this.ka=null}ii.prototype.reset=function(){this.ia=this.ga.Aa,this.ka=null},ii.prototype.next=function(){var t=this.ga;if(t.Aa!==this.ia&&this.key===null)return!1;var e=this.ka;return e=e===null?t.ba:e.oa,e!==null?(this.ka=e,this.value=this.key=t=e.key,!0):(this.Pd(),!1)},ii.prototype.sd=function(){return this.next()},ii.prototype.first=function(){var t=this.ga;return this.ia=t.Aa,t=t.ba,t!==null?(this.ka=t,this.value=this.key=t=t.key):null},ii.prototype.any=function(t){var e=this.ga;for(this.ka=null,e=e.ba;e!==null;){if(t(e.key))return!0;e=e.oa}return!1},ii.prototype.all=function(t){var e=this.ga;for(this.ka=null,e=e.ba;e!==null;){if(!t(e.key))return!1;e=e.oa}return!0},ii.prototype.each=function(t){var e=this.ga;for(this.ka=null,e=e.ba;e!==null;)t(e.key),e=e.oa;return this},ii.prototype.map=function(t){var e=this.ga;this.ka=null;var i=new J;for(e=e.ba;e!==null;)i.add(t(e.key)),e=e.oa;return i.iterator},ii.prototype.filter=function(t){var e=this.ga;this.ka=null;var i=new J;for(e=e.ba;e!==null;){var n=e.key;t(n)&&i.add(n),e=e.oa}return i.iterator},ii.prototype.Pd=function(){this.value=this.key=null,this.ia=-1},ii.prototype.toString=function(){return this.ka!==null?"MapKeySetIterator@"+this.ka.value:"MapKeySetIterator"},X.Object.defineProperties(ii.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Gb}}}),ii.prototype.first=ii.prototype.first,ii.prototype.hasNext=ii.prototype.sd,ii.prototype.next=ii.prototype.next,ii.prototype.reset=ii.prototype.reset,ii.className="MapKeySetIterator";function pe(t){W.call(this),Oe(this),this.s=!0,this.ga=t}ut(pe,W),l=pe.prototype,l.freeze=function(){return this},l.ea=function(){return this},l.toString=function(){return"MapKeySet("+this.ga.toString()+")"},l.add=function(){return E("This Set is read-only: "+this.toString()),this},l.contains=function(t){return this.ga.contains(t)},l.has=function(t){return this.contains(t)},l.remove=function(){return E("This Set is read-only: "+this.toString()),!1},l.delete=function(t){return this.remove(t)},l.clear=function(){E("This Set is read-only: "+this.toString())},l.first=function(){var t=this.ga.ba;return t!==null?t.key:null},pe.prototype.any=function(t){for(var e=this.ga.ba;e!==null;){if(t(e.key))return!0;e=e.oa}return!1},pe.prototype.all=function(t){for(var e=this.ga.ba;e!==null;){if(!t(e.key))return!1;e=e.oa}return!0},pe.prototype.each=function(t){for(var e=this.ga.ba;e!==null;)t(e.key),e=e.oa;return this},pe.prototype.map=function(t){for(var e=new W,i=this.ga.ba;i!==null;)e.add(t(i.key)),i=i.oa;return e},pe.prototype.filter=function(t){for(var e=new W,i=this.ga.ba;i!==null;){var n=i.key;t(n)&&e.add(n),i=i.oa}return e},pe.prototype.copy=function(){return new pe(this.ga)},pe.prototype.Lw=function(){var t=new W,e=this.ga.Ib,i;for(i in e)t.add(e[i].key);return t},pe.prototype.ma=function(){var t=this.ga.Ib,e=Array(this.ga.Gb),i=0,n;for(n in t)e[i]=t[n].key,i++;return e},pe.prototype.Kw=function(){var t=new J,e=this.ga.Ib,i;for(i in e)t.add(e[i].key);return t},X.Object.defineProperties(pe.prototype,{count:{get:function(){return this.ga.Gb}},size:{get:function(){return this.ga.Gb}},iterator:{get:function(){return 0>=this.ga.Gb?Bn:new ii(this.ga)}}}),pe.prototype.toList=pe.prototype.Kw,pe.prototype.toArray=pe.prototype.ma,pe.prototype.toSet=pe.prototype.Lw,pe.prototype.first=pe.prototype.first,pe.prototype.clear=pe.prototype.clear,pe.prototype.delete=pe.prototype.delete,pe.prototype.remove=pe.prototype.remove,pe.prototype.has=pe.prototype.has,pe.prototype.contains=pe.prototype.contains,pe.prototype.add=pe.prototype.add,pe.prototype.thaw=pe.prototype.ea,pe.prototype.freeze=pe.prototype.freeze,pe.className="MapKeySet";function pi(t){this.ga=t,t.$e=null,this.ia=t.Aa,this.ka=null}pi.prototype.reset=function(){var t=this.ga;t.$e=null,this.ia=t.Aa,this.ka=null},pi.prototype.next=function(){var t=this.ga;if(t.Aa!==this.ia&&this.key===null)return!1;var e=this.ka;return e=e===null?t.ba:e.oa,e!==null?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Pd(),!1)},pi.prototype.sd=function(){return this.next()},pi.prototype.first=function(){var t=this.ga;if(this.ia=t.Aa,t=t.ba,t!==null){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},pi.prototype.any=function(t){var e=this.ga;for(this.ka=e.$e=null,e=e.ba;e!==null;){if(t(e.value))return!0;e=e.oa}return!1},pi.prototype.all=function(t){var e=this.ga;for(this.ka=e.$e=null,e=e.ba;e!==null;){if(!t(e.value))return!1;e=e.oa}return!0},pi.prototype.each=function(t){var e=this.ga;for(this.ka=e.$e=null,e=e.ba;e!==null;)t(e.value),e=e.oa;return this},pi.prototype.map=function(t){var e=this.ga;this.ka=e.$e=null;var i=new J;for(e=e.ba;e!==null;)i.add(t(e.value)),e=e.oa;return i.iterator},pi.prototype.filter=function(t){var e=this.ga;this.ka=e.$e=null;var i=new J;for(e=e.ba;e!==null;){var n=e.value;t(n)&&i.add(n),e=e.oa}return i.iterator},pi.prototype.Pd=function(){this.value=this.key=null,this.ia=-1,this.ga.$e=this},pi.prototype.toString=function(){return this.ka!==null?"MapValueSetIterator@"+this.ka.value:"MapValueSetIterator"},X.Object.defineProperties(pi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Gb}}}),pi.prototype.first=pi.prototype.first,pi.prototype.hasNext=pi.prototype.sd,pi.prototype.next=pi.prototype.next,pi.prototype.reset=pi.prototype.reset,pi.className="MapValueSetIterator";function wa(t,e){this.key=t,this.value=e,this.Vl=this.oa=null}wa.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},wa.className="KeyValuePair";function di(t){this.ga=t,t.Ha=null,this.ia=t.Aa,this.ka=null}di.prototype.reset=function(){var t=this.ga;t.Ha=null,this.ia=t.Aa,this.ka=null},di.prototype.next=function(){var t=this.ga;if(t.Aa!==this.ia&&this.key===null)return!1;var e=this.ka;return e=e===null?t.ba:e.oa,e!==null?(this.ka=e,this.key=e.key,this.value=e.value,!0):(this.Pd(),!1)},di.prototype.sd=function(){return this.next()},di.prototype.first=function(){var t=this.ga;return this.ia=t.Aa,t=t.ba,t!==null?(this.ka=t,this.key=t.key,this.value=t.value,t):null},di.prototype.any=function(t){var e=this.ga;for(this.ka=e.Ha=null,e=e.ba;e!==null;){if(t(e))return!0;e=e.oa}return!1},di.prototype.all=function(t){var e=this.ga;for(this.ka=e.Ha=null,e=e.ba;e!==null;){if(!t(e))return!1;e=e.oa}return!0},di.prototype.each=function(t){var e=this.ga;for(this.ka=e.Ha=null,e=e.ba;e!==null;)t(e),e=e.oa;return this},di.prototype.map=function(t){var e=this.ga;this.ka=e.Ha=null;var i=new J;for(e=e.ba;e!==null;)i.add(t(e)),e=e.oa;return i.iterator},di.prototype.filter=function(t){var e=this.ga;this.ka=e.Ha=null;var i=new J;for(e=e.ba;e!==null;)t(e)&&i.add(e),e=e.oa;return i.iterator},di.prototype.Pd=function(){this.value=this.key=null,this.ia=-1,this.ga.Ha=this},di.prototype.toString=function(){return this.ka!==null?"MapIterator@"+this.ka:"MapIterator"},X.Object.defineProperties(di.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Gb}}}),di.prototype.first=di.prototype.first,di.prototype.hasNext=di.prototype.sd,di.prototype.next=di.prototype.next,di.prototype.reset=di.prototype.reset,di.className="MapIterator";function ct(t){Oe(this),this.s=!1,this.Ib={},this.Gb=0,this.$e=this.Ha=null,this.Aa=0,this.af=this.ba=null,t!==void 0&&(typeof t=="function"||typeof t=="string"?Jt():this.addAll(t))}l=ct.prototype,l.ob=function(){var t=this.Aa;t++,999999999<t&&(t=0),this.Aa=t},l.freeze=function(){return this.s=!0,this},l.ea=function(){return this.s=!1,this},l.toString=function(){return"Map()#"+Ne(this)},l.add=function(t,e){this.s&&et(this,t);var i=t;at(t)&&(i=xl(t));var n=this.Ib[i];return n===void 0?(this.Gb++,t=new wa(t,e),this.Ib[i]=t,i=this.af,i===null?this.ba=t:(t.Vl=i,i.oa=t),this.af=t,this.ob()):n.value=e,this},l.set=function(t,e){return this.add(t,e)},l.addAll=function(t){if(t===null)return this;if(jt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.key,n.value)}else if(t instanceof ct)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},l.first=function(){return this.ba},ct.prototype.any=function(t){for(var e=this.ba;e!==null;){if(t(e))return!0;e=e.oa}return!1},ct.prototype.all=function(t){for(var e=this.ba;e!==null;){if(!t(e))return!1;e=e.oa}return!0},ct.prototype.each=function(t){for(var e=this.ba;e!==null;)t(e),e=e.oa;return this},ct.prototype.map=function(t){for(var e=new ct,i=this.ba;i!==null;)e.add(i.key,t(i)),i=i.oa;return e},ct.prototype.filter=function(t){for(var e=new ct,i=this.ba;i!==null;)t(i)&&e.add(i.key,i.value),i=i.oa;return e},l=ct.prototype,l.contains=function(t){var e=t;return at(t)&&(e=Ne(t),e===void 0)?!1:this.Ib[e]!==void 0},l.has=function(t){return this.contains(t)},l.H=function(t){var e=t;return at(t)&&(e=Ne(t),e===void 0)?null:(t=this.Ib[e],t===void 0?null:t.value)},l.get=function(t){return this.H(t)},l.remove=function(t){if(t===null)return!1;this.s&&et(this,t);var e=t;if(at(t)&&(e=Ne(t),e===void 0)||(t=this.Ib[e],t===void 0))return!1;var i=t.oa,n=t.Vl;return i!==null&&(i.Vl=n),n!==null&&(n.oa=i),this.ba===t&&(this.ba=i),this.af===t&&(this.af=n),delete this.Ib[e],this.Gb--,this.ob(),!0},l.delete=function(t){return this.remove(t)},l.clear=function(){this.s&&et(this),this.Ib={},this.Gb=0,this.Ha!==null&&this.Ha.reset(),this.$e!==null&&this.$e.reset(),this.af=this.ba=null,this.ob()},ct.prototype.copy=function(){var t=new ct,e=this.Ib,i;for(i in e){var n=e[i];t.add(n.key,n.value)}return t},ct.prototype.ma=function(){var t=this.Ib,e=Array(this.Gb),i=0,n;for(n in t){var r=t[n];e[i]=new wa(r.key,r.value),i++}return e},ct.prototype.Mf=function(){return new pe(this)},X.Object.defineProperties(ct.prototype,{count:{get:function(){return this.Gb}},size:{get:function(){return this.Gb}},iterator:{get:function(){if(0>=this.count)return Bn;var t=this.Ha;return t!==null?(t.reset(),t):new di(this)}},iteratorKeys:{get:function(){return 0>=this.count?Bn:new ii(this)}},iteratorValues:{get:function(){if(0>=this.count)return Bn;var t=this.$e;return t!==null?(t.reset(),t):new pi(this)}}}),ct.prototype.toKeySet=ct.prototype.Mf,ct.prototype.toArray=ct.prototype.ma,ct.prototype.clear=ct.prototype.clear,ct.prototype.delete=ct.prototype.delete,ct.prototype.remove=ct.prototype.remove,ct.prototype.get=ct.prototype.get,ct.prototype.getValue=ct.prototype.H,ct.prototype.has=ct.prototype.has,ct.prototype.contains=ct.prototype.contains,ct.prototype.first=ct.prototype.first,ct.prototype.addAll=ct.prototype.addAll,ct.prototype.set=ct.prototype.set,ct.prototype.add=ct.prototype.add,ct.prototype.thaw=ct.prototype.ea,ct.prototype.freeze=ct.prototype.freeze,ct.className="Map";function k(t,e){t===void 0?this.y=this.x=0:typeof t=="number"&&typeof e=="number"?(this.x=t,this.y=e):E("Invalid arguments to Point constructor: "+t+", "+e),this.s=!1}k.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},k.prototype.h=function(t,e){return this.x=t,this.y=e,this},k.prototype.Jg=function(t,e){return this.x=t,this.y=e,this},k.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},k.prototype.copy=function(){var t=new k;return t.x=this.x,t.y=this.y,t},l=k.prototype,l.ca=function(){return this.s=!0,Object.freeze(this),this},l.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this.s=!0,this},l.ea=function(){return Object.isFrozen(this)&&E("cannot thaw constant: "+this),this.s=!1,this};function lx(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new k(i,r)}return new k}function ux(t){return t.x.toString()+" "+t.y.toString()}l.toString=function(){return"Point("+this.x+","+this.y+")"},l.w=function(t){return t instanceof k?this.x===t.x&&this.y===t.y:!1},l.ej=function(t,e){return this.x===t&&this.y===e},l.Na=function(t){return j.A(this.x,t.x)&&j.A(this.y,t.y)},l.add=function(t){return this.x+=t.x,this.y+=t.y,this},l.ee=function(t){return this.x-=t.x,this.y-=t.y,this},l.offset=function(t,e){return this.x+=t,this.y+=e,this},k.prototype.rotate=function(t){if(t===0)return this;var e=this.x,i=this.y;if(e===0&&i===0)return this;if(360<=t?t-=360:0>t&&(t+=360),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));return this.x=t*e-n*i,this.y=n*e+t*i,this},l=k.prototype,l.scale=function(t,e){return this.x*=t,this.y*=e,this},l.Ge=function(t){var e=t.x-this.x;return t=t.y-this.y,e*e+t*t},l.rd=function(t,e){return t-=this.x,e-=this.y,t*t+e*e},l.normalize=function(){var t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return 0<i&&(this.x=t/i,this.y=e/i),this},l.Sa=function(t){return hx(t.x-this.x,t.y-this.y)},l.direction=function(t,e){return hx(t-this.x,e-this.y)};function hx(t,e){if(t===0)return 0<e?90:0>e?270:0;if(e===0)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var i=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i}l.OA=function(t,e,i,n){return j.Ph(t,e,i,n,this.x,this.y,this),this},l.PA=function(t,e){return j.Ph(t.x,t.y,e.x,e.y,this.x,this.y,this),this},l.$A=function(t,e,i,n){return j.Cq(this.x,this.y,t,e,i,n,this),this},l.aB=function(t,e){return j.Cq(this.x,this.y,t.x,t.y,e.width,e.height,this),this},l.sj=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},l.Qk=function(t,e,i,n,r){return this.x=t+r.x*i+r.offsetX,this.y=e+r.y*n+r.offsetY,this},l.transform=function(t){return t.sa(this),this};function gi(t,e){return e.Gd(t),t}function yi(t,e,i,n,r,o){var s=r-i,u=o-n,a=s*s+u*u;i-=t,n-=e;var f=-i*s-n*u;return 0>=f||f>=a?(s=r-t,u=o-e,Math.min(i*i+n*n,s*s+u*u)):(t=s*n-u*i,t*t/a)}function to(t,e,i,n){return t=i-t,e=n-e,t*t+e*e}function iy(t,e,i,n){return t=i-t,e=n-e,t===0?0<e?90:0>e?270:0:e===0?0<t?0:180:isNaN(t)||isNaN(e)?0:(n=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n)}l.u=function(){return isFinite(this.x)&&isFinite(this.y)},k.alloc=function(){var t=ny.pop();return t===void 0?new k:t},k.allocAt=function(t,e){var i=ny.pop();return i===void 0?new k(t,e):(i.x=t,i.y=e,i)},k.free=function(t){ny.push(t)},k.prototype.isReal=k.prototype.u,k.prototype.setSpot=k.prototype.Qk,k.prototype.setRectSpot=k.prototype.sj,k.prototype.snapToGridPoint=k.prototype.aB,k.prototype.snapToGrid=k.prototype.$A,k.prototype.projectOntoLineSegmentPoint=k.prototype.PA,k.prototype.projectOntoLineSegment=k.prototype.OA,k.intersectingLineSegments=function(t,e,i,n,r,o,s,u){return j.Kq(t,e,i,n,r,o,s,u)},k.prototype.direction=k.prototype.direction,k.prototype.directionPoint=k.prototype.Sa,k.prototype.normalize=k.prototype.normalize,k.prototype.distanceSquared=k.prototype.rd,k.prototype.distanceSquaredPoint=k.prototype.Ge,k.prototype.scale=k.prototype.scale,k.prototype.rotate=k.prototype.rotate,k.prototype.offset=k.prototype.offset,k.prototype.subtract=k.prototype.ee,k.prototype.add=k.prototype.add,k.prototype.equalsApprox=k.prototype.Na,k.prototype.equalTo=k.prototype.ej,k.prototype.equals=k.prototype.w,k.prototype.set=k.prototype.set,k.prototype.setTo=k.prototype.Jg;var Po=null,ax=null,fx=null,cx=null,Ma=null,ny=[];k.className="Point",k.parse=lx,k.stringify=ux,k.distanceLineSegmentSquared=yi,k.distanceSquared=to,k.direction=iy,k.Origin=Po=new k(0,0).ca(),k.InfiniteTopLeft=ax=new k(-Infinity,-Infinity).ca(),k.InfiniteBottomRight=fx=new k(Infinity,Infinity).ca(),k.SixPoint=cx=new k(6,6).ca(),k.NoPoint=Ma=new k(NaN,NaN).ca(),k.parse=lx,k.stringify=ux,k.distanceLineSegmentSquared=yi,k.distanceSquared=to,k.direction=iy;function pt(t,e){t===void 0?this.height=this.width=0:typeof t=="number"&&(0<=t||isNaN(t))&&typeof e=="number"&&(0<=e||isNaN(e))?(this.width=t,this.height=e):E("Invalid arguments to Size constructor: "+t+", "+e),this.s=!1}var Nu,Bc,ry,wl,px,dx,oy;pt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},pt.prototype.h=function(t,e){return this.width=t,this.height=e,this},pt.prototype.Jg=function(t,e){return this.width=t,this.height=e,this},pt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},pt.prototype.copy=function(){var t=new pt;return t.width=this.width,t.height=this.height,t},l=pt.prototype,l.ca=function(){return this.s=!0,Object.freeze(this),this},l.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this.s=!0,this},l.ea=function(){return Object.isFrozen(this)&&E("cannot thaw constant: "+this),this.s=!1,this};function gx(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;return(n=t[e++])&&(r=parseFloat(n)),new pt(i,r)}return new pt}function yx(t){return t.width.toString()+" "+t.height.toString()}l.toString=function(){return"Size("+this.width+","+this.height+")"},l.w=function(t){return t instanceof pt?this.width===t.width&&this.height===t.height:!1},l.ej=function(t,e){return this.width===t&&this.height===e},l.Na=function(t){return j.A(this.width,t.width)&&j.A(this.height,t.height)},l.u=function(){return isFinite(this.width)&&isFinite(this.height)},pt.alloc=function(){var t=mx.pop();return t===void 0?new pt:t},pt.free=function(t){mx.push(t)},pt.prototype.isReal=pt.prototype.u,pt.prototype.equalsApprox=pt.prototype.Na,pt.prototype.equalTo=pt.prototype.ej,pt.prototype.equals=pt.prototype.w,pt.prototype.set=pt.prototype.set,pt.prototype.setTo=pt.prototype.Jg;var mx=[];pt.className="Size",pt.parse=gx,pt.stringify=yx,pt.ZeroSize=Nu=new pt(0,0).ca(),pt.OneSize=Bc=new pt(1,1).ca(),pt.SixSize=ry=new pt(6,6).ca(),pt.EightSize=wl=new pt(8,8).ca(),pt.TenSize=px=new pt(10,10).ca(),pt.InfiniteSize=dx=new pt(Infinity,Infinity).ca(),pt.NoSize=oy=new pt(NaN,NaN).ca(),pt.parse=gx,pt.stringify=yx;function I(t,e,i,n){t===void 0?this.height=this.width=this.y=this.x=0:t instanceof k?(i=t.x,t=t.y,e instanceof k?(n=e.x,e=e.y,this.x=Math.min(i,n),this.y=Math.min(t,e),this.width=Math.abs(i-n),this.height=Math.abs(t-e)):e instanceof pt?(this.x=i,this.y=t,this.width=e.width,this.height=e.height):E("Incorrect arguments supplied to Rect constructor")):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&(0<=i||isNaN(i))&&typeof n=="number"&&(0<=n||isNaN(n))?(this.x=t,this.y=e,this.width=i,this.height=n):E("Invalid arguments to Rect constructor: "+t+", "+e+", "+i+", "+n),this.s=!1}l=I.prototype,l.assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},l.h=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this};function eo(t,e,i){t.width=e,t.height=i}l.Jg=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},l.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},l.Rc=function(t){return this.x=t.x,this.y=t.y,this},l.ZA=function(t){return this.width=t.width,this.height=t.height,this},I.prototype.copy=function(){var t=new I;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},l=I.prototype,l.ca=function(){return this.s=!0,Object.freeze(this),this},l.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this.s=!0,this},l.ea=function(){return Object.isFrozen(this)&&E("cannot thaw constant: "+this),this.s=!1,this};function vx(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;(n=t[e++])&&(r=parseFloat(n));for(var o=0;t[e]==="";)e++;(n=t[e++])&&(o=parseFloat(n));for(var s=0;t[e]==="";)e++;return(n=t[e++])&&(s=parseFloat(n)),new I(i,r,o,s)}return new I}function xx(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}l.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},l.w=function(t){return t instanceof I?this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height:!1},l.ej=function(t,e,i,n){return this.x===t&&this.y===e&&this.width===i&&this.height===n},l.Na=function(t){return j.A(this.x,t.x)&&j.A(this.y,t.y)&&j.A(this.width,t.width)&&j.A(this.height,t.height)};function sy(t,e){return j.aa(t.x,e.x)&&j.aa(t.y,e.y)&&j.aa(t.width,e.width)&&j.aa(t.height,e.height)}l.$=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},l.Ee=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},l.contains=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=e&&e+n<=this.y+this.height},l.offset=function(t,e){return this.x+=t,this.y+=e,this},l.Kc=function(t,e){return Rc(this,e,t,e,t)},l.qq=function(t){return Rc(this,t.top,t.right,t.bottom,t.left)},l.Jw=function(t){return Rc(this,-t.top,-t.right,-t.bottom,-t.left)},l.sA=function(t,e,i,n){return Rc(this,t,e,i,n)};function Rc(t,e,i,n,r){var o=t.width;return i+r<=-o?(t.x+=o/2,t.width=0):(t.x-=r,t.width+=i+r),i=t.height,e+n<=-i?(t.y+=i/2,t.height=0):(t.y-=e,t.height+=e+n),t}l.Ey=function(t){return wx(this,t.x,t.y,t.width,t.height)},l.$v=function(t,e,i,n){return wx(this,t,e,i,n)};function wx(t,e,i,n,r){var o=Math.max(t.x,e),s=Math.max(t.y,i);return e=Math.min(t.x+t.width,e+n),i=Math.min(t.y+t.height,i+r),t.x=o,t.y=s,t.width=Math.max(0,e-o),t.height=Math.max(0,i-s),t}l.Nc=function(t){return this.aw(t.x,t.y,t.width,t.height)},l.aw=function(t,e,i,n){var r=this.width,o=this.x;return r!==Infinity&&i!==Infinity&&(r+=o,i+=t,isNaN(i)||isNaN(r)||o>i||t>r)?!1:(t=this.height,i=this.y,!(t!==Infinity&&n!==Infinity&&(t+=i,n+=e,isNaN(n)||isNaN(t)||i>n||e>t)))};function Mx(t,e){var i=t.width,n=t.x,r=e.x-10;return n>e.width+10+10+r||r>i+n?!1:(i=t.height,t=t.y,n=e.y-10,!(t>e.height+10+10+n||n>i+t))}l.Oe=function(t){return Ue(this,t.x,t.y,0,0)},l.Tc=function(t){return Ue(this,t.x,t.y,t.width,t.height)},l.Rw=function(t,e,i,n){return i===void 0&&(i=0),n===void 0&&(n=0),Ue(this,t,e,i,n)};function Ue(t,e,i,n,r){var o=Math.min(t.x,e),s=Math.min(t.y,i);return e=Math.max(t.x+t.width,e+n),i=Math.max(t.y+t.height,i+r),t.x=o,t.y=s,t.width=e-o,t.height=i-s,t}l.Qk=function(t,e,i){return this.x=t-i.offsetX-i.x*this.width,this.y=e-i.offsetY-i.y*this.height,this};function Zn(t,e,i,n,r,o,s,u){return s===void 0&&(s=0),u===void 0&&(u=0),t<=r&&r+s<=t+i&&e<=o&&o+u<=e+n}function Sx(t,e,i,n,r,o,s,u){return t>s+r||r>i+t?!1:!(e>u+o||o>n+e)}l.u=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},l.yA=function(){return this.width===0&&this.height===0},I.alloc=function(){var t=ly.pop();return t===void 0?new I:t},I.allocAt=function(t,e,i,n){var r=ly.pop();return r===void 0?new I(t,e,i,n):r.h(t,e,i,n)},I.free=function(t){ly.push(t)},X.Object.defineProperties(I.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new k(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new pt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new k(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),I.prototype.isEmpty=I.prototype.yA,I.prototype.isReal=I.prototype.u,I.intersectsLineSegment=function(t,e,i,n,r,o,s,u){return j.Fy(t,e,i,n,r,o,s,u)},I.prototype.setSpot=I.prototype.Qk,I.prototype.union=I.prototype.Rw,I.prototype.unionRect=I.prototype.Tc,I.prototype.unionPoint=I.prototype.Oe,I.prototype.intersects=I.prototype.aw,I.prototype.intersectsRect=I.prototype.Nc,I.prototype.intersect=I.prototype.$v,I.prototype.intersectRect=I.prototype.Ey,I.prototype.grow=I.prototype.sA,I.prototype.subtractMargin=I.prototype.Jw,I.prototype.addMargin=I.prototype.qq,I.prototype.inflate=I.prototype.Kc,I.prototype.offset=I.prototype.offset,I.prototype.contains=I.prototype.contains,I.prototype.containsRect=I.prototype.Ee,I.prototype.containsPoint=I.prototype.$,I.prototype.equalsApprox=I.prototype.Na,I.prototype.equalTo=I.prototype.ej,I.prototype.equals=I.prototype.w,I.prototype.setSize=I.prototype.ZA,I.prototype.setPoint=I.prototype.Rc,I.prototype.set=I.prototype.set,I.prototype.setTo=I.prototype.Jg;var Fc=null,kx=null,ly=[];I.className="Rect",I.parse=vx,I.stringify=xx,I.contains=Zn,I.intersects=Sx,I.ZeroRect=Fc=new I(0,0,0,0).ca(),I.NoRect=kx=new I(NaN,NaN,NaN,NaN).ca(),I.parse=vx,I.stringify=xx,I.contains=Zn,I.intersects=Sx;function Rt(t,e,i,n){t===void 0?this.left=this.bottom=this.right=this.top=0:e===void 0?this.left=this.bottom=this.right=this.top=t:i===void 0?(this.top=t,this.right=e,this.bottom=t,this.left=e):n!==void 0?(this.top=t,this.right=e,this.bottom=i,this.left=n):E("Invalid arguments to Margin constructor: "+t+", "+e+", "+i+", "+n),this.s=!1}Rt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Rt.prototype.Jg=function(t,e,i,n){return this.top=t,this.right=e,this.bottom=i,this.left=n,this},Rt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Rt.prototype.copy=function(){var t=new Rt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},l=Rt.prototype,l.ca=function(){return this.s=!0,Object.freeze(this),this},l.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this.s=!0,this},l.ea=function(){return Object.isFrozen(this)&&E("cannot thaw constant: "+this),this.s=!1,this};function Px(t){if(typeof t=="string"){t=t.split(" ");for(var e=0,i=NaN;t[e]==="";)e++;var n=t[e++];if(n&&(i=parseFloat(n)),isNaN(i))return new Rt;for(var r=NaN;t[e]==="";)e++;if((n=t[e++])&&(r=parseFloat(n)),isNaN(r))return new Rt(i);for(var o=NaN;t[e]==="";)e++;if((n=t[e++])&&(o=parseFloat(n)),isNaN(o))return new Rt(i,r);for(var s=NaN;t[e]==="";)e++;return(n=t[e++])&&(s=parseFloat(n)),isNaN(s)?new Rt(i,r):new Rt(i,r,o,s)}return new Rt}function Nx(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}l.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},l.w=function(t){return t instanceof Rt?this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left:!1},l.ej=function(t,e,i,n){return this.top===t&&this.right===e&&this.bottom===i&&this.left===n},l.Na=function(t){return j.A(this.top,t.top)&&j.A(this.right,t.right)&&j.A(this.bottom,t.bottom)&&j.A(this.left,t.left)},l.u=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Rt.alloc=function(){var t=Cx.pop();return t===void 0?new Rt:t},Rt.free=function(t){Cx.push(t)},Rt.prototype.isReal=Rt.prototype.u,Rt.prototype.equalsApprox=Rt.prototype.Na,Rt.prototype.equalTo=Rt.prototype.ej,Rt.prototype.equals=Rt.prototype.w,Rt.prototype.set=Rt.prototype.set,Rt.prototype.setTo=Rt.prototype.Jg;var Tu=null,Tx=null,Cx=[];Rt.className="Margin",Rt.parse=Px,Rt.stringify=Nx,Rt.ZeroMargin=Tu=new Rt(0,0,0,0).ca(),Rt.TwoMargin=Tx=new Rt(2,2,2,2).ca(),Rt.parse=Px,Rt.stringify=Nx;function st(t,e,i,n){t===void 0?this.offsetY=this.offsetX=this.y=this.x=0:(e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=e,this.offsetX=i,this.offsetY=n),this.s=!1}var qe,mi,io,Cu,Sa,Wt,ka,Lu,Ml,Tr,ju,Du,Eu,Ou,uy,hy,ay,fy,cy,py,dy,gy,yy,my,vy,ni,Lx,jx,xy,Dx,wn,Mn,Gi,Sn,wy,My;st.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},st.prototype.Jg=function(t,e,i,n){return this.x=t,this.y=e,this.offsetX=i,this.offsetY=n,this},st.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},st.prototype.copy=function(){var t=new st;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},l=st.prototype,l.ca=function(){return this.s=!0,Object.freeze(this),this},l.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},l.freeze=function(){return this.s=!0,this},l.ea=function(){return Object.isFrozen(this)&&E("cannot thaw constant: "+this),this.s=!1,this};function hn(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Sy(t){if(typeof t=="string"){if(t=t.trim(),t==="None")return qe;if(t==="TopLeft")return mi;if(t==="Top"||t==="TopCenter"||t==="MiddleTop")return io;if(t==="TopRight")return Cu;if(t==="Left"||t==="LeftCenter"||t==="MiddleLeft")return Sa;if(t==="Center")return Wt;if(t==="Right"||t==="RightCenter"||t==="MiddleRight")return ka;if(t==="BottomLeft")return Lu;if(t==="Bottom"||t==="BottomCenter"||t==="MiddleBottom")return Ml;if(t==="BottomRight")return Tr;if(t==="TopSide")return ju;if(t==="LeftSide")return Du;if(t==="RightSide")return Eu;if(t==="BottomSide")return Ou;if(t==="TopBottomSides")return uy;if(t==="LeftRightSides")return hy;if(t==="TopLeftSides")return ay;if(t==="TopRightSides")return fy;if(t==="BottomLeftSides")return cy;if(t==="BottomRightSides")return py;if(t==="NotTopSide")return dy;if(t==="NotLeftSide")return gy;if(t==="NotRightSide")return yy;if(t==="NotBottomSide")return my;if(t==="AllSides")return vy;if(t==="Default")return ni;t=t.split(" ");for(var e=0,i=0;t[e]==="";)e++;var n=t[e++];n!==void 0&&0<n.length&&(i=parseFloat(n));for(var r=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(r=parseFloat(n));for(var o=0;t[e]==="";)e++;n=t[e++],n!==void 0&&0<n.length&&(o=parseFloat(n));for(var s=0;t[e]==="";)e++;return n=t[e++],n!==void 0&&0<n.length&&(s=parseFloat(n)),new st(i,r,o,s)}return new st}function Ex(t){return t.kb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}l.toString=function(){return this.kb()?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.w(qe)?"None":this.w(mi)?"TopLeft":this.w(io)?"Top":this.w(Cu)?"TopRight":this.w(Sa)?"Left":this.w(Wt)?"Center":this.w(ka)?"Right":this.w(Lu)?"BottomLeft":this.w(Ml)?"Bottom":this.w(Tr)?"BottomRight":this.w(ju)?"TopSide":this.w(Du)?"LeftSide":this.w(Eu)?"RightSide":this.w(Ou)?"BottomSide":this.w(uy)?"TopBottomSides":this.w(hy)?"LeftRightSides":this.w(ay)?"TopLeftSides":this.w(fy)?"TopRightSides":this.w(cy)?"BottomLeftSides":this.w(py)?"BottomRightSides":this.w(dy)?"NotTopSide":this.w(gy)?"NotLeftSide":this.w(yy)?"NotRightSide":this.w(my)?"NotBottomSide":this.w(vy)?"AllSides":this.w(ni)?"Default":"None"},l.w=function(t){return t instanceof st?(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY:!1},l.kw=function(){return new st(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},l.Gf=function(t){if(!this.Pc())return!1;if(!t.Pc())if(t.w(Lx))t=Du;else if(t.w(jx))t=Eu;else if(t.w(xy))t=ju;else if(t.w(Dx))t=Ou;else return!1;return t=t.offsetY,(this.offsetY&t)===t},l.kb=function(){return!isNaN(this.x)&&!isNaN(this.y)},l.nc=function(){return isNaN(this.x)||isNaN(this.y)},l.Pc=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===1&&this.offsetY!==0},l.Ut=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===0&&this.offsetY===0},l.Nb=function(){return isNaN(this.x)&&isNaN(this.y)&&this.offsetX===-1&&this.offsetY===0},st.alloc=function(){var t=Ox.pop();return t===void 0?new st:t},st.free=function(t){Ox.push(t)},st.prototype.isDefault=st.prototype.Nb,st.prototype.isNone=st.prototype.Ut,st.prototype.isSide=st.prototype.Pc,st.prototype.isNoSpot=st.prototype.nc,st.prototype.isSpot=st.prototype.kb,st.prototype.includesSide=st.prototype.Gf,st.prototype.opposite=st.prototype.kw,st.prototype.equals=st.prototype.w,st.prototype.set=st.prototype.set,st.prototype.setTo=st.prototype.Jg;var Ox=[];st.className="Spot",st.parse=Sy,st.stringify=Ex,st.None=qe=hn(new st(0,0,0,0),0).ca(),st.Default=ni=hn(new st(0,0,-1,0),-1).ca(),st.TopLeft=mi=new st(0,0,0,0).ca(),st.TopCenter=io=new st(.5,0,0,0).ca(),st.TopRight=Cu=new st(1,0,0,0).ca(),st.LeftCenter=Sa=new st(0,.5,0,0).ca(),st.Center=Wt=new st(.5,.5,0,0).ca(),st.RightCenter=ka=new st(1,.5,0,0).ca(),st.BottomLeft=Lu=new st(0,1,0,0).ca(),st.BottomCenter=Ml=new st(.5,1,0,0).ca(),st.BottomRight=Tr=new st(1,1,0,0).ca(),st.MiddleTop=wn=io,st.MiddleLeft=Mn=Sa,st.MiddleRight=Gi=ka,st.MiddleBottom=Sn=Ml,st.Top=xy=io,st.Left=Lx=Sa,st.Right=jx=ka,st.Bottom=Dx=Ml,st.TopSide=ju=hn(new st(0,0,1,1),1).ca(),st.LeftSide=Du=hn(new st(0,0,1,2),1).ca(),st.RightSide=Eu=hn(new st(0,0,1,4),1).ca(),st.BottomSide=Ou=hn(new st(0,0,1,8),1).ca(),st.TopBottomSides=uy=hn(new st(0,0,1,9),1).ca(),st.LeftRightSides=hy=hn(new st(0,0,1,6),1).ca(),st.TopLeftSides=ay=hn(new st(0,0,1,3),1).ca(),st.TopRightSides=fy=hn(new st(0,0,1,5),1).ca(),st.BottomLeftSides=cy=hn(new st(0,0,1,10),1).ca(),st.BottomRightSides=py=hn(new st(0,0,1,12),1).ca(),st.NotTopSide=dy=hn(new st(0,0,1,14),1).ca(),st.NotLeftSide=gy=hn(new st(0,0,1,13),1).ca(),st.NotRightSide=yy=hn(new st(0,0,1,11),1).ca(),st.NotBottomSide=my=hn(new st(0,0,1,7),1).ca(),st.AllSides=vy=hn(new st(0,0,1,15),1).ca(),wy=new st(.156,.156).ca(),My=new st(.844,.844).ca(),st.parse=Sy,st.stringify=Ex;function Nt(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}Nt.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Nt.prototype.copy=function(){var t=new Nt;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},l=Nt.prototype,l.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},l.w=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},l.St=function(){return this.dx===0&&this.dy===0&&this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1},l.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},l.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,i=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,r=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},l.hw=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*e,n=-t.m12*e,r=-t.m21*e,o=t.m11*e,s=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*i+this.m21*n,i=this.m12*i+this.m22*n,n=this.m11*r+this.m21*o,r=this.m12*r+this.m22*o,this.dx=this.m11*s+this.m21*t+this.dx,this.dy=this.m12*s+this.m22*t+this.dy,this.m11=e,this.m12=i,this.m21=n,this.m22=r,this},l.Rt=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,i=-this.m21*t,n=this.m11*t,r=t*(this.m21*this.dy-this.m22*this.dx),o=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=i,this.m22=n,this.dx=r,this.dy=o,this},Nt.prototype.rotate=function(t,e,i){if(360<=t?t-=360:0>t&&(t+=360),t===0)return this;if(this.translate(e,i),t===90){t=0;var n=1}else t===180?(t=-1,n=0):t===270?(t=0,n=-1):(n=t*Math.PI/180,t=Math.cos(n),n=Math.sin(n));var r=this.m12*t+this.m22*n,o=this.m11*-n+this.m21*t,s=this.m12*-n+this.m22*t;return this.m11=this.m11*t+this.m21*n,this.m12=r,this.m21=o,this.m22=s,this.translate(-e,-i),this},l=Nt.prototype,l.translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},l.scale=function(t,e){return e===void 0&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},l.sa=function(t){var e=t.x,i=t.y;return t.h(e*this.m11+i*this.m21+this.dx,e*this.m12+i*this.m22+this.dy)},l.Gd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=t.x,n=t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},l.ay=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),i=1.25*t.x,n=1.2*t.y;return t.h(i*this.m22*e+n*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),i*-this.m12*e+n*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},l.Pw=function(t){var e=t.x,i=t.y,n=e+t.width,r=i+t.height,o=this.m11,s=this.m12,u=this.m21,a=this.m22,f=this.dx,c=this.dy,d=e*o+i*u+f,g=e*s+i*a+c,m=n*o+i*u+f,y=n*s+i*a+c;return i=e*o+r*u+f,e=e*s+r*a+c,o=n*o+r*u+f,n=n*s+r*a+c,r=Math.min(d,m),d=Math.max(d,m),m=Math.min(g,y),g=Math.max(g,y),r=Math.min(r,i),d=Math.max(d,i),m=Math.min(m,e),g=Math.max(g,e),r=Math.min(r,o),d=Math.max(d,o),m=Math.min(m,n),g=Math.max(g,n),t.h(r,m,d-r,g-m),t},Nt.alloc=function(){var t=Ax.pop();return t===void 0?new Nt:t},Nt.free=function(t){Ax.push(t)},Nt.prototype.transformRect=Nt.prototype.Pw,Nt.prototype.transformPoint=Nt.prototype.sa,Nt.prototype.scale=Nt.prototype.scale,Nt.prototype.translate=Nt.prototype.translate,Nt.prototype.rotate=Nt.prototype.rotate,Nt.prototype.invert=Nt.prototype.Rt,Nt.prototype.multiplyInverted=Nt.prototype.hw,Nt.prototype.multiply=Nt.prototype.multiply,Nt.prototype.reset=Nt.prototype.reset,Nt.prototype.isIdentity=Nt.prototype.St,Nt.prototype.equals=Nt.prototype.w,Nt.prototype.set=Nt.prototype.set;var Ax=[];Nt.className="Transform",Nt.xF="54a702f3e53909c447824c6706603faf4c";var j={iB:"7da71ca0ad381e90",Lg:(Math.sqrt(2)-1)/3*4,jx:null,sqrt:function(t){if(0>=t)return 0;var e=j.jx;if(e===null){e=[];for(var i=0;2e3>=i;i++)e[i]=Math.sqrt(i);j.jx=e}return 1>t?(i=1/t,2e3>=i?1/e[i|0]:Math.sqrt(t)):2e3>=t?e[t|0]:Math.sqrt(t)},A:function(t,e){return t-=e,.5>t&&-.5<t},aa:function(t,e){return t-=e,5e-8>t&&-5e-8<t},Ob:function(t,e,i,n,r,o,s){if(0>=r&&(r=1e-6),t<i)var u=t,a=i;else u=i,a=t;if(e<n)var f=e,c=n;else f=n,c=e;if(t===i)return f<=s&&s<=c&&t-r<=o&&o<=t+r;if(e===n)return u<=o&&o<=a&&e-r<=s&&s<=e+r;if(a+=r,u-=r,u<=o&&o<=a&&(c+=r,f-=r,f<=s&&s<=c))if(a-u>c-f)if(t-i>r||i-t>r){if(o=(n-e)/(i-t)*(o-t)+e,o-r<=s&&s<=o+r)return!0}else return!0;else if(e-n>r||n-e>r){if(s=(i-t)/(n-e)*(s-e)+t,s-r<=o&&o<=s+r)return!0}else return!0;return!1},wt:function(t,e,i,n,r,o,s,u,a,f,c,d){if(j.Ob(t,e,s,u,d,i,n)&&j.Ob(t,e,s,u,d,r,o))return j.Ob(t,e,s,u,d,f,c);var g=(t+i)/2,m=(e+n)/2,y=(i+r)/2,x=(n+o)/2;r=(r+s)/2,o=(o+u)/2,n=(g+y)/2,i=(m+x)/2,y=(y+r)/2,x=(x+o)/2;var M=(n+y)/2,S=(i+x)/2;return j.wt(t,e,g,m,n,i,M,S,a,f,c,d)||j.wt(M,S,y,x,r,o,s,u,a,f,c,d)},yz:function(t,e,i,n,r,o,s,u,a){var f=(i+r)/2,c=(n+o)/2;return a.h((((t+i)/2+f)/2+(f+(r+s)/2)/2)/2,(((e+n)/2+c)/2+(c+(o+u)/2)/2)/2),a},xz:function(t,e,i,n,r,o,s,u){var a=(i+r)/2,f=(n+o)/2;return iy(((t+i)/2+a)/2,((e+n)/2+f)/2,(a+(r+s)/2)/2,(f+(o+u)/2)/2)},sm:function(t,e,i,n,r,o,s,u,a,f){if(j.Ob(t,e,s,u,a,i,n)&&j.Ob(t,e,s,u,a,r,o))Ue(f,t,e,0,0),Ue(f,s,u,0,0);else{var c=(t+i)/2,d=(e+n)/2,g=(i+r)/2,m=(n+o)/2;r=(r+s)/2,o=(o+u)/2,n=(c+g)/2,i=(d+m)/2,g=(g+r)/2,m=(m+o)/2;var y=(n+g)/2,x=(i+m)/2;j.sm(t,e,c,d,n,i,y,x,a,f),j.sm(y,x,g,m,r,o,s,u,a,f)}return f},De:function(t,e,i,n,r,o,s,u,a,f){if(j.Ob(t,e,s,u,a,i,n)&&j.Ob(t,e,s,u,a,r,o))f.length===0&&(f.push(t),f.push(e)),f.push(s),f.push(u);else{var c=(t+i)/2,d=(e+n)/2,g=(i+r)/2,m=(n+o)/2;r=(r+s)/2,o=(o+u)/2,n=(c+g)/2,i=(d+m)/2,g=(g+r)/2,m=(m+o)/2;var y=(n+g)/2,x=(i+m)/2;j.De(t,e,c,d,n,i,y,x,a,f),j.De(y,x,g,m,r,o,s,u,a,f)}return f},ow:function(t,e,i,n,r,o,s,u,a,f){if(j.Ob(t,e,r,o,f,i,n))return j.Ob(t,e,r,o,f,u,a);var c=(t+i)/2,d=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var g=(c+i)/2,m=(d+n)/2;return j.ow(t,e,c,d,g,m,s,u,a,f)||j.ow(g,m,i,n,r,o,s,u,a,f)},xB:function(t,e,i,n,r,o,s){return s.h(((t+i)/2+(i+r)/2)/2,((e+n)/2+(n+o)/2)/2),s},nw:function(t,e,i,n,r,o,s,u){if(j.Ob(t,e,r,o,s,i,n))Ue(u,t,e,0,0),Ue(u,r,o,0,0);else{var a=(t+i)/2,f=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var c=(a+i)/2,d=(f+n)/2;j.nw(t,e,a,f,c,d,s,u),j.nw(c,d,i,n,r,o,s,u)}return u},Uq:function(t,e,i,n,r,o,s,u){if(j.Ob(t,e,r,o,s,i,n))u.length===0&&(u.push(t),u.push(e)),u.push(r),u.push(o);else{var a=(t+i)/2,f=(e+n)/2;i=(i+r)/2,n=(n+o)/2;var c=(a+i)/2,d=(f+n)/2;j.Uq(t,e,a,f,c,d,s,u),j.Uq(c,d,i,n,r,o,s,u)}return u},sq:function(t,e,i,n,r,o,s,u,a,f,c,d,g,m){if(j.Ob(t,e,s,u,g,i,n)&&j.Ob(t,e,s,u,g,r,o)){if(t<a&&s<a&&t<c&&s<c||t>a&&s>a&&t>c&&s>c||e<f&&u<f&&e<d&&u<d||e>f&&u>f&&e>d&&u>d)return!1;var y=(t-s)*(f-d)-(e-u)*(a-c);if(y===0)return!1;if(g=((t*u-e*s)*(a-c)-(t-s)*(a*d-f*c))/y,y=((t*u-e*s)*(f-d)-(e-u)*(a*d-f*c))/y,(a>c?a-c:c-a)<(f>d?f-d:d-f)){if(e<u?s=e:(s=u,u=e),1e-5+y<s||y>u+1e-5)return!1}else if(t<s?u=t:(u=s,s=t),1e-5+g<u||g>s+1e-5)return!1;return m.h(g,y),!0}y=(t+i)/2;var x=(e+n)/2,M=(i+r)/2,S=(n+o)/2;r=(r+s)/2,o=(o+u)/2,n=(y+M)/2,i=(x+S)/2,M=(M+r)/2,S=(S+o)/2;var N=(n+M)/2,T=(i+S)/2,C=Infinity,D=!1,F=0,$=0;return j.sq(t,e,y,x,n,i,N,T,a,f,c,d,g,m)&&(t=(m.x-a)*(m.x-a)+(m.y-f)*(m.y-f),t<C&&(C=t,D=!0,F=m.x,$=m.y)),j.sq(N,T,M,S,r,o,s,u,a,f,c,d,g,m)&&(m.x-a)*(m.x-a)+(m.y-f)*(m.y-f)<C&&(D=!0,F=m.x,$=m.y),D&&(m.x=F,m.y=$),D},tq:function(t,e,i,n,r,o,s,u,a,f,c,d,g){var m=0;if(j.Ob(t,e,s,u,g,i,n)&&j.Ob(t,e,s,u,g,r,o)){if(g=(t-s)*(f-d)-(e-u)*(a-c),g===0)return m;var y=((t*u-e*s)*(a-c)-(t-s)*(a*d-f*c))/g,x=((t*u-e*s)*(f-d)-(e-u)*(a*d-f*c))/g;if(y>=c)return m;if((a>c?a-c:c-a)<(f>d?f-d:d-f)){if(e<u?(t=e,e=u):t=u,x<t||x>e)return m}else if(t<s?(e=t,t=s):e=s,y<e||y>t)return m;0<g?m++:0>g&&m--}else{y=(t+i)/2,x=(e+n)/2;var M=(i+r)/2,S=(n+o)/2;r=(r+s)/2,o=(o+u)/2,n=(y+M)/2,i=(x+S)/2,M=(M+r)/2,S=(S+o)/2;var N=(n+M)/2,T=(i+S)/2;m+=j.tq(t,e,y,x,n,i,N,T,a,f,c,d,g),m+=j.tq(N,T,M,S,r,o,s,u,a,f,c,d,g)}return m},Ph:function(t,e,i,n,r,o,s){return j.aa(t,i)?(e<n?(i=e,e=n):i=n,o<i?(s.h(t,i),!1):o>e?(s.h(t,e),!1):(s.h(t,o),!0)):j.aa(e,n)?(t<i?(n=t,t=i):n=i,r<n?(s.h(n,e),!1):r>t?(s.h(t,e),!1):(s.h(r,e),!0)):(r=((t-r)*(t-i)+(e-o)*(e-n))/((i-t)*(i-t)+(n-e)*(n-e)),-5e-6>r?(s.h(t,e),!1):1.000005<r?(s.h(i,n),!1):(s.h(t+r*(i-t),e+r*(n-e)),!0))},Ke:function(t,e,i,n,r,o,s,u,a){return j.A(t,i)&&j.A(e,n)?(a.h(t,e),!1):j.aa(r,s)?j.aa(t,i)?(j.Ph(t,e,i,n,r,o,a),!1):j.Ph(t,e,i,n,r,(n-e)/(i-t)*(r-t)+e,a):(u=(u-o)/(s-r),j.aa(t,i)?(i=u*(t-r)+o,e<n?(r=e,e=n):r=n,i<r?(a.h(t,r),!1):i>e?(a.h(t,e),!1):(a.h(t,i),!0)):(s=(n-e)/(i-t),j.aa(u,s)?(j.Ph(t,e,i,n,r,o,a),!1):(r=(s*t-u*r+o-e)/(s-u),j.aa(s,0)?(t<i?(n=t,t=i):n=i,r<n?(a.h(n,e),!1):r>t?(a.h(t,e),!1):(a.h(r,e),!0)):j.Ph(t,e,i,n,r,s*(r-t)+e,a))))},vB:function(t,e,i,n,r){return j.Ke(i.x,i.y,n.x,n.y,t.x,t.y,e.x,e.y,r)},tB:function(t,e,i,n,r,o,s,u,a,f){function c(M,S){var N=(M-t)*(M-t)+(S-e)*(S-e);N<d&&(d=N,a.h(M,S))}var d=Infinity;c(a.x,a.y);var g=0,m=0,y=0,x=0;if(r<s?(g=r,m=s):(g=s,m=r),o<u?(y=r,x=s):(y=s,x=r),g=(m-g)/2+f,f=(x-y)/2+f,r=(r+s)/2,o=(o+u)/2,g===0||f===0)return a;if(.5>(i>t?i-t:t-i)){if(g=1-(i-r)*(i-r)/(g*g),0>g)return a;g=Math.sqrt(g),n=-f*g+o,c(i,f*g+o),c(i,n)}else{if(i=(n-e)/(i-t),n=1/(g*g)+i*i/(f*f),u=2*i*(e-i*t)/(f*f)-2*i*o/(f*f)-2*r/(g*g),g=u*u-4*n*(2*i*t*o/(f*f)-2*e*o/(f*f)+o*o/(f*f)+r*r/(g*g)-1+(e-i*t)*(e-i*t)/(f*f)),0>g)return a;g=Math.sqrt(g),f=(-u+g)/(2*n),c(f,i*f-i*t+e),g=(-u-g)/(2*n),c(g,i*g-i*t+e)}return a},Ef:function(t,e,i,n,r,o,s,u,a){var f=1e21,c=t,d=e;if(j.Ke(t,e,t,n,r,o,s,u,a)){var g=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o);g<f&&(f=g,c=a.x,d=a.y)}return j.Ke(i,e,i,n,r,o,s,u,a)&&(g=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o),g<f&&(f=g,c=a.x,d=a.y)),j.Ke(t,e,i,e,r,o,s,u,a)&&(e=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o),e<f&&(f=e,c=a.x,d=a.y)),j.Ke(t,n,i,n,r,o,s,u,a)&&(t=(a.x-r)*(a.x-r)+(a.y-o)*(a.y-o),t<f&&(f=t,c=a.x,d=a.y)),a.h(c,d),1e21>f},sB:function(t,e,i,n,r,o,s,u,a){return i=t-i,s=r-s,i===0||s===0?i===0?(e=(o-u)/s,u=t,r=e*u+(o-e*r)):(o=(e-n)/i,u=r,r=o*u+(e-o*t)):(n=(e-n)/i,u=(o-u)/s,t=e-n*t,u=(o-u*r-t)/(n-u),r=n*u+t),a.h(u,r),a},Pt:function(t,e,i){return j.Fy(t.x,t.y,t.width,t.height,e.x,e.y,i.x,i.y)},Fy:function(t,e,i,n,r,o,s,u){var a=t+i,f=e+n;return r===s?(o<u?(s=o,o=u):s=u,t<=r&&r<=a&&s<=f&&o>=e):o===u?(r<s?(u=r,r=s):u=s,e<=o&&o<=f&&u<=a&&r>=t):!!(Zn(t,e,i,n,r,o)||Zn(t,e,i,n,s,u)||j.Kq(t,e,a,e,r,o,s,u)||j.Kq(a,e,a,f,r,o,s,u)||j.Kq(a,f,t,f,r,o,s,u)||j.Kq(t,f,t,e,r,o,s,u))},Kq:function(t,e,i,n,r,o,s,u){return 0>=j.zt(t,e,i,n,r,o)*j.zt(t,e,i,n,s,u)&&0>=j.zt(r,o,s,u,t,e)*j.zt(r,o,s,u,i,n)},zt:function(t,e,i,n,r,o){return i-=t,n-=e,t=r-t,e=o-e,o=t*n-e*i,o===0&&(o=t*i+e*n,0<o&&(o=(t-i)*i+(e-n)*n,0>o&&(o=0))),0>o?-1:0<o?1:0},Rq:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},iy:function(t,e,i,n,r,o){var s=Math.PI;o||(n*=s/180,r*=s/180);var u=n>r?-1:1;o=[];var a=s/2,f=n;if(n=Math.min(2*s,Math.abs(r-n)),1e-5>n)return a=f+u*Math.min(n,a),u=t+i*Math.cos(f),f=e+i*Math.sin(f),t+=i*Math.cos(a),e+=i*Math.sin(a),i=(u+t)/2,a=(f+e)/2,o.push([u,f,i,a,i,a,t,e]),o;for(;1e-5<n;)r=f+u*Math.min(n,a),o.push(j.Hz(i,f,r,t,e)),n-=Math.abs(r-f),f=r;return o},Hz:function(t,e,i,n,r){var o=(i-e)/2,s=t*Math.cos(o),u=t*Math.sin(o),a=-u,f=s*s+a*a,c=f+s*s+a*u;return f=4/3*(Math.sqrt(2*f*c)-c)/(s*u-a*s),u=s-f*a,s=a+f*s,a=-s,f=o+e,o=Math.cos(f),f=Math.sin(f),[n+t*Math.cos(e),r+t*Math.sin(e),n+u*o-s*f,r+u*f+s*o,n+u*o-a*f,r+u*f+a*o,n+t*Math.cos(i),r+t*Math.sin(i)]},Cq:function(t,e,i,n,r,o,s){i=Math.floor((t-i)/r)*r+i,n=Math.floor((e-n)/o)*o+n;var u=i;return i+r-t<r/2&&(u=i+r),t=n,n+o-e<o/2&&(t=n+o),s.h(u,t),s},vy:function(t,e){var i=Math.max(t,e);t=Math.min(t,e);var n;do e=i%t,i=n=t,t=e;while(0<e);return n},Mz:function(t,e,i,n){var r=0>i,o=0>n;if(t<e)var s=1,u=0;else s=0,u=1;var a=s===0?t:e,f=s===0?i:n;return(s===0?r:o)&&(f=-f),s=u,i=s===0?i:n,(s===0?r:o)&&(i=-i),j.Nz(a,s===0?t:e,f,i,0,0)},Nz:function(t,e,i,n,r,o){if(0<n)if(0<i){r=t*t,o=e*e,t*=i;var s=e*n,u=-o+s,a=-o+Math.sqrt(t*t+s*s);e=u;for(var f=0;9999999999>f&&(e=.5*(u+a),!(e===u||e===a));++f){var c=t/(e+r),d=s/(e+o);if(c=c*c+d*d-1,0<c)u=e;else if(0>c)a=e;else break}i=r*i/(e+r)-i,n=o*n/(e+o)-n,i=Math.sqrt(i*i+n*n)}else i=Math.abs(n-e);else n=t*t-e*e,o=t*i,o<n?(n=o/n,o=e*Math.sqrt(Math.abs(1-n*n)),i=t*n-i,i=Math.sqrt(i*i+o*o)):i=Math.abs(i-t);return i},Qe:new Qi,an:new Qi,Th:new Qi,Uh:0};j.za=j.iB;function Mt(t){Oe(this),this.s=!1,t===void 0&&(t=an),this.pa=t,this.oc=this.hc=this.fd=this.ed=0,this.Hj=new J,this.Xr=this.Hj.Aa,this.Fr=new I().freeze(),this.qa=!0,this.hn=this.Zk=null,this.jn=NaN,this.qf=mi,this.rf=Tr,this.Bl=this.Cl=NaN,this.Uf=ye}Mt.prototype.copy=function(){var t=new Mt;t.pa=this.pa,t.ed=this.ed,t.fd=this.fd,t.hc=this.hc,t.oc=this.oc;for(var e=this.Hj.j,i=e.length,n=t.Hj,r=0;r<i;r++){var o=e[r].copy();n.add(o)}return t.Xr=this.Xr,t.Fr.assign(this.Fr),t.qa=this.qa,t.Zk=this.Zk,t.hn=this.hn,t.jn=this.jn,t.qf=this.qf.G(),t.rf=this.rf.G(),t.Cl=this.Cl,t.Bl=this.Bl,t.Uf=this.Uf,t},l=Mt.prototype,l.ca=function(){return this.freeze(),Object.freeze(this),this},l.freeze=function(){this.s=!0;var t=this.figures;t.freeze(),t=t.j;for(var e=t.length,i=0;i<e;i++)t[i].freeze();return this},l.ea=function(){Object.isFrozen(this)&&E("cannot thaw constant: "+this),this.s=!1;var t=this.figures;t.ea(),t=t.j;for(var e=t.length,i=0;i<e;i++)t[i].ea();return this},l.Na=function(t){if(!(t instanceof Mt))return!1;if(this.type!==t.type)return this.type===He&&t.type===an?Ix(this,t):t.type===He&&this.type===an?Ix(t,this):!1;if(this.type===an){var e=this.figures.j;t=t.figures.j;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Na(t[n]))return!1;return!0}return j.A(this.startX,t.startX)&&j.A(this.startY,t.startY)&&j.A(this.endX,t.endX)&&j.A(this.endY,t.endY)};function Ix(t,e){return t.type!==He||e.type!==an?!1:!!(e.figures.count===1&&(e=e.figures.J(0),e.segments.count===1&&j.A(t.startX,e.startX)&&j.A(t.startY,e.startY)&&(e=e.segments.J(0),e.type===me&&j.A(t.endX,e.endX)&&j.A(t.endY,e.endY))))}function Bx(t){return t.toString()}l.jb=function(t){t.classType===Mt&&(this.type=t)},l.toString=function(t){switch(t===void 0&&(t=-1),this.type){case He:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case Rn:var e=new I(this.startX,this.startY,0,0);return e.Rw(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case yr:if(e=new I(this.startX,this.startY,0,0),e.Rw(this.endX,this.endY,0,0),0>t)return t=e.left.toString()+" "+(e.y+e.height/2).toString(),"M"+t+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+(e.right.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var i=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+i+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+(e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t))+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+i;case an:e="",i=this.figures.j;for(var n=i.length,r=0;r<n;r++){var o=i[r];0<r&&(e+=" x "),o.isFilled&&(e+="F "),e+=o.toString(t)}return e;default:return this.type.toString()}};function Au(t,e){function i(){return x>=C-1?!0:d[x+1].match(D)!==null}function n(){return x++,d[x]}function r(){var R=new k(parseFloat(n()),parseFloat(n()));return M===M.toLowerCase()&&(R.x=T.x+R.x,R.y=T.y+R.y),R}function o(){return T=r()}function s(){return N=r()}function u(){var R=S.toLowerCase();return R!=="c"&&R!=="s"&&R!=="q"&&R!=="t"?T:new k(2*T.x-N.x,2*T.y-N.y)}e===void 0&&(e=!1);var a=new RegExp("(["+Pa+"])(["+Pa+"])","gm"),f=new RegExp("(["+Pa+"])([^s])","gm"),c=new RegExp("([^s])(["+Pa+"])","gm");t=t.replace(/,/gm," "),t=t.replace(a,"$1 $2"),t=t.replace(a,"$1 $2"),t=t.replace(f,"$1 $2"),t=t.replace(c,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");var d=t.split(" ");for(t=0;t<d.length;t++)if(f=d[t],f.match(/(\.[0-9]*)(\.)/gm)!==null){a=Dt(),c="";for(var g=!1,m=0;m<f.length;m++){var y=f[m];y!=="."||g?y==="."?(a.push(c),c="."):c+=y:(g=!0,c+=y)}for(a.push(c),d.splice(t,1),f=0;f<a.length;f++)d.splice(t+f,0,a[f]);t+=a.length-1,Xt(a)}var x=-1,M="",S="";a=new k(0,0);var N=new k(0,0),T=new k(0,0),C=d.length;t=UM(null),c=f=!1,g=!0,m=null;for(var D=new RegExp("["+Pa+"]");!(x>=C-1);)if(S=M,M=n(),M!=="")switch(M.toUpperCase()){case"X":g=!0,c=f=!1;break;case"M":for(m=o(),t.ic===null||g===!0?(fh(t,m.x,m.y,f,!c),g=!1):t.moveTo(m.x,m.y),a=T;!i();)m=o(),t.lineTo(m.x,m.y);break;case"L":for(;!i();)m=o(),t.lineTo(m.x,m.y);break;case"H":for(;!i();)T=new k((M===M.toLowerCase()?T.x:0)+parseFloat(n()),T.y),t.lineTo(T.x,T.y);break;case"V":for(;!i();)T=new k(T.x,(M===M.toLowerCase()?T.y:0)+parseFloat(n())),t.lineTo(T.x,T.y);break;case"C":for(;!i();){m=r(),y=s();var F=o();Ro(t,m.x,m.y,y.x,y.y,F.x,F.y)}break;case"S":for(;!i();)m=u(),y=s(),F=o(),Ro(t,m.x,m.y,y.x,y.y,F.x,F.y);break;case"Q":for(;!i();)m=s(),y=o(),Ip(t,m.x,m.y,y.x,y.y);break;case"T":for(;!i();)N=m=u(),y=o(),Ip(t,m.x,m.y,y.x,y.y);break;case"B":for(;!i();){m=parseFloat(n()),y=parseFloat(n()),F=parseFloat(n());var $=parseFloat(n()),G=parseFloat(n()),nt=G,q=!1;i()||(nt=parseFloat(n()),i()||(q=parseFloat(n())!==0)),M===M.toLowerCase()&&(F+=T.x,$+=T.y),t.arcTo(m,y,F,$,G,nt,q)}break;case"A":for(;!i();)m=Math.abs(parseFloat(n())),y=Math.abs(parseFloat(n())),F=parseFloat(n()),G=$=!1,q=nt=0,nt=n(),nt.length===1?($=!!parseFloat(nt),G=!!parseFloat(n()),nt=parseFloat(n())):nt.length===2?($=!!parseFloat(nt[0]),G=!!parseFloat(nt[1]),nt=parseFloat(n())):($=!!parseFloat(nt[0]),G=!!parseFloat(nt[1]),nt=parseFloat(nt.slice(2))),q=parseFloat(n()),M===M.toLowerCase()&&(nt=T.x+nt,q=T.y+q),T.h(nt,q),mT(t,m,y,F,$,G,nt,q);break;case"Z":yT(t),T=a;break;case"F":for(m="",y=1;d[x+y];)if(d[x+y].match(/[Uu]/)!==null)y++;else if(d[x+y].match(D)===null)y++;else{m=d[x+y];break}m.match(/[Mm]/)?f=!0:0<t.ic.segments.length&&(t.ic.isFilled=!0);break;case"U":for(m="",y=1;d[x+y];)if(d[x+y].match(/[Ff]/)!==null)y++;else if(d[x+y].match(D)===null)y++;else{m=d[x+y];break}m.match(/[Mm]/)?c=!0:t.er(!1)}if(a=t.Jt,Bp=t,e)for(e=a.figures.iterator;e.next();)e.value.isFilled=!0;return a}function Rx(t,e){for(var i=t.length,n=k.alloc(),r=0;r<i;r++){var o=t[r];n.x=o[0],n.y=o[1],e.sa(n),o[0]=n.x,o[1]=n.y,n.x=o[2],n.y=o[3],e.sa(n),o[2]=n.x,o[3]=n.y,n.x=o[4],n.y=o[5],e.sa(n),o[4]=n.x,o[5]=n.y,n.x=o[6],n.y=o[7],e.sa(n),o[6]=n.x,o[7]=n.y}k.free(n)}l.ew=function(){if(this.qa||this.Xr!==this.figures.Aa)return!0;for(var t=this.figures.j,e=t.length,i=0;i<e;i++)if(t[i].ew())return!0;return!1},Mt.prototype.computeBounds=function(){this.qa=!1,this.hn=this.Zk=null,this.jn=NaN,this.Xr=this.figures.Aa;for(var t=this.figures.j,e=t.length,i=0;i<e;i++){var n=t[i];n.qa=!1;var r=n.segments;n.bt=r.Aa,n=r.j,r=n.length;for(var o=0;o<r;o++){var s=n[o];s.qa=!1,s.Se=null}}t=this.Fr,t.ea(),isNaN(this.Cl)||isNaN(this.Bl)?t.h(0,0,0,0):t.h(0,0,this.Cl,this.Bl),Fx(this,t,!1),Ue(t,0,0,0,0),t.freeze()},Mt.prototype.hy=function(){var t=new I;return Fx(this,t,!0),t};function Fx(t,e,i){switch(t.type){case He:case Rn:case yr:i?e.h(t.ed,t.fd,0,0):Ue(e,t.ed,t.fd,0,0),Ue(e,t.hc,t.oc,0,0);break;case an:var n=t.figures;t=n.j,n=n.length;for(var r=0;r<n;r++){var o=t[r];i&&r===0?e.h(o.startX,o.startY,0,0):Ue(e,o.startX,o.startY,0,0);for(var s=o.segments.j,u=s.length,a=o.startX,f=o.startY,c=0;c<u;c++){var d=s[c];switch(d.type){case me:case Fn:a=d.endX,f=d.endY,Ue(e,a,f,0,0);break;case fn:j.sm(a,f,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.5,e),a=d.endX,f=d.endY;break;case mr:j.nw(a,f,d.point1X,d.point1Y,d.endX,d.endY,.5,e),a=d.endX,f=d.endY;break;case ri:case Jn:var g=d.type===ri?no(d,o):Rs(d,o,a,f),m=g.length;if(m===0){a=d.centerX,f=d.centerY,Ue(e,a,f,0,0);break}d=null;for(var y=0;y<m;y++)d=g[y],j.sm(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,e);d!==null&&(a=d[6],f=d[7]);break;default:E("Unknown Segment type: "+d.type)}}}break;default:E("Unknown Geometry type: "+t.type)}}Mt.prototype.normalize=function(){this.s&&et(this);var t=this.hy();return this.offset(-t.x,-t.y),new k(-t.x,-t.y)},Mt.prototype.offset=function(t,e){return this.s&&et(this),this.transform(1,0,0,1,t,e),this},Mt.prototype.scale=function(t,e){return this.s&&et(this),this.transform(t,0,0,e,0,0),this},Mt.prototype.rotate=function(t,e,i){this.s&&et(this),e===void 0&&(e=0),i===void 0&&(i=0);var n=Nt.alloc();return n.reset(),n.rotate(t,e,i),this.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Nt.free(n),this},l=Mt.prototype,l.transform=function(t,e,i,n,r,o){switch(this.type){case He:case Rn:case yr:var s=this.ed,u=this.fd;this.ed=s*t+u*i+r,this.fd=s*e+u*n+o,s=this.hc,u=this.oc,this.hc=s*t+u*i+r,this.oc=s*e+u*n+o;break;case an:for(var a=this.figures.j,f=a.length,c=0;c<f;c++){var d=a[c];s=d.startX,u=d.startY,d.startX=s*t+u*i+r,d.startY=s*e+u*n+o,d=d.segments.j;for(var g=d.length,m=0;m<g;m++){var y=d[m];switch(y.type){case me:case Fn:s=y.endX,u=y.endY,y.endX=s*t+u*i+r,y.endY=s*e+u*n+o;break;case fn:s=y.point1X,u=y.point1Y,y.point1X=s*t+u*i+r,y.point1Y=s*e+u*n+o,s=y.point2X,u=y.point2Y,y.point2X=s*t+u*i+r,y.point2Y=s*e+u*n+o,s=y.endX,u=y.endY,y.endX=s*t+u*i+r,y.endY=s*e+u*n+o;break;case mr:s=y.point1X,u=y.point1Y,y.point1X=s*t+u*i+r,y.point1Y=s*e+u*n+o,s=y.endX,u=y.endY,y.endX=s*t+u*i+r,y.endY=s*e+u*n+o;break;case ri:s=y.centerX,u=y.centerY,y.centerX=s*t+u*i+r,y.centerY=s*e+u*n+o,e!==0&&(s=180*Math.atan2(e,t)/Math.PI,0>s&&(s+=360),y.startAngle+=s),0>t&&(y.startAngle=180-y.startAngle,y.sweepAngle=-y.sweepAngle),0>n&&(y.startAngle=-y.startAngle,y.sweepAngle=-y.sweepAngle),y.radiusX*=Math.sqrt(t*t+i*i),y.radiusY!==void 0&&(y.radiusY*=Math.sqrt(e*e+n*n));break;case Jn:s=y.endX,u=y.endY,y.endX=s*t+u*i+r,y.endY=s*e+u*n+o,e!==0&&(s=180*Math.atan2(e,t)/Math.PI,0>s&&(s+=360),y.xAxisRotation+=s),0>t&&(y.xAxisRotation=180-y.xAxisRotation,y.isClockwiseArc=!y.isClockwiseArc),0>n&&(y.xAxisRotation=-y.xAxisRotation,y.isClockwiseArc=!y.isClockwiseArc),y.radiusX*=Math.sqrt(t*t+i*i),y.radiusY*=Math.sqrt(e*e+n*n);break;default:E("Unknown Segment type: "+y.type)}}}}return this.qa=!0,this},l.$=function(t,e){e===void 0&&(e=0);var i=this.ed,n=this.fd,r=this.hc,o=this.oc;switch(this.type){case He:return j.Ob(i,n,r,o,e,t.x,t.y);case Rn:var s=I.allocAt(Math.min(i,r)-e,Math.min(n,o)-e,Math.abs(r-i)+2*e,Math.abs(o-n)+2*e);return t=s.$(t),I.free(s),t;case yr:s=Math.min(i,r)-e;var u=Math.min(n,o)-e;return i=(Math.abs(r-i)+2*e)/2,e=(Math.abs(o-n)+2*e)/2,0>=i||0>=e?!1:(s=t.x-(s+i),u=t.y-(u+e),1>=s*s/(i*i)+u*u/(e*e));case an:return ky(this,t,e,!0,!1);default:return!1}};function ky(t,e,i,n,r){var o=e.x;e=e.y;for(var s=t.bounds.x-20,u=0,a,f,c,d,g=t.figures.j,m=g.length,y=0;y<m;y++){var x=g[y];if(x.isFilled){if(n&&x.$(o,e,i))return!0;var M=x.segments;a=x.startX,f=x.startY;for(var S=a,N=f,T=M.j,C=0;C<=M.length;C++){var D=void 0;if(C!==M.length){D=T[C];var F=D.type;t=D.endX,d=D.endY}else F=me,t=S,d=N;switch(F){case Fn:if(S=Vc(o,e,s,e,a,f,S,N),isNaN(S))return!0;u+=S,S=t,N=d;break;case me:if(a=Vc(o,e,s,e,a,f,t,d),isNaN(a))return!0;u+=a;break;case fn:c=j.tq(a,f,D.point1X,D.point1Y,D.point2X,D.point2Y,t,d,s,e,o,e,.5),u+=c;break;case mr:c=j.tq(a,f,(a+2*D.point1X)/3,(f+2*D.point1Y)/3,(2*D.point1X+t)/3,(2*D.point1Y+d)/3,t,d,s,e,o,e,.5),u+=c;break;case ri:case Jn:F=D.type===ri?no(D,x):Rs(D,x,a,f);var $=F.length;if($===0){if(a=Vc(o,e,s,e,a,f,D.centerX,D.centerY),isNaN(a))return!0;u+=a;break}D=null;for(var G=0;G<$;G++){if(D=F[G],G===0){if(c=Vc(o,e,s,e,a,f,D[0],D[1]),isNaN(c))return!0;u+=c}c=j.tq(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],s,e,o,e,.5),u+=c}D!==null&&(t=D[6],d=D[7]);break;default:E("Unknown Segment type: "+D.type)}a=t,f=d}if(u!==0)return!0;u=0}else if(x.$(o,e,r?i:i+2))return!0}return u!==0}function Vc(t,e,i,n,r,o,s,u){if(j.Ob(r,o,s,u,.05,t,e))return NaN;var a=(t-i)*(o-u);if(a===0)return 0;var f=((t*n-e*i)*(r-s)-(t-i)*(r*u-o*s))/a;if(e=(t*n-e*i)*(o-u)/a,f>=t)return 0;if((r>s?r-s:s-r)<(o>u?o-u:u-o)){if(o<u){if(e<o||e>u)return 0}else if(e<u||e>o)return 0}else if(r<s){if(f<r||f>s)return 0}else if(f<s||f>r)return 0;return 0<a?1:-1}function Vx(t,e,i,n){t=t.figures.j;for(var r=t.length,o=0;o<r;o++)if(t[o].$(e,i,n))return!0;return!1}l.Vv=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=new k),this.type===He)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,s=0,u=0;u<r;u++){var a=n[u],f=a.length;for(t=0;t<f;t++){var c=a[t];if(s+c>=o)return n=o-s,n=c===0?0:n/c,i=i[u],u=i[2*t],r=i[2*t+1],e.h(u+(i[2*t+2]-u)*n,r+(i[2*t+3]-r)*n),e;s+=c}}return e},l.wy=function(t){if(0>t?t=0:1<t&&(t=1),this.type===He)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,i=this.flattenedLengths,n=e.length,r=this.flattenedTotalLength*t,o=0,s=0;s<n;s++){var u=i[s],a=u.length;for(t=0;t<a;t++){var f=u[t];if(o+f>=r)return r=e[s],e=r[2*t],i=r[2*t+1],n=r[2*t+2],t=r[2*t+3],1>Math.abs(n-e)&&1>Math.abs(t-i)?0:1>Math.abs(n-e)?0<=t-i?90:270:1>Math.abs(t-i)?0<=n-e?0:180:180*Math.atan2(t-i,n-e)/Math.PI;o+=f}}return NaN},l.Wv=function(t,e){if(0>t?t=0:1<t&&(t=1),e===void 0&&(e=[]),e.length=3,this.type===He)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var i=this.flattenedSegments,n=this.flattenedLengths,r=i.length,o=this.flattenedTotalLength*t,s=0,u=0;u<r;u++){var a=n[u],f=a.length;for(t=0;t<f;t++){var c=a[t];if(s+c>=o)return n=o-s,n=c===0?0:n/c,c=i[u],i=c[2*t],u=c[2*t+1],r=c[2*t+2],t=c[2*t+3],e[0]=i+(r-i)*n,e[1]=u+(t-u)*n,e[2]=1>Math.abs(r-i)&&1>Math.abs(t-u)?0:1>Math.abs(r-i)?0<=t-u?90:270:1>Math.abs(t-u)?0<=r-i?0:180:180*Math.atan2(t-u,r-i)/Math.PI,e;s+=c}}return e},l.xy=function(t){if(this.type===He){var e=this.startX,i=this.startY,n=this.endX,r=this.endY;if(e!==n||i!==r){var o=t.x;if(t=t.y,e===n){if(i<r){var s=i;n=r}else s=r,n=i;return t<=s?s===i?0:1:t>=n?n===i?0:1:Math.abs(t-i)/(n-s)}if(i===r)return e<n?s=e:(s=n,n=e),o<=s?s===e?0:1:o>=n?n===e?0:1:Math.abs(o-e)/(n-s);s=(n-e)*(n-e)+(r-i)*(r-i);var u=k.alloc();return j.Ph(e,i,n,r,o,t,u),t=u.x,o=u.y,k.free(u),Math.sqrt(((t-e)*(t-e)+(o-i)*(o-i))/s)}}else if(this.type===Rn){s=this.startX,u=this.startY;var a=this.endX;if(r=this.endY,s!==a||u!==r){e=a-s,i=r-u,o=2*e+2*i,n=t.x,t=t.y,n=Math.min(Math.max(n,s),a),t=Math.min(Math.max(t,u),r),s=Math.abs(n-s),a=Math.abs(n-a),u=Math.abs(t-u),r=Math.abs(t-r);var f=Math.min(s,a,u,r);if(f===u)return n/o;if(f===a)return(e+t)/o;if(f===r)return(2*e+i-n)/o;if(f===s)return(2*e+2*i-t)/o}}else{e=this.flattenedSegments,i=this.flattenedLengths,o=this.flattenedTotalLength,n=k.alloc(),r=Infinity,u=s=0,a=e.length;for(var c=f=0,d=0;d<a;d++)for(var g=e[d],m=i[d],y=g.length,x=0;x<y;x+=2){var M=g[x],S=g[x+1];if(x!==0){j.Ph(f,c,M,S,t.x,t.y,n);var N=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y);N<r&&(r=N,s=u,s+=Math.sqrt((n.x-f)*(n.x-f)+(n.y-c)*(n.y-c))),u+=m[(x-2)/2]}f=M,c=S}return k.free(n),t=s/o,0>t?0:1<t?1:t}return 0};function zx(t){if(t.Zk===null){var e=t.Zk=[],i=t.hn=[],n=[],r=[];if(t.type===He)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.endY),e.push(n),r.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),i.push(r);else if(t.type===Rn)n.push(t.startX),n.push(t.startY),n.push(t.endX),n.push(t.startY),n.push(t.endX),n.push(t.endY),n.push(t.startX),n.push(t.endY),n.push(t.startX),n.push(t.startY),e.push(n),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),r.push(Math.abs(t.startX-t.endX)),r.push(Math.abs(t.startY-t.endY)),i.push(r);else if(t.type===yr){var o=new be;o.startX=t.endX,o.startY=(t.startY+t.endY)/2;var s=new Ht(ri);if(s.startAngle=0,s.sweepAngle=360,s.centerX=(t.startX+t.endX)/2,s.centerY=(t.startY+t.endY)/2,s.radiusX=Math.abs(t.startX-t.endX)/2,s.radiusY=Math.abs(t.startY-t.endY)/2,o.add(s),t=no(s,o),r=t.length,r===0)n.push(s.centerX),n.push(s.centerY);else{s=o.startX,o=o.startY;for(var u=0;u<r;u++){var a=t[u];j.De(s,o,a[2],a[3],a[4],a[5],a[6],a[7],.5,n),s=a[6],o=a[7]}}e.push(n),i.push(Py(n))}else for(t=t.figures.iterator;t.next();){r=t.value,n=[],n.push(r.startX),n.push(r.startY),s=r.startX,o=r.startY,u=s,a=o;for(var f=r.segments.j,c=f.length,d=0;d<c;d++){var g=f[d];switch(g.type){case Fn:4<=n.length&&(e.push(n),i.push(Py(n))),n=[],n.push(g.endX),n.push(g.endY),s=g.endX,o=g.endY,u=s,a=o;break;case me:n.push(g.endX),n.push(g.endY),s=g.endX,o=g.endY;break;case fn:j.De(s,o,g.point1X,g.point1Y,g.point2X,g.point2Y,g.endX,g.endY,.5,n),s=g.endX,o=g.endY;break;case mr:j.Uq(s,o,g.point1X,g.point1Y,g.endX,g.endY,.5,n),s=g.endX,o=g.endY;break;case ri:var m=no(g,r),y=m.length;if(y===0){n.push(g.centerX),n.push(g.centerY),s=g.centerX,o=g.centerY;break}for(var x=0;x<y;x++){var M=m[x];j.De(s,o,M[2],M[3],M[4],M[5],M[6],M[7],.5,n),s=M[6],o=M[7]}break;case Jn:if(m=Rs(g,r,s,o),y=m.length,y===0){n.push(g.centerX),n.push(g.centerY),s=g.centerX,o=g.centerY;break}for(x=0;x<y;x++)M=m[x],j.De(s,o,M[2],M[3],M[4],M[5],M[6],M[7],.5,n),s=M[6],o=M[7];break;default:E("Segment not of valid type: "+g.type)}g.isClosed&&(n.push(u),n.push(a))}4<=n.length&&(e.push(n),i.push(Py(n)))}}}function Py(t){for(var e=[],i=0,n=0,r=t.length,o=0;o<r;o+=2){var s=t[o],u=t[o+1];o!==0&&e.push(Math.sqrt(to(i,n,s,u))),i=s,n=u}return e}l.add=function(t){return this.Hj.add(t),this},l.Wm=function(t,e,i,n,r,o,s,u){return this.s&&et(this),this.qf=new st(t,e,r,o).freeze(),this.rf=new st(i,n,s,u).freeze(),this},X.Object.defineProperties(Mt.prototype,{flattenedSegments:{get:function(){return zx(this),this.Zk}},flattenedLengths:{get:function(){return zx(this),this.hn}},flattenedTotalLength:{get:function(){var t=this.jn;if(isNaN(t)){if(this.type===He){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===Rn)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else{e=this.flattenedLengths;for(var i=e.length,n=t=0;n<i;n++)for(var r=e[n],o=r.length,s=0;s<o;s++)t+=r[s]}this.jn=t}return t}},type:{get:function(){return this.pa},set:function(t){this.pa!==t&&(this.s&&et(this,t),this.pa=t,this.qa=!0)}},startX:{get:function(){return this.ed},set:function(t){this.ed!==t&&(this.s&&et(this,t),this.ed=t,this.qa=!0)}},startY:{get:function(){return this.fd},set:function(t){this.fd!==t&&(this.s&&et(this,t),this.fd=t,this.qa=!0)}},endX:{get:function(){return this.hc},set:function(t){this.hc!==t&&(this.s&&et(this,t),this.hc=t,this.qa=!0)}},endY:{get:function(){return this.oc},set:function(t){this.oc!==t&&(this.s&&et(this,t),this.oc=t,this.qa=!0)}},figures:{get:function(){return this.Hj},set:function(t){this.Hj!==t&&(this.s&&et(this,t),this.Hj=t,this.qa=!0)}},spot1:{get:function(){return this.qf},set:function(t){this.s&&et(this,t),this.qf=t.G()}},spot2:{get:function(){return this.rf},set:function(t){this.s&&et(this,t),this.rf=t.G()}},defaultStretch:{get:function(){return this.Uf},set:function(t){this.s&&et(this,t),this.Uf=t}},bounds:{get:function(){return this.ew()&&this.computeBounds(),this.Fr}}}),Mt.prototype.setSpots=Mt.prototype.Wm,Mt.prototype.add=Mt.prototype.add,Mt.prototype.getFractionForPoint=Mt.prototype.xy,Mt.prototype.getPointAndAngleAlongPath=Mt.prototype.Wv,Mt.prototype.getAngleAlongPath=Mt.prototype.wy,Mt.prototype.getPointAlongPath=Mt.prototype.Vv,Mt.prototype.containsPoint=Mt.prototype.$,Mt.prototype.transform=Mt.prototype.transform,Mt.prototype.rotate=Mt.prototype.rotate,Mt.prototype.scale=Mt.prototype.scale,Mt.prototype.offset=Mt.prototype.offset,Mt.prototype.normalize=Mt.prototype.normalize,Mt.prototype.computeBoundsWithoutOrigin=Mt.prototype.hy,Mt.prototype.equalsApprox=Mt.prototype.Na;var He=new K(Mt,"Line",0),Rn=new K(Mt,"Rectangle",1),yr=new K(Mt,"Ellipse",2),an=new K(Mt,"Path",3),Pa="UuBbMmZzLlHhVvCcSsQqTtAaFfXx";Mt.className="Geometry",Mt.stringify=Bx,Mt.fillPath=function(t){t=t.split(/[Xx]/);for(var e=t.length,i="",n=0;n<e;n++){var r=t[n];i=r.match(/[Ff]/)!==null?n===0?i+r:i+("X"+(r[0]===" "?"":" ")+r):i+((n===0?"":"X ")+"F"+(r[0]===" "?"":" ")+r)}return i},Mt.parse=Au,Mt.Line=He,Mt.Rectangle=Rn,Mt.Ellipse=yr,Mt.Path=an;function be(t,e,i,n){Oe(this),this.sx=null,this.s=!1,i===void 0&&(i=!0),this.js=i,n===void 0&&(n=!0),this.os=n,t!==void 0?this.ed=t:this.ed=0,e!==void 0?this.fd=e:this.fd=0,this.am=new J,this.bt=this.am.Aa,this.qa=!0}be.prototype.copy=function(){var t=new be;t.js=this.js,t.os=this.os,t.ed=this.ed,t.fd=this.fd;for(var e=this.am.j,i=e.length,n=t.am,r=0;r<i;r++){var o=e[r].copy();n.add(o)}return t.bt=this.bt,t.qa=this.qa,t.sx=this.sx,t},l=be.prototype,l.Na=function(t){if(!(t instanceof be&&j.A(this.startX,t.startX)&&j.A(this.startY,t.startY)))return!1;var e=this.segments.j;t=t.segments.j;var i=e.length;if(i!==t.length)return!1;for(var n=0;n<i;n++)if(!e[n].Na(t[n]))return!1;return!0},l.toString=function(t){t===void 0&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),i=this.segments.j,n=i.length,r=0;r<n;r++)e+=" "+i[r].toString(t);return e},l.freeze=function(){this.s=!0;var t=this.segments;t.freeze();var e=t.j;t=t.length;for(var i=0;i<t;i++)e[i].freeze();return this},l.ea=function(){this.s=!1;var t=this.segments;t.ea(),t=t.j;for(var e=t.length,i=0;i<e;i++)t[i].ea();return this},l.ew=function(){if(this.qa)return!0;var t=this.segments;if(this.bt!==t.Aa)return!0;t=t.j;for(var e=t.length,i=0;i<e;i++)if(t[i].qa)return!0;return!1},l.add=function(t){return this.am.add(t),this},l.$=function(t,e,i){for(var n=this.startX,r=this.startY,o=n,s=r,u=this.segments.j,a=u.length,f=0;f<a;f++){var c=u[f];switch(c.type){case Fn:o=c.endX,s=c.endY,n=c.endX,r=c.endY;break;case me:if(j.Ob(n,r,c.endX,c.endY,i,t,e))return!0;n=c.endX,r=c.endY;break;case fn:if(j.wt(n,r,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.5,t,e,i))return!0;n=c.endX,r=c.endY;break;case mr:if(j.ow(n,r,c.point1X,c.point1Y,c.endX,c.endY,.5,t,e,i))return!0;n=c.endX,r=c.endY;break;case ri:case Jn:var d=c.type===ri?no(c,this):Rs(c,this,n,r),g=d.length;if(g===0){if(j.Ob(n,r,c.centerX,c.centerY,i,t,e))return!0;n=c.centerX,r=c.centerY;break}for(var m=null,y=0;y<g;y++)if(m=d[y],y===0&&j.Ob(n,r,m[0],m[1],i,t,e)||j.wt(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],.5,t,e,i))return!0;m!==null&&(n=m[6],r=m[7]);break;default:E("Unknown Segment type: "+c.type)}if(c.isClosed&&(n!==o||r!==s)&&j.Ob(n,r,o,s,i,t,e))return!0}return!1},X.Object.defineProperties(be.prototype,{isFilled:{get:function(){return this.js},set:function(t){this.s&&et(this,t),this.js=t}},isShadowed:{get:function(){return this.os},set:function(t){this.s&&et(this,t),this.os=t}},startX:{get:function(){return this.ed},set:function(t){this.s&&et(this,t),this.ed=t,this.qa=!0}},startY:{get:function(){return this.fd},set:function(t){this.s&&et(this,t),this.fd=t,this.qa=!0}},segments:{get:function(){return this.am},set:function(t){this.s&&et(this,t),this.am=t,this.qa=!0}}}),be.prototype.add=be.prototype.add,be.prototype.equalsApprox=be.prototype.Na,be.className="PathFigure";function Ht(t,e,i,n,r,o,s,u){Oe(this),this.s=!1,t===void 0&&(t=me),this.pa=t,e!==void 0?this.hc=e:this.hc=0,i!==void 0?this.oc=i:this.oc=0,n===void 0&&(n=0),r===void 0&&(r=0),o===void 0&&(o=0),s===void 0&&(s=0),t===Jn?(t=o%360,0>t&&(t+=360),this.Ae=t,this.Pi=0,this.Qi=Math.max(n,0),this.qh=Math.max(r,0),this.Kl=typeof s=="boolean"?s:typeof s=="number"?!!s:!1,this.cl=!!u):(this.Ae=n,this.Pi=r,t===ri&&(o=Math.max(o,0)),this.Qi=o,typeof s=="number"?(t===ri&&(s=Math.max(s,0)),this.qh=s):this.qh=0,this.cl=this.Kl=!1),this.Mj=!1,this.qa=!0,this.Se=null}Ht.prototype.copy=function(){var t=new Ht;return t.pa=this.pa,t.hc=this.hc,t.oc=this.oc,t.Ae=this.Ae,t.Pi=this.Pi,t.Qi=this.Qi,t.qh=this.qh,t.Kl=this.Kl,t.cl=this.cl,t.Mj=this.Mj,t.qa=this.qa,t},l=Ht.prototype,l.Na=function(t){if(!(t instanceof Ht)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case Fn:case me:return j.A(this.endX,t.endX)&&j.A(this.endY,t.endY);case fn:return j.A(this.endX,t.endX)&&j.A(this.endY,t.endY)&&j.A(this.point1X,t.point1X)&&j.A(this.point1Y,t.point1Y)&&j.A(this.point2X,t.point2X)&&j.A(this.point2Y,t.point2Y);case mr:return j.A(this.endX,t.endX)&&j.A(this.endY,t.endY)&&j.A(this.point1X,t.point1X)&&j.A(this.point1Y,t.point1Y);case ri:return j.A(this.startAngle,t.startAngle)&&j.A(this.sweepAngle,t.sweepAngle)&&j.A(this.centerX,t.centerX)&&j.A(this.centerY,t.centerY)&&j.A(this.radiusX,t.radiusX)&&j.A(this.radiusY,t.radiusY);case Jn:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&j.A(this.xAxisRotation,t.xAxisRotation)&&j.A(this.endX,t.endX)&&j.A(this.endY,t.endY)&&j.A(this.radiusX,t.radiusX)&&j.A(this.radiusY,t.radiusY);default:return!1}},l.jb=function(t){t.classType===Ht&&(this.type=t)},l.toString=function(t){switch(t===void 0&&(t=-1),this.type){case Fn:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case me:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case fn:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case mr:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case ri:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case Jn:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.Mj?"z":"")},l.freeze=function(){return this.s=!0,this},l.ea=function(){return this.s=!1,this},l.close=function(){return this.Mj=!0,this};function no(t,e){if(t.Se!==null&&e.qa===!1)return t.Se;var i=t.radiusX,n=t.radiusY;if(n===void 0&&(n=i),i===0||n===0)return t.Se=[],t.Se;e=t.Ae;var r=t.Pi,o=j.iy(0,0,i<n?i:n,t.startAngle,t.startAngle+t.sweepAngle,!1);if(i!==n){var s=Nt.alloc();s.reset(),i<n?s.scale(1,n/i):s.scale(i/n,1),Rx(o,s),Nt.free(s)}for(i=o.length,n=0;n<i;n++)s=o[n],s[0]+=e,s[1]+=r,s[2]+=e,s[3]+=r,s[4]+=e,s[5]+=r,s[6]+=e,s[7]+=r;return t.Se=o,t.Se}function Rs(t,e,i,n){function r(x,M,S,N){return(x*N<M*S?-1:1)*Math.acos((x*S+M*N)/(Math.sqrt(x*x+M*M)*Math.sqrt(S*S+N*N)))}if(t.Se!==null&&e.qa===!1)return t.Se;e=t.Qi;var o=t.qh;e===0&&(e=1e-4),o===0&&(o=1e-4);var s=Math.PI/180*t.Ae,u=t.Kl,a=t.cl,f=t.hc,c=t.oc,d=Math.cos(s),g=Math.sin(s),m=d*(i-f)/2+g*(n-c)/2;s=-g*(i-f)/2+d*(n-c)/2;var y=m*m/(e*e)+s*s/(o*o);return 1<y&&(e*=Math.sqrt(y),o*=Math.sqrt(y)),y=(u===a?-1:1)*Math.sqrt((e*e*o*o-e*e*s*s-o*o*m*m)/(e*e*s*s+o*o*m*m)),isNaN(y)&&(y=0),u=y*e*s/o,y=y*-o*m/e,isNaN(u)&&(u=0),isNaN(y)&&(y=0),i=(i+f)/2+d*u-g*y,n=(n+c)/2+g*u+d*y,c=r(1,0,(m-u)/e,(s-y)/o),d=(m-u)/e,f=(s-y)/o,m=(-m-u)/e,u=(-s-y)/o,s=r(d,f,m,u),m=(d*m+f*u)/(Math.sqrt(d*d+f*f)*Math.sqrt(m*m+u*u)),-1>=m?s=Math.PI:1<=m&&(s=0),!a&&0<s&&(s-=2*Math.PI),a&&0>s&&(s+=2*Math.PI),a=e>o?1:e/o,m=e>o?o/e:1,e=j.iy(0,0,e>o?e:o,c,c+s,!0),o=Nt.alloc(),o.reset(),o.translate(i,n),o.rotate(t.Ae,0,0),o.scale(a,m),Rx(e,o),Nt.free(o),t.Se=e,t.Se}X.Object.defineProperties(Ht.prototype,{isClosed:{get:function(){return this.Mj},set:function(t){this.Mj!==t&&(this.Mj=t,this.qa=!0)}},type:{get:function(){return this.pa},set:function(t){this.s&&et(this,t),this.pa=t,this.qa=!0}},endX:{get:function(){return this.hc},set:function(t){this.s&&et(this,t),this.hc=t,this.qa=!0}},endY:{get:function(){return this.oc},set:function(t){this.s&&et(this,t),this.oc=t,this.qa=!0}},point1X:{get:function(){return this.Ae},set:function(t){this.s&&et(this,t),this.Ae=t,this.qa=!0}},point1Y:{get:function(){return this.Pi},set:function(t){this.s&&et(this,t),this.Pi=t,this.qa=!0}},point2X:{get:function(){return this.Qi},set:function(t){this.s&&et(this,t),this.Qi=t,this.qa=!0}},point2Y:{get:function(){return this.qh},set:function(t){this.s&&et(this,t),this.qh=t,this.qa=!0}},centerX:{get:function(){return this.Ae},set:function(t){this.s&&et(this,t),this.Ae=t,this.qa=!0}},centerY:{get:function(){return this.Pi},set:function(t){this.s&&et(this,t),this.Pi=t,this.qa=!0}},radiusX:{get:function(){return this.Qi},set:function(t){0>t&&lt(t,">= zero",Ht,"radiusX"),this.s&&et(this,t),this.Qi=t,this.qa=!0}},radiusY:{get:function(){return this.qh},set:function(t){0>t&&lt(t,">= zero",Ht,"radiusY"),this.s&&et(this,t),this.qh=t,this.qa=!0}},startAngle:{get:function(){return this.hc},set:function(t){this.hc!==t&&(this.s&&et(this,t),t%=360,0>t&&(t+=360),this.hc=t,this.qa=!0)}},sweepAngle:{get:function(){return this.oc},set:function(t){this.s&&et(this,t),360<t&&(t=360),-360>t&&(t=-360),this.oc=t,this.qa=!0}},isClockwiseArc:{get:function(){return this.cl},set:function(t){this.s&&et(this,t),this.cl=t,this.qa=!0}},isLargeArc:{get:function(){return this.Kl},set:function(t){this.s&&et(this,t),this.Kl=t,this.qa=!0}},xAxisRotation:{get:function(){return this.Ae},set:function(t){t%=360,0>t&&(t+=360),this.s&&et(this,t),this.Ae=t,this.qa=!0}}}),Ht.prototype.equalsApprox=Ht.prototype.Na;var Fn=new K(Ht,"Move",0),me=new K(Ht,"Line",1),fn=new K(Ht,"Bezier",2),mr=new K(Ht,"QuadraticBezier",3),ri=new K(Ht,"Arc",4),Jn=new K(Ht,"SvgArc",4);Ht.className="PathSegment",Ht.Move=Fn,Ht.Line=me,Ht.Bezier=fn,Ht.QuadraticBezier=mr,Ht.Arc=ri,Ht.SvgArc=Jn;function Bi(){this.B=null,this.wv=new k(0,0).freeze(),this.Fu=new k(0,0).freeze(),this.xr=this.zs=0,this.yr=1,this.Bi="",this.qt=this.Rr=!1,this.Or=this.Ar=0,this.Qg=this.bs=this.ms=!1,this.Wr=null,this.lt=0,this.qd=this.kt=null}Bi.prototype.copy=function(){var t=new Bi;return this.clone(t)},Bi.prototype.clone=function(t){return t.B=this.B,t.wv.assign(this.viewPoint),t.Fu.assign(this.documentPoint),t.zs=this.zs,t.xr=this.xr,t.yr=this.yr,t.Bi=this.Bi,t.Rr=this.Rr,t.qt=this.qt,t.Ar=this.Ar,t.Or=this.Or,t.ms=this.ms,t.bs=this.bs,t.Qg=this.Qg,t.Wr=this.Wr,t.lt=this.lt,t.kt=this.kt,t.qd=this.qd,t},Bi.prototype.toString=function(){var t="^";return this.modifiers!==0&&(t+="M:"+this.modifiers),this.button!==0&&(t+="B:"+this.button),this.key!==""&&(t+="K:"+this.key),this.clickCount!==0&&(t+="C:"+this.clickCount),this.delta!==0&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),this.documentPoint!==null&&(t+="@"+this.documentPoint.toString()),t},Bi.prototype.Fq=function(t,e){var i=this.diagram;return i===null||Lw(i,this.event,t,e),e},Bi.prototype.mA=function(t,e){var i=this.diagram;return i===null||(Lw(i,this.event,t,e),e.assign(i.lu(e))),e},X.Object.defineProperties(Bi.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},viewPoint:{get:function(){return this.wv},set:function(t){this.wv.assign(t)}},documentPoint:{get:function(){return this.Fu},set:function(t){this.Fu.assign(t)}},modifiers:{get:function(){return this.zs},set:function(t){this.zs=t}},button:{get:function(){return this.xr},set:function(t){if(this.xr=t,this.event===null)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.yr},set:function(t){this.yr=t}},key:{get:function(){return this.Bi},set:function(t){this.Bi=t}},down:{get:function(){return this.Rr},set:function(t){this.Rr=t}},up:{get:function(){return this.qt},set:function(t){this.qt=t}},clickCount:{get:function(){return this.Ar},set:function(t){this.Ar=t}},delta:{get:function(){return this.Or},set:function(t){this.Or=t}},isMultiTouch:{get:function(){return this.ms},set:function(t){this.ms=t}},handled:{get:function(){return this.bs},set:function(t){this.bs=t}},bubbles:{get:function(){return this.Qg},set:function(t){this.Qg=t}},event:{get:function(){return this.Wr},set:function(t){this.Wr=t}},isTouchEvent:{get:function(){var t=Y.TouchEvent,e=this.event;return t&&e instanceof t?!0:(t=Y.PointerEvent)&&e instanceof t&&(e.pointerType==="touch"||e.pointerType==="pen")}},timestamp:{get:function(){return this.lt},set:function(t){this.lt=t}},targetDiagram:{get:function(){return this.kt},set:function(t){this.kt=t}},targetObject:{get:function(){return this.qd},set:function(t){this.qd=t}},control:{get:function(){return(this.modifiers&1)!=0},set:function(t){this.modifiers=t?this.modifiers|1:this.modifiers&-2}},shift:{get:function(){return(this.modifiers&4)!=0},set:function(t){this.modifiers=t?this.modifiers|4:this.modifiers&-5}},alt:{get:function(){return(this.modifiers&2)!=0},set:function(t){this.modifiers=t?this.modifiers|2:this.modifiers&-3}},meta:{get:function(){return(this.modifiers&8)!=0},set:function(t){this.modifiers=t?this.modifiers|8:this.modifiers&-9}},left:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&1)!=0:this.button===0},set:function(t){this.buttons=t?this.buttons|1:this.buttons&-2}},right:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&2)!=0:this.button===2},set:function(t){this.buttons=t?this.buttons|2:this.buttons&-3}},middle:{get:function(){var t=this.event;return t===null||t.type!=="mousedown"&&t.type!=="mouseup"&&t.type!=="pointerdown"&&t.type!=="pointerup"?(this.buttons&4)!=0:this.button===1},set:function(t){this.buttons=t?this.buttons|4:this.buttons&-5}}}),Bi.prototype.getMultiTouchDocumentPoint=Bi.prototype.mA,Bi.prototype.getMultiTouchViewPoint=Bi.prototype.Fq,Bi.className="InputEvent";function Sl(){this.B=null,this.Qa="",this.Js=this.it=null}Sl.prototype.copy=function(){var t=new Sl;return t.B=this.B,t.Qa=this.Qa,t.it=this.it,t.Js=this.Js,t},Sl.prototype.toString=function(){var t="*"+this.name;return this.subject!==null&&(t+=":"+this.subject.toString()),this.parameter!==null&&(t+="("+this.parameter.toString()+")"),t},X.Object.defineProperties(Sl.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},subject:{get:function(){return this.it},set:function(t){this.it=t}},parameter:{get:function(){return this.Js},set:function(t){this.Js=t}}}),Sl.className="DiagramEvent";function ae(){this.tn=le,this.hf=this.ys="",this.ap=this.bp=this.ip=this.jp=this.hp=this.B=this.bc=null}ae.prototype.clear=function(){this.ap=this.bp=this.ip=this.jp=this.hp=this.B=this.bc=null},ae.prototype.copy=function(){var t=new ae;t.tn=this.tn,t.ys=this.ys,t.hf=this.hf,t.bc=this.bc,t.B=this.B,t.hp=this.hp;var e=this.jp;return t.jp=at(e)&&typeof e.G=="function"?e.G():e,e=this.ip,t.ip=at(e)&&typeof e.G=="function"?e.G():e,e=this.bp,t.bp=at(e)&&typeof e.G=="function"?e.G():e,e=this.ap,t.ap=at(e)&&typeof e.G=="function"?e.G():e,t},ae.prototype.jb=function(t){t.classType===ae&&(this.change=t)},ae.prototype.toString=function(){var t="";return t=this.change===Qn?t+"* ":this.change===le?t+(this.model!==null?"!m":"!d"):t+((this.model!==null?"!m":"!d")+this.change),this.propertyName&&typeof this.propertyName=="string"&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===Qn?this.oldValue!==null&&(t+=" "+this.oldValue):(this.object!==null&&(t+=Xe(this.object)),this.oldValue!==null&&(t+="  old: "+Xe(this.oldValue)),this.oldParam!==null&&(t+=" "+this.oldParam),this.newValue!==null&&(t+="  new: "+Xe(this.newValue)),this.newParam!==null&&(t+=" "+this.newParam)),t},ae.prototype.H=function(t){return t?this.oldValue:this.newValue},ae.prototype.oA=function(t){return t?this.oldParam:this.newParam},ae.prototype.canUndo=function(){return this.model!==null||this.diagram!==null},ae.prototype.undo=function(){this.canUndo()&&(this.model!==null?this.model.changeState(this,!0):this.diagram!==null&&this.diagram.changeState(this,!0))},ae.prototype.canRedo=function(){return this.model!==null||this.diagram!==null},ae.prototype.redo=function(){this.canRedo()&&(this.model!==null?this.model.changeState(this,!1):this.diagram!==null&&this.diagram.changeState(this,!1))},X.Object.defineProperties(ae.prototype,{model:{get:function(){return this.bc},set:function(t){this.bc=t}},diagram:{get:function(){return this.B},set:function(t){this.B=t}},change:{get:function(){return this.tn},set:function(t){this.tn=t}},modelChange:{get:function(){return this.ys},set:function(t){this.ys=t}},propertyName:{get:function(){return this.hf},set:function(t){this.hf=t}},isTransactionFinished:{get:function(){return this.tn===Qn&&(this.hf==="CommittedTransaction"||this.hf==="FinishedUndo"||this.hf==="FinishedRedo")}},object:{get:function(){return this.hp},set:function(t){this.hp=t}},oldValue:{get:function(){return this.jp},set:function(t){this.jp=t}},oldParam:{get:function(){return this.ip},set:function(t){this.ip=t}},newValue:{get:function(){return this.bp},set:function(t){this.bp=t}},newParam:{get:function(){return this.ap},set:function(t){this.ap=t}}}),ae.prototype.redo=ae.prototype.redo,ae.prototype.canRedo=ae.prototype.canRedo,ae.prototype.undo=ae.prototype.undo,ae.prototype.canUndo=ae.prototype.canUndo,ae.prototype.getParam=ae.prototype.oA,ae.prototype.getValue=ae.prototype.H,ae.prototype.clear=ae.prototype.clear;var Qn=new K(ae,"Transaction",-1),le=new K(ae,"Property",0),Te=new K(ae,"Insert",1),Ce=new K(ae,"Remove",2);ae.className="ChangedEvent",ae.Transaction=Qn,ae.Property=le,ae.Insert=Te,ae.Remove=Ce;function Ye(){this.v=new J().freeze(),this.Qa="",this.l=!1}Ye.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(t!==void 0&&0<t){t=this.changes.count;for(var i=0;i<t;i++){var n=this.changes.J(i);n!==null&&(e+=`
  `+n.toString())}}return e},Ye.prototype.clear=function(){var t=this.changes;t.ea();for(var e=t.count-1;0<=e;e--){var i=t.J(e);i!==null&&i.clear()}t.clear(),t.freeze()},Ye.prototype.canUndo=function(){return this.isComplete},Ye.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.J(t);e!==null&&e.undo()}},Ye.prototype.canRedo=function(){return this.isComplete},Ye.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var i=this.changes.J(e);i!==null&&i.redo()}},Ye.prototype.lw=function(){if(this.isComplete){var t=this.changes;t.ea();for(var e=new ct,i=0;i<t.count;i++){var n=t.J(i);if(n!==null&&n.change===le&&n.object){var r=e.get(n.object);r||(r=new ct,e.set(n.object,r));var o=r.get(n.propertyName);o===null?r.set(n.propertyName,-1):(0<o&&t.Qc(o,null),r.set(n.propertyName,i))}}for(i=e=0;i<t.count;i++)n=t.J(i),n!==null&&(i>e&&t.Qc(e,n),e++);for(;t.length>e;)t.pop();t.freeze()}},X.Object.defineProperties(Ye.prototype,{changes:{get:function(){return this.v}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isComplete:{get:function(){return this.l},set:function(t){this.l=t}}}),Ye.prototype.optimize=Ye.prototype.lw,Ye.prototype.redo=Ye.prototype.redo,Ye.prototype.canRedo=Ye.prototype.canRedo,Ye.prototype.undo=Ye.prototype.undo,Ye.prototype.canUndo=Ye.prototype.canUndo,Ye.prototype.clear=Ye.prototype.clear,Ye.className="Transaction";function de(){this.dv=new W,this.nd=!1,this.I=new J().freeze(),this.Ud=-1,this.v=999,this.qe=!1,this.Lr=null,this.Xi=0,this.l=!1,this.we=new J().freeze(),this.Sl=new J,this.Mu=!0,this.Tu=this.ks=this.Xu=this.Wu=!1}de.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var i=this.nestedTransactionNames.count,n=0;n<i;n++)0<n&&(e+=" "),e+=this.nestedTransactionNames.J(n);if(e+="]",t!==void 0&&0<t)for(i=this.history.count,n=0;n<i;n++)e+=`
 `+this.history.J(n).toString(t-1);return e},de.prototype.clear=function(){var t=this.history;t.ea();for(var e=t.count-1;0<=e;e--){var i=t.J(e);i!==null&&i.clear()}t.clear(),this.Ud=-1,t.freeze(),this.qe=!1,this.Lr=null,this.Xi=0,this.we.ea(),this.we.clear(),this.we.freeze(),this.Sl.clear(),this.Tu=this.ks=this.Xu=this.Wu=!1},de.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},l=de.prototype,l.Xx=function(t){this.dv.add(t)},l.Ry=function(t){this.dv.remove(t)},l.xa=function(t){if(t===void 0&&(t=""),t===null&&(t=""),this.isUndoingRedoing)return!1;this.Mu===!0&&(this.Mu=!1,this.Xi++,this.isInternalTransaction||this.Cb("StartingFirstTransaction",t,this.currentTransaction),0<this.Xi&&this.Xi--),this.isEnabled&&(this.we.ea(),this.we.add(t),this.we.freeze(),this.currentTransaction===null?this.Sl.add(0):this.Sl.add(this.currentTransaction.changes.count)),this.Xi++;var e=this.transactionLevel===1;return e&&(this.isInternalTransaction||this.Cb("StartedTransaction",t,this.currentTransaction)),e},l.Wa=function(t){return t===void 0&&(t=""),Ux(this,!0,t)},l.Kf=function(){return Ux(this,!1,"")};function Ux(t,e,i){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&wt("Ending transaction without having started a transaction: "+i);var n=t.transactionLevel===1,r=t.currentTransaction;n&&e&&(t.isInternalTransaction||t.Cb("CommittingTransaction",i,r));var o=0;if(0<t.transactionLevel&&(t.Xi--,t.isEnabled)){var s=t.we.count;0<s&&(i===""&&(i=t.we.J(0)),t.we.ea(),t.we.cb(s-1),t.we.freeze()),s=t.Sl.count,0<s&&(o=t.Sl.J(s-1),t.Sl.cb(s-1))}if(n){if(e){if(t.ks=!1,r===null&&i!==""&&(r=t.currentTransaction),t.isEnabled&&r!==null){for(r.isComplete||(r.isComplete=!0,r.name=i),e=t.history,e.ea(),n=e.count-1;n>t.historyIndex;n--)o=e.J(n),o!==null&&o.clear(),e.cb(n),t.ks=!0;n=t.maxHistoryLength,0<=n&&(n===0?e.clear():e.count>=n&&(o=e.J(0),o!==null&&o.clear(),e.cb(0),t.Ud--)),n===0||e.count!==0&&e.get(e.count-1)===r||(e.add(r),t.Ud++),e.freeze()}t.isInternalTransaction||t.Cb("CommittedTransaction",i,r)}else{t.qe=!0;try{t.isEnabled&&r!==null&&(r.isComplete=!0,r.undo())}finally{t.isInternalTransaction||t.Cb("RolledBackTransaction",i,r),t.qe=!1}r!==null&&r.clear()}return t.Lr=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&r!==null){for(t=o,i=r.changes,r=i.count-1;r>=t;r--)e=i.J(r),e!==null&&e.undo(),i.ea(),i.cb(r);i.freeze()}return!1}de.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!!(t!==null&&t.canUndo())},de.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.qe=!0,this.Cb("StartingUndo","Undo",t),this.Ud--,t.undo()}catch(e){wt("undo error: "+e.toString())}finally{this.Cb("FinishedUndo","Undo",t),this.qe=!1}}},de.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!!(t!==null&&t.canRedo())},de.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.qe=!0,this.Cb("StartingRedo","Redo",t),this.Ud++,t.redo()}catch(e){wt("redo error: "+e.toString())}finally{this.Cb("FinishedRedo","Redo",t),this.qe=!1}}},de.prototype.Cb=function(t,e,i){i===void 0&&(i=null);var n=new ae;for(n.change=Qn,n.propertyName=t,n.object=i,n.oldValue=e,t=this.models;t.next();)e=t.value,n.model=e,e.xt(n)},de.prototype.Zv=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;e===null&&(this.Lr=e=new Ye);var i=t.copy();e=e.changes,e.ea(),e.add(i),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Mu&&(t=t.diagram,t!==null&&t.oj===!1||wt("Change not within a transaction: "+i.toString()))}},de.prototype.skipsEvent=function(t){if(t===null||0>t.change.value)return!0;if(t=t.object,t===null)return!1;if(t.layer!==void 0){if(t=t.layer,t!==null&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},X.Object.defineProperties(de.prototype,{models:{get:function(){return this.dv.iterator}},isEnabled:{get:function(){return this.nd},set:function(t){this.nd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.J(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.J(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.qe}},history:{get:function(){return this.I}},maxHistoryLength:{get:function(){return this.v},set:function(t){this.v=t}},historyIndex:{get:function(){return this.Ud}},currentTransaction:{get:function(){return this.Lr}},transactionLevel:{get:function(){return this.Xi}},isInTransaction:{get:function(){return 0<this.Xi}},checksTransactionLevel:{get:function(){return this.l},set:function(t){this.l=t}},nestedTransactionNames:{get:function(){return this.we}},isPendingClear:{get:function(){return this.Wu},set:function(t){this.Wu=t}},isPendingUnmodified:{get:function(){return this.Xu},set:function(t){this.Xu=t}},isInternalTransaction:{get:function(){return this.Tu},set:function(t){this.Tu=t}},isJustDiscarded:{get:function(){return this.ks}}}),de.prototype.handleChanged=de.prototype.Zv,de.prototype.redo=de.prototype.redo,de.prototype.undo=de.prototype.undo,de.prototype.canUndo=de.prototype.canUndo,de.prototype.rollbackTransaction=de.prototype.Kf,de.prototype.commitTransaction=de.prototype.Wa,de.prototype.startTransaction=de.prototype.xa,de.prototype.removeModel=de.prototype.Ry,de.prototype.addModel=de.prototype.Xx,de.prototype.clear=de.prototype.clear,de.className="UndoManager";function Ft(){Oe(this),this.B=Zu,this.Qa="",this.nd=!0,this.Uc=!1,this.ix=null,this.mz=new Bi,this.tt=-1}Ft.prototype.toString=function(){return this.name!==""?this.name+" Tool":Ee(this.constructor)},Ft.prototype.updateAdornments=function(){},Ft.prototype.canStart=function(){return this.isEnabled},Ft.prototype.doStart=function(){},Ft.prototype.doActivate=function(){this.isActive=!0},Ft.prototype.doDeactivate=function(){this.isActive=!1},Ft.prototype.doStop=function(){},Ft.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Ft.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Ft.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Ft.prototype.doMouseMove=function(){},Ft.prototype.doMouseUp=function(){this.stopTool()},Ft.prototype.doMouseWheel=function(){},Ft.prototype.canStartMultiTouch=function(){return!0},Ft.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,i=e.Fq(0,k.allocAt(NaN,NaN)),n=e.Fq(1,k.allocAt(NaN,NaN));if(i.u()&&n.u()&&(this.doCancel(),t.zm("hasGestureZoom"))){t.Ul=t.scale;var r=n.x-i.x,o=n.y-i.y;t.qv=Math.sqrt(r*r+o*o),e.bubbles=!1}k.free(i),k.free(n)},Ft.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,i=e.Fq(0,k.allocAt(NaN,NaN)),n=e.Fq(1,k.allocAt(NaN,NaN));if(i.u()&&n.u()&&(this.doCancel(),t.zm("hasGestureZoom"))){var r=n.x-i.x,o=n.y-i.y;o=Math.sqrt(r*r+o*o)/t.qv,r=new k((Math.min(n.x,i.x)+Math.max(n.x,i.x))/2,(Math.min(n.y,i.y)+Math.max(n.y,i.y))/2),o*=t.Ul;var s=t.commandHandler;if(o!==t.scale&&s.canResetZoom(o)){var u=t.zoomPoint;t.zoomPoint=r,s.resetZoom(o),t.zoomPoint=u}e.bubbles=!1}k.free(i),k.free(n)},Ft.prototype.doKeyDown=function(){this.diagram.lastInput.key==="Esc"&&this.doCancel()},Ft.prototype.doKeyUp=function(){},Ft.prototype.xa=function(t){return t===void 0&&(t=this.name),this.transactionResult=null,this.diagram.xa(t)},Ft.prototype.Kg=function(){var t=this.diagram;return this.transactionResult===null?t.Kf():t.Wa(this.transactionResult)},Ft.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,i=t.xm(e.documentPoint,!1);if(i!==null){if(te?e.meta:e.control){for(t.R("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!e.isSelected),t.R("ChangedSelection",t.selection)}else if(e.shift){if(!i.isSelected){for(t.R("ChangingSelection",t.selection),e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&(e.isSelected=!0),t.R("ChangedSelection",t.selection)}}else if(!i.isSelected){for(e=i;e!==null&&!e.canSelect();)e=e.containingGroup;e!==null&&t.select(e)}}else!e.left||(te?e.meta:e.control)||e.shift||t.clearSelection()}},Ft.prototype.standardMouseClick=function(t,e){t===void 0&&(t=null),e===void 0&&(e=function(r){return!r.layer.isTemporary});var i=this.diagram,n=i.lastInput;return t=i.Vb(n.documentPoint,t,e),n.targetObject=t,YN(t,n,i),n.handled};function YN(t,e,i){if(e.handled=!1,t===null||t.Ig()){var n=0;e.left?n=e.clickCount===1?1:e.clickCount===2?2:1:e.right&&e.clickCount===1&&(n=3);var r="ObjectSingleClicked";if(t!==null){switch(n){case 1:r="ObjectSingleClicked";break;case 2:r="ObjectDoubleClicked";break;case 3:r="ObjectContextClicked"}n!==0&&i.R(r,t)}else{switch(n){case 1:r="BackgroundSingleClicked";break;case 2:r="BackgroundDoubleClicked";break;case 3:r="BackgroundContextClicked"}n!==0&&i.R(r)}if(t!==null)for(;t!==null;){switch(i=null,n){case 1:i=t.click;break;case 2:i=t.doubleClick?t.doubleClick:t.click;break;case 3:i=t.contextClick}if(i!==null&&(i(e,t),e.handled))break;t=t.panel}else{switch(t=null,n){case 1:t=i.click;break;case 2:t=i.doubleClick?i.doubleClick:i.click;break;case 3:t=i.contextClick}t!==null&&t(e)}}}Ft.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(t.animationManager.sc!==!0){var i=t.skipsUndoManager;t.skipsUndoManager=!0;var n=t.viewportBounds.$(e.documentPoint)?t.Vb(e.documentPoint,null,null):null;e.targetObject=n;var r=!1;if(n!==t.Cj){var o=t.Cj,s=o;for(t.Cj=n,this.doCurrentObjectChanged(o,n),e.handled=!1;o!==null;){var u=o.mouseLeave;if(u!==null&&(n===o||n!==null&&n.Hg(o)||(u(e,o,n),r=!0,e.handled)))break;o=o.panel}for(o=s,e.handled=!1;n!==null&&(s=n.mouseEnter,!(s!==null&&(o===n||o!==null&&o.Hg(n)||(s(e,n,o),r=!0,e.handled))));)n=n.panel;n=t.Cj}if(n!==null){for(o=n,s="";o!==null&&(s=o.cursor,s==="");)o=o.panel;for(t.currentCursor=s,e.handled=!1,o=n;o!==null&&(n=o.mouseOver,!(n!==null&&(n(e,o),r=!0,e.handled)));)o=o.panel}else t.currentCursor="",n=t.mouseOver,n!==null&&(n(e),r=!0);r&&t.Eb(),t.skipsUndoManager=i}},Ft.prototype.doCurrentObjectChanged=function(){},Ft.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,i=e.delta;if(i!==0&&t.documentBounds.u()){var n=t.commandHandler,r=t.toolManager.mouseWheelBehavior;if(n!==null&&(r===Na&&!e.shift||r===Iu&&e.control))(0<i?n.canIncreaseZoom():n.canDecreaseZoom())&&(r=t.zoomPoint,t.zoomPoint=e.viewPoint,0<i?n.increaseZoom():n.decreaseZoom(),t.zoomPoint=r),e.bubbles=!1;else if(r===Na&&e.shift||r===Iu&&!e.control){n=t.position.copy();var o=0<i?i:-i,s=e.event,u=s.deltaMode;if(r=s.deltaX,s=s.deltaY,(Tt||Bt||ee)&&(u=1,0<r&&(r=3),0>r&&(r=-3),0<s&&(s=3),0>s&&(s=-3)),u===void 0||r===void 0||s===void 0||r===0&&s===0||e.shift)!e.shift&&t.allowVerticalScroll?(o=3*o*t.scrollVerticalLineChange,0<i?t.scroll("pixel","up",o):t.scroll("pixel","down",o)):e.shift&&t.allowHorizontalScroll&&(o=3*o*t.scrollHorizontalLineChange,0<i?t.scroll("pixel","left",o):t.scroll("pixel","right",o));else{switch(u){case 0:i="pixel";break;case 1:i="line";break;case 2:i="page";break;default:i="pixel"}r!==0&&t.allowHorizontalScroll&&(r*=t.scrollHorizontalLineChange/16,0<r?t.scroll(i,"left",-r):t.scroll(i,"right",r)),s!==0&&t.allowVerticalScroll&&(s*=t.scrollVerticalLineChange/16,0<s?t.scroll(i,"up",-s):t.scroll(i,"down",s))}t.position.w(n)||(e.bubbles=!1)}}},Ft.prototype.standardWaitAfter=function(t,e){e===void 0&&(e=this.diagram.lastInput),this.cancelWaitAfter();var i=this,n=e.clone(this.mz);this.tt=H(function(){i.doWaitAfter(n)},t)},Ft.prototype.cancelWaitAfter=function(){this.tt!==-1&&Y.clearTimeout(this.tt),this.tt=-1},Ft.prototype.doWaitAfter=function(){},Ft.prototype.findToolHandleAt=function(t,e){return t=this.diagram.Vb(t,function(i){for(;i!==null&&!(i.panel instanceof Ct);)i=i.panel;return i}),t===null?null:t.part.category===e?t:null},Ft.prototype.isBeyondDragSize=function(t,e){var i=this.diagram;t===void 0&&(t=i.firstInput.viewPoint),e===void 0&&(e=i.lastInput.viewPoint);var n=i.toolManager.dragSize,r=n.width;return n=n.height,i.firstInput.isTouchEvent&&(r+=6,n+=6),Math.abs(e.x-t.x)>r||Math.abs(e.y-t.y)>n},X.Object.defineProperties(Ft.prototype,{diagram:{get:function(){return this.B},set:function(t){t instanceof O&&(this.B=t)}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isEnabled:{get:function(){return this.nd},set:function(t){this.nd=t}},isActive:{get:function(){return this.Uc},set:function(t){this.Uc=t}},transactionResult:{get:function(){return this.ix},set:function(t){this.ix=t}}}),Ft.prototype.stopTransaction=Ft.prototype.Kg,Ft.prototype.startTransaction=Ft.prototype.xa,Ft.className="Tool";function he(){Ft.call(this),this.name="ToolManager",this.Cc=new J,this.Vc=new J,this.Md=new J,this.T=this.Ja=850,this.v=new pt(2,2).ca(),this.eb=5e3,this.Ka=Iu,this.I=Gx,this.Kr=this.l=null,this.gk=-1}ut(he,Ft),he.prototype.initializeStandardTools=function(){},he.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Ct&&this.Kr===t){var i=e.adornedObject;(t!==null?i.part===t:i===null)?this.showToolTip(e,i):this.hideToolTip()}},he.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Bu&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Ta){e.bubbles=!0;return}if(this.gestureBehavior===Bu)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomStart();return}}for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.J(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseDown());return}}t.lastInput.button===1&&(this.mouseWheelBehavior===Iu?this.mouseWheelBehavior=Na:this.mouseWheelBehavior===Na&&(this.mouseWheelBehavior=Iu)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},he.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Ta){e.bubbles=!0;return}if(this.gestureBehavior===Bu)return;if(t.currentTool.canStartMultiTouch()){t.currentTool.standardPinchZoomMove();return}}if(this.isActive)for(var i=this.mouseMoveTools.length,n=0;n<i;n++){var r=this.mouseMoveTools.J(n);if(r.diagram=this.diagram,r.canStart()){t.doFocus(),t.currentTool=r,t.currentTool===r&&(r.isActive||r.doActivate(),r.doMouseMove());return}}Yx(this,t),t=e.event,t===null||t.type!=="mousemove"&&t.type!=="pointermove"&&t.cancelable||(e.bubbles=!0)};function Yx(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}he.prototype.doCurrentObjectChanged=function(t,e){t=this.currentToolTip,t===null||e!==null&&t instanceof Ct&&(e===t||e.Hg(t))||this.hideToolTip()},he.prototype.doWaitAfter=function(t){var e=this.diagram;e.ta&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&(t=t.copy(),t.button=2,t.buttons=2,e.lastInput=t,e.fk=!0,e.doMouseUp()))},he.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;e.targetObject===null&&(e.targetObject=t.Vb(e.documentPoint,null,null));var i=e.targetObject;if(i!==null)for(e.handled=!1;i!==null&&(t=this.isActive?i.mouseHold:i.mouseHover,!(t!==null&&(t(e,i),e.handled)));)i=i.panel;else i=this.isActive?t.mouseHold:t.mouseHover,i!==null&&i(e)},he.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(e.targetObject===null&&(e.targetObject=t.Vb(e.documentPoint,null,null)),e=e.targetObject,e!==null){if(t=this.currentToolTip,!(t instanceof Ct)||e!==t&&!e.Hg(t)){for(;e!==null;){if(t=e.toolTip,t!==null){this.showToolTip(t,e);return}e=e.panel}this.hideToolTip()}}else e=t.toolTip,e!==null?this.showToolTip(e,null):this.hideToolTip()},he.prototype.showToolTip=function(t,e){var i=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Ct){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category="ToolTip",t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Ta(),this.positionToolTip(t,e)}else t instanceof To&&t!==this.currentToolTip&&t.show(e,i,this);if(this.currentToolTip=t,this.gk!==-1&&(Y.clearTimeout(this.gk),this.gk=-1),t=this.toolTipDuration,0<t&&t!==Infinity){var r=this;this.gk=H(function(){r.hideToolTip()},t)}},he.prototype.positionToolTip=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y=i.y+20/e.scale+n.height>r.bottom?i.y-(n.height+5/e.scale):i.y+20/e.scale,i.y<r.y&&(i.y=r.y),t.position=i}},he.prototype.hideToolTip=function(){this.gk!==-1&&(Y.clearTimeout(this.gk),this.gk=-1);var t=this.diagram,e=this.currentToolTip;e!==null&&(e instanceof Ct?(t.remove(e),this.Kr!==null&&this.Kr.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof To&&e.hide!==null&&e.hide(t,this),this.currentToolTip=null)},he.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,i=0;i<e;i++){var n=this.mouseUpTools.J(i);if(n.diagram=this.diagram,n.canStart()){t.doFocus(),t.currentTool=n,t.currentTool===n&&(n.isActive||n.doActivate(),n.doMouseUp());return}}t.doFocus(),this.doDeactivate()},he.prototype.doMouseWheel=function(){this.standardMouseWheel()},he.prototype.doKeyDown=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyDown()},he.prototype.doKeyUp=function(){var t=this.diagram;t.commandHandler!==null&&t.commandHandler.doKeyUp()},he.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,i=0;i<e;i++){var n=this.mouseDownTools.J(i);if(n.name===t)return n}for(e=this.mouseMoveTools.length,i=0;i<e;i++)if(n=this.mouseMoveTools.J(i),n.name===t)return n;for(e=this.mouseUpTools.length,i=0;i<e;i++)if(n=this.mouseUpTools.J(i),n.name===t)return n;return null},he.prototype.replaceTool=function(t,e){e!==null&&(e.diagram=this.diagram);for(var i=this.mouseDownTools.length,n=0;n<i;n++){var r=this.mouseDownTools.J(n);if(r.name===t)return e!==null?this.mouseDownTools.Qc(n,e):this.mouseDownTools.cb(n),r}for(i=this.mouseMoveTools.length,n=0;n<i;n++)if(r=this.mouseMoveTools.J(n),r.name===t)return e!==null?this.mouseMoveTools.Qc(n,e):this.mouseMoveTools.cb(n),r;for(i=this.mouseUpTools.length,n=0;n<i;n++)if(r=this.mouseUpTools.J(n),r.name===t)return e!==null?this.mouseUpTools.Qc(n,e):this.mouseUpTools.cb(n),r;return null},he.prototype.Xa=function(t,e,i){e!==null&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):e!==null&&i.add(e)},X.Object.defineProperties(he.prototype,{mouseWheelBehavior:{get:function(){return this.Ka},set:function(t){this.Ka=t}},gestureBehavior:{get:function(){return this.I},set:function(t){this.I=t}},currentToolTip:{get:function(){return this.l},set:function(t){this.l=t,this.Kr=t!==null&&t instanceof Ct?t.adornedPart:null}},mouseDownTools:{get:function(){return this.Cc}},mouseMoveTools:{get:function(){return this.Vc}},mouseUpTools:{get:function(){return this.Md}},hoverDelay:{get:function(){return this.Ja},set:function(t){this.Ja=t}},holdDelay:{get:function(){return this.T},set:function(t){this.T=t}},dragSize:{get:function(){return this.v},set:function(t){this.v=t.G()}},toolTipDuration:{get:function(){return this.eb},set:function(t){this.eb=t}}}),he.prototype.replaceStandardTool=he.prototype.Xa;var Iu=new K(he,"WheelScroll",0),Na=new K(he,"WheelZoom",1),GN=new K(he,"WheelNone",2),Gx=new K(he,"GestureZoom",3),Bu=new K(he,"GestureCancel",4),Ta=new K(he,"GestureNone",5);he.className="ToolManager",he.WheelScroll=Iu,he.WheelZoom=Na,he.WheelNone=GN,he.GestureZoom=Gx,he.GestureCancel=Bu,he.GestureNone=Ta;function fe(){Ft.call(this),this.name="Dragging",this.I=this.Vc=!0,this.v=this.eb=this.Ja=this.rg=null,this.Qn=this.Md=!1,this.gm=new k(NaN,NaN),this.gt=new k,this.Cc=!0,this.nl=100,this.Xg=[],this.lr=new W().freeze(),this.Ka=new Cl,this.zo=null,this.T="copy",this.Vh="",this.Wh="no-drop"}ut(fe,Ft),fe.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.nl)?!1:this.findDraggablePart()!==null},fe.prototype.findDraggablePart=function(){var t=this.diagram;if(t=t.xm(t.firstInput.documentPoint,!1),t===null)return null;for(;t!==null&&!t.canSelect();)t=t.containingGroup;return t!==null&&(t.canMove()||t.canCopy())?t:null},fe.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.xm(t.firstInput.documentPoint,!1);if(e!==null){for(;e!==null&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,this.currentPart===null||this.currentPart.isSelected||(t.R("ChangingSelection",t.selection),e=t.lastInput,(te?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.R("ChangedSelection",t.selection))}}},fe.prototype.doActivate=function(){var t=this.diagram;this.zo=null,this.currentPart===null&&this.standardMouseSelect();var e=this.currentPart;e!==null&&(e.canMove()||e.canCopy())&&(We=null,this.isActive=!0,this.gm.set(t.position),Ny(this,t.selection),this.Xg.length=0,t.animationManager.Sc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),t.ku=!0,t.Ie("temporaryPixelRatio")===!0&&30<t.$x&&Aa(t),qc(t,this.draggedParts),this.xa("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Qn=!1,We=this,Ru=this.diagram,this.doSimulatedDragOut()))};function Ny(t,e){if(t.dragsLink){var i=t.diagram;i.allowRelink&&(i.model.yk()&&e.count===1&&e.first()instanceof z?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.lk(),t.rg=i.toolManager.findTool("Relinking"),t.rg===null&&(t.rg=new kn,t.rg.diagram=i)):(t.draggedLink=null,t.rg=null))}}fe.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},fe.prototype.Bd=function(t){return t===void 0?new cs(Po):this.isGridSnapEnabled?new cs(new k(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new cs(t.copy())},fe.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.Lf(),Ty(this),Ra(t,this.draggedParts),this.draggedParts=this.currentPart=this.zo=null,this.Qn=this.isDragOutStarted=!1,0<Pl.count){for(var e=Pl,i=e.length,n=0;n<i;n++){var r=e.J(n);Hx(r),ss(r),Ty(r),r.diagram.Lf()}e.clear()}Hx(this),this.gm.h(NaN,NaN),We=Ru=null,ss(this),t.isMouseCaptured=!1,t.currentCursor="",t.ku=!1,this.Kg(),Zc(t,!0)};function Ty(t){var e=t.diagram,i=e.skipsUndoManager;e.skipsUndoManager=!0,Wx(t,e.lastInput,null),e.skipsUndoManager=i,t.Xg.length=0}function Xx(){var t=We;ss(t),Ly(t);var e=t.diagram;t.gm.u()&&(e.position=t.gm),e.Lf()}fe.prototype.doCancel=function(){ss(this),Ly(this);var t=this.diagram;this.gm.u()&&(t.position=this.gm),this.stopTool()},fe.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&(e.key==="Esc"?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},fe.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()};function Cy(t,e){if(t.copiedParts===null){var i=t.diagram;if((!e||!i.isReadOnly&&!i.isModelReadOnly)&&t.draggedParts!==null){var n=i.undoManager;for(n.isEnabled&&n.isInTransaction?n.currentTransaction!==null&&0<n.currentTransaction.changes.count&&(i.undoManager.Kf(),i.xa("Drag")):Ly(t),i.skipsUndoManager=!e,i.partManager.addsToTemporaryLayer=!e,t.startPoint=i.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Mf():i.selection,e=i.rk(e,i,!0),i=new ct,n=t.draggedParts.iterator;n.next();){var r=n.key;if(r.Oc()&&r.canCopy()){var o=e.H(r);o!==null&&(o.location=r.location,o.Ta(),i.add(o,t.Bd(o.location)))}}for(e=e.iterator;e.next();)n=e.value,n instanceof z&&n.canCopy()&&i.add(n,t.Bd());t.copiedParts=i,Ny(t,i.Mf()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,Vo(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2)))}}}function ss(t){var e=t.diagram;if(t.copiedParts!==null&&(e.eu(t.copiedParts.Mf(),!1),t.copiedParts=null,t.draggedParts!==null))for(var i=t.draggedParts.iterator;i.next();)i.key instanceof z&&(i.value.point=new k(0,0));e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Hx(t){if(t.draggedLink!==null){if(t.dragsLink&&t.rg!==null){var e=t.rg;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)}t.draggedLink=null,t.rg=null}}function kl(t,e,i){var n=t.diagram,r=t.startPoint,o=k.alloc();o.assign(n.lastInput.documentPoint),t.moveParts(e,o.ee(r),i),k.free(o),n.Ie("temporaryPixelRatio")===!0&&n.xh===null&&30<n.$x&&(Aa(n),n.Xq())}fe.prototype.moveParts=function(t,e,i){i===void 0&&(i=!1);var n=this.diagram;n!==null&&Jy(n,t,e,this.dragOptions,i)};function Ly(t){if(t.draggedParts!==null){for(var e=t.diagram,i=t.draggedParts.iterator;i.next();){var n=i.key;n.Oc()&&(n.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)if(n=i.key,n instanceof z&&n.suspendsRouting){var r=i.value.point;t.draggedParts.add(n,t.Bd()),Vo(n,-r.x,-r.y)}e.jd()}}function jy(t,e){var i=t.diagram;t.dragsLink&&(t.draggedLink!==null&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),$x(t,!1));var n=t.findDragOverObject(e),r=i.lastInput;r.targetObject=n,t.doUpdateCursor(n);var o=i.skipsUndoManager,s=!1;try{if(i.skipsUndoManager=!0,s=Wx(t,r,n),!t.isActive&&We===null)return;var u=n!==null?n.part:null;if(u===null||i.handlesDragDropForTopLevelParts&&u.isTopLevel&&!(u instanceof dt)){var a=i.mouseDragOver;a!==null&&(a(r),s=!0)}if(!t.isActive&&We===null||(t.doDragOver(e,n),!t.isActive&&We===null))return}finally{i.skipsUndoManager=o,s&&i.jd()}t.zo=n,i.isReadOnly||!i.allowMove&&!i.allowCopy||!i.allowHorizontalScroll&&!i.allowVerticalScroll||i.Dt(r.viewPoint)}fe.prototype.findDragOverObject=function(t){var e=this;return Wy(this.diagram,t,null,function(i){return i===null?i=!0:(i=i.part,i=!!(i===null||i instanceof Ct||i.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(i)||e.copiedParts&&e.copiedParts.contains(i))),!i})},fe.prototype.doUpdateCursor=function(t){var e=this.diagram;this.zo!==t&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))};function Wx(t,e,i){var n=!1,r=t.Xg.length,o=0<r?t.Xg[0]:null;if(i===o)return!1;e.handled=!1;for(var s=0;s<r;s++){var u=t.Xg[s],a=u.mouseDragLeave;if(a!==null&&(a(e,u,i),n=!0,e.handled))break}if(t.Xg.length=0,!t.isActive&&We===null||i===null)return n;for(e.handled=!1,r=i;r!==null;)t.Xg.push(r),r=Kx(r);for(r=t.Xg.length,i=0;i<r&&(s=t.Xg[i],u=s.mouseDragEnter,u===null||(u(e,s,o),n=!0,!e.handled));i++);return n}function Kx(t){var e=t.panel;return e!==null?e:t instanceof rt&&!(t instanceof dt)&&(t=t.containingGroup,t!==null&&t.handlesDragDropForMembers)?t:null}function _x(t,e,i){var n=t.rg;if(n===null)return null;var r=t.diagram.Fg(e,n.portGravity,function(f){return n.findValidLinkablePort(f,i)});t=k.alloc();var o=Infinity,s=null;for(r=r.iterator;r.next();){var u=r.value;if(u.part!==null){var a=u.da(Wt,t);a=e.Ge(a),a<o&&(s=u,o=a)}}return k.free(t),s}function $x(t,e){var i=t.draggedLink;if(i!==null&&!(2>i.pointsCount)){var n=t.diagram;if(!n.isReadOnly){var r=t.rg;if(r!==null){var o=null,s=null;i.fromNode===null&&(o=_x(t,i.i(0),!1),o!==null&&(s=o.part));var u=null,a=null;i.toNode===null&&(u=_x(t,i.i(i.pointsCount-1),!0),u!==null&&(a=u.part)),r.isValidLink(s,o,a,u)?e?(i.defaultFromPoint=i.i(0),i.defaultToPoint=i.i(i.pointsCount-1),i.suspendsRouting=!1,i.fromNode=s,o!==null&&(i.fromPortId=o.portId),i.toNode=a,u!==null&&(i.toPortId=u.portId),i.fromPort!==n.My&&n.R("LinkRelinked",i,n.My),i.toPort!==n.Ny&&n.R("LinkRelinked",i,n.Ny)):ew(r,s,o,a,u):ew(r,null,null,null,null)}}}}fe.prototype.doDragOver=function(){};function Zx(t,e){var i=t.diagram;t.dragsLink&&$x(t,!0),Ty(t);var n=t.findDragOverObject(e),r=i.lastInput;if(r.targetObject=n,n!==null){r.handled=!1;for(var o=n;o!==null;){var s=o.mouseDrop;if(s!==null&&(s(r,o),r.handled))break;XN(t,r,o),o=Kx(o)}}else o=i.mouseDrop,o!==null&&o(r);if(t.isActive||We!==null){for(r=(t.copiedParts||t.draggedParts).iterator;r.next();)o=r.key,o instanceof Z&&o.linksConnected.each(function(u){u.suspendsRouting=!1});if(t.doDropOnto(e,n),t.isActive||We!==null){for(t=I.alloc(),e=i.selection.iterator;e.next();)n=e.value,n instanceof Z&&HN(i,n,t);I.free(t)}}}function XN(t,e,i){t=t.diagram,i=i.part,!t.handlesDragDropForTopLevelParts||!i.isTopLevel||i instanceof dt||(i=t.mouseDrop,i!==null&&i(e))}function HN(t,e,i){var n=!1;if(e.getAvoidableRect(i),t.viewportBounds.Ee(i)&&(n=!0),t=t.Tv(i,function(r){return r.part},function(r){return r instanceof z},!0,function(r){return r instanceof z},n),t.count!==0)for(t=t.iterator;t.next();)i=t.value,!i.Hd(e)&&i.isAvoiding&&i.Ua()}fe.prototype.doDropOnto=function(){},fe.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||this.currentPart===null||this.draggedParts===null||(this.mayCopy()?(Cy(this,!1),qc(t,this.copiedParts),kl(this,this.copiedParts,!1),Ra(t,this.copiedParts)):this.mayMove()?(ss(this),kl(this,this.draggedParts,!0)):this.mayDragOut()?(Cy(this,!1),kl(this,this.copiedParts,!1)):ss(this),jy(this,t.lastInput.documentPoint))}},fe.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var i=this.mayCopy();if(i&&this.copiedParts!==null?(ss(this),Cy(this,!0),qc(t,this.copiedParts),kl(this,this.copiedParts,!1),Ra(t,this.copiedParts),this.copiedParts!==null&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(r){r.isSelected=!0}))):(e=!0,ss(this),this.mayMove()&&(kl(this,this.draggedParts,!0),jy(this,t.lastInput.documentPoint))),this.Qn=!0,Zx(this,t.lastInput.documentPoint),this.isActive){var n=i?this.copiedParts.Mf():this.draggedParts.Mf();this.copiedParts=null,e&&WN(this),t.Oa(),Ra(t,this.draggedParts),this.transactionResult=i?"Copy":"Move",t.R(i?"SelectionCopied":"SelectionMoved",n)}this.stopTool(),i&&t.R("ChangedSelection",t.selection)}}},fe.prototype.simulatedMouseMove=function(t,e,i){if(We===null)return!1;var n=We.diagram;i instanceof O||(i=null);var r=Ru;return i!==r&&(r!==null&&r!==n&&(r.Lf(),We.isDragOutStarted=!1,r=r.toolManager.findTool("Dragging"),r!==null&&r.doSimulatedDragLeave()),Ru=i,i!==null&&i!==n&&(Xx(),r=i.toolManager.findTool("Dragging"),r!==null&&(Pl.contains(r)||Pl.add(r),r.doSimulatedDragEnter()))),i===null||i===n||!i.allowDrop||i.isReadOnly||!i.allowInsert?!1:(n=i.toolManager.findTool("Dragging"),n!==null&&(t!==null&&(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.gr(e),i.lastInput.down=!1,i.lastInput.up=!1,n.doSimulatedDragOver()),!0)},fe.prototype.simulatedMouseUp=function(t,e,i){if(We===null)return!1;var n=Ru,r=We.diagram;if(i===null)return We.doCancel(),!0;if(i!==n){var o=n.toolManager.findTool("Dragging");if(n!==null&&n!==r&&o!==null)return n.Lf(),We.isDragOutStarted=!1,o.doSimulatedDragLeave(),!1;Ru=i,n=i.toolManager.findTool("Dragging"),n!==null&&(Xx(),Pl.contains(n)||Pl.add(n),n.doSimulatedDragEnter())}return i!==this.diagram?(t!==null?(t.targetTouches!==void 0&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=i.getMouse(t)):e===null&&(e=new k),i.lastInput.documentPoint=e,i.lastInput.viewPoint=i.gr(e),i.lastInput.down=!1,i.lastInput.up=!0,t=i.toolManager.findTool("Dragging"),t!==null&&t.doSimulatedDrop(),t=We,t!==null&&(i=t.mayCopy(),t.transactionResult=i?"Copy":"Move",t.stopTool()),!0):!1};function WN(t){if(t.draggedParts!==null)for(var e=t.draggedParts.iterator;e.next();){var i=e.key;i instanceof Z&&(i=i.containingGroup,i===null||i.placeholder===null||t.draggedParts.contains(i)||i.placeholder.o())}}fe.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(te?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},fe.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canCopy())},fe.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!!(this.draggedLink!==null&&this.dragsLink&&this.draggedLink.canMove())},fe.prototype.computeBorder=function(t,e,i){return this.Qn||this.draggedParts===null||this.draggedParts.contains(t)?null:i.assign(e)},fe.prototype.lA=function(){return We},fe.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;var e=We;return!(e===null||e.diagram.model.dataFormat!==t.model.dataFormat)},fe.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.Sc(),us(t),t.animationManager.Sc();var e=We;e!==null&&(e.diagram.ku=!1),this.doUpdateCursor(t.grid)}},fe.prototype.doSimulatedDragLeave=function(){var t=We;t!==null&&t.doSimulatedDragOut(),this.doCancel()},fe.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.qn=!0;var e=We;if(e!==null&&e.draggedParts!==null){if(!this.mayDragIn())return;Jx(this,e.draggedParts.Mf(),!1,t.firstInput),kl(this,this.copiedParts,!1),jy(this,t.lastInput.documentPoint)}t.animationManager.qn=!1},fe.prototype.doSimulatedDrop=function(){var t=this.diagram,e=We;if(e!==null){var i=e.diagram;if(e.Qn=!0,ss(this),!this.mayDragIn())return;t.animationManager.qn=!0,t.R("ChangingSelection",t.selection),this.xa("Drop"),Jx(this,e.draggedParts.Mf(),!0,t.lastInput),kl(this,this.copiedParts,!1),this.copiedParts!==null&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(n){n.isSelected=!0})),Zx(this,t.lastInput.documentPoint),t.Oa(),e=t.selection,this.copiedParts!==null?this.transactionResult="ExternalCopy":e=new W,this.copiedParts=null,t.doFocus(),t.R("ExternalObjectsDropped",e,i),this.Kg(),t.R("ChangedSelection",t.selection)}t.animationManager.qn=!1};function Jx(t,e,i,n){if(t.copiedParts===null){var r=t.diagram;if(!r.isReadOnly&&!r.isModelReadOnly){r.skipsUndoManager=!i,r.partManager.addsToTemporaryLayer=!i,t.startPoint=n.documentPoint,i=r.rk(e,r,!0);var o=I.alloc();r=n=Infinity;for(var s=-Infinity,u=-Infinity,a=e.iterator;a.next();){var f=a.value;if(f.isVisible()){var c=f.location;f=c.x,c=c.y,isNaN(f)||isNaN(c)||(f<n&&(n=f),c<r&&(r=c),f>s&&(s=f),c>u&&(u=c))}}for(n===Infinity?o.h(0,0,0,0):o.h(n,r,s-n,u-r),n=o.x+o.width/2,r=o.y+o.height/2,I.free(o),o=t.gt,s=new ct,u=k.alloc(),a=e.iterator;a.next();)f=a.value,f instanceof z&&f.canCopy()&&(c=i.H(f),c!==null&&(c.points=f.points,Vo(c,o.x-n,o.y-r),c.suspendsRouting=!0,s.add(c,t.Bd())));for(e=e.iterator;e.next();)f=e.value,f.Oc()&&f.canCopy()&&(a=i.H(f),a!==null&&(f=f.location,u.h(o.x-(n-f.x),o.y-(r-f.y)),a.location=u,a.Ta(),s.add(a,t.Bd(u))));k.free(u),t.copiedParts=s,Ny(t,s.Mf()),t.draggedLink!==null&&(i=t.draggedLink,e=i.routeBounds,Vo(i,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2)))}}}fe.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.ku=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.zo=null},fe.prototype.computeMove=function(t,e,i,n){return i=this.diagram,i!==null?i.computeMove(t,e,this.dragOptions,n):new k},X.Object.defineProperties(fe.prototype,{isCopyEnabled:{get:function(){return this.Vc},set:function(t){this.Vc=t}},copiesEffectiveCollection:{get:function(){return this.I},set:function(t){this.I=t}},dragOptions:{get:function(){return this.Ka},set:function(t){this.Ka=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.Cc},set:function(t){this.Cc=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.w(t)||(t=t.G(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.T},set:function(t){this.T=t}},moveCursor:{get:function(){return this.Vh},set:function(t){this.Vh=t}},nodropCursor:{get:function(){return this.Wh},set:function(t){this.Wh=t}},currentPart:{get:function(){return this.Ja},set:function(t){this.Ja=t}},copiedParts:{get:function(){return this.v},set:function(t){this.v=t}},draggedParts:{get:function(){return this.eb},set:function(t){this.eb=t}},draggingParts:{get:function(){return this.copiedParts!==null?this.copiedParts.Mf():this.draggedParts!==null?this.draggedParts.Mf():this.lr}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Md},set:function(t){this.Md=t}},startPoint:{get:function(){return this.gt},set:function(t){this.gt.w(t)||this.gt.assign(t)}},delay:{get:function(){return this.nl},set:function(t){this.nl=t}}}),fe.prototype.getDraggingSource=fe.prototype.lA;var Pl=null,We=null,Ru=null;fe.className="DraggingTool",Pl=new J,ht("draggingTool",function(){return this.findTool("Dragging")},function(t){this.Xa("Dragging",t,this.mouseMoveTools)}),he.prototype.doCancel=function(){We!==null&&We.doCancel(),Ft.prototype.doCancel.call(this)};function ti(){Ft.call(this),this.Wh=100,this.Ka=!1,this.ni="pointer";var t=new z,e=new gt;e.isPanelMain=!0,e.stroke="blue",t.add(e),e=new gt,e.toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.gx=t,t=new Z,e=new gt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Bc,t.add(e),t.selectable=!1,t.layerName="Tool",this.ex=t,this.l=e,t=new Z,e=new gt,e.portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Bc,t.add(e),t.selectable=!1,t.layerName="Tool",this.hx=t,this.v=e,this.Vh=this.Md=this.Cc=this.eb=this.Vc=null,this.Ja=!0,this.ez=new ct,this.lr=this.Gi=this.bx=null}ut(ti,Ft),ti.prototype.doStop=function(){this.diagram.Lf(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},ti.prototype.copyPortProperties=function(t,e,i,n,r){if(t!==null&&e!==null&&i!==null&&n!==null){var o=e.Cf(),s=pt.alloc();s.width=e.naturalBounds.width*o,s.height=e.naturalBounds.height*o,n.desiredSize=s,pt.free(s),r?(n.toSpot=e.toSpot,n.toEndSegmentLength=e.toEndSegmentLength):(n.fromSpot=e.fromSpot,n.fromEndSegmentLength=e.fromEndSegmentLength),i.locationSpot=Wt,o=k.alloc(),i.location=e.da(Wt,o),k.free(o),n.angle=e.kj(),this.portTargeted!==null&&this.portTargeted(t,e,i,n,r)}},ti.prototype.setNoTargetPortProperties=function(t,e,i){e!==null&&(e.desiredSize=Bc,e.fromSpot=qe,e.toSpot=qe),t!==null&&(t.location=this.diagram.lastInput.documentPoint),this.portTargeted!==null&&this.portTargeted(null,null,t,e,i)},ti.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},ti.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null&&this.targetPort.part instanceof Z){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Dt(t.lastInput.viewPoint)}},ti.prototype.findValidLinkablePort=function(t,e){if(t===null)return null;var i=t.part;if(!(i instanceof Z))return null;for(;t!==null;){var n=e?t.toLinkable:t.fromLinkable;if(n===!0&&(t.portId!==null||t instanceof Z)&&(e?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(n===!1)break;t=t.panel}return null},ti.prototype.findTargetPort=function(t){var e=this.diagram,i=e.lastInput.documentPoint,n=this.portGravity;0>=n&&(n=.1);var r=this,o=e.Fg(i,n,function(d){return r.findValidLinkablePort(d,t)},null,!0);for(n=Infinity,e=null,o=o.iterator;o.next();){var s=o.value,u=s.part;if(u instanceof Z){var a=s.da(Wt,k.alloc()),f=i.x-a.x,c=i.y-a.y;k.free(a),a=f*f+c*c,a<n&&(f=this.validPortsCache.H(s),f!==null?f&&(e=s,n=a):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,u,s)||!t&&this.isValidLink(u,s,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(s,!0),e=s,n=a):this.validPortsCache.add(s,!1))}}return e!==null&&(i=e.part,i instanceof Z&&(i.layer===null||i.layer.allowLink))?e:null},ti.prototype.isValidFrom=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.fromLinkable!==!0))return!1;var i=e.fromMaxLinks;if(Infinity>i){if(this.originalLink!==null&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(e=e.portId,e===null&&(e=""),t.Bq(e).count>=i)return!1}return!0},ti.prototype.isValidTo=function(t,e){if(t===null||e===null)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(t.layer!==null&&!t.layer.allowLink||e.toLinkable!==!0))return!1;var i=e.toMaxLinks;if(Infinity>i){if(this.originalLink!==null&&t===this.originalToNode&&e===this.originalToPort)return!0;if(e=e.portId,e===null&&(e=""),t.Fd(e).count>=i)return!1}return!0},ti.prototype.isInSameNode=function(t,e){return t===null||e===null?!1:t===e?!0:(t=t.part,e=e.part,t!==null&&t===e)},ti.prototype.isLinked=function(t,e){if(t===null||e===null)return!1;var i=t.part;if(!(i instanceof Z))return!1;t=t.portId,t===null&&(t="");var n=e.part;if(!(n instanceof Z))return!1;for(e=e.portId,e===null&&(e=""),e=n.Fd(e);e.next();)if(n=e.value,n.fromNode===i&&n.fromPortId===t)return!0;return!1},ti.prototype.isValidLink=function(t,e,i,n){if(!this.isValidFrom(t,e)||!this.isValidTo(i,n)||!(e===null||n===null||(e.fromLinkableSelfNode&&n.toLinkableSelfNode||!this.isInSameNode(e,n))&&(e.fromLinkableDuplicates&&n.toLinkableDuplicates||!this.isLinked(e,n)))||this.originalLink!==null&&(t!==null&&this.isLabelDependentOnLink(t,this.originalLink)||i!==null&&this.isLabelDependentOnLink(i,this.originalLink))||t!==null&&i!==null&&(t.data===null&&i.data!==null||t.data!==null&&i.data===null)||!this.isValidCycle(t,i,this.originalLink))return!1;if(t!==null){var r=t.linkValidation;if(r!==null&&!r(t,e,i,n,this.originalLink))return!1}return i!==null&&(r=i.linkValidation,r!==null&&!r(t,e,i,n,this.originalLink))?!1:(r=this.linkValidation,r!==null?r(t,e,i,n,this.originalLink):!0)},ti.prototype.isLabelDependentOnLink=function(t,e){if(t===null)return!1;var i=t.labeledLink;if(i===null)return!1;if(i===e)return!0;var n=new W;return n.add(t),Dy(this,i,e,n)};function Dy(t,e,i,n){if(e===i)return!0;var r=e.fromNode;return r!==null&&r.isLinkLabel&&(n.add(r),Dy(t,r.labeledLink,i,n))?!0:(e=e.toNode,!!(e!==null&&e.isLinkLabel&&(n.add(e),Dy(t,e.labeledLink,i,n))))}ti.prototype.isValidCycle=function(t,e,i){if(i===void 0&&(i=null),t===null||e===null)return this.isUnconnectedLinkValid;var n=this.diagram.validCycle;if(n!==ip){if(n===$w){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=e.linksConnected;n.next();){var r=n.value;if(r!==i&&r.isTreeLink&&r.toNode===e)return!1}return!Ca(this,t,e,i,!0)}if(n===Zw){if(n=i||this.temporaryLink,n!==null&&!n.isTreeLink)return!0;for(n=t.linksConnected;n.next();)if(r=n.value,r!==i&&r.isTreeLink&&r.fromNode===t)return!1;return!Ca(this,t,e,i,!0)}if(n===Ww)return t===e?t=!0:(n=new W,n.add(e),t=Qx(this,n,t,e,i)),!t;if(n===Kw)return!Ca(this,t,e,i,!1);if(n===_w)return t===e?t=!0:(n=new W,n.add(e),t=qx(this,n,t,e,i)),!t}return!0};function Ca(t,e,i,n,r){if(e===i)return!0;if(e===null||i===null)return!1;for(var o=e.linksConnected;o.next();){var s=o.value;if(s!==n&&(!r||s.isTreeLink)&&s.toNode===e&&(s=s.fromNode,s!==e&&Ca(t,s,i,n,r)))return!0}return!1}function Qx(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var s=o.value;if(s!==r&&s.toNode===i&&(s=s.fromNode,s!==i&&Qx(t,e,s,n,r)))return!0}return!1}function qx(t,e,i,n,r){if(i===n)return!0;if(i===null||n===null||e.contains(i))return!1;e.add(i);for(var o=i.linksConnected;o.next();){var s=o.value;if(s!==r){var u=s.fromNode;if(s=s.toNode,u=u===i?s:u,u!==i&&qx(t,e,u,n,r))return!0}}return!1}X.Object.defineProperties(ti.prototype,{portGravity:{get:function(){return this.Wh},set:function(t){0<=t&&(this.Wh=t)}},isUnconnectedLinkValid:{get:function(){return this.Ka},set:function(t){this.Ka=t}},linkingCursor:{get:function(){return this.ni},set:function(t){this.ni=t}},temporaryLink:{get:function(){return this.gx},set:function(t){this.gx=t}},temporaryFromNode:{get:function(){return this.ex},set:function(t){(this.ex=t)&&(this.l=t.port)}},temporaryFromPort:{get:function(){return this.l},set:function(t){if(this.l!==null){var e=this.l.panel;if(e!==null){var i=e.W.indexOf(this.l);e.cb(i),e.wb(i,t)}}this.l=t}},temporaryToNode:{get:function(){return this.hx},set:function(t){(this.hx=t)&&(this.v=t.port)}},temporaryToPort:{get:function(){return this.v},set:function(t){if(this.v!==null){var e=this.v.panel;if(e!==null){var i=e.W.indexOf(this.v);e.cb(i),e.wb(i,t)}}this.v=t}},originalLink:{get:function(){return this.Vc},set:function(t){this.Vc=t}},originalFromNode:{get:function(){return this.eb},set:function(t){this.eb=t}},originalFromPort:{get:function(){return this.Cc},set:function(t){this.Cc=t}},originalToNode:{get:function(){return this.Md},set:function(t){this.Md=t}},originalToPort:{get:function(){return this.Vh},set:function(t){this.Vh=t}},isForwards:{get:function(){return this.Ja},set:function(t){this.Ja=t}},validPortsCache:{get:function(){return this.ez}},targetPort:{get:function(){return this.bx},set:function(t){this.bx=t}},linkValidation:{get:function(){return this.Gi},set:function(t){this.Gi=t}},portTargeted:{get:function(){return this.lr},set:function(t){this.lr=t}}}),ti.className="LinkingBaseTool";function Ri(){ti.call(this),this.name="Linking",this.T={},this.I=null,this.K=zc,this.bn=null}ut(Ri,ti),Ri.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Tt()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize()?!1:this.findLinkablePort()!==null},Ri.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(e===null&&(e=t.Vb(t.firstInput.documentPoint,null,null)),e===null||!(e.part instanceof Z))return null;if(t=this.direction,t===zc||t===bx){var i=this.findValidLinkablePort(e,!1);if(i!==null)return this.isForwards=!0,i}return(t===zc||t===tw)&&(e=this.findValidLinkablePort(e,!0),e!==null)?(this.isForwards=!1,e):null},Ri.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();e!==null&&(this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(this.temporaryToNode===null||this.temporaryToNode.location.u()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,e=this.originalFromPort.part,e instanceof Z&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(this.temporaryFromNode===null||this.temporaryFromNode.location.u()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,e=this.originalToPort.part,e instanceof Z&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0)},Ri.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Kg()},Ri.prototype.doStop=function(){ti.prototype.doStop.call(this),this.startObject=null},Ri.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.transactionResult=null,i=null,n=null,r=null,o=null;try{var s=this.targetPort=this.findTargetPort(this.isForwards);if(s!==null){var u=s.part;u instanceof Z&&(this.isForwards?(this.originalFromNode!==null&&(e=this.originalFromNode,i=this.originalFromPort),n=u,r=s):(e=u,i=s,this.originalToNode!==null&&(n=this.originalToNode,r=this.originalToPort)))}else this.isForwards?this.originalFromNode!==null&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,i=this.originalFromPort):this.originalToNode!==null&&this.isUnconnectedLinkValid&&(n=this.originalToNode,r=this.originalToPort);e!==null||n!==null?(o=this.insertLink(e,i,n,r),o!==null?(s===null&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),o.isSelected=!0),this.transactionResult=this.name,t.R("LinkDrawn",o)):this.doNoLink(e,i,n,r)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),o&&t.allowSelect&&t.R("ChangedSelection",t.selection)}}},Ri.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(t===null)return!0;if(t instanceof z)return t.isTreeLink;var e=this.diagram;return e===null?!0:(t=e.partManager.getLinkCategoryForData(t),e=e.partManager.findLinkTemplateForCategory(t),e!==null?e.isTreeLink:!0)},Ri.prototype.insertLink=function(t,e,i,n){return this.diagram.partManager.insertLink(t,e,i,n)},Ri.prototype.doNoLink=function(){},X.Object.defineProperties(Ri.prototype,{archetypeLinkData:{get:function(){return this.T},set:function(t){this.T=t}},archetypeLabelNodeData:{get:function(){return this.I},set:function(t){this.I=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.bn},set:function(t){this.bn=t}}});var zc=new K(Ri,"Either",0),bx=new K(Ri,"ForwardsOnly",0),tw=new K(Ri,"BackwardsOnly",0);Ri.className="LinkingTool",Ri.Either=zc,Ri.ForwardsOnly=bx,Ri.BackwardsOnly=tw;function kn(){ti.call(this),this.name="Relinking";var t=new gt;t.figure="Diamond",t.desiredSize=wl,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.T=t,t=new gt,t.figure="Diamond",t.desiredSize=wl,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.bn=t,this.I=null,this.Ix=new I}ut(kn,ti),kn.prototype.updateAdornments=function(t){if(t!==null&&t instanceof z){var e="RelinkFrom",i=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.selectionObject;n!==null&&t.canRelinkFrom()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.If()&&(i=t.uk(e),i===null&&(i=this.makeAdornment(n,!1),t.Fh(e,i)))}i===null&&t.Jf(e),e="RelinkTo",i=null,t.isSelected&&!this.diagram.isReadOnly&&(n=t.selectionObject,n!==null&&t.canRelinkTo()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.If()&&(i=t.uk(e),i===null?(i=this.makeAdornment(n,!0),t.Fh(e,i)):i.o())),i===null&&t.Jf(e)}},kn.prototype.makeAdornment=function(t,e){var i=new Ct;return i.type=V.Link,e=e?this.toHandleArchetype:this.fromHandleArchetype,e!==null&&i.add(e.copy()),i.adornedObject=t,i},kn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Tt()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),e!==null},kn.prototype.doActivate=function(){var t=this.diagram;if(this.originalLink===null){var e=this.handle;if(e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"),e===null&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),e===null)return;var i=e.part;if(!(i instanceof Ct&&i.adornedPart instanceof z))return;this.handle=e,this.isForwards=i===null||i.category==="RelinkTo",this.originalLink=i.adornedPart}this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Ix.set(this.originalLink.actualBounds),this.originalLink!==null&&0<this.originalLink.pointsCount&&(this.originalLink.fromNode===null&&(this.temporaryFromPort!==null&&(this.temporaryFromPort.desiredSize=Nu),this.temporaryFromNode!==null&&(this.temporaryFromNode.location=this.originalLink.i(0))),this.originalLink.toNode===null&&(this.temporaryToPort!==null&&(this.temporaryToPort.desiredSize=Nu),this.temporaryToNode!==null&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),this.temporaryLink!==null&&(this.temporaryFromNode!==null&&(this.temporaryLink.fromNode=this.temporaryFromNode),this.temporaryToNode!==null&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0},kn.prototype.copyLinkProperties=function(t,e){if(t!==null&&e!==null){e.adjusting=t.adjusting,e.corner=t.corner;var i=t.curve;(i===dh||i===zo)&&(i=ji),e.curve=i,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},kn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Kg()},kn.prototype.doStop=function(){ti.prototype.doStop.call(this),this.handle=null},kn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,i=this.originalFromPort,n=this.originalToNode,r=this.originalToPort,o=this.originalLink;if(this.targetPort=this.findTargetPort(this.isForwards),this.targetPort!==null){var s=this.targetPort.part;s instanceof Z&&(this.isForwards?(n=s,r=this.targetPort):(e=s,i=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?r=n=null:i=e=null:o=null;o!==null?(this.reconnectLink(o,this.isForwards?n:e,this.isForwards?r:i,this.isForwards),this.targetPort===null&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint,o.Ua()),t.allowSelect&&(o.isSelected=!0),this.transactionResult=this.name,t.R("LinkRelinked",o,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Lq(this.Ix)}this.stopTool()},kn.prototype.reconnectLink=function(t,e,i,n){return i=i!==null&&i.portId!==null?i.portId:"",n?(t.toNode=e,t.toPortId=i):(t.fromNode=e,t.fromPortId=i),!0},kn.prototype.doNoRelink=function(){};function ew(t,e,i,n,r){e!==null?(t.copyPortProperties(e,i,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),n!==null?(t.copyPortProperties(n,r,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}X.Object.defineProperties(kn.prototype,{fromHandleArchetype:{get:function(){return this.T},set:function(t){this.T=t}},toHandleArchetype:{get:function(){return this.bn},set:function(t){this.bn=t}},handle:{get:function(){return this.I},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.I=t}}}),kn.className="RelinkingTool",ht("linkingTool",function(){return this.findTool("Linking")},function(t){this.Xa("Linking",t,this.mouseMoveTools)}),ht("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.Xa("Relinking",t,this.mouseDownTools)});function Se(){Ft.call(this),this.name="LinkReshaping";var t=new gt;t.figure="Rectangle",t.desiredSize=ry,t.fill="lightblue",t.stroke="dodgerblue",this.v=t,t=new gt,t.figure="Diamond",t.desiredSize=wl,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.I=t,this.T=3,this.tu=this.l=null,this.Jx=new k,this.Is=new J}ut(Se,Ft),Se.prototype.Xv=function(t){return t&&t.Ps&&t.Ps.value!==0?t.Ps:Ey},Se.prototype.Vm=function(t,e){t.Ps=e},Se.prototype.updateAdornments=function(t){if(t!==null&&t instanceof z){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.path;i!==null&&t.canReshape()&&t.actualBounds.u()&&t.isVisible()&&i.actualBounds.u()&&i.If()&&(e=t.uk(this.name),e===null||e.Fx!==t.pointsCount||e.Tx!==t.resegmentable)&&(e=this.makeAdornment(i),e!==null&&(e.Fx=t.pointsCount,e.Tx=t.resegmentable,t.Fh(this.name,e)))}e===null&&t.Jf(this.name)}},Se.prototype.makeAdornment=function(t){var e=t.part,i=e.pointsCount,n=e.isOrthogonal,r=null;if(e.points!==null&&1<i){r=new Ct,r.type=V.Link,i=e.firstPickIndex;var o=e.lastPickIndex,s=n?1:0;if(e.resegmentable&&e.computeCurve()!==rn)for(var u=i+s;u<o-s;u++){var a=this.makeResegmentHandle(t,u);a!==null&&(a.segmentIndex=u,a.segmentFraction=.5,a.fromMaxLinks=999,r.add(a))}for(s=i+1;s<o;s++)if(u=this.makeHandle(t,s),u!==null){if(u.segmentIndex=s,s!==i)if(s===i+1&&n){a=e.i(i);var f=e.i(i+1);j.A(a.x,f.x)&&j.A(a.y,f.y)&&(f=e.i(i-1)),j.A(a.x,f.x)?(this.Vm(u,zu),u.cursor="n-resize"):j.A(a.y,f.y)&&(this.Vm(u,Vu),u.cursor="w-resize")}else s===o-1&&n?(a=e.i(o-1),f=e.i(o),j.A(a.x,f.x)&&j.A(a.y,f.y)&&(a=e.i(o+1)),j.A(a.x,f.x)?(this.Vm(u,zu),u.cursor="n-resize"):j.A(a.y,f.y)&&(this.Vm(u,Vu),u.cursor="w-resize")):s!==o&&(this.Vm(u,Oy),u.cursor="move");r.add(u)}r.adornedObject=t}return r},Se.prototype.makeHandle=function(){var t=this.handleArchetype;return t===null?null:t.copy()},Se.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return t===null?null:t.copy()},Se.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowReshape&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},Se.prototype.doActivate=function(){var t=this.diagram;if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null){var e=this.handle.part.adornedPart;if(e instanceof z){if(this.tu=e,t.isMouseCaptured=!0,this.xa(this.name),e.resegmentable&&this.handle.fromMaxLinks===999){var i=e.points.copy(),n=this.getResegmentingPoint();if(i.wb(this.handle.segmentIndex+1,n),e.isOrthogonal&&i.wb(this.handle.segmentIndex+1,n),e.points=i,e.Mb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),this.handle===null){this.doDeactivate();return}}this.Jx=e.i(this.handle.segmentIndex),this.Is=e.points.copy(),this.isActive=!0}}},Se.prototype.doDeactivate=function(){this.Kg(),this.tu=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},Se.prototype.doCancel=function(){var t=this.adornedLink;t!==null&&(t.points=this.Is),this.stopTool()},Se.prototype.getResegmentingPoint=function(){return this.handle.da(Wt)},Se.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},Se.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),e=this.adornedLink,e!==null&&e.resegmentable){var i=this.handle.segmentIndex,n=e.i(i-1),r=e.i(i),o=e.i(i+1);if(e.isOrthogonal){if(i>e.firstPickIndex+1&&i<e.lastPickIndex-1){var s=e.i(i-2);if(Math.abs(n.x-r.x)<this.resegmentingDistance&&Math.abs(n.y-r.y)<this.resegmentingDistance&&(Fu(this,s,n,r,o,!0)||Fu(this,s,n,r,o,!1))){var u=e.points.copy();Fu(this,s,n,r,o,!0)?(u.Qc(i-2,new k(s.x,(o.y+s.y)/2)),u.Qc(i+1,new k(o.x,(o.y+s.y)/2))):(u.Qc(i-2,new k((o.x+s.x)/2,s.y)),u.Qc(i+1,new k((o.x+s.x)/2,o.y))),u.cb(i),u.cb(i-1),e.points=u,e.Mb()}else s=e.i(i+2),Math.abs(r.x-o.x)<this.resegmentingDistance&&Math.abs(r.y-o.y)<this.resegmentingDistance&&(Fu(this,n,r,o,s,!0)||Fu(this,n,r,o,s,!1))&&(u=e.points.copy(),Fu(this,n,r,o,s,!0)?(u.Qc(i-1,new k(n.x,(n.y+s.y)/2)),u.Qc(i+2,new k(s.x,(n.y+s.y)/2))):(u.Qc(i-1,new k((n.x+s.x)/2,n.y)),u.Qc(i+2,new k((n.x+s.x)/2,s.y))),u.cb(i+1),u.cb(i),e.points=u,e.Mb())}}else s=k.alloc(),j.Ph(n.x,n.y,o.x,o.y,r.x,r.y,s)&&s.Ge(r)<this.resegmentingDistance*this.resegmentingDistance&&(n=e.points.copy(),n.cb(i),e.points=n,e.Mb()),k.free(s)}t.Oa(),this.transactionResult=this.name,t.R("LinkReshaped",this.adornedLink,this.Is)}this.stopTool()};function Fu(t,e,i,n,r,o){return o?Math.abs(e.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-r.y)<t.resegmentingDistance:Math.abs(e.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-r.x)<t.resegmentingDistance}Se.prototype.reshape=function(t){var e=this.adornedLink;e.Sh();var i=this.handle.segmentIndex,n=this.Xv(this.handle);if(e.isOrthogonal)if(i===e.firstPickIndex+1)i=e.firstPickIndex+1,n===zu?(e.L(i,e.i(i-1).x,t.y),e.L(i+1,e.i(i+2).x,t.y)):n===Vu&&(e.L(i,t.x,e.i(i-1).y),e.L(i+1,t.x,e.i(i+2).y));else if(i===e.lastPickIndex-1)i=e.lastPickIndex-1,n===zu?(e.L(i-1,e.i(i-2).x,t.y),e.L(i,e.i(i+1).x,t.y)):n===Vu&&(e.L(i-1,t.x,e.i(i-2).y),e.L(i,t.x,e.i(i+1).y));else{n=i;var r=e.i(n),o=e.i(n-1),s=e.i(n+1);j.A(o.x,r.x)&&j.A(r.y,s.y)?(j.A(o.x,e.i(n-2).x)&&!j.A(o.y,e.i(n-2).y)?(e.m(n,t.x,o.y),i++,n++):e.L(n-1,t.x,o.y),j.A(s.y,e.i(n+2).y)&&!j.A(s.x,e.i(n+2).x)?e.m(n+1,s.x,t.y):e.L(n+1,s.x,t.y)):j.A(o.y,r.y)&&j.A(r.x,s.x)?(j.A(o.y,e.i(n-2).y)&&!j.A(o.x,e.i(n-2).x)?(e.m(n,o.x,t.y),i++,n++):e.L(n-1,o.x,t.y),j.A(s.x,e.i(n+2).x)&&!j.A(s.y,e.i(n+2).y)?e.m(n+1,t.x,s.y):e.L(n+1,t.x,s.y)):j.A(o.x,r.x)&&j.A(r.x,s.x)?(j.A(o.x,e.i(n-2).x)&&!j.A(o.y,e.i(n-2).y)?(e.m(n,t.x,o.y),i++,n++):e.L(n-1,t.x,o.y),j.A(s.x,e.i(n+2).x)&&!j.A(s.y,e.i(n+2).y)?e.m(n+1,t.x,s.y):e.L(n+1,t.x,s.y)):j.A(o.y,r.y)&&j.A(r.y,s.y)&&(j.A(o.y,e.i(n-2).y)&&!j.A(o.x,e.i(n-2).x)?(e.m(n,o.x,t.y),i++,n++):e.L(n-1,o.x,t.y),j.A(s.y,e.i(n+2).y)&&!j.A(s.x,e.i(n+2).x)?e.m(n+1,s.x,t.y):e.L(n+1,s.x,t.y)),e.L(i,t.x,t.y)}else e.L(i,t.x,t.y),n=e.fromNode,r=e.fromPort,n!==null&&(o=n.findVisibleNode(),o!==null&&o!==n&&(n=o,r=n.port)),i===1&&e.computeSpot(!0,r).nc()&&(o=r.da(Wt,k.alloc()),n=e.getLinkPointFromPoint(n,r,o,t,!0,k.alloc()),e.L(0,n.x,n.y),k.free(o),k.free(n)),n=e.toNode,r=e.toPort,n!==null&&(o=n.findVisibleNode(),o!==null&&o!==n&&(n=o,r=n.port)),i===e.pointsCount-2&&e.computeSpot(!1,r).nc()&&(i=r.da(Wt,k.alloc()),t=e.getLinkPointFromPoint(n,r,i,t,!1,k.alloc()),e.L(e.pointsCount-1,t.x,t.y),k.free(i),k.free(t));e.zf()},Se.prototype.computeReshape=function(t){var e=this.adornedLink,i=this.handle.segmentIndex;switch(this.Xv(this.handle)){case Oy:return t;case zu:return new k(e.i(i).x,t.y);case Vu:return new k(t.x,e.i(i).y);default:case Ey:return e.i(i)}},X.Object.defineProperties(Se.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},midHandleArchetype:{get:function(){return this.I},set:function(t){this.I=t}},handle:{get:function(){return this.l},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedLink:{get:function(){return this.tu}},resegmentingDistance:{get:function(){return this.T},set:function(t){this.T=t}},originalPoint:{get:function(){return this.Jx}},originalPoints:{get:function(){return this.Is}}}),Se.prototype.setReshapingBehavior=Se.prototype.Vm,Se.prototype.getReshapingBehavior=Se.prototype.Xv;var Ey=new K(Se,"None",0),Vu=new K(Se,"Horizontal",1),zu=new K(Se,"Vertical",2),Oy=new K(Se,"All",3);Se.className="LinkReshapingTool",Se.None=Ey,Se.Horizontal=Vu,Se.Vertical=zu,Se.All=Oy,ht("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.Xa("LinkReshaping",t,this.mouseDownTools)});function Ti(){Ft.call(this),this.name="Resizing",this.hg=new pt(1,1).freeze(),this.gg=new pt(9999,9999).freeze(),this.Rg=new pt(NaN,NaN).freeze(),this.I=!1,this.T=!0,this.ge=null;var t=new gt;t.alignmentFocus=Wt,t.figure="Rectangle",t.desiredSize=ry,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.v=t,this.l=null,this.Hs=new k,this.Hx=new pt,this.kp=new k,this.Ku=new pt(0,0),this.Ju=new pt(Infinity,Infinity),this.Iu=new pt(1,1),this.Ex=!0}ut(Ti,Ft),Ti.prototype.updateAdornments=function(t){if(!(t===null||t instanceof z)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,i=t.uk(this.name);if(e!==null&&t.canResize()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.If()&&((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null)){e=e.kj(),gs(t)&&this.updateResizeHandles(i,e),t.Fh(this.name,i);return}}t.Jf(this.name)}},Ti.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(e===null){e=new Ct,e.type=V.Spot,e.locationSpot=Wt;var i=new xi;i.isPanelMain=!0,e.add(i),e.add(this.makeHandle(t,mi)),e.add(this.makeHandle(t,Cu)),e.add(this.makeHandle(t,Tr)),e.add(this.makeHandle(t,Lu)),e.add(this.makeHandle(t,wn)),e.add(this.makeHandle(t,Gi)),e.add(this.makeHandle(t,Sn)),e.add(this.makeHandle(t,Mn))}else if(Tn(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},Ti.prototype.makeHandle=function(t,e){return t=this.handleArchetype,t===null?null:(t=t.copy(),t.alignment=e,t)},Ti.prototype.updateResizeHandles=function(t,e){if(t!==null){if(!t.alignment.Nb()&&(t.cursor==="pointer"||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;if(i.nc()&&(i=Wt),0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else if(1<=i.y)e+=90;else break t;0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof V)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)}},Ti.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowResize&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},Ti.prototype.doActivate=function(){var t=this.diagram;this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle!==null&&(this.adornedObject=this.handle.part.adornedObject,this.adornedObject!==null&&(t.isMouseCaptured=!0,this.Ex=t.animationManager.isEnabled,t.animationManager.isEnabled=!1,this.xa(this.name),this.Hs.set(this.adornedObject.da(this.handle.alignment.kw())),this.kp.set(this.adornedObject.part.location),this.Hx.set(this.adornedObject.desiredSize),this.Iu=this.computeCellSize(),this.Ku=this.computeMinSize(),this.Ju=this.computeMaxSize(),this.isActive=!0))},Ti.prototype.doDeactivate=function(){var t=this.diagram;this.Kg(),this.ge=this.handle=null,this.isActive=t.isMouseCaptured=!1,t.animationManager.isEnabled=this.Ex},Ti.prototype.doCancel=function(){this.adornedObject!==null&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},Ti.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Ku,i=this.Ju,n=this.Iu,r=this.adornedObject.Lt(t.lastInput.documentPoint,k.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),t.jd(),k.free(r)}},Ti.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Ku,i=this.Ju,n=this.Iu,r=this.adornedObject.Lt(t.lastInput.documentPoint,k.alloc()),o=this.computeReshape();e=this.computeResize(r,this.handle.alignment,e,i,n,o),this.resize(e),k.free(r),t.Oa(),this.transactionResult=this.name,t.R("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},Ti.prototype.resize=function(t){var e=this.diagram,i=this.adornedObject;if(i!==null){if(i.desiredSize=t.size,t=i.part,t.Ta(),i=i.da(this.handle.alignment.kw()),t instanceof dt){var n=new J;if(n.add(t),!this.dragsMembers&&t.placeholder===null){var r=new Cl;r.dragsMembers=!1}e.moveParts(n,this.oppositePoint.copy().ee(i),!0,r)}else t.location=t.location.copy().ee(i).add(this.oppositePoint);e.jd()}},Ti.prototype.computeResize=function(t,e,i,n,r,o){e.nc()&&(e=Wt);var s=this.adornedObject.naturalBounds,u=s.x,a=s.y,f=s.x+s.width,c=s.y+s.height,d=1;if(!o){d=s.width;var g=s.height;0>=d&&(d=1),0>=g&&(g=1),d=g/d}return g=k.alloc(),j.Cq(t.x,t.y,u,a,r.width,r.height,g),t=s.copy(),0>=e.x?0>=e.y?(t.x=Math.max(g.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=Math.max(f-t.x,i.width),t.y=Math.max(g.y,c-n.height),t.y=Math.min(t.y,c-i.height),t.height=Math.max(c-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=f-t.width,t.y=c-t.height)):1<=e.y?(t.x=Math.max(g.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=Math.max(f-t.x,i.width),t.height=Math.max(Math.min(g.y-a,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.x=f-t.width)):(t.x=Math.max(g.x,f-n.width),t.x=Math.min(t.x,f-i.width),t.width=f-t.x,o||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=a+.5*(c-a-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(g.x-u,n.width),i.width),t.y=Math.max(g.y,c-n.height),t.y=Math.min(t.y,c-i.height),t.height=Math.max(c-t.y,i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width),t.y=c-t.height)):1<=e.y?(t.width=Math.max(Math.min(g.x-u,n.width),i.width),t.height=Math.max(Math.min(g.y-a,n.height),i.height),o||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width))):(t.width=Math.max(Math.min(g.x-u,n.width),i.width),o||(t.height=Math.max(Math.min(d*t.width,n.height),i.height),t.width=t.height/d,t.y=a+.5*(c-a-t.height))):0>=e.y?(t.y=Math.max(g.y,c-n.height),t.y=Math.min(t.y,c-i.height),t.height=c-t.y,o||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=u+.5*(f-u-t.width))):1<=e.y&&(t.height=Math.max(Math.min(g.y-a,n.height),i.height),o||(t.width=Math.max(Math.min(t.height/d,n.width),i.width),t.height=d*t.width,t.x=u+.5*(f-u-t.width))),k.free(g),t},Ti.prototype.computeReshape=function(){var t=ve;return this.adornedObject instanceof gt&&(t=E0(this.adornedObject)),!(t===vr||this.diagram.lastInput.shift)},Ti.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},Ti.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},Ti.prototype.computeCellSize=function(){var t=new pt(NaN,NaN),e=this.adornedObject.part;return e!==null&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(e=e.grid,e!==null&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||t.width===0||t.width===Infinity)&&(t.width=1),(isNaN(t.height)||t.height===0||t.height===Infinity)&&(t.height=1),t},X.Object.defineProperties(Ti.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},handle:{get:function(){return this.l},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ge},set:function(t){if(t!==null&&t.part instanceof Ct)throw Error("new handle must not be in an Adornment: "+t);this.ge=t}},minSize:{get:function(){return this.hg},set:function(t){if(!this.hg.w(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.hg.h(e,t)}}},maxSize:{get:function(){return this.gg},set:function(t){if(!this.gg.w(t)){var e=t.width;isNaN(e)&&(e=Infinity),t=t.height,isNaN(t)&&(t=Infinity),this.gg.h(e,t)}}},cellSize:{get:function(){return this.Rg},set:function(t){this.Rg.w(t)||this.Rg.assign(t)}},isGridSnapEnabled:{get:function(){return this.I},set:function(t){this.I=t}},dragsMembers:{get:function(){return this.T},set:function(t){this.T=t}},oppositePoint:{get:function(){return this.Hs},set:function(t){this.Hs.w(t)||this.Hs.assign(t)}},originalDesiredSize:{get:function(){return this.Hx}},originalLocation:{get:function(){return this.kp}}}),Ti.className="ResizingTool",ht("resizingTool",function(){return this.findTool("Resizing")},function(t){this.Xa("Resizing",t,this.mouseDownTools)});function cn(){Ft.call(this),this.name="Rotating",this.Ka=45,this.Ja=2,this.kp=new k,this.ge=null;var t=new gt;t.figure="Ellipse",t.desiredSize=wl,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.v=t,this.l=null,this.Gx=0,this.kv=new k(NaN,NaN),this.I=0,this.T=50}ut(cn,Ft),cn.prototype.updateAdornments=function(t){if(t!==null){if(t.Oh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(e=t.rotateObject,e!==null&&t.canRotate()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.If())){var i=t.uk(this.name);if((i===null||i.adornedObject!==e)&&(i=this.makeAdornment(e)),i!==null){i.angle=e.kj(),i.placeholder===null&&(i.location=this.computeAdornmentLocation(e)),t.Fh(this.name,i);return}}t.Jf(this.name)}},cn.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(e===null){e=new Ct,e.type=V.Position,e.locationSpot=Wt;var i=this.handleArchetype;i!==null&&e.add(i.copy())}else if(Tn(e),e=e.copy(),e===null)return null;return e.adornedObject=t,e},cn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!t.isReadOnly&&t.allowRotate&&t.lastInput.left?this.findToolHandleAt(t.firstInput.documentPoint,this.name)!==null:!1},cn.prototype.doActivate=function(){var t=this.diagram;if(this.adornedObject===null){if(this.handle===null&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),this.handle===null)return;this.adornedObject=this.handle.part.adornedObject}this.adornedObject!==null&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.xa(this.name),this.Gx=this.adornedObject.angle,this.kv=this.computeRotationPoint(this.adornedObject),this.kp=this.adornedObject.part.location.copy(),this.isActive=!0)},cn.prototype.computeRotationPoint=function(t){var e=t.part,i=e.locationObject;return e.rotationSpot.kb()?t.da(e.rotationSpot):t===e||t===i?i.da(e.locationSpot):t.da(Wt)},cn.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.u()||(e=this.computeRotationPoint(t)),e=t.Lt(e);var i=this.handleAngle;0>i?i+=360:360<=i&&(i-=360),i=Math.round(45*Math.round(i/45));var n=this.handleDistance;return i===0?e.x=t.naturalBounds.width+n:i===45?(e.x=t.naturalBounds.width+n,e.y=t.naturalBounds.height+n):i===90?e.y=t.naturalBounds.height+n:i===135?(e.x=-n,e.y=t.naturalBounds.height+n):i===180?e.x=-n:i===225?(e.x=-n,e.y=-n):i===270?e.y=-n:i===315&&(e.x=t.naturalBounds.width+n,e.y=-n),t.da(e)},cn.prototype.doDeactivate=function(){var t=this.diagram;this.Kg(),this.ge=this.handle=null,this.kv=new k(NaN,NaN),this.isActive=t.isMouseCaptured=!1},cn.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},cn.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},cn.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Oa(),this.transactionResult=this.name,t.R("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},cn.prototype.rotate=function(t){var e=this.adornedObject;if(e!==null){e.angle=t,e=e.part,e.Ta();var i=e.locationObject,n=e.rotateObject;(i===n||i.Hg(n))&&(i=this.kp.copy(),e.location=i.ee(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.jd()}},cn.prototype.computeRotate=function(t){t=this.rotationPoint.Sa(t)-this.handleAngle;var e=this.adornedObject.panel;e!==null&&(t-=e.kj()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var i=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<i&&(t%e<i?t=Math.floor(t/e)*e:t%e>e-i&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},X.Object.defineProperties(cn.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},handle:{get:function(){return this.l},set:function(t){if(t!==null&&!(t.part instanceof Ct))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ge},set:function(t){if(t!==null&&t.part instanceof Ct)throw Error("new handle must not be in an Adornment: "+t);this.ge=t}},snapAngleMultiple:{get:function(){return this.Ka},set:function(t){this.Ka=t}},snapAngleEpsilon:{get:function(){return this.Ja},set:function(t){this.Ja=t}},originalAngle:{get:function(){return this.Gx}},rotationPoint:{get:function(){return this.kv}},handleAngle:{get:function(){return this.I},set:function(t){this.I=t}},handleDistance:{get:function(){return this.T},set:function(t){this.T=t}}}),cn.className="RotatingTool",ht("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.Xa("Rotating",t,this.mouseDownTools)});function Uu(){Ft.call(this),this.name="ClickSelecting"}ut(Uu,Ft),Uu.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},Uu.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},Uu.className="ClickSelectingTool";function No(){Ft.call(this),this.name="Action",this.Uk=null}ut(No,Ft),No.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,i=t.Vb(e.documentPoint,function(n){for(;n.panel!==null&&!n.isActionable;)n=n.panel;return n});return i!==null&&i.isActionable?(this.Uk=i,t.Cj=t.Vb(e.documentPoint,null,null),!0):!1},No.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Uk;e!==null&&(t.targetObject=e,e.actionDown!==null&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},No.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Uk;e!==null&&(t.targetObject=e,e.actionMove!==null&&e.actionMove(t,e))}},No.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Uk;if(e===null)return;t.targetObject=e,e.actionUp!==null&&e.actionUp(t,e),this.standardMouseClick(function(i){for(;i.panel!==null&&(!i.isActionable||i!==e);)i=i.panel;return i},function(i){return i===e})}this.stopTool()},No.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.Uk;e!==null&&(t.targetObject=e,e.actionCancel!==null&&e.actionCancel(t,e),this.stopTool())},No.prototype.doStop=function(){this.Uk=null},No.className="ActionTool";function Fs(){Ft.call(this),this.name="ClickCreating",this.yj=null,this.v=!0,this.l=!1,this.xx=new k(0,0)}ut(Fs,Ft),Fs.prototype.canStart=function(){if(!this.isEnabled||this.archetypeNodeData===null)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(t.lastInput.clickCount===1&&(this.xx=t.lastInput.viewPoint.copy()),t.lastInput.clickCount!==2||this.isBeyondDragSize(this.xx))return!1}else if(t.lastInput.clickCount!==1)return!1;return!(t.currentTool!==this&&t.xm(t.lastInput.documentPoint,!0)!==null)},Fs.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},Fs.prototype.insertPart=function(t){var e=this.diagram,i=this.archetypeNodeData;if(i===null)return null;var n=null;try{if(e.R("ChangingSelection",e.selection),this.xa(this.name),i instanceof rt)i.Oc()&&(Tn(i),n=i.copy(),n!==null&&e.add(n));else if(i!==null){var r=e.model.copyNodeData(i);at(r)&&(e.model.wf(r),n=e.zc(r))}if(n!==null){var o=k.allocAt(t.x,t.y);this.isGridSnapEnabled&&qy(this.diagram,n,t,o),n.location=o,e.allowSelect&&(e.clearSelection(!0),n.isSelected=!0),k.free(o)}e.Oa(),this.transactionResult=this.name,e.R("PartCreated",n)}finally{this.Kg(),e.R("ChangedSelection",e.selection)}return n},X.Object.defineProperties(Fs.prototype,{archetypeNodeData:{get:function(){return this.yj},set:function(t){this.yj=t}},isDoubleClick:{get:function(){return this.v},set:function(t){this.v=t}},isGridSnapEnabled:{get:function(){return this.l},set:function(t){this.l=t}}}),Fs.className="ClickCreatingTool";function Cr(){Ft.call(this),this.name="DragSelecting",this.nl=175,this.v=!1;var t=new rt;t.layerName="Tool",t.selectable=!1;var e=new gt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.l=t}ut(Cr,Ft),Cr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||t.xm(e.documentPoint,!0)!==null))},Cr.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Cr.prototype.doDeactivate=function(){var t=this.diagram;t.Lf(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Cr.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&this.box!==null){var e=this.computeBoxBounds(),i=this.box.ab("SHAPE");i===null&&(i=this.box.rb());var n=pt.alloc().h(e.width,e.height);e=k.allocAt(e.x,e.y),i.desiredSize=n,this.box.position=e,pt.free(n),k.free(e),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Dt(t.lastInput.viewPoint)}},Cr.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.R("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Cr.prototype.computeBoxBounds=function(){var t=this.diagram;return new I(t.firstInput.documentPoint,t.lastInput.documentPoint)},Cr.prototype.selectInRect=function(t){var e=this.diagram,i=e.lastInput;if(t=e.uy(t,this.isPartialInclusion),te?i.meta:i.control)if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)e=t.value,e.isSelected=!e.isSelected;else if(i.shift)for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0);else{for(i=new J,e=e.selection.iterator;e.next();){var n=e.value;t.contains(n)||i.add(n)}for(e=i.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)e=t.value,e.isSelected||(e.isSelected=!0)}},X.Object.defineProperties(Cr.prototype,{delay:{get:function(){return this.nl},set:function(t){this.nl=t}},isPartialInclusion:{get:function(){return this.v},set:function(t){this.v=t}},box:{get:function(){return this.l},set:function(t){this.l=t}}}),Cr.className="DragSelectingTool";function Lr(){Ft.call(this),this.name="Panning",this.hv=new k,this.lz=new k,this.Qg=!1;var t=this;this.Mx=function(){var e=t.diagram;e!==null&&e.removeEventListener(Y.document,"scroll",t.Mx,!1),t.stopTool()}}ut(Lr,Ft),Lr.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Lr.prototype.doActivate=function(){var t=this.diagram;this.Qg?(t.lastInput.bubbles=!0,t.addEventListener(Y.document,"scroll",this.Mx,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.hv.assign(t.position)),this.isActive=!0},Lr.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Lr.prototype.doCancel=function(){var t=this.diagram;t.position=this.hv,t.isMouseCaptured=!1,this.stopTool()},Lr.prototype.doMouseMove=function(){this.move()},Lr.prototype.doMouseUp=function(){this.move(),this.stopTool()},Lr.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.Qg)t.lastInput.bubbles=!0;else{var e=t.position,i=t.firstInput.documentPoint,n=t.lastInput.documentPoint,r=e.x+i.x-n.x;i=e.y+i.y-n.y,t.allowHorizontalScroll||(r=e.x),t.allowVerticalScroll||(i=e.y),t.position=this.lz.h(r,i)}},X.Object.defineProperties(Lr.prototype,{bubbles:{get:function(){return this.Qg},set:function(t){this.Qg=t}},originalPosition:{get:function(){return this.hv}}}),Lr.className="PanningTool",ht("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.Xa("ClickCreating",t,this.mouseUpTools)}),ht("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.Xa("ClickSelecting",t,this.mouseUpTools)}),ht("panningTool",function(){return this.findTool("Panning")},function(t){this.Xa("Panning",t,this.mouseMoveTools)}),ht("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.Xa("DragSelecting",t,this.mouseMoveTools)}),ht("actionTool",function(){return this.findTool("Action")},function(t){this.Xa("Action",t,this.mouseDownTools)});function To(){this.T=this.I=this.l=this.v=null}X.Object.defineProperties(To.prototype,{mainElement:{get:function(){return this.I},set:function(t){this.I=t}},show:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},hide:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},valueFunction:{get:function(){return this.T},set:function(t){this.T=t}}}),To.className="HTMLInfo";function qn(t,e,i){this.text=t,this.gy=e,this.visible=i}qn.className="ContextMenuButtonInfo";function qi(){Ft.call(this),this.name="ContextMenu",this.v=this.zu=this.l=null,this.Cx=new k,this.Au=null,this.Vu=!1;var t=this;this.uv=function(){t.stopTool()}}ut(qi,Ft);function KN(t){var e=new To;e.show=function(r,o,s){s.showDefaultContextMenu()},e.hide=function(r,o){o.hideDefaultContextMenu()},Yu=e,t.uv=function(){t.stopTool()},e=it("div");var i=it("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",i.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var n=it("style");Y.document.getElementsByTagName("head")[0].appendChild(n),n.sheet.insertRule(".goCXul { list-style: none; }",0),n.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),n.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),n=t.diagram,n!==null&&(n.addEventListener(e,"contextmenu",Ay,!1),n.addEventListener(e,"selectstart",Ay,!1),n.addEventListener(i,"contextmenu",Ay,!1)),e.className="goCXforeground",i.className="goCXbackground",Y.document.body&&(Y.document.body.appendChild(e),Y.document.body.appendChild(i)),ja=e,La=i,Iy=!0}function Ay(t){return t.preventDefault(),!1}qi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount?!1:!!(t.lastInput.isTouchEvent&&this.defaultTouchContextMenu!==null||this.findObjectWithContextMenu()!==null)},qi.prototype.doStart=function(){this.Cx.set(this.diagram.firstInput.documentPoint)},qi.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},qi.prototype.findObjectWithContextMenu=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.lastInput,n=null;if(t instanceof O||(t instanceof ot?n=t:n=e.Vb(i.documentPoint,null,function(r){return!r.layer.isTemporary})),n!==null){for(t=n;t!==null;){if(t.contextMenu!==null)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return n.part}else if(e.contextMenu!==null)return e;return null},qi.prototype.doActivate=function(){},qi.prototype.doMouseDown=function(){if(Ft.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Ct){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&iw(this)},qi.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Ct){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}iw(this)};function iw(t){var e=t.diagram;if(t.isActive){var i=t.currentContextMenu;if(i!==null){if(!(i instanceof To)){var n=e.Vb(e.lastInput.documentPoint,null,null);n!==null&&n.Hg(i)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(nw(t,!0),t.isActive||t.stopTool())}function nw(t,e,i){if(i===void 0&&(i=null),!t.Vu&&(t.Vu=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Vu=!1,!e)){if(t.isActive=!0,e=Yu,i===null&&(i=t.findObjectWithContextMenu()),i!==null){var n=i.contextMenu;n!==null?(t.currentObject=i instanceof ot?i:null,t.showContextMenu(n,t.currentObject)):e!==null&&t.showContextMenu(e,t.currentObject)}else e!==null&&t.showContextMenu(e,null);t.currentContextMenu instanceof Ct&&!t.currentContextMenu.visible&&t.stopTool()}}qi.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");t!==null&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},qi.prototype.showContextMenu=function(t,e){var i=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Ct){t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,t.placeholder!==null&&(t.placeholder.scale=i.scale);var n=t.diagram;n!==null&&n!==i&&n.remove(t),i.add(t),e!==null?t.adornedObject=e:t.data=i.model,t.Ta(),this.positionContextMenu(t,e)}else t instanceof To&&t.show(e,i,this);this.currentContextMenu=t},qi.prototype.positionContextMenu=function(t){if(t.placeholder===null){var e=this.diagram,i=e.lastInput.documentPoint.copy(),n=t.measuredBounds,r=e.viewportBounds;e.lastInput.isTouchEvent&&(i.x-=n.width),i.x+n.width>r.right&&(i.x-=n.width+5/e.scale),i.x<r.x&&(i.x=r.x),i.y+n.height>r.bottom&&(i.y-=n.height+5/e.scale),i.y<r.y&&(i.y=r.y),t.position=i}},qi.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;e!==null&&(e instanceof Ct?(t.remove(e),this.zu!==null&&this.zu.Jf(e.category),e.data=null,e.adornedObject=null):e instanceof To&&(e.hide!==null?e.hide(t,this):e.mainElement!==null&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())};function _N(t){var e=new J;return e.add(new qn("Copy",function(i){i.commandHandler.copySelection()},function(i){return i.commandHandler.canCopySelection()})),e.add(new qn("Cut",function(i){i.commandHandler.cutSelection()},function(i){return i.commandHandler.canCutSelection()})),e.add(new qn("Delete",function(i){i.commandHandler.deleteSelection()},function(i){return i.commandHandler.canDeleteSelection()})),e.add(new qn("Paste",function(i){i.commandHandler.pasteSelection(t.mouseDownPoint)},function(i){return i.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new qn("Select All",function(i){i.commandHandler.selectAll()},function(i){return i.commandHandler.canSelectAll()})),e.add(new qn("Undo",function(i){i.commandHandler.undo()},function(i){return i.commandHandler.canUndo()})),e.add(new qn("Redo",function(i){i.commandHandler.redo()},function(i){return i.commandHandler.canRedo()})),e.add(new qn("Scroll To Part",function(i){i.commandHandler.scrollToPart()},function(i){return i.commandHandler.canScrollToPart()})),e.add(new qn("Zoom To Fit",function(i){i.commandHandler.zoomToFit()},function(i){return i.commandHandler.canZoomToFit()})),e.add(new qn("Reset Zoom",function(i){i.commandHandler.resetZoom()},function(i){return i.commandHandler.canResetZoom()})),e.add(new qn("Group Selection",function(i){i.commandHandler.groupSelection()},function(i){return i.commandHandler.canGroupSelection()})),e.add(new qn("Ungroup Selection",function(i){i.commandHandler.ungroupSelection()},function(i){return i.commandHandler.canUngroupSelection()})),e.add(new qn("Edit Text",function(i){i.commandHandler.editTextBlock()},function(i){return i.commandHandler.canEditTextBlock()})),e}qi.prototype.showDefaultContextMenu=function(){var t=this.diagram;this.Au===null&&(this.Au=_N(this)),ja.innerHTML="",La.addEventListener("click",this.uv,!1);var e=this,i=it("ul");i.className="goCXul",ja.appendChild(i),i.innerHTML="";for(var n=this.Au.iterator;n.next();){var r=n.value,o=r.visible;if(typeof r.gy=="function"&&(typeof o!="function"||o(t))){o=it("li"),o.className="goCXli";var s=it("a");s.className="goCXa",s.href="#",s.fz=r.gy,s.addEventListener("click",function(u){return this.fz(t),e.stopTool(),u.preventDefault(),!1},!1),s.textContent=r.text,o.appendChild(s),i.appendChild(o)}}ja.style.display="block",La.style.display="block"},qi.prototype.hideDefaultContextMenu=function(){if(this.currentContextMenu!==null&&this.currentContextMenu===Yu){ja.style.display="none",La.style.display="none";var t=this.diagram;t!==null&&t.removeEventListener(La,"click",this.uv,!1),this.currentContextMenu=null}},X.Object.defineProperties(qi.prototype,{currentContextMenu:{get:function(){return this.l},set:function(t){this.l=t,this.zu=t instanceof Ct?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return Iy===!1&&Yu===null&&Vn&&KN(this),Yu},set:function(t){t===null&&(Iy=!0),Yu=t}},currentObject:{get:function(){return this.v},set:function(t){this.v=t}},mouseDownPoint:{get:function(){return this.Cx}}});var Yu=null,Iy=!1,La=null,ja=null;qi.className="ContextMenuTool",ht("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.Xa("ContextMenu",t,this.mouseUpTools)});function ie(){Ft.call(this),this.name="TextEditing",this.yh=new qt,this.Ka=null,this.Ja=Ry,this.Vi=null,this.ia=Da,this.I=1,this.T=!0,this.v=null,this.l=new To,this.Eu=null,$N(this,this.l)}ut(ie,Ft);function $N(t,e){if(Vn){var i=it("textarea");t.Eu=i,i.addEventListener("input",function(){if(t.textBlock!==null){var n=t.Ly(this.value);this.style.width=20+n.measuredBounds.width*this.bB+"px",this.rows=n.lineCount}},!1),i.addEventListener("keydown",function(n){if(t.textBlock!==null){var r=n.key;r==="Enter"?(t.textBlock.isMultiline===!1&&n.preventDefault(),t.acceptText(Yc)):r==="Tab"?(t.acceptText(By),n.preventDefault()):r==="Escape"&&(t.doCancel(),t.diagram!==null&&t.diagram.doFocus())}},!1),i.addEventListener("focus",function(){if(t.currentTextEditor!==null&&t.state!==Da){var n=t.Eu;t.ia===Ea&&(t.ia=Gc),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),i.addEventListener("blur",function(){if(t.currentTextEditor!==null&&t.state!==Da){var n=t.Eu;typeof n.focus=="function"&&n.focus(),typeof n.select=="function"&&t.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return i.value},e.mainElement=i,e.show=function(n,r,o){if(n instanceof qt&&o instanceof ie)if(o.state===Oa)i.style.border="3px solid red",i.focus();else{var s=n.da(Wt),u=r.position,a=r.scale,f=n.Cf()*a;f<o.minimumEditorScale&&(f=o.minimumEditorScale);var c=n.naturalBounds.width*f+6,d=n.naturalBounds.height*f+2,g=(s.x-u.x)*a;s=(s.y-u.y)*a,i.value=n.text,r.div.style.font=n.font,i.style.position="absolute",i.style.zIndex="100",i.style.font="inherit",i.style.fontSize=100*f+"%",i.style.lineHeight="normal",i.style.width=c+"px",i.style.left=(g-c/2|0)-1+"px",i.style.top=(s-d/2|0)-1+"px",i.style.textAlign=n.textAlign,i.style.margin="0",i.style.padding="1px",i.style.border="0",i.style.outline="none",i.style.whiteSpace="pre-wrap",i.style.overflow="hidden",i.rows=n.lineCount,i.bB=f,i.className="goTXarea",r.div.appendChild(i),i.focus(),o.selectsTextOnActivate&&(i.select(),i.setSelectionRange(0,9999))}},e.hide=function(n){n.div.removeChild(i)}}}ie.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||t.isReadOnly||Nl&&Nl!==this&&(Nl.acceptText(Uc),Nl&&Nl!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Vb(t.lastInput.documentPoint);return e!==null&&e instanceof qt&&e.editable&&e.part.canEdit()?(e=e.part,!(e===null||this.starting===Ry&&!e.isSelected||this.starting===sw&&2>t.lastInput.clickCount)):!1},ie.prototype.doStart=function(){Nl=this,this.textBlock!==null&&this.doActivate()},ie.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(t!==null){var e=this.textBlock;if(e===null&&(e=t.Vb(t.lastInput.documentPoint)),e!==null&&e instanceof qt&&(this.textBlock=e,e.part!==null)){this.isActive=!0,this.ia=Ea;var i=this.defaultTextEditor;e.textEditor!==null&&(i=e.textEditor),this.yh=this.textBlock.copy();var n=new I(this.textBlock.da(mi),this.textBlock.da(Tr));t.Aw(n),i.show(e,t,this),this.currentTextEditor=i}}}},ie.prototype.doCancel=function(){this.stopTool()},ie.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},ie.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Uc)},ie.prototype.acceptText=function(t){switch(t){case Uc:this.ia===Vy?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.ia===Ea||this.ia===Oa||this.ia===Gc)&&(this.ia=Fy,rw(this));break;case ow:case Yc:case By:(Yc!==t||this.textBlock.isMultiline!==!0)&&(this.ia===Ea||this.ia===Oa||this.ia===Gc)&&(this.ia=Fy,rw(this))}};function rw(t){var e=t.textBlock,i=t.diagram,n=t.currentTextEditor;if(e!==null&&n!==null){var r=e.text,o="";n.valueFunction!==null&&(o=n.valueFunction()),t.isValidText(e,r,o)?(t.xa(t.name),t.ia=Vy,t.transactionResult=t.name,e.text=o,t.doSuccess(r,o),i!==null&&i.R("TextEdited",e,r),t.Kg(),t.stopTool(),i!==null&&i.doFocus()):(t.ia=Oa,t.doError(r,o),n.show(e,i,t))}}ie.prototype.doError=function(t,e){var i=this.textBlock;i.errorFunction!==null&&i.errorFunction(this,t,e)},ie.prototype.doSuccess=function(t,e){var i=this.textBlock;i.textEdited!==null&&i.textEdited(i,t,e)},ie.prototype.doDeactivate=function(){var t=this.diagram;t!==null&&(this.ia=Da,this.textBlock=null,this.currentTextEditor!==null&&this.currentTextEditor.hide(t,this),this.isActive=!1)},ie.prototype.doStop=function(){Nl=null},ie.prototype.isValidText=function(t,e,i){var n=this.textValidation;return n!==null&&!n(t,e,i)?!1:(n=t.textValidation,!!(n===null||n(t,e,i)))},ie.prototype.Ly=function(t){var e=this.yh;return e.text=t,e.measure(this.textBlock.Ci,Infinity),e},X.Object.defineProperties(ie.prototype,{textBlock:{get:function(){return this.Ka},set:function(t){this.Ka=t}},currentTextEditor:{get:function(){return this.v},set:function(t){this.v=t}},defaultTextEditor:{get:function(){return this.l},set:function(t){this.l=t}},starting:{get:function(){return this.Ja},set:function(t){this.Ja=t}},textValidation:{get:function(){return this.Vi},set:function(t){this.Vi=t}},minimumEditorScale:{get:function(){return this.I},set:function(t){this.I=t}},selectsTextOnActivate:{get:function(){return this.T},set:function(t){this.T=t}},state:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}}}),ie.prototype.measureTemporaryTextBlock=ie.prototype.Ly;var ow=new K(ie,"LostFocus",0),Uc=new K(ie,"MouseDown",1),By=new K(ie,"Tab",2),Yc=new K(ie,"Enter",3),ZN=new K(ie,"SingleClick",0),Ry=new K(ie,"SingleClickSelected",1),sw=new K(ie,"DoubleClick",2),Da=new K(ie,"StateNone",0),Ea=new K(ie,"StateActive",1),Gc=new K(ie,"StateEditing",2),Fy=new K(ie,"StateValidating",3),Oa=new K(ie,"StateInvalid",4),Vy=new K(ie,"StateValidated",5),Nl=null;ie.className="TextEditingTool",ie.LostFocus=ow,ie.MouseDown=Uc,ie.Tab=By,ie.Enter=Yc,ie.SingleClick=ZN,ie.SingleClickSelected=Ry,ie.DoubleClick=sw,ie.StateNone=Da,ie.StateActive=Ea,ie.StateEditing=Gc,ie.StateValidating=Fy,ie.StateInvalid=Oa,ie.StateValidated=Vy,ht("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.Xa("TextEditing",t,this.mouseUpTools)});function bi(){Wc||(aw(),Wc=!0),this.B=Zu,this.yl=this.ff=this.sc=this.ps=this.jc=!1,this.Rx=!0,this.zl=Kc,this.qn=!1,this.xi=this.nd=!0,this.Yg=600,this.ox=this.Qx=!1,this.Re=new W,this.Od=new oi,this.Od.Wc=this,this.Vk=new W,this.rv=new W,this.mt=new W}bi.prototype.ce=function(t){this.B=t},bi.prototype.canStart=function(){return!0};function ls(t,e){lw(t,e)&&(t.ff=!0)}function lw(t,e){return!t.nd||!t.canStart(e)?!1:(t.Re.add(e),t.defaultAnimation.isAnimating&&t.Sc(),t.sc=!0)}function zy(t){if(t.nd&&t.sc){var e=t.Od,i=t.B,n=t.Re.contains("Model");n&&(t.yl=!0,t.zl===Kc?(e.isViewportUnconstrained=!0,e.mc.clear(),e.add(i,"position",i.position.copy().offset(0,-200),i.position),e.add(i,"opacity",0,1)):t.zl===cw&&e.mc.clear(),t.Rx=!!(t.zl===fw&&i.Ts.w(i.la)),i.R("InitialAnimationStarting",t)),n&&!t.xi||e.mc.count===0?(t.Re.clear(),t.sc=!1,t.ff=!1,e.mc.clear(),_c(e,i),t.yl=!1,i.M()):(t.Re.clear(),i.Ce=!1,n=e.mc.get(i),i.autoScale!==Xi&&n!==null&&(delete n.start.scale,delete n.end.scale),Y.requestAnimationFrame(function(){t.sc===!1||e.jc||(i.Ie("temporaryPixelRatio")&&Aa(i),Xy(i),t.sc=!1,t.ff=!1,e.start(),Gu(t),i.Oa(),dw(e,0),us(i,!0),Xu(t),i.R("AnimationStarting",t))}))}}function uw(t,e,i,n){e instanceof z&&(e.fromNode!==null||e.toNode!==null)||t.Od.add(e,"position",i,n,!1)}l=bi.prototype,l.au=function(t){return this.Od.au(t)},l.cw=function(t){return this.Od.cw(t)};function JN(t,e){function i(){if(0<r.mt.count&&(n.addAll(r.mt),r.mt.clear(),r.jc=!0),r.jc!==!1&&n.count!==0){r.rv.addAll(n);for(var o=r.rv.iterator;o.next();){var s=o.value;if(s.jc!==!1){t:if(0<s.nm.count)var u=!0;else{for(u=s.mc.iterator;u.next();){var a=u.key;if(a instanceof ot&&a.diagram!==null||a instanceof O){u=!0;break t}}u=!1}u?pw(s,!1):s.Hl=!0}}r.rv.clear(),Gu(r),us(r.B),Xu(r),Y.requestAnimationFrame(i)}}var n=t.Vk,r=t;t.jc?t.mt.add(e):(t.jc=!0,n.add(e),Y.requestAnimationFrame(function(){i()}))}function QN(t){for(t=t.Vk.iterator;t.next();)t.value.Hl=!1}function Gu(t){if(!t.ps){var e=t.B;t.Qx=e.skipsUndoManager,t.ox=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.ps=!0}}function Xu(t){var e=t.B;e.skipsUndoManager=t.Qx,e.skipsModelSourceBindings=t.ox,t.ps=!1}l.Sc=function(t){var e=this.Od;if(this.sc===!0&&(this.yl=this.ff=this.sc=!1,this.Re.clear(),0<e.mc.count&&this.B.Eb()),this.jc){if(e.um(!0),e.mc.clear(),_c(e,null),t===!0)for(t=this.Vk.ma(),e=0;e<t.length;e++)t[e].um(!0)}else e.mc.clear(),_c(e,this.B)},l.um=function(t){t===this.defaultAnimation&&this.defaultAnimation.mc.clear(),this.Vk.remove(t),this.Vk.count===0&&(this.jc=!1,this.B.Eb()),t===this.defaultAnimation&&(this.defaultAnimation.mc.clear(),this.B.R("AnimationFinished",this))},l.jk=function(t,e){this.ff&&(this.Re.contains("Expand Tree")||this.Re.contains("Expand SubGraph"))&&this.Od.jk(t,e)},l.hk=function(t,e){this.ff&&(this.Re.contains("Collapse Tree")||this.Re.contains("Collapse SubGraph"))&&(this.Od.hk(t,e),Uy(this.Od,e,"position",e.position,e.position))};function hw(t,e,i){t.ff&&!e.w(i)&&(t.B.oj||(e=i.copy()),Uy(t.Od,t.B,"position",e,i))}function Xc(t,e,i,n,r){t===null&&(t="rgba(0,0,0,0)"),e===null&&(e="rgba(0,0,0,0)"),uo(t),m0();var o=nn.l,s=nn.I,u=nn.v;t=nn.T,uo(e),m0();var a=nn.I,f=nn.v;return e=nn.T,o=r(i,o,nn.l-o,n),s=r(i,s,a-s,n),u=r(i,u,f-u,n),i=r(i,t,e-t,n),"hsla("+o+", "+s+"%, "+u+"%, "+i+")"}function aw(){function t(i,n,r,o,s,u){i.position=new k(o(s,n.x,r.x-n.x,u),o(s,n.y,r.y-n.y,u))}var e=new ct;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(i,n,r,o,s,u){s<u?i.dr(o(s,n.x,r.x-n.x,u),o(s,n.y,r.y-n.y,u),!1):i.position=new k(o(s,n.x,r.x-n.x,u),o(s,n.y,r.y-n.y,u))}),e.add("location",function(i,n,r,o,s,u){s<u?i.dr(o(s,n.x,r.x-n.x,u),o(s,n.y,r.y-n.y,u),!0):i.location=new k(o(s,n.x,r.x-n.x,u),o(s,n.y,r.y-n.y,u))}),e.add("position:placeholder",function(i,n,r,o,s,u){s<u?i.dr(o(s,n.x,r.x-n.x,u),o(s,n.y,r.y-n.y,u),!1):i.position=new k(o(s,n.x,r.x-n.x,u),o(s,n.y,r.y-n.y,u))}),e.add("position:nodeCollapse",function(i,n,r,o,s,u){var a=i.actualBounds,f=r.actualBounds;r=f.x+f.width/2-a.width/2,a=f.y+f.height/2-a.height/2,s<u?i.dr(o(s,n.x,r-n.x,u),o(s,n.y,a-n.y,u),!1):i.position=new k(o(s,n.x,r-n.x,u),o(s,n.y,a-n.y,u))}),e.add("desiredSize",function(i,n,r,o,s,u){i.desiredSize=new I(o(s,n.width,r.width-n.width,u),o(s,n.height,r.height-n.height,u))}),e.add("width",function(i,n,r,o,s,u){i.width=o(s,n,r-n,u)}),e.add("height",function(i,n,r,o,s,u){i.height=o(s,n,r-n,u)}),e.add("fill",function(i,n,r,o,s,u){i.fill=Xc(n,r,s,u,o)}),e.add("stroke",function(i,n,r,o,s,u){i.stroke=Xc(n,r,s,u,o)}),e.add("strokeWidth",function(i,n,r,o,s,u){i.strokeWidth=o(s,n,r-n,u)}),e.add("strokeDashOffset",function(i,n,r,o,s,u){i.strokeDashOffset=o(s,n,r-n,u)}),e.add("background",function(i,n,r,o,s,u){i.background=Xc(n,r,s,u,o)}),e.add("areaBackground",function(i,n,r,o,s,u){i.areaBackground=Xc(n,r,s,u,o)}),e.add("opacity",function(i,n,r,o,s,u){i.opacity=o(s,n,r-n,u)}),e.add("scale",function(i,n,r,o,s,u){i.scale=o(s,n,r-n,u)}),e.add("angle",function(i,n,r,o,s,u){i.angle=o(s,n,r-n,u)}),Hc=e}X.Object.defineProperties(bi.prototype,{animationReasons:{get:function(){return this.Re}},isEnabled:{get:function(){return this.nd},set:function(t){this.nd=t}},duration:{get:function(){return this.Yg},set:function(t){1>t&&lt(t,">= 1",bi,"duration"),this.Yg=t}},isAnimating:{get:function(){return this.jc}},isTicking:{get:function(){return this.ps}},isInitial:{get:function(){return this.xi},set:function(t){this.xi=t}},defaultAnimation:{get:function(){return this.Od}},activeAnimations:{get:function(){return this.Vk}},initialAnimationStyle:{get:function(){return this.zl},set:function(t){this.zl=t}}}),bi.prototype.stopAnimation=bi.prototype.Sc;var Hc=null,Wc=!1,Kc=new K(bi,"Default",1),fw=new K(bi,"AnimateLocations",2),cw=new K(bi,"None",3);bi.className="AnimationManager",bi.defineAnimationEffect=function(t,e){Wc||(aw(),Wc=!0),Hc.add(t,e)},bi.Default=Kc,bi.AnimateLocations=fw,bi.None=cw;function oi(){this.vv=this.Px=this.Wc=this.B=null,this.Hl=this.jc=this.l=!1,this.Wn=this.Cd=0,this.Ir=this.Hu=gw,this.Gl=this.zp=!1,this.lv=1,this.jv=0,this.ud=this.Yg=NaN,this.tx=0,this.Xn=null,this.v=Po,this.mc=new ct,this.fv=new ct,this.nm=new W,this.gv=new W,this.px=fs}oi.prototype.suspend=function(){this.Hl=!0},oi.prototype.advanceTo=function(t,e){e&&(this.Hl=!1),this.zp&&t>=this.ud&&(this.Gl=!0,t-=this.ud),this.tx=t,pw(this,!0),Gu(this.Wc),us(this.B),Xu(this.Wc),this.B.Le()};function _c(t,e){if(t.fv.clear(),t.Gl=!1,t.jv=0,t.ud=NaN,0<t.nm.count&&t.nm.clear(),0<t.gv.count&&t.gv.clear(),e!==null)for(t=e.links;t.next();)t.value.sg=null}l=oi.prototype,l.start=function(){if(this.mc.count!==0&&!this.jc){for(var t=this.B,e=this.mc.iterator;e.next();){var i=e.value.end,n=e.key;if(i["position:placeholder"]){var r=n.findVisibleNode();if(r instanceof dt&&r.placeholder!==null){var o=r.placeholder;r=o.da(mi),o=o.padding,r.x+=o.left,r.y+=o.top,i["position:placeholder"]=r}}t===null&&(n instanceof O?t=n:n instanceof ot&&(t=n.diagram))}t!==null&&(this.B=t,e=this.Wc=t.animationManager,e.isEnabled!==!1&&(this.ud=isNaN(this.Yg)?e.duration:this.Yg,this.Ir=this.Hu,e.yl&&e.zl===Kc&&this===e.defaultAnimation&&(this.Ir=yw,this.ud=isNaN(this.Yg)?e.duration===600?900:e.duration:this.Yg),this.px=t.scrollMode,this.isViewportUnconstrained&&(t.Si=l0),Gu(e),this.nm.each(function(s){s.data=null,t.add(s)}),Xu(e),this.jc=!0,this.Cd=+new Date,this.Wn=this.Cd+this.ud,JN(e,this)))}},l.sz=function(t,e){t.Oc()&&(this.nm.add(t),this.B=e)},l.add=function(t,e,i,n,r){if(e!=="position"||!i.w(n)){if(this.B===null&&(t instanceof O?this.B=t:t instanceof ot&&t.diagram!==null&&(this.B=t.diagram)),t instanceof rt){if(!t.isAnimated)return;e==="position"&&(e="position:part")}Uy(this,t,e,i,n,r)}};function Uy(t,e,i,n,r,o){var s=t.mc;if(e instanceof O&&i==="position"&&(i="position:diagram"),s.contains(e)){var u=s.H(e),a=u.start,f=u.end;a[i]===void 0&&(a[i]=Hu(n)),f[i]=Hu(r)}else a={},f={},a[i]=Hu(n),f[i]=Hu(r),u=a.position,e instanceof ot&&u instanceof k&&!u.u()&&e.diagram.animationManager.Re.contains("Expand SubGraph")&&u.assign(f.position),u=new mw(a,f,o),s.add(e,u);s=a[i],s instanceof k&&!s.u()&&s.assign(t.v),o&&i.indexOf("position:")===0&&e instanceof rt?u.Ov.location=Hu(e.location):o&&(u.Ov[i]=Hu(n))}function Hu(t){return t instanceof k||t instanceof pt?t.copy():t}l.au=function(t){return this.jc?(t=this.mc.H(t),t!==null&&t.qw):!1},l.cw=function(t){return this.jc?(t=this.mc.H(t),t!==null&&(t.start.position||t.start.location)):!1};function pw(t,e){if(!t.Hl||e){var i=t.Wc;if(t.jc!==!1){var n=+new Date,r=n>t.Wn?t.ud:n-t.Cd;e&&(r=t.tx,r<t.ud?(t.Cd=+new Date-r,t.Wn=t.Cd+t.ud):r=t.ud),Gu(i),dw(t,r),us(t.B,!0),Xu(i),n>t.Wn&&(t.zp&&!t.Gl?(t.Cd=+new Date,t.Wn=t.Cd+t.ud,t.Gl=!0):t.um(!1))}}}function dw(t,e){for(var i=t.ud,n=t.mc.iterator,r=t.Gl;n.next();){var o=n.key;if(!(o instanceof ot&&o.diagram===null)){var s=n.value,u=r?s.end:s.start;s=r?s.start:s.end;var a=Hc,f;for(f in s)f==="position"&&(s["position:placeholder"]||s["position:nodeCollapse"])||a.get(f)===null||a.get(f)(o,u[f],s[f],t.Ir,e,i,t)}}}l.stop=function(){this.jc&&this.um(!0)},l.um=function(t){if(this.vv!==null&&this.vv.Gp.remove(this.Px),this.jc){var e=this.B,i=this.Wc;this.Hl=this.jc=i.yl=!1,Gu(i);for(var n=this.mc,r=this.nm.iterator;r.next();)e.remove(r.value);for(r=this.gv.iterator;r.next();)r.value.o();r=this.zp,n=n.iterator;for(var o=Hc;n.next();){var s=n.key,u=n.value,a=r?u.end:u.start,f=r?u.start:u.end,c=u.Ov,d;for(d in f)if(o.get(d)!==null){var g=d;!u.Iv||g!=="position:nodeCollapse"&&g!=="position:placeholder"||(g="position"),o.get(g)(s,a[d],c[d]!==void 0?c[d]:u.Iv?a[d]:f[d],this.Ir,this.ud,this.ud,this)}u.Iv&&c.location!==void 0&&s instanceof rt&&(s.location=c.location),u.qw&&s instanceof rt&&s.Pb(!1)}if(i.defaultAnimation===this)for(d=this.B.links;d.next();)r=d.value,r.sg===null?(n=r.path,n!==null&&(r.kd=!1,r.o(),n.o())):(r.points=r.sg,r.sg=null);e.Wt.clear(),Zc(e,!1),e.Oa(),e.M(),us(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.px),Xu(i),this.jv++,!t&&this.lv>this.jv?(this.Gl=!1,this.start()):(this.Xn&&this.Xn(this),_c(this,null),i.um(this),e.Eb())}},l.jk=function(t,e){var i=e.actualBounds,n=null;if(e instanceof dt&&(n=e.placeholder),n!==null?(i=n.da(mi),n=n.padding,i.x+=n.left,i.y+=n.top,this.add(t,"position",i,t.position,!1)):this.add(t,"position",new k(i.x+i.width/2,i.y+i.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof dt)for(t=t.memberParts;t.next();)n=t.value,n instanceof Z&&this.jk(n,e)},l.hk=function(t,e){if(t.isVisible()){var i=null;if(e instanceof dt&&(i=e.placeholder),i!==null?this.add(t,"position:placeholder",t.position,i,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),i=this.mc,i.contains(t)&&(i.H(t).qw=!0),t instanceof dt)for(t=t.memberParts;t.next();)i=t.value,i instanceof Z&&this.hk(i,e)}},l.pA=function(t){var e=this.fv.get(t);return e===null&&(e={},this.fv.add(t,e)),e},X.Object.defineProperties(oi.prototype,{duration:{get:function(){return this.Yg},set:function(t){1>t&&lt(t,">= 1",oi,"duration"),this.Yg=t}},reversible:{get:function(){return this.zp},set:function(t){this.zp=t}},runCount:{get:function(){return this.lv},set:function(t){0<t?this.lv=t:E("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Xn},set:function(t){this.Xn!==t&&(this.Xn=t)}},easing:{get:function(){return this.Hu},set:function(t){this.Hu=t}},isViewportUnconstrained:{get:function(){return this.l},set:function(t){this.l=t}},isAnimating:{get:function(){return this.jc}}}),oi.prototype.getTemporaryState=oi.prototype.pA,oi.prototype.stop=oi.prototype.stop,oi.prototype.add=oi.prototype.add,oi.prototype.addTemporaryPart=oi.prototype.sz;function gw(t,e,i,n){return t/=n/2,1>t?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}function yw(t,e,i,n){return t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e}oi.className="Animation",oi.EaseLinear=function(t,e,i,n){return i*t/n+e},oi.EaseInOutQuad=gw,oi.EaseInQuad=function(t,e,i,n){return i*(t/=n)*t+e},oi.EaseOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},oi.EaseInExpo=function(t,e,i,n){return t===0?e:i*Math.pow(2,10*(t/n-1))+e},oi.EaseOutExpo=yw;function mw(t,e,i){this.start=t,this.end=e,this.Ov={},this.Iv=i,this.qw=!1}mw.className="AnimationState";function jr(t,e,i){this.qd=null,this.hf=t,this.Zp=i||vw,this.$k=null,e!==void 0&&(this.$k=e,i===void 0&&(this.Zp=Yy))}jr.prototype.copy=function(){var t=new jr(this.hf);t.Zp=this.Zp;var e=this.$k;if(e!==null){var i={};e.duration!==void 0&&(i.oy=e.duration),e.finished!==void 0&&(i.oy=e.finished),e.easing!==void 0&&(i.oy=e.easing),t.$k=i}return t};function qN(t,e){t=t.$k,t!==null&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}X.Object.defineProperties(jr.prototype,{propertyName:{get:function(){return this.hf},set:function(t){this.hf=t}},animationSettings:{get:function(){return this.$k},set:function(t){this.$k=t}},startCondition:{get:function(){return this.Zp},set:function(t){this.Zp=t}}});var vw=new K(jr,"Default",1),Yy=new K(jr,"Immediate",2),xw=new K(jr,"Bundled",3);jr.className="AnimationTrigger",jr.Default=vw,jr.Immediate=Yy,jr.Bundled=xw;function si(){Oe(this),this.B=null,this.Da=new J,this.Qa="",this.hb=1,this.v=!1,this.l=this.Ni=this.I=this.hi=this.gi=this.fi=this.ei=this.ci=this.di=this.bi=this.ji=this.ai=this.ii=this.$h=this.Zh=!0,this.lp=[]}l=si.prototype,l.clear=function(){this.Da.clear(),this.lp.length=0},l.ce=function(t){this.B=t},l.toString=function(t){t===void 0&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var i=0,n=0,r=0,o=0,s=0,u=this.Da.iterator;u.next();){var a=u.value;a instanceof dt?r++:a instanceof Z?n++:a instanceof z?o++:a instanceof Ct?s++:i++}if(u="",0<i&&(u+=i+" Parts "),0<n&&(u+=n+" Nodes "),0<r&&(u+=r+" Groups "),0<o&&(u+=o+" Links "),0<s&&(u+=s+" Adornments "),1<t)for(t=this.Da.iterator;t.next();)i=t.value,u+=`
    `+i.toString(),n=i.data,n!==null&&Ne(n)&&(u+=" #"+Ne(n)),i instanceof Z?u+=" "+Xe(n):i instanceof z&&(u+=" "+Xe(i.fromNode)+" "+Xe(i.toNode));return e+" "+this.Da.count+": "+u},l.Vb=function(t,e,i){if(e===void 0&&(e=null),i===void 0&&(i=null),this.Ni===!1)return null;var n=!1;this.diagram!==null&&this.diagram.viewportBounds.$(t)&&(n=!0);for(var r=k.alloc(),o=this.Da.j,s=o.length;s--;){var u=o[s];if((n!==!0||gs(u)!==!1)&&u.isVisible()&&(r.assign(t),gi(r,u.Ed),u=u.Vb(r,e,i),u!==null&&(e!==null&&(u=e(u)),u!==null&&(i===null||i(u)))))return k.free(r),u}return k.free(r),null},l.gj=function(t,e,i,n){if(e===void 0&&(e=null),i===void 0&&(i=null),n instanceof J||n instanceof W||(n=new W),this.Ni===!1)return n;var r=!1;this.diagram!==null&&this.diagram.viewportBounds.$(t)&&(r=!0);for(var o=k.alloc(),s=this.Da.j,u=s.length;u--;){var a=s[u];if((r!==!0||gs(a)!==!1)&&a.isVisible()){o.assign(t),gi(o,a.Ed);var f=a;a.gj(o,e,i,n)&&(e!==null&&(f=e(f)),f===null||i!==null&&!i(f)||n.add(f))}}return k.free(o),n},l.Bf=function(t,e,i,n,r){if(e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof J||r instanceof W||(r=new W),this.Ni===!1)return r;var o=!1;this.diagram!==null&&this.diagram.viewportBounds.Ee(t)&&(o=!0);for(var s=this.Da.j,u=s.length;u--;){var a=s[u];if((o!==!0||gs(a)!==!1)&&a.isVisible()){var f=a;a.Bf(t,e,i,n,r)&&(e!==null&&(f=e(f)),f===null||i!==null&&!i(f)||r.add(f))}}return r},l.Tv=function(t,e,i,n,r,o,s){if(this.Ni===!1)return r;for(var u=this.Da.j,a=u.length;a--;){var f=u[a];if((s!==!0||gs(f)!==!1)&&o(f)&&f.isVisible()){var c=f;f.Bf(t,e,i,n,r)&&(e!==null&&(c=e(c)),c===null||i!==null&&!i(c)||r.add(c))}}return r},l.Fg=function(t,e,i,n,r,o){if(i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof J||r instanceof W)&&(o=r),r=!0),o instanceof J||o instanceof W||(o=new W),this.Ni===!1)return o;var s=!1;this.diagram!==null&&this.diagram.viewportBounds.$(t)&&(s=!0);for(var u=k.alloc(),a=k.alloc(),f=this.Da.j,c=f.length;c--;){var d=f[c];if((s!==!0||gs(d)!==!1)&&d.isVisible()){u.assign(t),gi(u,d.Ed),a.h(t.x+e,t.y),gi(a,d.Ed);var g=d;d.Fg(u,a,i,n,r,o)&&(i!==null&&(g=i(g)),g===null||n!==null&&!n(g)||o.add(g))}}return k.free(u),k.free(a),o},l.Ld=function(t,e){if(this.visible){var i=this.Da.j,n=i.length;if(n!==0){t=Dt();for(var r=Dt(),o=0;o<n;o++){var s=i[o];if(s.Ax=o,s instanceof z){if(s.kd===!1)continue}else if(s instanceof Ct&&s.adornedPart!==null)continue;Mx(s.actualBounds,e)?(s.Ld(!0),t.push(s)):(s.Ld(!1),s.adornments!==null&&0<s.adornments.count&&r.push(s))}for(e=0;e<t.length;e++)for(i=t[e],V0(i),i=i.adornments;i.next();)n=i.value,n.measure(Infinity,Infinity),n.arrange(),n.Ld(!0);for(e=0;e<r.length;e++)V0(r[e]);Xt(t),Xt(r)}}};function Wu(t,e){var i=1;return t.hb!==1&&(i=e.globalAlpha,e.globalAlpha=i*t.hb),i}l.cc=function(t,e,i){if(this.visible&&this.hb!==0&&(i===void 0&&(i=!0),i||!this.isTemporary)){i=this.Da.j;var n=i.length;if(n!==0){var r=Wu(this,t),o=this.lp;o.length=0;for(var s=e.scale,u=I.alloc(),a=0;a<n;a++)this.cj(t,i[a],e,o,s,u,!0);I.free(u),t.globalAlpha=r}}},l.cj=function(t,e,i,n,r,o,s){if(!s||gs(e)){if(n!==null&&e instanceof z&&(e.isOrthogonal&&n.push(e),e.kd===!1))return;for(s=!1,n=e.containingGroup;n!==null;)s?n.Ya!==null&&o.Ey(n.Ya):n.Ya!==null&&(s=!0,o.assign(n.Ya)),n=n.containingGroup;var u=e.actualBounds;if(n=!1,s&&e.isVisible()){if(!o.Nc(u))return;n=!o.Ee(u)}n&&(t.save(),t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.clip()),u.width*r>i.Ro||u.height*r>i.Ro?e.cc(t,i):(r=e.actualBounds,o=e.naturalBounds,r.width===0||r.height===0||isNaN(r.x)||isNaN(r.y)||!e.isVisible()||(i=e.transform,e.areaBackground!==null&&(Hi(e,t,e.areaBackground,!0,!0,o,r),t.fillRect(r.x,r.y,r.width,r.height)),e.areaBackground===null&&e.background===null&&(Hi(e,t,"rgba(0,0,0,0.3)",!0,!1,o,r),t.fillRect(r.x,r.y,r.width,r.height)),e.background!==null&&(t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),Hi(e,t,e.background,!0,!1,o,r),t.fillRect(0,0,o.width/2,o.height/2),i.St()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))))),n&&(t.restore(),t.uc(!0))}},l.g=function(t,e,i,n,r){var o=this.diagram;o!==null&&o.bb(le,t,this,e,i,n,r)},l.nj=function(t,e,i){var n=this.Da;if(e.Di=this,t>=n.count)t=n.count;else if(n.J(t)===e)return-1;return n.wb(t,e),e.Iq(i),n=this.diagram,n!==null&&(i?n.M():n.nj(e)),$c(this,t,e),t},l.Mc=function(t,e,i){if(!i&&e.layer!==this&&e.layer!==null)return e.layer.Mc(t,e,i);var n=this.Da;if(0>t||t>=n.length){if(t=n.indexOf(e),0>t)return-1}else if(n.J(t)!==e&&(t=n.indexOf(e),0>t))return-1;return e.Jq(i),n.cb(t),n=this.diagram,n!==null&&(i?n.M():n.Mc(e)),e.Di=null,t};function $c(t,e,i){if(e=bN(t,e,i),i instanceof dt&&i!==null&&isNaN(i.zOrder)){if(i.memberParts.count!==0){for(var n=-1,r=t.Da.j,o=r.length,s=0;s<o;s++){var u=r[s];if(u===i&&(e=s,0<=n)||0>n&&u.containingGroup===i&&(n=s,0<=e))break}!(0>n)&&n<e&&(r=t.Da,r.cb(e),r.wb(n,i))}i=i.containingGroup,i!==null&&$c(t,-1,i)}}function bN(t,e,i){var n=i.zOrder;if(isNaN(n))return e;t=t.Da;var r=t.count;if(1>=r)return e;if(0>e&&(e=t.indexOf(i)),0>e)return-1;for(var o=e-1,s=NaN;0<=o&&(s=t.J(o).zOrder,!!isNaN(s));)o--;for(var u=e+1,a=NaN;u<r&&(a=t.J(u).zOrder,!!isNaN(a));)u++;if(!isNaN(s)&&s>n)for(;;){if(o===-1||s<=n){if(o++,o===e)break;return t.cb(e),t.wb(o,i),o}for(s=NaN;0<=--o&&(s=t.J(o).zOrder,isNaN(s)););}else if(!isNaN(a)&&a<n)for(;;){if(u===r||a>=n){if(u--,u===e)break;return t.cb(e),t.wb(u,i),u}for(a=NaN;++u<r&&(a=t.J(u).zOrder,isNaN(a)););}return e}X.Object.defineProperties(si.prototype,{parts:{get:function(){return this.Da.iterator}},partsBackwards:{get:function(){return this.Da.iteratorBackwards}},diagram:{get:function(){return this.B}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;if(e!==t){var i=this.diagram;if(i!==null)for(e===""&&E("Cannot rename default Layer to: "+t),i=i.layers;i.next();)i.value.name===t&&E("Layer.name is already present in this diagram: "+t);for(this.Qa=t,this.g("name",e,t),t=this.Da.iterator;t.next();)t.value.layerName=this.Qa}}},opacity:{get:function(){return this.hb},set:function(t){var e=this.hb;e!==t&&((0>t||1<t)&&lt(t,"0 <= value <= 1",si,"opacity"),this.hb=t,this.g("opacity",e,t),t=this.diagram,t!==null&&t.M())}},isTemporary:{get:function(){return this.v},set:function(t){var e=this.v;e!==t&&(this.v=t,this.isInDocumentBounds=!1,this.g("isTemporary",e,t))}},visible:{get:function(){return this.I},set:function(t){var e=this.I;if(e!==t){for(this.I=t,this.g("visible",e,t),e=this.Da.iterator;e.next();)e.value.Pb(t);t=this.diagram,t!==null&&t.M()}}},pickable:{get:function(){return this.Ni},set:function(t){var e=this.Ni;e!==t&&(this.Ni=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,this.diagram!==null&&this.diagram.Oa())}},allowCopy:{get:function(){return this.Zh},set:function(t){var e=this.Zh;e!==t&&(this.Zh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ji},set:function(t){var e=this.ji;e!==t&&(this.ji=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.di},set:function(t){var e=this.di;e!==t&&(this.di=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.ci},set:function(t){var e=this.ci;e!==t&&(this.ci=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.ei},set:function(t){var e=this.ei;e!==t&&(this.ei=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.fi},set:function(t){var e=this.fi;e!==t&&(this.fi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.gi},set:function(t){var e=this.gi;e!==t&&(this.gi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.hi},set:function(t){var e=this.hi;e!==t&&(this.hi=t,this.g("allowSelect",e,t))}}}),si.prototype.findObjectsNear=si.prototype.Fg,si.prototype.findObjectsIn=si.prototype.Bf,si.prototype.findObjectsAt=si.prototype.gj,si.prototype.findObjectAt=si.prototype.Vb,si.className="Layer";function O(t){if(1<arguments.length&&E("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),Qw||(hT(),Qw=!0),Oe(this),Zu=this,os=[],this.Sb=!0,this.Wc=new bi,this.Wc.ce(this),this.pb=17,this.Fl=this.nv=!1,this.Ss="default",this.Ea=null,Vn){var e=this,i=function(){e.removeEventListener(Y.document,"DOMContentLoaded",i,!1),e.setRTL()};Y.document.body!==null?this.setRTL():e.addEventListener(Y.document,"DOMContentLoaded",i,!1)}this.La=new J,this.ua=this.va=0,this.Xl=this.ta=null,this.Lx=new ct,this.jf=this.Hb=null,this.xw(),this.Lj=null,this.ww(),this.hb=1,this.la=new k(NaN,NaN).freeze(),this.Ts=new k(NaN,NaN),this.Nn=this.ya=1,this.es=new k(NaN,NaN).freeze(),this.fs=NaN,this.xs=1e-4,this.vs=100,this.qb=new Nt,this.vt=new k(NaN,NaN).freeze(),this.Zr=new I(NaN,NaN,NaN,NaN).freeze(),this.Ri=new Rt(0,0,0,0).freeze(),this.Si=fs,this.at=!1,this.Us=this.Os=null,this.Pg=Xi,this.Bj=ni,this.$f=Xi,this.oo=ni,this.gs=this.ds=mi,this.Ec=!0,this.Dl=!1,this.vd=new W,this.Wg=new ct,this.pl=!0,this.nn=250,this.zj=-1,this.pn=new Rt(16,16,16,16).freeze(),this.Fj=this.Ce=!1,this.Ij=!0,this.Yf=new Bi,this.Yf.diagram=this,this.pd=new Bi,this.pd.diagram=this,this.hh=new Bi,this.hh.diagram=this,this.ue=this.Qf=null,this.fk=!1,this.Pr=this.Qr=null,this.xj=Y.PointerEvent&&(Tt||Bt||ee)&&Y.navigator&&Y.navigator.msPointerEnabled!==!1,Fw(this),this.Ch=new W,this.qs=!0,this.pt=Vs,this.Ru=!1,this.rt=ip,this.Ka=null,tp.add("Model",zt),this.Jr=this.Mr=this.nt=null,this.Mn=this.Hr="auto",this.ig=this.As=this.kg=this.lg=this.ng=this.Sf=this.Wf=this.Rf=null,this.cs=!1,this.Tf=this.xg=this.mg=this.jg=null,this.Bs=!1,this.Ms={},this.$j=[null,null],this.Br=null,this.Nr=this.et=this.pv=this.wg=!1,this.Yu=!0,this.wi=this.kc=!1,this.bc=null;var n=this;this.Cc=function(r){var o=n.partManager;if(r.model===o.diagram.model&&o.diagram.Z){o.diagram.Z=!1;try{var s=r.change;r.modelChange===""&&s===le&&o.updateDataBindings(r.object,r.propertyName)}finally{o.diagram.Z=!0}}},this.Vc=function(r){n.partManager.doModelChanged(r)},this.xv=!0,this.Ud=-2,this.Oi=new ct,this.Ls=new J,this.bg=!1,this.$h=this.Zh=this.nr=this.nd=!0,this.pr=!1,this.vr=this.tr=this.hi=this.gi=this.fi=this.ei=this.ci=this.di=this.bi=this.sr=this.ji=this.ai=this.ii=this.qr=!0,this.ag=this.Uu=!1,this.ur=this.rr=this.vl=this.ul=!0,this.$s=this.Ws=16,this.Vs=this.Ip=!1,this.Jp=this.Ys=null,this.Xs=this.Zs=0,this.ib=new Rt(5).freeze(),this.ov=new W().freeze(),this.ws=999999999,this.Ou=new W().freeze(),this.vi=this.ui=this.ti=!0,this.Ze=this.ne=!1,this.lc=null,this.Og=!0,this.oe=!1,this.Bx=new W,this.Pu=new W,this.Hc=null,this.Ul=1,this.qv=0,this.Jc={scale:1,position:new k,bounds:new I,Ev:new pt,iw:new pt,fw:!1},this.Sx=new I(NaN,NaN,NaN,NaN).freeze(),this.pm=new pt(NaN,NaN).freeze(),this.On=new I(NaN,NaN,NaN,NaN).freeze(),this.rs=!1,this.Fo=this.mo=this.ep=this.Cu=this.Bu=this.Du=this.dg=this.fh=this.ef=this.Tr=null,Mw(this),this.Jb=null,this.lo=!1,this.Cj=null,this.partManager=new zt,this.toolManager=new he,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.Sr=null,this.il=new Cl,this.Gs=this.Fs=null,this.aq=!1,this.commandHandler=Gy(),this.model=dm(),this.wg=!0,Sw(this),this.layout=new It,this.wg=!1,this.ux=this.Gu=null,this.Tb=1,this.xh=null,this.Ro=1,this.Xo=0,this.ev=[0,0,0,0,0],this.Yo=0,this.wd=1,this.Qj=0,this.Ao=new k,this.ot=500,this.on=new k,this.pe=!1,this.Mk=this.Nk=this.Lk=this.Kk=this.Fk=this.Hk=this.Gk=this.Dk=this.Ek=this.Ww=this.Mw=this.Nw=this.Ow=null,this.Xq=function(){},this.preventDefault=null,this.qo=!1,this.si=new qw,this.bq=!1,t!==void 0&&f0(this,t),this.Yn=null,this.Zn=Ma,this.Sb=!1}O.prototype.clear=function(){this.animationManager.Sc(),this.model.clear(),Ju=null,Fa="",ww(this,!1),this.Oa(),this.Ta(),this.M()};function ww(t,e){t.animationManager.Sc(!0),t.ov=new W().freeze(),t.Ou=new W().freeze();var i=t.skipsUndoManager;t.model!==null&&(t.skipsUndoManager=!0);var n=null;t.Jb!==null&&(n=t.Jb.part,n!==null&&t.remove(n));var r=[],o=t.La.length;if(e){for(e=0;e<o;e++)for(var s=t.La.j[e].parts;s.next();){var u=s.value;u!==n&&u.data===null&&r.push(u)}for(e=0;e<r.length;e++)t.remove(r[e])}for(e=0;e<o;e++)t.La.j[e].clear();return t.partManager.clear(),t.vd.clear(),t.Wg.clear(),t.Ch.clear(),t.Cj=null,qr=[],n!==null&&(t.add(n),t.partManager.parts.remove(n)),t.model!==null&&(t.skipsUndoManager=i),r}function Gy(){return null}O.prototype.reset=function(){this.clear(),this.Sb=!0,this.Wc=new bi,this.Wc.ce(this),this.pb=17,this.Fl=this.nv=!1,this.Ss="default",this.La=new J,this.Lx=new ct,this.jf=null,this.xw(),this.Lj=null,this.ww(),this.hb=1,this.la=new k(NaN,NaN).freeze(),this.Ts=new k(NaN,NaN),this.Nn=this.ya=1,this.es=new k(NaN,NaN).freeze(),this.fs=NaN,this.xs=1e-4,this.vs=100,this.qb=new Nt,this.vt=new k(NaN,NaN).freeze(),this.Zr=new I(NaN,NaN,NaN,NaN).freeze(),this.Ri=new Rt(0,0,0,0).freeze(),this.Si=fs,this.at=!1,this.Us=this.Os=null,this.Pg=Xi,this.Bj=ni,this.$f=Xi,this.oo=ni,this.gs=this.ds=mi,this.Ec=!0,this.Dl=!1,this.vd=new W,this.Wg=new ct,this.pl=!0,this.nn=250,this.zj=-1,this.pn=new Rt(16,16,16,16).freeze(),this.Fj=this.Ce=!1,this.Ij=!0,this.Yf=new Bi,this.Yf.diagram=this,this.pd=new Bi,this.pd.diagram=this,this.hh=new Bi,this.hh.diagram=this,this.ue=this.Qf=null,this.fk=!1,this.Pr=this.Qr=null,this.xj=Y.PointerEvent&&(Tt||Bt||ee)&&Y.navigator&&Y.navigator.msPointerEnabled!==!1,Fw(this),this.Ch=new W,this.qs=!0,this.pt=Vs,this.Ru=!1,this.rt=ip,this.Jr=this.Mr=this.nt=null,this.Mn=this.Hr="auto",this.ig=this.As=this.kg=this.lg=this.ng=this.Sf=this.Wf=this.Rf=null,this.cs=!1,this.Tf=this.xg=this.mg=this.jg=null,this.Bs=!1,this.Ms={},this.$j=[null,null],this.Br=null,this.Nr=this.et=this.pv=this.wg=!1,this.Yu=!0,this.wi=this.kc=!1,this.xv=!0,this.Ud=-2,this.Oi=new ct,this.Ls=new J,this.bg=!1,this.$h=this.Zh=this.nr=this.nd=!0,this.pr=!1,this.vr=this.tr=this.hi=this.gi=this.fi=this.ei=this.ci=this.di=this.bi=this.sr=this.ji=this.ai=this.ii=this.qr=!0,this.ag=this.Uu=!1,this.ur=this.rr=this.vl=this.ul=!0,this.$s=this.Ws=16,this.Vs=this.Ip=!1,this.Xs=this.Zs=0,this.ib=new Rt(5).freeze(),this.ov=new W().freeze(),this.ws=999999999,this.Ou=new W().freeze(),this.vi=this.ui=this.ti=!0,this.Ze=this.ne=!1,this.lc=null,this.Og=!0,this.oe=!1,this.Bx=new W,this.Pu=new W,this.Hc=null,this.Ul=1,this.qv=0,this.Jc={scale:1,position:new k,bounds:new I,Ev:new pt,iw:new pt,fw:!1},this.Sx=new I(NaN,NaN,NaN,NaN).freeze(),this.pm=new pt(NaN,NaN).freeze(),this.On=new I(NaN,NaN,NaN,NaN).freeze(),this.rs=!1,this.Fo=this.mo=this.ep=this.Cu=this.Bu=this.Du=this.dg=this.fh=this.ef=null,Mw(this),this.Jb=null,this.lo=!1,this.Cj=null,this.partManager=new zt,this.toolManager=new he,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.Sr=null,this.il=new Cl,this.Gs=this.Fs=null,this.aq=!1,this.commandHandler=Gy(),this.wg=!0,Sw(this),this.layout=new It,this.wg=!1,this.model=dm(),this.model.undoManager=new de,this.oe=!1,this.Ij=!0,this.Ce=!1,this.Tb=1,this.xh=null,this.Ro=1,this.Xo=0,this.ev=[0,0,0,0,0],this.Yo=0,this.wd=1,this.Qj=0,this.Ao=new k,this.ot=500,this.on=new k,this.bq=this.qo=this.pe=!1,this.Yn=null,this.Zn=Ma,this.Sb=!1,this.M()};function Mw(t){t.ef=new ct;var e=new Z,i=new qt;i.bind(new Me("text","",Xe)),e.add(i),t.Du=e,t.ef.add("",e),e=new Z,i=new qt,i.stroke="brown",i.bind(new Me("text","",Xe)),e.add(i),t.ef.add("Comment",e),e=new Z,e.selectable=!1,e.avoidable=!1,i=new gt,i.figure="Ellipse",i.fill="black",i.stroke=null,i.desiredSize=new pt(3,3).ca(),e.add(i),t.ef.add("LinkLabel",e),t.fh=new ct,e=new dt,e.selectionObjectName="GROUPPANEL",e.type=V.Vertical,i=new qt,i.font="bold 12pt sans-serif",i.bind(new Me("text","",Xe)),e.add(i),i=new V(V.Auto),i.name="GROUPPANEL";var n=new gt;n.figure="Rectangle",n.fill="rgba(128,128,128,0.2)",n.stroke="black",i.add(n),n=new xi,n.padding=new Rt(5,5,5,5).ca(),i.add(n),e.add(i),t.Bu=e,t.fh.add("",e),t.dg=new ct,e=new z,i=new gt,i.isPanelMain=!0,e.add(i),i=new gt,i.toArrow="Standard",i.fill="black",i.stroke=null,i.strokeWidth=0,e.add(i),t.Cu=e,t.dg.add("",e),e=new z,i=new gt,i.isPanelMain=!0,i.stroke="brown",e.add(i),t.dg.add("Comment",e),e=new Ct,e.type=V.Auto,i=new gt,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),i=new xi,i.margin=new Rt(1.5,1.5,1.5,1.5).ca(),e.add(i),t.ep=e,t.mo=e,e=new Ct,e.type=V.Link,i=new gt,i.isPanelMain=!0,i.fill=null,i.stroke="dodgerblue",i.strokeWidth=3,e.add(i),t.Fo=e}O.prototype.setRTL=function(t){t=t===void 0?this.div:t,t===null&&(t=Y.document.body);var e=it("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var i="reverse";0<e.scrollLeft?i="default":(e.scrollLeft=1,e.scrollLeft===0&&(i="negative")),t.removeChild(e),this.Ss=i},O.prototype.setScrollWidth=function(t){t=t===void 0?this.div:t,t===null&&(t=Y.document.body);var e=0;if(Vn){var i=Hw;e=Xw,i===null&&(i=Hw=it("p"),i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box",e=Xw=it("div"),e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(i)),e.style.overflow="hidden",t.appendChild(e);var n=i.offsetWidth;e.style.overflow="scroll",i=i.offsetWidth,n===i&&(i=e.clientWidth),t.removeChild(e),e=n-i,e!==0||hi||(e=11)}this.pb=e,this.nv=!0},O.prototype.jb=function(t){t.classType===O&&(this.autoScale=t)},O.prototype.toString=function(t){t===void 0&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var i=this.La.iterator;i.next();)e+=`
  `+i.value.toString(t-1);return e},O.prototype.addEventListener=function(t,e,i,n){t.addEventListener(e,i,{capture:n,passive:!1})},O.prototype.removeEventListener=function(t,e,i,n){t.removeEventListener(e,i,{capture:n})};function tT(t){var e=t.ta.Ga;e instanceof HTMLCanvasElement&&(t.xj?(t.addEventListener(e,"pointerdown",t.Kk,!1),t.addEventListener(e,"pointermove",t.Lk,!1),t.addEventListener(e,"pointerup",t.Nk,!1),t.addEventListener(e,"pointerout",t.Mk,!1)):(t.addEventListener(e,"touchstart",t.Ow,!1),t.addEventListener(e,"touchmove",t.Nw,!1),t.addEventListener(e,"touchend",t.Mw,!1),t.addEventListener(e,"mousemove",t.Ek,!1),t.addEventListener(e,"mousedown",t.Dk,!1),t.addEventListener(e,"mouseup",t.Gk,!1),t.addEventListener(e,"mouseout",t.Fk,!1)),t.addEventListener(e,"mouseenter",t.Oz,!1),t.addEventListener(e,"mouseleave",t.Pz,!1),t.addEventListener(e,"wheel",t.Hk,!1),t.addEventListener(e,"keydown",t.BA,!1),t.addEventListener(e,"keyup",t.CA,!1),t.addEventListener(e,"blur",t.Az,!1),t.addEventListener(e,"focus",t.Bz,!1),t.addEventListener(e,"selectstart",function(i){return i.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(i){return i.preventDefault(),!1},!1),t.addEventListener(e,"gesturestart",function(i){t.toolManager.gestureBehavior!==Ta&&(t.toolManager.gestureBehavior===Bu?i.preventDefault():t.pe&&t.lastInput.handled||(i.preventDefault(),t.Ul=t.scale,t.currentTool.doCancel()))},!1),t.addEventListener(e,"gesturechange",function(i){if(t.toolManager.gestureBehavior!==Ta){if(t.toolManager.gestureBehavior===Bu)i.preventDefault();else if(!t.pe||!t.lastInput.handled){i.preventDefault();var n=i.scale;if(t.Ul!==null){var r=t.ta.getBoundingClientRect();if(i=new k(i.pageX-Y.scrollX-t.va/r.width*r.left,i.pageY-Y.scrollY-t.ua/r.height*r.top),n=t.Ul*n,r=t.commandHandler,n!==t.scale&&r.canResetZoom(n)){var o=t.zoomPoint;t.zoomPoint=i,r.resetZoom(n),t.zoomPoint=o}}}}},!1),t.addEventListener(Y,"resize",t.Ww,!1))}function Aa(t){30<t.Xo&&(t.xh=1)}function Zc(t,e){t.xh!==null&&(t.xh=null,e&&t.Xq(),Ic&&Ic.ny||(t.Xo=0,t.ev=[0,0,0,0,0],t.Yo=0))}O.prototype.computePixelRatio=function(){return this.xh!==null?this.xh:Y.devicePixelRatio||1},O.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},O.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},O.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},O.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},O.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},O.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},O.prototype.doFocus=function(){this.focus()},O.prototype.focus=function(){if(this.ta)if(this.scrollsPageOnFocus)this.ta.focus();else{var t=Y.scrollX||Y.pageXOffset,e=Y.scrollY||Y.pageYOffset;this.ta.focus(),Y.scrollTo(t,e)}},O.prototype.Bz=function(){this.B.R("GainedFocus")},O.prototype.Az=function(){this.B.R("LostFocus")};function Xy(t){if(t.ta!==null){var e=t.Ea;if(e.clientWidth!==0&&e.clientHeight!==0){t.nv||t.setScrollWidth();var i=t.Ze?t.pb:0,n=t.ne?t.pb:0,r=t.Tb;t.Tb=t.computePixelRatio(),t.Tb!==r&&(t.Dl=!0,t.Eb()),(e.clientWidth!==t.va+i||e.clientHeight!==t.ua+n)&&(t.ui=!0,t.Ec=!0,e=t.layout,e!==null&&e.isViewportSized&&t.autoScale===Xi&&(t.Fj=!0,e.C()),t.kc||t.Eb())}}}function Sw(t){var e=new si;e.name="Background",t.rm(e),e=new si,e.name="",t.rm(e),e=new si,e.name="Foreground",t.rm(e),e=new si,e.name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.rm(e),e=new si,e.name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.rm(e),e=new si,e.name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.Vx(e,t.wm("Background"))}function kw(t){t.Jb=new V(V.Grid),t.Jb.name="GRID";var e=new gt;e.figure="LineH",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Jb.add(e),e=new gt,e.figure="LineH",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Jb.add(e),e=new gt,e.figure="LineH",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Jb.add(e),e=new gt,e.figure="LineV",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Jb.add(e),e=new gt,e.figure="LineV",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Jb.add(e),e=new gt,e.figure="LineV",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Jb.add(e),e=new rt,e.add(t.Jb),e.layerName="Grid",e.zOrder=0,e.isInDocumentBounds=!1,e.isAnimated=!1,e.pickable=!1,e.locationObjectName="GRID",t.add(e),t.partManager.parts.remove(e),t.Jb.visible=!1}function eT(){this.B.Vs?this.B.Vs=!1:this.B.isEnabled?this.B.jy(this):$y(this.B)}function Pw(t){this.B.isEnabled?(this.B.Zs=t.target.scrollTop,this.B.Xs=t.target.scrollLeft):$y(this.B)}O.prototype.jy=function(t){if(this.ta!==null){this.Ip=!0;var e=this.documentBounds,i=this.viewportBounds,n=this.Ri,r=e.x-n.left,o=e.y-n.top,s=e.width+n.left+n.right,u=e.height+n.top+n.bottom,a=e.right+n.right;n=e.bottom+n.bottom;var f=i.x;e=i.y;var c=i.width,d=i.height,g=i.right,m=i.bottom;i=this.scale;var y=t.scrollLeft;if(this.Fl)switch(this.Ss){case"negative":y=y+t.scrollWidth-t.clientWidth;break;case"reverse":y=t.scrollWidth-y-t.clientWidth}var x=y;c<s||d<u?(y=k.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Xs!==x&&(y.x=x/i+r,this.Xs=x),this.allowVerticalScroll&&this.Zs!==t.scrollTop&&(y.y=t.scrollTop/i+o,this.Zs=t.scrollTop),this.position=y,k.free(y),this.ui=this.Ip=!1):(y=k.alloc(),t.iz&&this.allowHorizontalScroll&&(r<f&&(this.position=y.h(x+r,this.position.y)),a>g&&(this.position=y.h(-(this.Ys.scrollWidth-this.va)+x-this.va/i+a,this.position.y))),t.jz&&this.allowVerticalScroll&&(o<e&&(this.position=y.h(this.position.x,t.scrollTop+o)),n>m&&(this.position=y.h(this.position.x,-(this.Ys.scrollHeight-this.ua)+t.scrollTop-this.ua/i+n))),k.free(y),as(this),this.ui=this.Ip=!1,e=this.documentBounds,i=this.viewportBounds,a=e.right,g=i.right,n=e.bottom,m=i.bottom,r=e.x,f=i.x,o=e.y,e=i.y,c>=s&&r>=f&&a<=g&&(this.Jp.style.width="1px"),d>=u&&o>=e&&n<=m&&(this.Jp.style.height="1px"))}},O.prototype.computeBounds=function(){return 0<this.vd.count&&Ci(this),Nw(this)};function Nw(t){if(t.fixedBounds.u()){var e=t.fixedBounds.copy();return e.qq(t.ib),e}for(var i=!0,n=t.La.j,r=n.length,o=0;o<r;o++){var s=n[o];if(s.visible&&s.isInDocumentBounds){s=s.Da.j;for(var u=s.length,a=0;a<u;a++){var f=s[a];f.isInDocumentBounds&&f.isVisible()&&(f=f.actualBounds,f.u()&&(i?(i=!1,e=f.copy()):e.Tc(f)))}}}return i&&(e=new I(0,0,0,0)),e.qq(t.ib),e}O.prototype.computePartsBounds=function(t,e){e===void 0&&(e=!1);var i=null;if(jt(t))for(var n=0;n<t.length;n++){var r=t[n];!e&&r instanceof z||(r.Ta(),i===null?i=r.actualBounds.copy():i.Tc(r.actualBounds))}else for(t=t.iterator;t.next();)n=t.value,!e&&n instanceof z||(n.Ta(),i===null?i=n.actualBounds.copy():i.Tc(n.actualBounds));return i===null?new I(NaN,NaN,0,0):i};function bn(t,e){if((e||t.oe)&&!t.Sb&&t.ta!==null&&t.documentBounds.u()){if(e){var i=t.initialPosition;if(i.u()){t.position=i;return}i=k.alloc(),i.sj(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=I.allocAt(0,0,n.width,n.height);var r=k.alloc();r.sj(n,t.initialViewportSpot),r.h(i.x-r.x,i.y-r.y),t.position=r,I.free(n),k.free(r),k.free(i)}t.Sb=!0,i=t.Pg,e&&t.$f!==Xi&&(i=t.$f),n=i!==Xi?Ku(t,i):t.scale,i=t.viewportBounds.copy(),r=t.va/n;var o=t.ua/n,s=t.Bj,u=t.oo;e&&!s.kb()&&(u.kb()||u.Nb())&&(s=u.Nb()?Wt:u),Hy(t,t.documentBounds,r,o,s,e),e=t.scale,t.scale=n,t.Sb=!1,n=t.viewportBounds,n.Na(i)||t.Tq(i,n,e,!1),hs(t),$u(t,!0,!1)}}function Ku(t,e){var i=t.Nn;if(t.ta===null)return i;t.Ta();var n=t.documentBounds;if(!n.u())return i;var r=n.width;n=n.height;var o=t.va+(t.Ze?t.pb:0),s=t.ua+(t.ne?t.pb:0),u=o/r,a=s/n;return e===Qu?(e=Math.min(a,u),e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===ep?(e=a>u?(s-t.pb)/n:(o-t.pb)/r,e>i&&(e=i),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}O.prototype.zoomToFit=function(){var t=this.Si;this.Si=fs,this.scale=Ku(this,Qu),t!==fs&&(bn(this,!1),Hy(this,this.documentBounds,this.va/this.ya,this.ua/this.ya,this.Bj,!1)),this.Si=t},l=O.prototype,l.jB=function(t,e){e===void 0&&(e=Qu);var i=t.width,n=t.height;if(!(i===0||n===0||isNaN(i)&&isNaN(n))){var r=1;if(e===Qu||e===ep)if(isNaN(i))r=this.viewportBounds.height*this.scale/n;else if(isNaN(n))r=this.viewportBounds.width*this.scale/i;else{r=this.va;var o=this.ua;r=e===ep?o/n>r/i?(o-(this.ne?this.pb:0))/n:(r-(this.Ze?this.pb:0))/i:Math.min(o/n,r/i)}this.scale=r,this.position=new k(t.x,t.y)}},l.uz=function(t,e){this.Ta();var i=this.documentBounds,n=this.viewportBounds;this.position=new k(i.x+(t.x*i.width+t.offsetX)-(e.x*n.width-e.offsetX),i.y+(t.y*i.height+t.offsetY)-(e.y*n.height-e.offsetY))},l.kA=function(t){if(t instanceof ot){this.Yn=t;var e=k.alloc();this.Zn=this.gr(t.da(mi,e)),k.free(e)}else this.Yn=null,this.Zn=Ma};function Hy(t,e,i,n,r,o){var s=k.allocAt(t.la.x,t.la.y),u=s.x,a=s.y;if(t.Yn!==null){var f=k.alloc();f=t.Yn.da(mi,f),u=f.x-t.Zn.x/t.scale,a=f.y-t.Zn.y/t.scale,r=qe,k.free(f)}(o||t.scrollMode===fs)&&(r.kb()&&(i>e.width&&(u=e.x+(r.x*e.width+r.offsetX)-(r.x*i-r.offsetX)),n>e.height&&(a=e.y+(r.y*e.height+r.offsetY)-(r.y*n-r.offsetY))),r=t.Ri,o=i-e.width,i<e.width+r.left+r.right?(u=Math.min(u+i/2,e.right+Math.max(o,r.right)-i/2),u=Math.max(u,e.left-Math.max(o,r.left)+i/2),u-=i/2):u>e.left?u=e.left:u<e.right-i&&(u=e.right-i),i=n-e.height,n<e.height+r.top+r.bottom?(a=Math.min(a+n/2,e.bottom+Math.max(i,r.bottom)-n/2),a=Math.max(a,e.top-Math.max(i,r.top)+n/2),a-=n/2):a>e.top?a=e.top:a<e.bottom-n&&(a=e.bottom-n)),s.x=isFinite(u)?u:-t.ib.left,s.y=isFinite(a)?a:-t.ib.top,t.positionComputation!==null&&(e=t.positionComputation(t,s),s.x=e.x,s.y=e.y),t.Wc.sc&&hw(t.Wc,t.la,s),t.la.h(s.x,s.y),k.free(s)}l.xm=function(t,e){if(e===void 0&&(e=!0),e){if(t=Wy(this,t,function(i){return i.part},function(i){return i.canSelect()}),t instanceof rt)return t}else if(t=Wy(this,t,function(i){return i.part}),t instanceof rt)return t;return null},l.Vb=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null),Ci(this);for(var n=this.La.iteratorBackwards;n.next();){var r=n.value;if(r.visible&&(r=r.Vb(t,e,i),r!==null))return r}return null};function Wy(t,e,i,n){for(i===void 0&&(i=null),n===void 0&&(n=null),Ci(t),t=t.La.iteratorBackwards;t.next();){var r=t.value;if(r.visible&&!r.isTemporary&&(r=r.Vb(e,i,n),r!==null))return r}return null}l.Zz=function(t,e,i){return e===void 0&&(e=!0),iT(this,t,function(n){return n.part},e?function(n){return n instanceof rt&&n.canSelect()}:null,i)};function iT(t,e,i,n,r){for(i===void 0&&(i=null),n===void 0&&(n=null),r instanceof J||r instanceof W||(r=new W),Ci(t),t=t.La.iteratorBackwards;t.next();){var o=t.value;o.visible&&!o.isTemporary&&o.gj(e,i,n,r)}return r}l.gj=function(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n instanceof J||n instanceof W||(n=new W),Ci(this);for(var r=this.La.iteratorBackwards;r.next();){var o=r.value;o.visible&&o.gj(t,e,i,n)}return n},l.uy=function(t,e,i,n){return e===void 0&&(e=!1),i===void 0&&(i=!0),nT(this,t,function(r){return r instanceof rt&&(!i||r.canSelect())},e,n)},l.Bf=function(t,e,i,n,r){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof J||r instanceof W||(r=new W),Ci(this);for(var o=this.La.iteratorBackwards;o.next();){var s=o.value;s.visible&&s.Bf(t,e,i,n,r)}return r},l.Tv=function(t,e,i,n,r,o){var s=new W;Ci(this);for(var u=this.La.iteratorBackwards;u.next();){var a=u.value;a.visible&&a.Tv(t,e,i,n,s,r,o)}return s};function nT(t,e,i,n,r){var o=null;for(i===void 0&&(i=null),n===void 0&&(n=!1),r instanceof J||r instanceof W||(r=new W),Ci(t),t=t.La.iteratorBackwards;t.next();){var s=t.value;s.visible&&!s.isTemporary&&s.Bf(e,o,i,n,r)}return r}l.$z=function(t,e,i,n,r){return i===void 0&&(i=!0),n===void 0&&(n=!0),rT(this,t,e,function(o){return o instanceof rt&&(!n||o.canSelect())},i,r)},l.Fg=function(t,e,i,n,r,o){i===void 0&&(i=null),n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof J||r instanceof W)&&(o=r),r=!0),o instanceof J||o instanceof W||(o=new W),Ci(this);for(var s=this.La.iteratorBackwards;s.next();){var u=s.value;u.visible&&u.Fg(t,e,i,n,r,o)}return o};function rT(t,e,i,n,r,o){var s=null;for(n===void 0&&(n=null),r===void 0&&(r=!0),r!==!1&&r!==!0&&((r instanceof J||r instanceof W)&&(o=r),r=!0),o instanceof J||o instanceof W||(o=new W),Ci(t),t=t.La.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.Fg(e,i,s,n,r,o)}return o}O.prototype.acceptEvent=function(t){return Co(this,t,t instanceof MouseEvent)};function Co(t,e,i){var n=t.pd;return t.pd=t.hh,t.hh=n,n.diagram=t,n.event=e,i?Tl(t,e,n):(n.viewPoint=t.pd.viewPoint,n.documentPoint=t.pd.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),n.modifiers=t,n.button=e.button,e.buttons===void 0||ft||(n.buttons=e.buttons),te&&e.button===0&&e.ctrlKey&&(n.button=2),n.down=!1,n.up=!1,n.clickCount=1,n.delta=0,n.handled=!1,n.bubbles=!1,n.timestamp=e.timeStamp,n.isMultiTouch=!1,n.targetDiagram=_u(e),n.targetObject=null,n}function _u(t){var e=t.target.B;if(!e){var i=t.path;i||typeof t.composedPath!="function"||(i=t.composedPath()),i&&i[0]&&(e=i[0].B)}return e||null}function Tw(t,e,i,n){var r=Jc(t,e,!0,!1,!0,n);return Tl(t,i,r),r.targetDiagram=_u(e),r.targetObject=null,n||r.clone(t.Yf),r}function Cw(t,e,i,n){if(n=Jc(t,e,!1,!1,!1,n),i!==null){var r=Y.document.elementFromPoint(i.clientX,i.clientY);r!==null&&r.shadowRoot!==void 0&&r.shadowRoot!==null&&(r=r.shadowRoot.elementFromPoint(i.clientX,i.clientY)),r&&r.B?(e=i,i=r.B):(e=e.targetTouches!==void 0?e.targetTouches[0]:e,i=t),n.targetDiagram=i,Tl(t,e,n)}else t.pd!==null?(n.documentPoint=t.pd.documentPoint,n.viewPoint=t.pd.viewPoint,n.targetDiagram=t.pd.targetDiagram):t.Yf!==null&&(n.documentPoint=t.Yf.documentPoint,n.viewPoint=t.Yf.viewPoint,n.targetDiagram=t.Yf.targetDiagram);return n.targetObject=null,n}function Jc(t,e,i,n,r,o){var s=t.pd;t.pd=t.hh,t.hh=s,s.diagram=t,s.clickCount=1;var u=s.delta=0;return e.ctrlKey&&(u+=1),e.altKey&&(u+=2),e.shiftKey&&(u+=4),e.metaKey&&(u+=8),s.modifiers=u,s.button=0,s.buttons=1,s.event=e,s.timestamp=e.timeStamp,t.xj&&e instanceof Y.PointerEvent&&e.pointerType!=="touch"&&(s.button=e.button,e.buttons===void 0||ft||(s.buttons=e.buttons),te&&e.button===0&&e.ctrlKey&&(s.button=2)),s.down=i,s.up=n,s.handled=!1,s.bubbles=r,s.isMultiTouch=o,s}function tr(t,e){return t.bubbles?!0:(e.stopPropagation!==void 0&&e.stopPropagation(),e.cancelable!==!1&&e.preventDefault(),e.cancelBubble=!0,!1)}O.prototype.BA=function(t){var e=this.B;if(!this.B.isEnabled)return!1;var i=Co(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.down=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del";break;case 48:i.key="0";break;case 187:case 61:case 107:i.key="Add";break;case 189:case 173:case 109:i.key="Subtract";break;case 27:i.key="Esc"}return e.doKeyDown(),tr(i,t)},O.prototype.CA=function(t){var e=this.B;if(!e.isEnabled)return!1;var i=Co(e,t,!1);switch(i.key=String.fromCharCode(t.which),i.up=!0,t.which){case 8:i.key="Backspace";break;case 33:i.key="PageUp";break;case 34:i.key="PageDown";break;case 35:i.key="End";break;case 36:i.key="Home";break;case 37:i.key="Left";break;case 38:i.key="Up";break;case 39:i.key="Right";break;case 40:i.key="Down";break;case 45:i.key="Insert";break;case 46:i.key="Del"}return e.doKeyUp(),tr(i,t)},O.prototype.Oz=function(t){var e=this.B;if(!e.isEnabled)return!1;var i=Co(e,t,!0);return e.mouseEnter!==null&&e.mouseEnter(i),tr(i,t)},O.prototype.Pz=function(t){var e=this.B;if(!e.isEnabled)return!1;var i=Co(e,t,!0);return e.mouseLeave!==null&&e.mouseLeave(i),tr(i,t)},O.prototype.getMouse=function(t){var e=this.ta;if(e===null)return new k(0,0);var i=e.getBoundingClientRect();return e=t.clientX-this.va/i.width*i.left,t=t.clientY-this.ua/i.height*i.top,this.qb!==null?gi(new k(e,t),this.qb):new k(e,t)};function Tl(t,e,i){var n=t.ta,r=t.va,o=t.ua,s=0,u=0;n!==null&&(n=n.getBoundingClientRect(),s=e.clientX-r/n.width*n.left,u=e.clientY-o/n.height*n.top),i.viewPoint.h(s,u),t.qb!==null?(e=k.allocAt(s,u),t.qb.Gd(e),i.documentPoint.assign(e),k.free(e)):i.documentPoint.h(s,u)}function Lw(t,e,i,n){if(e.targetTouches!==void 0){if(2>e.targetTouches.length)return;e=e.targetTouches[i]}else if(t.$j[0]!==null)e=t.$j[i];else return;i=t.ta,i!==null&&(i=i.getBoundingClientRect(),n.h(e.clientX-t.va/i.width*i.left,e.clientY-t.ua/i.height*i.top))}l=O.prototype,l.Oa=function(){this.ti||(this.ti=!0,this.Eb(!0))};function oT(t){t.kc||Ci(t),t.Ta()}l.Le=function(){this.Sb||this.kc||(this.M(),hs(this),as(this),this.Oa(),this.jd())},l.AA=function(){return this.Ce},l.Jz=function(t){t===void 0&&(t=null);var e=this.animationManager,i=e.isEnabled;e.Sc(),e.isEnabled=!1,us(this),this.oe=!1,this.Ts=new k(NaN,NaN),e.isEnabled=i,this.kc=!0;var n=this;t!==null&&H(function(){n.kc=!1,ls(e,"Model"),t()},1)},l.Eb=function(t){if(t===void 0&&(t=!1),this.Ce!==!0&&!(this.Sb||t===!1&&this.kc)){this.Ce=!0;var e=this;Y.requestAnimationFrame(function(){e.Ce&&e.jd()})}},l.jd=function(){(!this.Ij||this.Ce)&&(this.Ij&&(this.Ij=!1),us(this))};function $u(t,e,i){t.animationManager.defaultAnimation.isAnimating||t.Sb||!t.ui||$y(t)||(e&&Ci(t),i&&bn(t,!1))}function us(t,e){if(!t.kc&&(t.Ce=!1,t.Ea!==null||t.pm.u())){t.kc=!0;var i=t.animationManager,n=t.Ls;if(!i.isAnimating&&n.length!==0){for(var r=n.j,o=r.length,s=0;s<o;s++){var u=r[s];en(u,!1),u.o()}n.clear()}n=t.Pu,0<n.count&&(n.each(function(a){a.Vw()}),n.clear()),r=n=!1,i.isAnimating&&(r=!0,n=t.skipsUndoManager,t.skipsUndoManager=!0),i.sc||Xy(t),$u(t,!1,!0),t.Jb!==null&&(t.Jb.visible&&!t.lo&&(jo(t),t.lo=!0),!t.Jb.visible&&t.lo&&(t.lo=!1)),Ci(t),o=!1,(!t.oe||t.Og)&&(t.oe?Bw(t,!t.Fj):(t.xa("Initial Layout"),i.isEnabled===!1&&i.Sc(),Bw(t,!1)),o=!0),t.Fj=!1,Ci(t),t.et||oT(t),$u(t,!0,!1),s=!1,o?(i=I.alloc(),i.assign(t.viewportBounds),t.oe||(s=t.oe=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,sT(t)),t.R("LayoutCompleted"),i.w(t.viewportBounds)||$u(t,!0,!1),I.free(i)):i.yl&&i.Rx&&(t.$f!==Xi?t.scale=Ku(t,t.$f):t.Pg!==Xi?t.scale=Ku(t,t.Pg):(i=t.initialScale,isFinite(i)&&0<i&&(t.scale=i)),bn(t,!0)),Ci(t),o&&s&&t.Wa("Initial Layout"),t.Fv(),e||t.cc(t.Hb),r&&(t.skipsUndoManager=n),t.kc=!1}}function sT(t){var e=t.ya;if(t.$f!==Xi)t.scale=Ku(t,t.$f);else if(t.Pg!==Xi)t.scale=Ku(t,t.Pg);else{var i=t.initialScale;isFinite(i)&&0<i&&(t.scale=i)}t.ya!==e&&(hs(t),$u(t,!0,!1)),bn(t,!0),e=t.La.j,t.Ld(e,e.length,t),t.R("InitialLayoutCompleted"),t.Ts.assign(t.la),jo(t)}function Ci(t){if((t.kc||!t.animationManager.isTicking)&&t.vd.count!==0){for(var e=0;23>e;e++){var i=t.vd.iterator;if(i===null||t.vd.count===0)break;t.vd=new W,t.Vw(i,t.vd)}t.nodes.each(function(n){n instanceof dt&&(n.P&65536)!=0&&(n.P=n.P^65536)})}}l.Vw=function(t,e){for(t.reset();t.next();){var i=t.value;!i.Oc()||i instanceof dt||(i.qj()?(i.measure(Infinity,Infinity),i.arrange()):e.add(i))}for(t.reset();t.next();)i=t.value,i instanceof dt&&i.isVisible()&&Ky(this,i);for(t.reset();t.next();)i=t.value,i instanceof z&&i.isVisible()&&(i.qj()?(i.measure(Infinity,Infinity),i.arrange()):e.add(i));for(t.reset();t.next();)i=t.value,i instanceof Ct&&i.isVisible()&&(i.qj()?(i.measure(Infinity,Infinity),i.arrange()):e.add(i))};function Ky(t,e){for(var i=Dt(),n=Dt(),r=e.memberParts;r.next();){var o=r.value;o.isVisible()&&(o instanceof dt?(Eo(o)||Pn(o)||Fo(o))&&Ky(t,o):o instanceof z?o.fromNode===e||o.toNode===e?n.push(o):i.push(o):(o.measure(Infinity,Infinity),o.arrange()))}for(t=i.length,r=0;r<t;r++)o=i[r],o.measure(Infinity,Infinity),o.arrange();for(Xt(i),e.measure(Infinity,Infinity),e.arrange(),t=n.length,e=0;e<t;e++)i=n[e],i.measure(Infinity,Infinity),i.arrange();Xt(n)}l.Ld=function(t,e,i,n){if(this.vi||this.animationManager.isAnimating){n===void 0&&(n=i.viewportBounds);for(var r=0;r<e;r++)t[r].Ld(i,n)}},l.cc=function(t,e){if(e===void 0&&(e=null),this.Ea!==null){this.ta===null&&E("No canvas specified");var i=this.animationManager;if(!i.sc&&(!i.isAnimating||i.isTicking)){var n=new Date;if(Ba(this),this.Ea.style.opacity!=="0"){var r=t!==this.Hb,o=this.La.j,s=o.length,u=this;if(this.Ld(o,s,u),r)t.uc(!0),as(this);else if(!this.Ec&&e===null&&!i.isAnimating)return;s=this.la;var a=this.ya,f=Math.round(s.x*a)/a,c=Math.round(s.y*a)/a;for(i=this.qb,i.reset(),a!==1&&i.scale(a),s.x===0&&s.y===0||i.translate(-f,-c),a=this.Tb,t.setTransform(1,0,0,1,0,0),t.scale(a,a),t.clearRect(0,0,this.va,this.ua),this.hb!==1&&(t.globalAlpha=this.hb),_y(this,t),f=e!==null?function(d){var g=e;if(d.visible&&d.hb!==0){var m=d.Da.j,y=m.length;if(y!==0){var x=Wu(d,t),M=d.lp;M.length=0;for(var S=u.scale,N=I.alloc(),T=0;T<y;T++){var C=m[T];g.contains(C)||d.cj(t,C,u,M,S,N,!0)}I.free(N),t.globalAlpha=x}}}:function(d){d.cc(t,u)},s=o.length,c=0;c<s;c++)t.setTransform(1,0,0,1,0,0),t.scale(a,a),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),f(o[c]);if(o=!1,this.si?Va(this.si,this)&&(o=this.Tr()):o=!0,o&&(Nt.prototype.Gd=Nt.prototype.ay),r?(this.Hb.uc(!0),as(this)):this.Ec=this.vi=!1,o=+new Date-+n,r=Ic&&Ic.ny,n=this.ev,r||this.xh===null){for(n[this.Yo]=o,this.Yo=(this.Yo+1)%n.length,i=o=0;i<n.length;i++)o+=n[i];this.Xo=o/n.length}if(this.hb!==1&&(t.globalAlpha=1),r)for(t.setTransform(1,0,0,1,0,0),r=0;r<n.length;r++)t.fillText(n[r].toString(),20,150+ +(20*r))}}}};function Qc(t,e,i,n,r,o,s,u,a,f){if(t.Ea!==null){t.ta===null&&E("No canvas specified"),s===void 0&&(s=null),u===void 0&&(u=null),a===void 0&&(a=!1),f===void 0&&(f=!1),Ba(t),t.Hb.uc(!0),as(t),t.wi=!0;var c=t.ya;t.ya=r;var d=t.La.j,g=d.length;try{var m=new I(o.x,o.y,n.width/r,n.height/r),y=m.copy();y.qq(i),jo(t,y),Ci(t),t.Ld(d,g,t,m),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),u!==null&&u!==""&&(e.fillStyle=u,e.fillRect(0,0,n.width,n.height));var x=t.Tb;e.scale(x,x);var M=Nt.alloc();if(M.reset(),M.translate(i.left,i.top),M.scale(r),o.x===0&&o.y===0||M.translate(-o.x,-o.y),e.setTransform(M.m11,M.m12,M.m21,M.m22,M.dx,M.dy),Nt.free(M),_y(t,e),e.globalAlpha=t.hb,s!==null){var S=new W,N=s.iterator;for(N.reset();N.next();){var T=N.value;f===!1&&T.layer.name==="Grid"||T===null||S.add(T)}var C=function($){if($.visible&&$.hb!==0&&(a||!$.isTemporary)){var G=$.Da.j,nt=G.length;if(nt!==0){var q=Wu($,e),R=$.lp;R.length=0;for(var Lt=t.scale,mt=I.alloc(),Ot=0;Ot<nt;Ot++){var re=G[Ot];S.contains(re)&&$.cj(e,re,t,R,Lt,mt,!1)}I.free(mt),e.globalAlpha=q}}}}else if(!a&&f){var D=t.grid.part,F=D.layer;C=function($){$===F?D.cc(e,t):$.cc(e,t,a)}}else C=function($){$.cc(e,t,a)};for(i=0;i<g;i++)C(d[i]);t.wi=!1,t.si&&Va(t.si,t)&&t.Tr()}finally{t.ya=c,t.Hb.uc(!0),as(t),t.Ld(d,g,t),jo(t)}}}l.Ie=function(t){return this.jf[t]},l.Vy=function(t,e){t==="minDrawingLength"&&(this.Ro=e),this.jf[t]=e,this.Le()},l.xw=function(){this.jf=new Qi,this.jf.drawShadows=!0,this.jf.textGreeking=!0,this.jf.viewportOptimizations=!(hi||Tt||Bt),this.jf.temporaryPixelRatio=!0,this.jf.pictureRatioOptimization=!0,this.Ro=this.jf.minDrawingLength=1};function _y(t,e){t=t.jf,t!==null&&(t.imageSmoothingEnabled!==void 0&&e.Uy(!!t.imageSmoothingEnabled),t=t.defaultFont,t!=null&&(e.font=t))}l.zm=function(t){return this.Lj[t]},l.YA=function(t,e){this.Lj[t]=e},l.ww=function(){this.Lj=new Qi,this.Lj.extraTouchArea=10,this.Lj.extraTouchThreshold=10,this.Lj.hasGestureZoom=!0},l.Fw=function(t){Ia(this,t)};function Ia(t,e){var i=t instanceof V,n=t instanceof O,r;for(r in e){r===""&&E("Setting properties requires non-empty property names");var o=t,s=r;if(i||n){var u=r.indexOf(".");if(0<u){var a=r.substring(0,u);i?o=t.ab(a):(o=t[a],o==null&&(o=t.toolManager[a])),at(o)?s=r.substr(u+1):E("Unable to find object named: "+a+" in "+t.toString()+" when trying to set property: "+r)}}if(s[0]!=="_"&&!tt(o,s))if(n&&s==="ModelChanged"){t.Yx(e[s]);continue}else if(n&&s==="Changed"){t.Gh(e[s]);continue}else if(n&&tt(t.toolManager,s))o=t.toolManager;else if(n&&Vw(t,s)){t.ik(s,e[s]);continue}else if(t instanceof b&&s==="Changed"){t.Gh(e[s]);continue}else E('Trying to set undefined property "'+s+'" on object: '+o.toString());o[s]=e[r],s[0]==="_"&&o instanceof ot&&o.Ux(s)}}l.Fv=function(){if(this.undoManager.transactionLevel===0&&this.Wg.count!==0){for(;0<this.Wg.count;){var t=this.Wg;for(this.Wg=new ct,t=t.iterator;t.next();){var e=t.key;e.Lq(t.value),e.dc()}}this.M()}},l.M=function(t){if(t===void 0&&(t=null),t===null)this.Ec=!0,this.Eb();else{var e=this.viewportBounds;t!==null&&t.u()&&e.Nc(t)&&(this.Ec=!0,this.Eb())}this.R("InvalidateDraw")},l.Gy=function(t,e){if(this.Ec!==!0){this.Ec=!0;var i=this.Ie("temporaryPixelRatio")===!0;if(this.Ie("viewportOptimizations")===!0&&this.scrollMode!==l0&&this.Ri.ej(0,0,0,0)&&e.width===t.width&&e.height===t.height){var n=this.scale,r=Math.max(t.x,e.x),o=Math.max(t.y,e.y);if(n=I.allocAt(r,o,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-r)*n,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-o)*n),!this.bq&&0<n.width&&0<n.height){if(!(this.kc||(this.Ce=!1,this.Ea===null||(this.kc=!0,this.Fv(),this.documentBounds.u()||i0(this,this.computeBounds()),r=this.ta,r===null||r instanceof so)))){var s=this.Tb;o=this.va*s;var u=this.ua*s,a=this.scale*s,f=Math.round(Math.round(e.x*a)-Math.round(t.x*a));e=Math.round(Math.round(e.y*a)-Math.round(t.y*a)),a=this.Gu,t=this.ux,a.width!==o&&(a.width=o),a.height!==u&&(a.height=u),t.clearRect(0,0,o,u),a=190*s;var c=70*s,d=Math.max(f,0),g=Math.max(e,0),m=Math.floor(o-d),y=Math.floor(u-g);t.drawImage(r.Ga,d,g,m,y,0,0,m,y),Va(this.si,this)&&t.clearRect(0,0,a,c),r=Dt(),t=Dt(),y=Math.abs(f),m=Math.abs(e);var x=d===0?0:o-y;d=k.allocAt(x,0),y=k.allocAt(y+x,u),t.push(new I(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y)));var M=this.qb;if(M.reset(),M.scale(s,s),this.ya!==1&&M.scale(this.ya),s=this.la,(s.x!==0||s.y!==0)&&isFinite(s.x)&&isFinite(s.y)&&M.translate(-s.x,-s.y),gi(d,M),gi(y,M),r.push(new I(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y))),x=g===0?0:u-m,d.h(0,x),y.h(o,m+x),t.push(new I(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y))),gi(d,M),gi(y,M),r.push(new I(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y))),Va(this.si,this)&&(o=0<f?0:-f,u=0<e?0:-e,d.h(o,u),y.h(a+o,c+u),t.push(new I(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y))),gi(d,M),gi(y,M),r.push(new I(Math.min(d.x,y.x),Math.min(d.y,y.y),Math.abs(d.x-y.x),Math.abs(d.y-y.y)))),k.free(d),k.free(y),$u(this,!1,!0),this.Ea===null&&E("No div specified"),this.ta===null&&E("No canvas specified"),!this.animationManager.sc&&(o=this.Hb,this.Ec)){for(Ba(this),u=this.Tb,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,this.va*u,this.ua*u),o.drawImage(this.Gu.Ga,0<f?0:Math.round(-f),0<e?0:Math.round(-e)),f=this.la,s=this.ya,a=Math.round(f.x*s)/s,c=Math.round(f.y*s)/s,e=this.qb,e.reset(),s!==1&&e.scale(s),f.x===0&&f.y===0||e.translate(-a,-c),o.save(),o.beginPath(),f=t.length,s=0;s<f;s++)a=t[s],a.width!==0&&a.height!==0&&o.rect(Math.floor(a.x),Math.floor(a.y),Math.ceil(a.width),Math.ceil(a.height));for(o.clip(),o.setTransform(1,0,0,1,0,0),o.scale(u,u),o.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),e=this.La.j,f=e.length,this.Ld(e,f,this),_y(this,o),o.globalAlpha=this.hb,u=0;u<f;u++)if(s=e[u],a=r,s.visible&&s.hb!==0){c=Wu(s,o),g=s.lp,g.length=0,d=this.scale,m=I.alloc(),y=s.Da.j,M=y.length,x=a.length;for(var S=0;S<M;S++){var N=y[S],T=Al(N,N.actualBounds);t:{for(var C=2/d,D=4/d,F=0;F<x;F++){var $=a[F];if($.width!==0&&$.height!==0&&T.aw($.x-C,$.y-C,$.width+D,$.height+D)){T=!0;break t}}T=!1}T&&s.cj(o,N,this,g,d,m,!0)}I.free(m),o.globalAlpha=c}o.restore(),o.uc(!0),this.si&&Va(this.si,this)&&this.Tr(),this.Ec=this.vi=!1,this.Xq()}Xt(r),Xt(t),this.kc=!1}}else this.jd();I.free(n),i&&(Aa(this),this.jd(),Zc(this,!0))}else i?(Aa(this),this.jd(),Zc(this,!0)):this.jd()}};function hs(t){t.ui===!1&&(t.ui=!0)}function as(t){t.vi===!1&&(t.vi=!0)}function Ba(t){t.Dl!==!1&&(t.Dl=!1,jw(t,t.va,t.ua))}function jw(t,e,i){var n=t.Tb;t.ta.resize(e*n,i*n,e,i)&&(t.Ec=!0,t.Hb.uc(!0))}function $y(t){var e=t.ta;if(e===null)return!0;var i=t.Ea,n=t.va,r=t.ua,o=t.viewportBounds.copy();if(!o.u())return!0;var s=!1,u=t.Ze?t.pb:0,a=t.ne?t.pb:0,f=i.clientWidth||n+u,c=i.clientHeight||r+a;if((f!==n+u||c!==r+a)&&(t.Ze=!1,t.ne=!1,a=u=0,t.va=f,t.ua=c,s=t.Dl=!0),!(s||t.Ze||t.ne||t.ul||t.vl))return!0;t.ui=!1;var d=t.viewportBounds,g=t.documentBounds,m=0,y=0,x=0,M=0;i=d.width;var S=d.height,N=t.Ri;t.contentAlignment.kb()?(g.width>i&&(m=N.left,y=N.right),g.height>S&&(x=N.top,M=N.bottom)):(m=N.left,y=N.right,x=N.top,M=N.bottom),N=g.width+m+y;var T=g.height+x+M;m=g.x-m;var C=d.x;y=g.right+y;var D=d.right+u;x=g.y-x;var F=d.y;g=g.bottom+M,d=d.bottom+a;var $="1px",G="1px";if(M=t.scale,f=N>f/M,c=T>c/M,t.scrollMode===fs&&(f||c)&&(f&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(f=1,m+1<C&&(f=Math.max((C-m)*M+t.va,f)),y>D+1&&(f=Math.max((y-D)*M+t.va,f)),i+u+1<N&&(f=Math.max((N-i)*M+t.va,f)),$=f.toString()+"px"),c&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(f=1,x+1<F&&(f=Math.max((F-x)*M+t.ua,f)),g>d+1&&(f=Math.max((g-d)*M+t.ua,f)),S+a+1<T&&(f=Math.max((T-S)*M+t.ua,f)),G=f.toString()+"px")),f=$!=="1px",c=G!=="1px",f&&c||!f&&!c||(c&&(D-=t.pb),f&&(d-=t.pb),N<i+u||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(u=1,m+1<C&&(u=Math.max((C-m)*M+t.va,u)),y>D+1&&(u=Math.max((y-D)*M+t.va,u)),i+1<N&&(u=Math.max((N-i)*M+t.va,u)),$=u.toString()+"px"),f=$!=="1px",u=t.ua,f!==t.ne&&(u=f?t.ua-t.pb:t.ua+t.pb),T<S+a||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(a=1,x+1<F&&(a=Math.max((F-x)*M+u,a)),g>d+1&&(a=Math.max((g-d)*M+u,a)),S+1<T&&(a=Math.max((T-S)*M+u,a)),G=a.toString()+"px"),c=G!=="1px"),t.Ip&&f===t.ne&&c===t.Ze)return n===t.va&&r===t.ua||t.jd(),!1;if(f!==t.ne&&($==="1px"?t.ua=t.ua+t.pb:t.ua=Math.max(t.ua-t.pb,1),s=!0),t.ne=f,t.Jp.style.width=$,c!==t.Ze&&(G==="1px"?t.va=t.va+t.pb:t.va=Math.max(t.va-t.pb,1),s=!0,t.Fl&&(a=k.alloc(),c?(e.style.left=t.pb+"px",t.position=a.h(t.la.x+t.pb/t.scale,t.la.y)):(e.style.left="0px",t.position=a.h(t.la.x-t.pb/t.scale,t.la.y)),k.free(a))),t.Ze=c,t.Jp.style.height=G,t.Vs=!0,s&&(t.Dl=!0),e=t.Ys,a=e.scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(i+1<N?a=(t.position.x-m)*M:m+1<C?a=e.scrollWidth-e.clientWidth:y>D+1&&(a=t.position.x*M)),t.Fl)switch(t.Ss){case"negative":a=-(e.scrollWidth-a-e.clientWidth);break;case"reverse":a=e.scrollWidth-a-e.clientWidth}return e.scrollLeft=a,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(S+1<T?e.scrollTop=(t.position.y-x)*M:x+1<F?e.scrollTop=e.scrollHeight-e.clientHeight:g>d+1&&(e.scrollTop=t.position.y*M)),f=t.va,c=t.ua,e.style.width=f+(t.Ze?t.pb:0)+"px",e.style.height=c+(t.ne?t.pb:0)+"px",n!==f||r!==c||t.animationManager.sc?(t.Tq(o,t.viewportBounds,M,s),!1):!0}l.add=function(t){var e=t.diagram;if(e!==this&&(e!==null&&E("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),e=this.wm(t.layerName),e===null&&(e=this.wm("")),e===null&&E('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var i=e.nj(99999999,t,t.diagram===this);0<=i&&this.bb(Te,"parts",e,null,t,null,i),e.isTemporary||this.Oa(),t.C(1),i=t.layerChanged,i!==null&&i(t,null,e)}},l.nj=function(t){this.partManager.nj(t);var e=this;Xs(t,function(i){Aw(e,i)}),(t instanceof Ct||t instanceof dt&&t.placeholder!==null)&&t.o(),t.data!==null&&Xs(t,function(i){fm(e.partManager,i)}),Pn(t)!==!0&&Fo(t)!==!0||this.vd.add(t),KM(t,!0,this),$M(t)?(t.actualBounds.u()&&this.M(Al(t,t.actualBounds)),this.Oa()):t.isVisible()&&t.actualBounds.u()&&this.M(Al(t,t.actualBounds)),this.Eb()},l.Mc=function(t){t.lk(),this.partManager.Mc(t);var e=this;t.data!==null&&Xs(t,function(i){cm(e.partManager,i,e)}),this.vd.remove(t),$M(t)?(t.actualBounds.u()&&this.M(Al(t,t.actualBounds)),this.Oa()):t.isVisible()&&t.actualBounds.u()&&this.M(Al(t,t.actualBounds)),this.Eb()},l.remove=function(t){Zy(this,t,!0)};function Zy(t,e,i){var n=e.layer;n!==null&&n.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.C(2),i&&e.sk(),i=n.Mc(-1,e,!1),0<=i&&t.bb(Ce,"parts",n,e,null,i,null),t=e.layerChanged,t!==null&&t(e,n,null))}l.eu=function(t,e){if(e===void 0&&(e=!1),jt(t))for(var i=t.length,n=0;n<i;n++){var r=t[n];e&&!r.canDelete()||this.remove(r)}else for(i=new W,i.addAll(t),t=i.iterator;t.next();)i=t.value,e&&!i.canDelete()||this.remove(i)},l.rk=function(t,e,i){return i===void 0&&(i=!1),this.partManager.rk(t,e,i)},O.prototype.moveParts=function(t,e,i,n){if(i===void 0&&(i=!1),n===void 0&&(n=Qy(this)),this.toolManager!==null){var r=new ct;if(t!==null)if(jt(t))for(var o=0;o<t.length;o++)Lo(this,r,t[o],i,n);else for(t=t.iterator;t.next();)Lo(this,r,t.value,i,n);else{for(t=this.parts;t.next();)Lo(this,r,t.value,i,n);for(t=this.nodes;t.next();)Lo(this,r,t.value,i,n);for(t=this.links;t.next();)Lo(this,r,t.value,i,n)}Jy(this,r,e,n,i)}};function Lo(t,e,i,n,r,o){if(!e.contains(i)&&(o===void 0&&(o=!1),!n||o||i.canMove()||i.canCopy()))if(r===void 0&&(r=Qy(t)),i instanceof Z){if(e.add(i,t.Bd(r,i,i.location)),i instanceof dt&&(i.placeholder!==null||r.dragsMembers))for(o=i.memberParts;o.next();)Lo(t,e,o.value,n,r,r.groupsAlwaysMove);for(o=i.linksConnected;o.next();){var s=o.value;if(!e.contains(s)){var u=s.fromNode,a=s.toNode;u!==null&&e.contains(u)&&a!==null&&e.contains(a)&&Lo(t,e,s,n,r)}}if(r.dragsTree)for(i=i.Uv();i.next();)Lo(t,e,i.value,n,r)}else if(i instanceof z)for(e.add(i,t.Bd(r,i)),i=i.labelNodes;i.next();)Lo(t,e,i.value,n,r);else i instanceof Ct||e.add(i,t.Bd(r,i,i.location))}function Jy(t,e,i,n,r){if(e!==null&&e.count!==0){var o=k.alloc(),s=k.alloc();s.assign(i),isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),(i=t.aq)||qc(t,e);for(var u=Dt(),a=Dt(),f=e.iterator,c=k.alloc();f.next();){var d=f.key,g=f.value;if(d.Oc()){var m=Dw(t,d,e);m!==null?u.push(new tM(d,g,m)):(!r||d.canMove())&&(m=g.point,o.assign(m),t.computeMove(d,o.add(s),n,c),d.location=c,g.shifted===void 0&&(g.shifted=new k),g.shifted.assign(c.ee(m)))}else f.key instanceof z&&a.push(f.ka)}for(k.free(c),r=u.length,f=0;f<r;f++)d=u[f],o.assign(d.info.point),d.Yv.shifted===void 0&&(d.Yv.shifted=new k),d.node.location=o.add(d.Yv.shifted);for(r=k.alloc(),f=k.alloc(),d=a.length,g=0;g<d;g++){var y=a[g];if(m=y.key,m instanceof z)if(m.suspendsRouting){m.sg=null,c=m.fromNode;var x=m.toNode;if(t.draggedLink!==null&&n.dragsLink)if(x=y.value.point,m.dragComputation===null)e.add(m,t.Bd(n,m,s)),Vo(m,s.x-x.x,s.y-x.y);else{y=k.allocAt(0,0),(c=m.i(0))&&c.u()&&y.assign(c);var M=c=k.alloc().assign(y).add(s);n.isGridSnapEnabled&&(n.isGridSnapRealtime||t.lastInput.up)&&(M=k.alloc(),qy(t,m,c,M,n)),c.assign(m.dragComputation(m,c,M)).ee(y),e.add(m,t.Bd(n,m,c)),Vo(m,c.x-x.x,c.y-x.y),k.free(y),k.free(c),M!==c&&k.free(M)}else c!==null&&(r.assign(c.location),M=e.H(c),M!==null&&r.ee(M.point)),x!==null&&(f.assign(x.location),M=e.H(x),M!==null&&f.ee(M.point)),c!==null&&x!==null?r.Na(f)?(c=y.value.point,x=o,x.assign(r),x.ee(c),e.add(m,t.Bd(n,m,r)),Vo(m,x.x,x.y)):(m.suspendsRouting=!1,m.Ua()):(y=y.value.point,c=c!==null?r:x!==null?f:s,e.add(m,t.Bd(n,m,c)),Vo(m,c.x-y.x,c.y-y.y))}else(m.fromNode===null||m.toNode===null)&&(c=y.value.point,e.add(m,t.Bd(n,m,s)),Vo(m,s.x-c.x,s.y-c.y))}k.free(o),k.free(s),k.free(r),k.free(f),Xt(u),Xt(a),i||(Ci(t),Ra(t,e))}}O.prototype.computeMove=function(t,e,i,n){if(n===void 0&&(n=new k),n.assign(e),t===null)return n;var r=e,o=i.isGridSnapEnabled;o&&(i.isGridSnapRealtime||this.lastInput.up)&&(r=k.alloc(),qy(this,t,e,r,i)),i=t.dragComputation!==null?t.dragComputation(t,e,r):r;var s=t.minLocation,u=s.x;isNaN(u)&&(u=o?Math.round(1e3*t.location.x)/1e3:t.location.x),s=s.y,isNaN(s)&&(s=o?Math.round(1e3*t.location.y)/1e3:t.location.y);var a=t.maxLocation,f=a.x;return isNaN(f)&&(f=o?Math.round(1e3*t.location.x)/1e3:t.location.x),a=a.y,isNaN(a)&&(a=o?Math.round(1e3*t.location.y)/1e3:t.location.y),n.h(Math.max(u,Math.min(i.x,f)),Math.max(s,Math.min(i.y,a))),r!==e&&k.free(r),n};function Qy(t){var e=t.toolManager.findTool("Dragging");return e!==null?e.dragOptions:t.il}function qy(t,e,i,n,r){if(r===void 0&&(r=Qy(t)),n.assign(i),e!==null){var o=t.grid;e=r.gridSnapCellSize,t=e.width,e=e.height;var s=r.gridSnapOrigin,u=s.x;if(s=s.y,r=r.gridSnapCellSpot,o!==null){var a=o.gridCellSize;isNaN(t)&&(t=a.width),isNaN(e)&&(e=a.height),o=o.gridOrigin,isNaN(u)&&(u=o.x),isNaN(s)&&(s=o.y)}o=k.allocAt(0,0),o.Qk(0,0,t,e,r),j.Cq(i.x,i.y,u+o.x,s+o.y,t,e,n),k.free(o)}}function qc(t,e){if(e!==null)for(t.aq=!0,t=e.iterator;t.next();)e=t.key,e instanceof z&&(e.suspendsRouting=!0)}function Ra(t,e){if(e!==null){for(e=e.iterator;e.next();){var i=e.key;i instanceof z&&(i.suspendsRouting=!1,J0(i)&&i.Ua())}t.aq=!1}}function Dw(t,e,i){return e=e.containingGroup,e!==null&&(t=Dw(t,e,i),t!==null||(t=i.H(e),t!==null))?t:null}l=O.prototype,l.Bd=function(t,e,i){if(i===void 0)return new cs(Po);var n=t.isGridSnapEnabled;return t.groupsSnapMembers||e.containingGroup===null||(n=!1),n?new cs(new k(Math.round(1e3*i.x)/1e3,Math.round(1e3*i.y)/1e3)):new cs(i.copy())};function by(t,e,i){if(e.diagram!==null&&e.diagram!==t&&E("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),i===null?e.diagram!==null&&E("Cannot add an existing Layer to this Diagram again: "+e):(i.diagram!==t&&E("Existing Layer must be in this Diagram: "+i+" not in "+i.diagram),e===i&&E("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,t=t.La,i=t.count;for(var n=0;n<i;n++)t.J(n).name===e&&E("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}l.rm=function(t){by(this,t,null),t.ce(this);var e=this.La,i=e.count-1;if(!t.isTemporary)for(;0<=i&&e.J(i).isTemporary;)i--;e.wb(i+1,t),this.bc!==null&&this.bb(Te,"layers",this,null,t,null,i+1),this.M(),this.Oa()},l.Vx=function(t,e){by(this,t,e),t.ce(this);var i=this.La,n=i.indexOf(t);0<=n&&(i.remove(t),this.bc!==null&&this.bb(Ce,"layers",this,t,null,n,null));var r=i.count,o;for(o=0;o<r;o++)if(i.J(o)===e){i.wb(o,t);break}this.bc!==null&&this.bb(Te,"layers",this,null,t,null,o),this.M(),0>n&&this.Oa()},l.oz=function(t,e){by(this,t,e),t.ce(this);var i=this.La,n=i.indexOf(t);0<=n&&(i.remove(t),this.bc!==null&&this.bb(Ce,"layers",this,t,null,n,null));var r=i.count,o;for(o=0;o<r;o++)if(i.J(o)===e){i.wb(o+1,t);break}this.bc!==null&&this.bb(Te,"layers",this,null,t,null,o+1),this.M(),0>n&&this.Oa()},l.RA=function(t){if(t.diagram!==this&&E("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),t.name!==""){var e=this.La,i=e.indexOf(t);if(e.remove(t)){for(e=t.Da.copy().iterator;e.next();){var n=e.value,r=n.layerName;r!==t.name?n.layerName=r:n.layerName=""}this.bc!==null&&this.bb(Ce,"layers",this,t,null,i,null),this.M(),this.Oa()}}},l.wm=function(t){for(var e=this.layers;e.next();){var i=e.value;if(i.name===t)return i}return null},l.Yx=function(t){this.ue===null&&(this.ue=new J),this.ue.add(t),this.model.Gh(t)},l.TA=function(t){this.ue!==null&&(this.ue.remove(t),this.ue.count===0&&(this.ue=null)),this.model.Pk(t)},l.Gh=function(t){this.Qf===null&&(this.Qf=new J),this.Qf.add(t)},l.Pk=function(t){this.Qf!==null&&(this.Qf.remove(t),this.Qf.count===0&&(this.Qf=null))},l.xt=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.Zv(t),t.change!==Qn&&(this.isModified=!0),this.Qf!==null)for(var e=this.Qf,i=e.length,n=0;n<i;n++)e.J(n)(t)},l.bb=function(t,e,i,n,r,o,s){o===void 0&&(o=null),s===void 0&&(s=null);var u=new ae;u.diagram=this,u.change=t,u.propertyName=e,u.object=i,u.oldValue=n,u.oldParam=o,u.newValue=r,u.newParam=s,this.xt(u)},l.g=function(t,e,i,n,r){this.bb(le,t,this,e,i,n,r)},O.prototype.changeState=function(t,e){if(t!==null&&t.diagram===this){var i=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var n=t.change;if(n===le){var r=t.object;if(bt(r,t.propertyName,t.H(e)),r instanceof ot){var o=r.part;o!==null&&o.Mb()}this.isModified=!0}else if(n===Te){var s=t.object,u=t.newParam,a=t.newValue;if(s instanceof V){if(typeof u=="number"&&a instanceof ot){e?s.Mc(u):s.wb(u,a);var f=s.part;f!==null&&f.Mb()}else if(typeof u=="number"&&a instanceof ke)if(e)a.isRow?s.uw(u):s.sw(u);else{var c=a.isRow?s.getRowDefinition(a.index):s.getColumnDefinition(a.index);c.Bt(a)}}else if(s instanceof si){var d=t.oldParam===!0;typeof u=="number"&&a instanceof rt&&(e?(a.isSelected=!1,a.isHighlighted=!1,a.Mb(),s.Mc(d?u:-1,a,d)):s.nj(u,a,d))}else s instanceof O?typeof u=="number"&&a instanceof si&&(e?this.La.cb(u):(a.ce(this),this.La.wb(u,a))):E("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(n===Ce){var g=t.object,m=t.oldParam,y=t.oldValue;if(g instanceof V)typeof m=="number"&&y instanceof ot?e?g.wb(m,y):g.Mc(m):typeof m=="number"&&y instanceof ke&&(e?(c=y.isRow?g.getRowDefinition(y.index):g.getColumnDefinition(y.index),c.Bt(y)):y.isRow?g.uw(m):g.sw(m));else if(g instanceof si){var x=t.newParam===!0;typeof m=="number"&&y instanceof rt&&(e?0>g.Da.indexOf(y)&&g.nj(m,y,x):(y.isSelected=!1,y.isHighlighted=!1,y.Mb(),g.Mc(x?m:-1,y,x)))}else g instanceof O?typeof m=="number"&&y instanceof si&&(e?(y.ce(this),this.La.wb(m,y)):this.La.cb(m)):E("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else n!==Qn&&E("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=i}}},O.prototype.xa=function(t){return this.undoManager.xa(t)},O.prototype.Wa=function(t){return this.undoManager.Wa(t)},O.prototype.Kf=function(){return this.undoManager.Kf()},O.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.xa(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.Wa(e):this.undoManager.Kf(),this.skipsUndoManager=i}},O.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},O.prototype.ir=function(){this.partManager.ir()};function Ew(t,e,i){var n=t.animationManager;if(t.Sb||t.kc)t.ya=i,n.ff&&n.Od.add(n.B,"scale",e,t.ya);else if(t.ta===null)t.ya=i;else{t.Sb=!0;var r=t.viewportBounds.copy(),o=t.va,s=t.ua;r.width=t.va/e,r.height=t.ua/e;var u=t.zoomPoint.x,a=t.zoomPoint.y,f=t.contentAlignment;isNaN(u)&&(f.Pc()?f.Gf(Du)?u=0:f.Gf(Eu)&&(u=o-1):u=f.kb()?f.x*(o-1):o/2),isNaN(a)&&(f.Pc()?f.Gf(ju)?a=0:f.Gf(Ou)&&(a=s-1):a=f.kb()?f.y*(s-1):s/2),t.scaleComputation===null||t.animationManager.isAnimating||(i=t.scaleComputation(t,i)),i<t.minScale&&(i=t.minScale),i>t.maxScale&&(i=t.maxScale),o=k.allocAt(t.la.x+u/e-u/i,t.la.y+a/e-a/i),t.position=o,k.free(o),t.ya=i,t.Tq(r,t.viewportBounds,e,!1),t.Sb=!1,bn(t,!1),n.ff&&n.Od.add(n.B,"scale",e,t.ya),t.M(),hs(t)}}O.prototype.Tq=function(t,e,i,n){if(!t.w(e)){n===void 0&&(n=!1),n||hs(this),as(this);var r=this.layout;r===null||!r.isViewportSized||this.autoScale!==Xi||n||t.width===e.width&&t.height===e.height||r.C(),r=this.currentTool,this.ag===!0&&r instanceof he&&(this.lastInput.documentPoint=this.lu(this.lastInput.viewPoint),Yx(r,this)),this.Sb||this.Gy(t,e),jo(this),this.Jc.scale=i,this.Jc.position.x=t.x,this.Jc.position.y=t.y,this.Jc.bounds.assign(t),this.Jc.Ev.width=Math.round(t.width*i),this.Jc.Ev.height=Math.round(t.height*i),this.Jc.iw.width=this.va,this.Jc.iw.height=this.ua,this.Jc.fw=n,this.R("ViewportBoundsChanged",this.Jc,t),this.isVirtualized&&this.links.each(function(o){o.isAvoiding&&o.actualBounds.Nc(e)&&o.Ua()})}};function jo(t,e){e===void 0&&(e=null);var i=t.Jb;if(i!==null&&i.visible){for(var n=pt.alloc(),r=1,o=1,s=i.W.j,u=s.length,a=0;a<u;a++){var f=s[a],c=Math.abs(f.interval);2>c||(P0(f.figure)?o=o*c/j.vy(o,c):r=r*c/j.vy(r,c))}if(s=i.gridCellSize,n.h(o*s.width,r*s.height),e!==null)r=e.width,o=e.height,t=e.x,s=e.y;else{if(e=I.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.u()){I.free(e);return}r=e.width,o=e.height,t=e.x,s=e.y,I.free(e)}i.width=r+2*n.width,i.height=o+2*n.height,e=k.alloc(),j.Cq(t,s,0,0,n.width,n.height,e),e.offset(-n.width,-n.height),pt.free(n),i.part.location=e,k.free(e)}}O.prototype.clearSelection=function(t){t===void 0&&(t=!1);var e=this.selection;if(e.count!==0){t||this.R("ChangingSelection",e);for(var i=e.ma(),n=i.length,r=0;r<n;r++)i[r].isSelected=!1;e.ea(),e.clear(),e.freeze(),t||this.R("ChangedSelection",e)}},O.prototype.select=function(t){t!==null&&t.layer.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.R("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.R("ChangedSelection",this.selection))},O.prototype.XA=function(t){if(this.R("ChangingSelection",this.selection),this.clearSelection(!0),jt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];n instanceof rt||E("Diagram.selectCollection given something that is not a Part: "+n),n.isSelected=!0}else for(t=t.iterator;t.next();)e=t.value,e instanceof rt||E("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.R("ChangedSelection",this.selection)},O.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.ma(),i=e.length,n=0;n<i;n++)e[n].isHighlighted=!1;t.ea(),t.clear(),t.freeze()}},l=O.prototype,l.uA=function(t){t!==null&&t.layer.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},l.vA=function(t){t=new W().addAll(t);for(var e=this.highlighteds.copy().Yq(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)e=t.value,e instanceof rt||E("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},l.scroll=function(t,e,i){i===void 0&&(i=1);var n=e==="up"||e==="down",r=0;if(t==="pixel")r=i;else if(t==="line")r=i*(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if(t==="page")t=n?this.viewportBounds.height:this.viewportBounds.width,t*=this.scale,t!==0&&(r=i*Math.max(t-(n?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if(t==="document"){r=this.documentBounds,i=this.viewportBounds,n=k.alloc(),e==="up"?this.position=n.h(i.x,r.y):e==="left"?this.position=n.h(r.x,i.y):e==="down"?this.position=n.h(i.x,r.bottom-i.height):e==="right"&&(this.position=n.h(r.right-i.width,i.y)),k.free(n);return}E("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}r/=this.scale,i=this.position.copy(),e==="up"?i.y=this.position.y-r:e==="down"?i.y=this.position.y+r:e==="left"?i.x=this.position.x-r:e==="right"?i.x=this.position.x+r:E("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=i},l.Aw=function(t){var e=this.viewportBounds;e.Ee(t)||(t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t)},l.yt=function(t){var e=this.viewportBounds;t=t.center,t.x-=e.width/2,t.y-=e.height/2,this.position=t},l.gr=function(t){var e=this.qb;e.reset(),this.ya!==1&&e.scale(this.ya);var i=this.la;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),t.copy().transform(this.qb)},l.fB=function(t){var e=this.qb,i=t.x,n=t.y,r=i+t.width,o=n+t.height,s=e.m11,u=e.m12,a=e.m21,f=e.m22,c=e.dx,d=e.dy,g=i*s+n*a+c;e=i*u+n*f+d;var m=r*s+n*a+c;return t=r*u+n*f+d,n=i*s+o*a+c,i=i*u+o*f+d,s=r*s+o*a+c,r=r*u+o*f+d,o=Math.min(g,m),g=Math.max(g,m),m=Math.min(e,t),e=Math.max(e,t),o=Math.min(o,n),g=Math.max(g,n),m=Math.min(m,i),e=Math.max(e,i),o=Math.min(o,s),g=Math.max(g,s),m=Math.min(m,r),e=Math.max(e,r),new I(o,m,g-o,e-m)},l.lu=function(t){var e=this.qb;e.reset(),this.ya!==1&&e.scale(this.ya);var i=this.la;return(i.x!==0||i.y!==0)&&isFinite(i.x)&&isFinite(i.y)&&e.translate(-i.x,-i.y),gi(t.copy(),this.qb)};function Ow(t){var e=t.isModified;t.xv!==e&&(t.xv=e,t.R("Modified"))}function lT(t){return t=tp.get(t),t!==null?new t:new zt}O.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var i=t.change,n=t.propertyName;if(i===Qn&&n[0]==="S")if(n==="StartingFirstTransaction"){var r=this;t=this.toolManager,t.mouseDownTools.each(function(a){a.diagram=r}),t.mouseMoveTools.each(function(a){a.diagram=r}),t.mouseUpTools.each(function(a){a.diagram=r}),this.kc||this.oe||(this.Fj=!0,this.Ij&&(this.Ce=!0))}else n==="StartingUndo"||n==="StartingRedo"?(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Sc(),this.R("ChangingSelection",this.selection)):n==="StartedTransaction"&&(t=this.animationManager,t.defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Sc());else if(this.Z){this.Z=!1;try{if(t.modelChange===""&&i===Qn){(n==="FinishedUndo"||n==="FinishedRedo")&&(this.R("ChangedSelection",this.selection),Ci(this));var o=this.animationManager;n==="RolledBackTransaction"&&o.Sc(),this.Fj=!0,this.jd(),this.undoManager.transactionLevel!==0&&this.undoManager.transactionLevel!==1||zy(o),n==="CommittedTransaction"&&this.undoManager.isJustDiscarded&&(this.Ud=Math.min(this.Ud,this.undoManager.historyIndex-1)),n!=="CommittedTransaction"&&n!=="RolledBackTransaction"||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var s=t.isTransactionFinished;if(s&&(Ow(this),this.Wt.clear(),QN(this.animationManager)),!this.Bs&&s&&this.lastInput.targetDiagram){this.Bs=!0;var u=this;H(function(){u.currentTool.standardMouseOver(),u.Bs=!1},10)}}}finally{this.Z=!0}}}};function Aw(t,e){e=e.W.j;for(var i=e.length,n=0;n<i;n++)t0(t,e[n])}function t0(t,e){if(e instanceof nr){var i=e.element;if(i!==null&&i instanceof HTMLImageElement){var n=e.Zg;if(n!==null&&(n.tl instanceof Event&&e.Dc!==null&&e.Dc(e,n.tl),n.ls===!0&&(e.sf!==null&&e.sf(e,n.mv),e.diagram!==null&&e.diagram.Ls.add(e))),i=i.getAttribute("src"),n=t.Oi.H(i),n===null)n=[],n.push(e),t.Oi.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}}function e0(t,e){if(e instanceof nr){var i=e.element;if(i!==null&&i instanceof HTMLImageElement){i=i.getAttribute("src");var n=t.Oi.H(i);if(n!==null){for(var r=0;r<n.length;r++)if(n[r]===e){n.splice(r,1),n.length===0&&(t.Oi.remove(i),Op(i));break}}}}}O.prototype.Kd=function(){this.partManager.Kd()},O.prototype.hk=function(t,e){this.Wc.hk(t,e)},O.prototype.jk=function(t,e){this.Wc.jk(t,e)},O.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},O.prototype.Db=function(t){return this.partManager.Db(t)},O.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},l=O.prototype,l.zc=function(t){return this.partManager.zc(t)},l.fj=function(t){return this.partManager.fj(t)},l.yc=function(t){return this.partManager.yc(t)},l.Ht=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.Ht.apply(this.partManager,e instanceof Array?e:w(v(e)))},l.Gt=function(t){for(var e=[],i=0;i<arguments.length;++i)e[i]=arguments[i];return this.partManager.Gt.apply(this.partManager,e instanceof Array?e:w(v(e)))};function i0(t,e){t.ti=!1;var i=t.On;i.w(e)||(e=e.G(),t.On=e,bn(t,!1),t.R("DocumentBoundsChanged",null,i.copy()),hs(t))}l.Ta=function(){this.ti&&i0(this,this.computeBounds())},l.dA=function(){for(var t=new W,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&t.add(i)}for(e=this.links;e.next();)i=e.value,i.isTopLevel&&t.add(i);return t.iterator},l.cA=function(){return this.Ch.iterator},l.EA=function(t){Ci(this),t&&bc(this,!0),this.Fj=!0,us(this)};function bc(t,e){for(var i=t.Ch.iterator;i.next();)Iw(t,i.value,e);t.layout!==null&&(e?t.layout.isValidLayout=!1:t.layout.C())}function Iw(t,e,i){if(e!==null){for(var n=e.Rl.iterator;n.next();)Iw(t,n.value,i);e.layout!==null&&(i?e.layout.isValidLayout=!1:e.layout.C())}}function Bw(t,e){if(t.Og&&!t.Nr){var i=t.Z;t.Z=!0;var n=t.undoManager.transactionLevel,r=t.layout,o=t.animationManager;try{n===0&&(t.undoManager.isInternalTransaction=!0,t.xa("Layout")),1>=n&&!o.isAnimating&&!o.sc&&(e||ls(o,"Layout")),t.Og=!1;for(var s=t.Ch.iterator;s.next();)Rw(t,s.value,e,n);r.isValidLayout||(!e||r.isRealtime||r.isRealtime===null||n===0?(r.doLayout(t),Ci(t),r.isValidLayout=!0):t.Og=!0)}finally{e=t.undoManager.isInternalTransaction,n===0&&(t.Wa("Layout"),t.undoManager.isInternalTransaction=!1),!e||n!==0&&n!==1||zy(o),t.Z=i}}}function Rw(t,e,i,n){if(e!==null){for(var r=e.Rl.iterator;r.next();)Rw(t,r.value,i,n);r=e.layout,r===null||r.isValidLayout||(!i||r.isRealtime||n===0?(e.Qh=!e.location.u(),r.doLayout(e),e.C(32),Ky(t,e),r.isValidLayout=!0):t.Og=!0)}}l.jA=function(){for(var t=new J,e=this.nodes;e.next();){var i=e.value;i.isTopLevel&&i.ij()===null&&t.add(i)}return t.iterator};function Fw(t){function e(r){var o=r.toLowerCase(),s=new J;i.add(r,s),i.add(o,s),n.add(r,r),n.add(o,r)}var i=new ct,n=new ct;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Qr=i,t.Pr=n}function Vw(t,e){var i=t.Pr.H(e);return i!==null?i:t.Pr.H(e.toLowerCase())}function n0(t,e){var i=t.Qr.H(e);if(i!==null||(i=t.Qr.H(e.toLowerCase()),i!==null))return i;E("Unknown DiagramEvent name: "+e)}l.ik=function(t,e){t=n0(this,t),t!==null&&t.add(e)},l.Jm=function(t,e){t=n0(this,t),t!==null&&t.remove(e)},l.R=function(t,e,i){var n=n0(this,t),r=new Sl;if(r.diagram=this,t=Vw(this,t),t!==null&&(r.name=t),e!==void 0&&(r.subject=e),i!==void 0&&(r.parameter=i),e=n.length,e===1)n.J(0)(r);else if(e!==0)for(n=n.ma(),i=0;i<e;i++)(0,n[i])(r)};function zw(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e===t.toolManager.findTool("Dragging")?!t.aq||e.isComplexRoutingRealtime:!0}l.Ak=function(t,e){return e===void 0&&(e=null),r0(this,!1,null,e).Ak(t.x,t.y,t.width,t.height)},O.prototype.computeOccupiedArea=function(){return this.isVirtualized?this.viewportBounds.copy():this.ti?Nw(this):this.documentBounds.copy()};function r0(t,e,i,n){if(t.Hc===null&&(t.Hc=new ff),t.Hc.Qt||t.Hc.group!==i||t.Hc.Xy!==n){if(i===null){e=t.computeOccupiedArea(),e.Kc(100,100),t.Hc.initialize(e),e=I.alloc();for(var r=t.nodes;r.next();){var o=r.value,s=o.layer;s!==null&&s.visible&&!s.isTemporary&&o0(t,o,n,e)}I.free(e)}else{for(0<i.memberParts.count&&(e=t.computePartsBounds(i.memberParts,!1),e.Kc(20,20),t.Hc.initialize(e)),e=I.alloc(),r=i.memberParts;r.next();)o=r.value,o instanceof Z&&o0(t,o,n,e);I.free(e)}t.Hc.group=i,t.Hc.Xy=n,t.Hc.Qt=!1}else e&&pS(t.Hc);return t.Hc}function o0(t,e,i,n){if(e!==i){if(e.isVisible()&&e.avoidable&&!e.isLinkLabel){e=e.getAvoidableRect(n),t=t.Hc;var r=e.x,o=e.y;if(gh(t,r,o))for(i=(o-t.Ad)/t.gc|0,n=Math.min((r+e.width-t.zd)/t.fc|0,t.Yi),e=Math.min((o+e.height-t.Ad)/t.gc|0,t.Zi),r=(r-t.zd)/t.fc|0;r<=n;r++)if(o=t.Rb[r],o.fill)o.fill(Uo,i,e+1);else for(var s=i;s<=e;s++)o[s]=Uo}else if(e instanceof dt)for(e=e.memberParts;e.next();)r=e.value,r instanceof Z&&o0(t,r,i,n)}}function s0(t,e){t.Hc!==null&&!t.Hc.Qt&&(e===void 0&&(e=null),e===null||e.avoidable&&!e.isLinkLabel)&&(t.Hc.Qt=!0)}O.prototype.Dt=function(t){this.on.assign(t),this.computeAutoScrollPosition(this.on).Na(this.position)?this.Lf():Uw(this)};function Uw(t){t.zj===-1&&(t.zj=H(function(){if(t.zj!==-1&&(t.Lf(),t.lastInput.event!==null)){var e=t.computeAutoScrollPosition(t.on);e.Na(t.position)||(t.position=e,t.lastInput.documentPoint=t.lu(t.on),t.doMouseMove(),t.ti=!0,i0(t,t.documentBounds.copy().Tc(t.computeBounds())),t.Ec=!0,t.jd(),Uw(t))}},t.nn))}O.prototype.Lf=function(){this.zj!==-1&&(Y.clearTimeout(this.zj),this.zj=-1)},O.prototype.computeAutoScrollPosition=function(t){var e=this.position,i=this.pn;if(0>=i.top&&0>=i.left&&0>=i.right&&0>=i.bottom)return e;var n=this.viewportBounds,r=this.scale;n=I.allocAt(0,0,n.width*r,n.height*r);var o=k.allocAt(0,0);if(t.x>=n.x&&t.x<n.x+i.left&&this.allowHorizontalScroll){var s=Math.max(this.scrollHorizontalLineChange,1);s|=0,o.x-=s,t.x<n.x+i.left/2&&(o.x-=s),t.x<n.x+i.left/4&&(o.x-=4*s)}else t.x<=n.x+n.width&&t.x>n.x+n.width-i.right&&this.allowHorizontalScroll&&(s=Math.max(this.scrollHorizontalLineChange,1),s|=0,o.x+=s,t.x>n.x+n.width-i.right/2&&(o.x+=s),t.x>n.x+n.width-i.right/4&&(o.x+=4*s));return t.y>=n.y&&t.y<n.y+i.top&&this.allowVerticalScroll?(s=Math.max(this.scrollVerticalLineChange,1),s|=0,o.y-=s,t.y<n.y+i.top/2&&(o.y-=s),t.y<n.y+i.top/4&&(o.y-=4*s)):t.y<=n.y+n.height&&t.y>n.y+n.height-i.bottom&&this.allowVerticalScroll&&(s=Math.max(this.scrollVerticalLineChange,1),s|=0,o.y+=s,t.y>n.y+n.height-i.bottom/2&&(o.y+=s),t.y>n.y+n.height-i.bottom/4&&(o.y+=4*s)),o.Na(Po)||(e=new k(e.x+o.x/r,e.y+o.y/r)),I.free(n),k.free(o),e},l=O.prototype,l.Yt=function(){return null},l.gw=function(){return null},l.rz=function(t,e){this.Lx.add(t,e)};function Yw(t,e,i){function n(){var c=+new Date;for(o=!0,s.reset();s.next();)if(!s.value[0].Nl){o=!1;break}o||c-f>a?e(i,r,u):Y.requestAnimationFrame(n)}for(var r=i.callback,o=!0,s=t.Oi.iterator;s.next();)if(!s.value[0].Nl){o=!1;break}if(typeof r!="function"||o)return e(i,r,t);var u=t,a=i.callbackTimeout||300,f=+new Date;return Y.requestAnimationFrame(function(){n()}),null}l.GA=function(t){return Vn?(t===void 0&&(t=new Qi),t.returnType="Image",this.Jy(t)):null},l.Jy=function(t){return t===void 0&&(t=new Qi),Yw(this,this.HA,t)},l.HA=function(t,e,i){var n=Gw(i,t,"canvas",null);if(n===null)return null;i=n.Y.canvas;var r=null;if(i!==null)switch(r=t.returnType,r===void 0?r="string":r=r.toLowerCase(),r){case qu+"data":r=n.getImageData(0,0,i.width,i.height);break;case qu:n=(t.document||document).createElement("img"),n.src=i.toDataURL(t.type,t.details),r=n;break;case"blob":return typeof e!="function"&&E('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),typeof i.toBlob=="function"?(i.toBlob(e,t.type,t.details),"toBlob"):typeof i.msToBlob=="function"?(e(i.msToBlob()),"msToBlob"):(e(null),null);default:r=i.toDataURL(t.type,t.details)}return typeof e=="function"?(e(r),null):r};function Gw(t,e,i,n){if(t.animationManager.Sc(),t.jd(),t.ta===null)return null;typeof e!="object"&&E("properties argument must be an Object.");var r=e.size||null,o=e.scale||null;e.scale!==void 0&&isNaN(e.scale)&&(o="NaN");var s=e.maxSize;e.maxSize===void 0&&(s=i==="SVG"?new pt(Infinity,Infinity):new pt(2e3,2e3));var u=e.position||null,a=e.parts||null,f=e.padding===void 0?1:e.padding,c=e.background||null,d=e.omitTemporary;d===void 0&&(d=!0);var g=e.document||document,m=e.elementFinished||null,y=e.showTemporary;y===void 0&&(y=!d),e=e.showGrid,e===void 0&&(e=y),r!==null&&isNaN(r.width)&&isNaN(r.height)&&(r=null),typeof f=="number"?f=new Rt(f):f instanceof Rt||E("MakeImage padding must be a Margin or a number."),f.left=Math.max(f.left,0),f.right=Math.max(f.right,0),f.top=Math.max(f.top,0),f.bottom=Math.max(f.bottom,0),t.Hb.uc(!0),d=new Nn(null,g);var x=d.context;if(!(r||o||a||u))return d.width=t.va+Math.ceil(f.left+f.right),d.height=t.ua+Math.ceil(f.top+f.bottom),i==="SVG"?n===null?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=g,n.zq=m,Qc(t,n.context,f,new pt(d.width,d.height),t.ya,t.la,a,c,y,e),n.context):(t.pl=!1,Qc(t,x,f,new pt(d.width,d.height),t.ya,t.la,a,c,y,e),t.pl=!0,d.context);var M=t.Nn,S=t.documentBounds.copy();if(S.Jw(t.ib),y)for(var N=t.La.j,T=N.length,C=0;C<T;C++){var D=N[C];if(D.visible&&D.isTemporary){D=D.Da.j;for(var F=D.length,$=0;$<F;$++){var G=D[$];G.isInDocumentBounds&&G.isVisible()&&(G=G.actualBounds,G.u()&&S.Tc(G))}}}if(N=new k(S.x,S.y),a!==null){for(T=!0,C=a.iterator,C.reset();C.next();)if(D=C.value,D instanceof rt&&(F=D.layer,(F===null||F.visible)&&(F===null||y||!F.isTemporary)&&D.isVisible()&&(D=D.actualBounds,D.u())))if(T){T=!1;var nt=D.copy()}else nt.Tc(D);T&&(nt=new I(0,0,0,0)),S.width=nt.width,S.height=nt.height,N.x=nt.x,N.y=nt.y}return u!==null&&u.u()&&(N=u,o||(o=M)),nt=u=0,f!==null&&(u=f.left+f.right,nt=f.top+f.bottom),T=C=0,r!==null&&(C=r.width,T=r.height,isFinite(C)&&(C=Math.max(0,C-u)),isFinite(T)&&(T=Math.max(0,T-nt))),r!==null&&o!==null?(o==="NaN"&&(o=M),r.u()?(r=C,S=T):isNaN(T)?(r=C,S=S.height*o):(r=S.width*o,S=T)):r!==null?r.u()?(o=Math.min(C/S.width,T/S.height),r=C,S=T):isNaN(T)?(o=C/S.width,r=C,S=S.height*o):(o=T/S.height,r=S.width*o,S=T):o!==null?o==="NaN"&&s.u()?(o=Math.min((s.width-u)/S.width,(s.height-nt)/S.height),o>M?(o=M,r=S.width,S=S.height):(r=s.width,S=s.height)):(r=S.width*o,S=S.height*o):(o=M,r=S.width,S=S.height),f!==null?(r+=u,S+=nt):f=new Rt(0),s!==null&&(M=s.width,s=s.height,isNaN(M)&&(M=2e3),isNaN(s)&&(s=2e3),isFinite(M)&&(r=Math.min(r,M)),isFinite(s)&&(S=Math.min(S,s))),d.width=Math.ceil(r),d.height=Math.ceil(S),i==="SVG"?n===null?null:(n.resize(d.width,d.height,d.width,d.height),n.ownerDocument=g,n.zq=m,Qc(t,n.context,f,new pt(Math.ceil(r),Math.ceil(S)),o,N,a,c,y,e),n.context):(t.pl=!1,Qc(t,x,f,new pt(Math.ceil(r),Math.ceil(S)),o,N,a,c,y,e),t.pl=!0,d.context)}X.Object.defineProperties(O.prototype,{div:{get:function(){return this.Ea},set:function(t){if(this.Ea!==t){os=[];var e=this.Ea;e!==null?(e.B=void 0,e.goDiagram=void 0,e.innerHTML="",this.ta!==null&&(e=this.ta.Ga,this.xj?(this.removeEventListener(e,"pointermove",this.Lk,!1),this.removeEventListener(e,"pointerdown",this.Kk,!1),this.removeEventListener(e,"pointerup",this.Nk,!1),this.removeEventListener(e,"pointerout",this.Mk,!1)):(this.removeEventListener(e,"touchstart",this.Ow,!1),this.removeEventListener(e,"touchmove",this.Nw,!1),this.removeEventListener(e,"touchend",this.Mw,!1)),this.ta.ly()),this.Xl&&(this.Xl.disconnect(),this.Xl=null),e=this.toolManager,e!==null&&(e.mouseDownTools.each(function(i){i.cancelWaitAfter()}),e.mouseMoveTools.each(function(i){i.cancelWaitAfter()}),e.mouseUpTools.each(function(i){i.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Hb=this.ta=null,this.removeEventListener(Y,"resize",this.Ww,!1),this.xj||(this.removeEventListener(Y,"mousemove",this.Ek,!0),this.removeEventListener(Y,"mousedown",this.Dk,!0),this.removeEventListener(Y,"mouseup",this.Gk,!0),this.removeEventListener(Y,"mouseout",this.Fk,!0)),this.removeEventListener(Y,"wheel",this.Hk,!0),Zu===this&&(Zu=null)):this.oe=!1,this.Ea=null,t!==null&&((e=t.B)&&(e.div=null),f0(this,t),this.Le())}}},$x:{get:function(){return this.Xo}},oj:{get:function(){return this.oe}},draggedLink:{get:function(){return this.Sr},set:function(t){this.Sr!==t&&(this.Sr=t,t!==null&&(this.Fs=t.fromPort,this.Gs=t.toPort))}},My:{get:function(){return this.Fs},set:function(t){this.Fs=t}},Ny:{get:function(){return this.Gs},set:function(t){this.Gs=t}},animationManager:{get:function(){return this.Wc}},undoManager:{get:function(){return this.bc.undoManager}},skipsUndoManager:{get:function(){return this.wg},set:function(t){this.wg=t,this.bc.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Nr},set:function(t){this.Nr=t}},opacity:{get:function(){return this.hb},set:function(t){var e=this.hb;e!==t&&((0>t||1<t)&&lt(t,"0 <= value <= 1",O,"opacity"),this.hb=t,this.g("opacity",e,t),this.M())}},validCycle:{get:function(){return this.rt},set:function(t){var e=this.rt;e!==t&&(this.rt=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.La.iterator}},isModelReadOnly:{get:function(){var t=this.bc;return t===null?!1:t.isReadOnly},set:function(t){var e=this.bc;e!==null&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.bg},set:function(t){var e=this.bg;e!==t&&(this.bg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.nd},set:function(t){var e=this.nd;e!==t&&(this.nd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.nr},set:function(t){var e=this.nr;e!==t&&(this.nr=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Zh},set:function(t){var e=this.Zh;e!==t&&(this.Zh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.pr},set:function(t){var e=this.pr;e!==t&&(this.pr=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.qr},set:function(t){var e=this.qr;e!==t&&(this.qr=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ji},set:function(t){var e=this.ji;e!==t&&(this.ji=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.sr},set:function(t){var e=this.sr;e!==t&&(this.sr=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.di},set:function(t){var e=this.di;e!==t&&(this.di=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.ci},set:function(t){var e=this.ci;e!==t&&(this.ci=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.ei},set:function(t){var e=this.ei;e!==t&&(this.ei=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.fi},set:function(t){var e=this.fi;e!==t&&(this.fi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.gi},set:function(t){var e=this.gi;e!==t&&(this.gi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.hi},set:function(t){var e=this.hi;e!==t&&(this.hi=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.tr},set:function(t){var e=this.tr;e!==t&&(this.tr=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.vr},set:function(t){var e=this.vr;e!==t&&(this.vr=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.vl},set:function(t){var e=this.vl;e!==t&&(this.vl=t,hs(this),this.M(),this.g("hasVerticalScrollbar",e,t),bn(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.ul},set:function(t){var e=this.ul;e!==t&&(this.ul=t,hs(this),this.M(),this.g("hasHorizontalScrollbar",e,t),bn(this,!1))}},allowHorizontalScroll:{get:function(){return this.rr},set:function(t){var e=this.rr;e!==t&&(this.rr=t,this.g("allowHorizontalScroll",e,t),bn(this,!1))}},allowVerticalScroll:{get:function(){return this.ur},set:function(t){var e=this.ur;e!==t&&(this.ur=t,this.g("allowVerticalScroll",e,t),bn(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Ws},set:function(t){var e=this.Ws;e!==t&&(0>t&&lt(t,">= 0",O,"scrollHorizontalLineChange"),this.Ws=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.$s},set:function(t){var e=this.$s;e!==t&&(0>t&&lt(t,">= 0",O,"scrollVerticalLineChange"),this.$s=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.hh},set:function(t){this.hh=t}},previousInput:{get:function(){return this.pd},set:function(t){this.pd=t}},firstInput:{get:function(){return this.Yf},set:function(t){this.Yf=t}},currentCursor:{get:function(){return this.Hr},set:function(t){if(t===""&&(t=this.Mn),this.Hr!==t){var e=this.ta,i=this.Ea;if(e!==null){this.Hr=t;var n=e.style.cursor;e.style.cursor=t,i.style.cursor=t,e.style.cursor===n&&(e.style.cursor="-webkit-"+t,i.style.cursor="-webkit-"+t,e.style.cursor===n&&(e.style.cursor="-moz-"+t,i.style.cursor="-moz-"+t,e.style.cursor===n&&(e.style.cursor=t,i.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Mn},set:function(t){t===""&&(t="auto");var e=this.Mn;e!==t&&(this.Mn=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.Rf},set:function(t){var e=this.Rf;e!==t&&(this.Rf=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Wf},set:function(t){var e=this.Wf;e!==t&&(this.Wf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Sf},set:function(t){var e=this.Sf;e!==t&&(this.Sf=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.ng},set:function(t){var e=this.ng;e!==t&&(this.ng=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.lg},set:function(t){var e=this.lg;e!==t&&(this.lg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.kg},set:function(t){var e=this.kg;e!==t&&(this.kg=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.As},set:function(t){var e=this.As;e!==t&&(this.As=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.ig},set:function(t){var e=this.ig;e!==t&&(this.ig=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.cs},set:function(t){var e=this.cs;e!==t&&(this.cs=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.jg},set:function(t){var e=this.jg;e!==t&&(this.jg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.mg},set:function(t){var e=this.mg;e!==t&&(this.mg=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.xg},set:function(t){var e=this.xg;e!==t&&(this.xg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Tf},set:function(t){var e=this.Tf;e!==t&&(this.Tf=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.Br},set:function(t){this.Br!==t&&(this.Br=t,t.ce(this))}},toolManager:{get:function(){return this.nt},set:function(t){this.nt!==t&&(this.nt=t,t.diagram=this)}},defaultTool:{get:function(){return this.Mr},set:function(t){var e=this.Mr;e!==t&&(this.Mr=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.Jr},set:function(t){var e=this.Jr;e!==null&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),t===null&&(t=this.defaultTool),t!==null&&(this.Jr=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.ov}},maxSelectionCount:{get:function(){return this.ws},set:function(t){var e=this.ws;if(e!==t)if(0<=t&&!isNaN(t)){if(this.ws=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&(t=this.selection.count-t,0<t)){this.R("ChangingSelection",this.selection),e=this.selection.ma();for(var i=0;i<t;i++)e[i].isSelected=!1;this.R("ChangedSelection",this.selection)}}else lt(t,">= 0",O,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.ep},set:function(t){var e=this.ep;e!==t&&(this.ep=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.mo},set:function(t){var e=this.mo;e!==t&&(this.mo=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Fo},set:function(t){var e=this.Fo;e!==t&&(this.Fo=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Ou}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?t.currentTransaction!==null?!0:this.qo&&this.Ud!==t.historyIndex:this.qo},set:function(t){if(this.qo!==t){this.qo=t;var e=this.undoManager;!t&&e.isEnabled&&(this.Ud=e.historyIndex),t||Ow(this)}}},model:{get:function(){return this.bc},set:function(t){var e=this.bc;if(e!==t){this.currentTool.doCancel(),e!==null&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&E("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.Sc(!0);var i=ww(this,!0);this.oe=!1,this.Ij=!0,this.Ud=-2,this.Ce=!1;var n=this.kc;this.kc=!0,ls(this.animationManager,"Model"),e!==null&&(this.ue!==null&&this.ue.each(function(o){e.Pk(o)}),e.Pk(this.Vc)),this.bc=t,this.partManager=lT(this.bc.type);for(var r=0;r<i.length;r++)this.add(i[r]);t.Gh(this.Cc),this.partManager.addAllModeledParts(),t.Pk(this.Cc),t.Gh(this.Vc),this.ue!==null&&this.ue.each(function(o){t.Gh(o)}),this.kc=n,this.Sb||this.M(),e!==null&&t.undoManager.copyProperties(e.undoManager)}}},Z:{get:function(){return this.Yu},set:function(t){this.Yu=t}},Wt:{get:function(){return this.Bx}},skipsModelSourceBindings:{get:function(){return this.pv},set:function(t){this.pv=t}},ku:{get:function(){return this.et},set:function(t){this.et=t}},nodeTemplate:{get:function(){return this.ef.H("")},set:function(t){var e=this.ef.H("");e!==t&&(this.ef.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},nodeTemplateMap:{get:function(){return this.ef},set:function(t){var e=this.ef;e!==t&&(this.ef=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},groupTemplate:{get:function(){return this.fh.H("")},set:function(t){var e=this.fh.H("");e!==t&&(this.fh.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},groupTemplateMap:{get:function(){return this.fh},set:function(t){var e=this.fh;e!==t&&(this.fh=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},linkTemplate:{get:function(){return this.dg.H("")},set:function(t){var e=this.dg.H("");e!==t&&(this.dg.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},linkTemplateMap:{get:function(){return this.dg},set:function(t){var e=this.dg;e!==t&&(this.dg=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Kd())}},isMouseCaptured:{get:function(){return this.Uu},set:function(t){var e=this.ta;e!==null&&(e=e.Ga,e instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.xj?(this.removeEventListener(e,"pointermove",this.Lk,!1),this.removeEventListener(e,"pointerdown",this.Kk,!1),this.removeEventListener(e,"pointerup",this.Nk,!1),this.removeEventListener(e,"pointerout",this.Mk,!1),this.addEventListener(Y,"pointermove",this.Lk,!0),this.addEventListener(Y,"pointerdown",this.Kk,!0),this.addEventListener(Y,"pointerup",this.Nk,!0),this.addEventListener(Y,"pointerout",this.Mk,!0)):(this.removeEventListener(e,"mousemove",this.Ek,!1),this.removeEventListener(e,"mousedown",this.Dk,!1),this.removeEventListener(e,"mouseup",this.Gk,!1),this.removeEventListener(e,"mouseout",this.Fk,!1),this.addEventListener(Y,"mousemove",this.Ek,!0),this.addEventListener(Y,"mousedown",this.Dk,!0),this.addEventListener(Y,"mouseup",this.Gk,!0),this.addEventListener(Y,"mouseout",this.Fk,!0)),this.removeEventListener(e,"wheel",this.Hk,!1),this.addEventListener(Y,"wheel",this.Hk,!0),this.addEventListener(Y,"selectstart",this.preventDefault,!1)):(this.xj?(this.removeEventListener(Y,"pointermove",this.Lk,!0),this.removeEventListener(Y,"pointerdown",this.Kk,!0),this.removeEventListener(Y,"pointerup",this.Nk,!0),this.removeEventListener(Y,"pointerout",this.Mk,!0),this.addEventListener(e,"pointermove",this.Lk,!1),this.addEventListener(e,"pointerdown",this.Kk,!1),this.addEventListener(e,"pointerup",this.Nk,!1),this.addEventListener(e,"pointerout",this.Mk,!1)):(this.removeEventListener(Y,"mousemove",this.Ek,!0),this.removeEventListener(Y,"mousedown",this.Dk,!0),this.removeEventListener(Y,"mouseup",this.Gk,!0),this.removeEventListener(Y,"mouseout",this.Fk,!0),this.addEventListener(e,"mousemove",this.Ek,!1),this.addEventListener(e,"mousedown",this.Dk,!1),this.addEventListener(e,"mouseup",this.Gk,!1),this.addEventListener(e,"mouseout",this.Fk,!1)),this.removeEventListener(Y,"wheel",this.Hk,!0),this.removeEventListener(Y,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Hk,!1)),this.Uu=t))}},position:{get:function(){return this.la},set:function(t){var e=k.alloc().assign(this.la);if(!e.w(t)){var i=this.viewportBounds.copy();this.la.assign(t),hw(this.animationManager,e,this.la),this.Sb||this.ta===null&&!this.pm.u()||(this.Sb=!0,t=this.scale,Hy(this,this.On,this.va/t,this.ua/t,this.Bj,!1),this.Sb=!1),this.Sb||this.Tq(i,this.viewportBounds,this.ya,!1)}k.free(e)}},initialPosition:{get:function(){return this.es},set:function(t){this.es.w(t)||(this.es=t.G())}},initialScale:{get:function(){return this.fs},set:function(t){this.fs!==t&&(this.fs=t)}},grid:{get:function(){return this.Jb===null&&kw(this),this.Jb},set:function(t){var e=this.Jb;if(e!==t){e===null&&(kw(this),e=this.Jb),t.type!==V.Grid&&E("Diagram.grid must be a Panel of type Panel.Grid");var i=e.panel;i!==null&&i.remove(e),this.Jb=t,t.name="GRID",i!==null&&i.add(t),jo(this),this.M(),this.g("grid",e,t)}}},viewportBounds:{get:function(){var t=this.Sx,e=this.la,i=this.ya;return this.ta===null?(this.pm.u()&&t.h(e.x,e.y,this.va/i,this.ua/i),t):(t.h(e.x,e.y,Math.max(this.va,0)/i,Math.max(this.ua,0)/i),t)}},viewSize:{get:function(){return this.pm},set:function(t){var e=this.viewSize;e.w(t)||(this.pm=t=t.G(),this.va=t.width,this.ua=t.height,this.Oa(),this.g("viewSize",e,t))}},fixedBounds:{get:function(){return this.Zr},set:function(t){var e=this.Zr;e.w(t)||(t.width!==-Infinity&&t.height!==Infinity&&t.height!==-Infinity||E("fixedBounds width/height must not be Infinity"),this.Zr=t=t.G(),this.Oa(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.Ri},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.Ri;e.w(t)||(this.Ri=t=t.G(),this.g("scrollMargin",e,t),this.Xq())}},scrollMode:{get:function(){return this.Si},set:function(t){var e=this.Si;e!==t&&(this.Si=t,t===fs&&bn(this,!1),this.g("scrollMode",e,t),this.M())}},scrollsPageOnFocus:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(this.at=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Os},set:function(t){var e=this.Os;e!==t&&(this.Os=t,bn(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Us},set:function(t){var e=this.Us;e!==t&&(this.Us=t,Ew(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.On}},isVirtualized:{get:function(){return this.rs},set:function(t){var e=this.rs;e!==t&&(this.rs=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&Ew(this,e,t)}},defaultScale:{get:function(){return this.Nn},set:function(t){this.Nn=t}},autoScale:{get:function(){return this.Pg},set:function(t){var e=this.Pg;e!==t&&(this.Pg=t,this.g("autoScale",e,t),t!==Xi&&bn(this,!1))}},initialAutoScale:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.gs},set:function(t){var e=this.gs;e!==t&&(t.kb()||E("initialViewportSpot must be a specific Spot: "+t),this.gs=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.ds},set:function(t){var e=this.ds;e!==t&&(t.kb()||E("initialViewportSpot must be a specific Spot: "+t),this.ds=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.xs},set:function(t){var e=this.xs;e!==t&&(0<t?(this.xs=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):lt(t,"> 0",O,"minScale"))}},maxScale:{get:function(){return this.vs},set:function(t){var e=this.vs;e!==t&&(0<t?(this.vs=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):lt(t,"> 0",O,"maxScale"))}},zoomPoint:{get:function(){return this.vt},set:function(t){this.vt.w(t)||(this.vt=t=t.G())}},contentAlignment:{get:function(){return this.Bj},set:function(t){var e=this.Bj;e.w(t)||(this.Bj=t=t.G(),this.g("contentAlignment",e,t),bn(this,!1))}},initialContentAlignment:{get:function(){return this.oo},set:function(t){var e=this.oo;e.w(t)||(this.oo=t=t.G(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.ib},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.ib;e.w(t)||(this.ib=t=t.G(),this.Oa(),this.g("padding",e,t))}},partManager:{get:function(){return this.Ka},set:function(t){var e=this.Ka;e!==t&&(t.diagram!==null&&E("Cannot share PartManagers between Diagrams: "+t.toString()),e!==null&&e.ce(null),this.Ka=t,t.ce(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.lc},set:function(t){var e=this.lc;e!==t&&(this.lc=t,t.diagram=this,t.group=null,this.Og=!0,this.g("layout",e,t),this.Eb())}},isTreePathToChildren:{get:function(){return this.qs},set:function(t){var e=this.qs;if(e!==t&&(this.qs=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)tf(t.value)}},treeCollapsePolicy:{get:function(){return this.pt},set:function(t){var e=this.pt;e!==t&&(t!==Vs&&t!==u0&&t!==h0&&E("Unknown Diagram.treeCollapsePolicy: "+t),this.pt=t,this.g("treeCollapsePolicy",e,t))}},Je:{get:function(){return this.Ru},set:function(t){this.Ru=t}},autoScrollInterval:{get:function(){return this.nn},set:function(t){var e=this.nn;e!==t&&(this.nn=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.pn},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.pn;e.w(t)||(this.pn=t=t.G(),this.Oa(),this.g("autoScrollRegion",e,t))}}}),X.Object.defineProperties(O,{licenseKey:{get:function(){return a0.Xb()},set:function(t){a0.add(t)}},version:{get:function(){return uT}}}),O.prototype.makeImageData=O.prototype.Jy,O.prototype.makeImage=O.prototype.GA,O.prototype.addRenderer=O.prototype.rz,O.prototype.makeSVG=O.prototype.gw,O.prototype.makeSvg=O.prototype.Yt,O.prototype.stopAutoScroll=O.prototype.Lf,O.prototype.doAutoScroll=O.prototype.Dt,O.prototype.isUnoccupied=O.prototype.Ak,O.prototype.raiseDiagramEvent=O.prototype.R,O.prototype.removeDiagramListener=O.prototype.Jm,O.prototype.addDiagramListener=O.prototype.ik,O.prototype.findTreeRoots=O.prototype.jA,O.prototype.layoutDiagram=O.prototype.EA,O.prototype.findTopLevelGroups=O.prototype.cA,O.prototype.findTopLevelNodesAndLinks=O.prototype.dA,O.prototype.ensureBounds=O.prototype.Ta,O.prototype.findLinksByExample=O.prototype.Gt,O.prototype.findNodesByExample=O.prototype.Ht,O.prototype.findLinkForData=O.prototype.yc,O.prototype.findNodeForData=O.prototype.fj,O.prototype.findPartForData=O.prototype.zc,O.prototype.findLinkForKey=O.prototype.findLinkForKey,O.prototype.findNodeForKey=O.prototype.Db,O.prototype.findPartForKey=O.prototype.findPartForKey,O.prototype.rebuildParts=O.prototype.Kd,O.prototype.transformViewToDoc=O.prototype.lu,O.prototype.transformRectDocToView=O.prototype.fB,O.prototype.transformDocToView=O.prototype.gr,O.prototype.centerRect=O.prototype.yt,O.prototype.scrollToRect=O.prototype.Aw,O.prototype.scroll=O.prototype.scroll,O.prototype.highlightCollection=O.prototype.vA,O.prototype.highlight=O.prototype.uA,O.prototype.selectCollection=O.prototype.XA,O.prototype.select=O.prototype.select,O.prototype.updateAllRelationshipsFromData=O.prototype.ir,O.prototype.updateAllTargetBindings=O.prototype.updateAllTargetBindings,O.prototype.commit=O.prototype.commit,O.prototype.rollbackTransaction=O.prototype.Kf,O.prototype.commitTransaction=O.prototype.Wa,O.prototype.startTransaction=O.prototype.xa,O.prototype.raiseChanged=O.prototype.g,O.prototype.raiseChangedEvent=O.prototype.bb,O.prototype.removeChangedListener=O.prototype.Pk,O.prototype.addChangedListener=O.prototype.Gh,O.prototype.removeModelChangedListener=O.prototype.TA,O.prototype.addModelChangedListener=O.prototype.Yx,O.prototype.findLayer=O.prototype.wm,O.prototype.removeLayer=O.prototype.RA,O.prototype.addLayerAfter=O.prototype.oz,O.prototype.addLayerBefore=O.prototype.Vx,O.prototype.addLayer=O.prototype.rm,O.prototype.moveParts=O.prototype.moveParts,O.prototype.copyParts=O.prototype.rk,O.prototype.removeParts=O.prototype.eu,O.prototype.remove=O.prototype.remove,O.prototype.add=O.prototype.add,O.prototype.clearDelayedGeometries=O.prototype.Fv,O.prototype.setProperties=O.prototype.Fw,O.prototype.resetInputOptions=O.prototype.ww,O.prototype.setInputOption=O.prototype.YA,O.prototype.getInputOption=O.prototype.zm,O.prototype.resetRenderingHints=O.prototype.xw,O.prototype.setRenderingHint=O.prototype.Vy,O.prototype.getRenderingHint=O.prototype.Ie,O.prototype.maybeUpdate=O.prototype.jd,O.prototype.requestUpdate=O.prototype.Eb,O.prototype.delayInitialization=O.prototype.Jz,O.prototype.isUpdateRequested=O.prototype.AA,O.prototype.redraw=O.prototype.Le,O.prototype.invalidateDocumentBounds=O.prototype.Oa,O.prototype.findObjectsNear=O.prototype.Fg,O.prototype.findPartsNear=O.prototype.$z,O.prototype.findObjectsIn=O.prototype.Bf,O.prototype.findPartsIn=O.prototype.uy,O.prototype.findObjectsAt=O.prototype.gj,O.prototype.findPartsAt=O.prototype.Zz,O.prototype.findObjectAt=O.prototype.Vb,O.prototype.findPartAt=O.prototype.xm,O.prototype.focusObject=O.prototype.kA,O.prototype.alignDocument=O.prototype.uz,O.prototype.zoomToRect=O.prototype.jB,O.prototype.zoomToFit=O.prototype.zoomToFit,O.prototype.diagramScroll=O.prototype.jy,O.prototype.focus=O.prototype.focus,O.prototype.reset=O.prototype.reset,O.useDOM=function(t){Vn=t?Y.document!==void 0:!1},O.isUsingDOM=function(){return Vn};var Zu=null,tp=new ct,Xw=null,Hw=null,Vn=Y.document!==void 0,Ju=null,Fa="",Xi=new K(O,"None",0),Qu=new K(O,"Uniform",1),ep=new K(O,"UniformToFill",2),ip=new K(O,"CycleAll",10),Ww=new K(O,"CycleNotDirected",11),Kw=new K(O,"CycleNotDirectedFast",12),_w=new K(O,"CycleNotUndirected",13),$w=new K(O,"CycleDestinationTree",14),Zw=new K(O,"CycleSourceTree",15),fs=new K(O,"DocumentScroll",1),l0=new K(O,"InfiniteScroll",2),Vs=new K(O,"TreeParentCollapsed",21),u0=new K(O,"AllParentsCollapsed",22),h0=new K(O,"AnyParentsCollapsed",23),a0=new J,uT="2.1.39",qu="image",Jw=null,Qw=!1;function hT(){if(Vn){var t=Y.document.createElement("canvas"),e=t.getContext("2d"),i=kt("7ca11abfd022028846");e[i]=kt("398c3597c01238");for(var n=["5da73c80a36455d5038e4972187c3cae51fd22",_.Dx+"4ae6247590da4bb21c324ba3a84e385776",Nt.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",j.za],r=1;5>r;r++)e[kt("7ca11abfd7330390")](kt(n[r-1]),10,15*r);for(e[i]=kt("39f046ebb36e4b"),i=1;5>i;i++)e[kt("7ca11abfd7330390")](kt(n[i-1]),10,15*i);(n.length!==4||n[0][0]!=="5"||n[3][0]!=="7")&&(Nt.prototype.Gd=Nt.prototype.ay),Jw=t}}O.className="Diagram",O.fromDiv=function(t){var e=t;return typeof t=="string"&&(e=Y.document.getElementById(t)),e instanceof HTMLDivElement&&e.B instanceof O?e.B:null},O.inherit=function(t,e){function i(){}if(Object.getPrototypeOf(t).prototype)throw Error(`Used go.Diagram.inherit defining already defined class 
`+t);i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},O.None=Xi,O.Uniform=Qu,O.UniformToFill=ep,O.CycleAll=ip,O.CycleNotDirected=Ww,O.CycleNotDirectedFast=Kw,O.CycleNotUndirected=_w,O.CycleDestinationTree=$w,O.CycleSourceTree=Zw,O.DocumentScroll=fs,O.InfiniteScroll=l0,O.TreeParentCollapsed=Vs,O.AllParentsCollapsed=u0,O.AnyParentsCollapsed=h0;function qw(){this.kz=null,this.l="zz@orderNum",this._tk==="63ad05bbe23a1786468a4c741b6d2"?this.We=this.l=!0:this.We=null}function Va(t,e){if(e.Hb.setTransform(e.Tb,0,0,e.Tb,0,0),t.We===null){e="f";var i=Y[kt("76a715b2f73f148a")][kt("72ba13b5")];if(t.We=!0,Vn){var n=O[kt("76a115b6ed251eaf4692")];if(n)for(var r=a0.iterator;r.next()&&(n=r.value,n=kt(n).split(kt("39e9")),!(6>n.length));){var o=kt(n[1]).split(".");if(n[4]!=="7da71ca0")break;var s=kt(_[kt("6cae19")]).split(".");if(o[0]>s[0]||o[0]===s[0]&&o[1]>=s[1]){for(o=i[kt("76ad18b4f73e")],s=i[kt("73a612b6fb191d")](kt("35e7"))+2;s<o;s++)e+=i[s];if(o=e[kt("73a612b6fb191d")](kt(n[2])),0>o&&kt(n[2])!==kt("7da71ca0ad381e90")&&(o=e[kt("73a612b6fb191d")](kt("76a715b2ef3e149757"))),0>o&&(o=e[kt("73a612b6fb191d")](kt("76a715b2ef3e149757"))),0>o&&(o=i[kt("73a612b6fb191d")](kt("7baa19a6f76c1988428554"))),t.We=!(0<=o&&o<e[kt("73a612b6fb191d")](kt("35"))||e[kt("73a612b6fb191d")](kt("35"))===-1),!t.We||(o=kt(n[2]),o[0]!=="#"))break;s=Y.document.createElement("div");for(var u=n[0].replace(/[A-Za-z]/g,"");4>u.length;)u+="9";if(u=u.substr(u.length-4),n="",n+=["gsh","gsf"][parseInt(u.substr(0,1),10)%2],n+=["Header","Background","Display","Feedback"][parseInt(u.substr(0,1),10)%4],s[kt("79a417a0f0181a8946")]=n,Y.document[kt("78a712aa")]){if(Y.document[kt("78a712aa")][kt("7bb806b6ed32388c4a875b")](s),u=Y.getComputedStyle(s).getPropertyValue(kt("78a704b7e62456904c9b12701b6532a8")),Y.document[kt("78a712aa")][kt("68ad1bbcf533388c4a875b")](s),!u)break;if(u.indexOf(parseInt(o[1]+o[2],16))!==-1&&u.indexOf(parseInt(o[3]+o[4],16))!==-1){t.We=!1;break}else if(ft||Tt||Bt||ee)for(n="."+n,o=0;o<document.styleSheets.length;o++){s=document.styleSheets[o].rules||document.styleSheets[o].cssRules;for(var a in s)if(n===s[a].selectorText){t.We=!1;break}}}else t.We=null,t.We=!1}}else{for(a=i[kt("76ad18b4f73e")],r=i[kt("73a612b6fb191d")](kt("35e7"))+2;r<a;r++)e+=i[r];i=e[kt("73a612b6fb191d")](kt("7da71ca0ad381e90")),t.We=!(0<=i&&i<e[kt("73a612b6fb191d")](kt("35")))}}}return 0<t.We&&t!==t.kz}function f0(t,e){if(Vn){if(e!=null||E("Diagram setup requires an argument DIV."),t.Ea!==null&&E("Diagram has already completed setup."),typeof e=="string"?t.Ea=Y.document.getElementById(e):e instanceof HTMLDivElement?t.Ea=e:E("No DIV or DIV id supplied: "+e),t.Ea===null&&E("Invalid DIV id; could not get element with id: "+e),t.Ea.B!==void 0&&E("Invalid div id; div already has a Diagram associated with it."),!t.Xl&&Y.ResizeObserver){var i=U(function(){t.Eb()},250);t.Xl=new Y.ResizeObserver(function(){i()}),t.Xl.observe(t.Ea)}Y.getComputedStyle(t.Ea,null).position==="static"&&(t.Ea.style.position="relative"),e=5;var n="rgba(2"+e+"5, 255, 255, 0)";e--,t.Ea.style["-webkit-tap-highlight-color"]=n,t.Ea.style["-ms-touch-action"]="none",t.Ea.innerHTML="",t.Ea.B=t,t.Ea.goDiagram=t,t.Ea.go=Y.go;var r=t.bq?new so(t):new Nn(t);if(r.style!==void 0&&(r.style.position="absolute",r.style.top="0px",r.style.left="0px",Y.getComputedStyle(t.Ea,null).getPropertyValue("direction")==="rtl"&&(t.Fl=!0),r.style.zIndex="2",r.style.userSelect="none",r.style.MozUserSelect="none"),t.ta=r,t.Hb=r.context,n=t.Hb,t.Tb=t.computePixelRatio(),t.va=t.Ea.clientWidth||1,t.ua=t.Ea.clientHeight||1,jw(t,t.va,t.ua),t.Ea.insertBefore(r.Ga,t.Ea.firstChild),r=new Nn(null),r.width=1,r.height=1,t.Gu=r,t.ux=r.context,Vn){r=it("div");var o=it("div");r.style.position="absolute",r.style.overflow="auto",r.style.width=t.va+"px",r.style.height=t.ua+"px",r.style.zIndex="1",o.style.position="absolute",o.style.width="1px",o.style.height="1px",t.Ea.appendChild(r),r.appendChild(o),r.onscroll=eT,r.addEventListener("mousedown",Pw),r.addEventListener("touchstart",Pw,{passive:!0}),r.B=t,r.iz=!0,r.jz=!0,t.Ys=r,t.Jp=o}t.Xq=U(function(){t.xh=null,t.M()},300),t.Ww=U(function(){Xy(t)},250),t.preventDefault=function(s){return s.preventDefault(),!1},t.Ek=function(s){if(t.isEnabled){t.ag=!0;var u=Co(t,s,!0);t.doMouseMove(),t.currentTool.isBeyondDragSize()&&(t.wd=0),tr(u,s)}},t.Dk=function(s){if(t.isEnabled)if(t.ag=!0,t.pe)s.preventDefault();else{var u=Co(t,s,!0);u.down=!0,u.clickCount=s.detail,(Tt||Bt)&&(s.timeStamp-t.Qj<t.ot&&!t.currentTool.isBeyondDragSize()?t.wd++:t.wd=1,t.Qj=s.timeStamp,u.clickCount=t.wd),u.clone(t.firstInput),t.doMouseDown(),s.button===1?s.preventDefault():tr(u,s)}},t.Gk=function(s){if(t.isEnabled)if(t.pe&&s.button===2)s.preventDefault();else if(t.pe&&s.button===0&&(t.pe=!1),t.fk)s.preventDefault();else{t.ag=!0;var u=Co(t,s,!0);u.up=!0,u.clickCount=s.detail,(Tt||Bt)&&(u.clickCount=t.wd),u.bubbles=s.bubbles,u.targetDiagram=_u(s),t.doMouseUp(),t.Lf(),tr(u,s)}},t.Hk=function(s){if(t.isEnabled){var u=Co(t,s,!0);u.bubbles=!0;var a=0,f=0;u.delta=0,s.deltaX!==void 0?(s.deltaX!==0&&(a=0<s.deltaX?1:-1),s.deltaY!==0&&(f=0<s.deltaY?1:-1),u.delta=Math.abs(s.deltaX)>Math.abs(s.deltaY)?-a:-f):s.wheelDeltaX!==void 0?(s.wheelDeltaX!==0&&(a=0<s.wheelDeltaX?-1:1),s.wheelDeltaY!==0&&(f=0<s.wheelDeltaY?-1:1),u.delta=Math.abs(s.wheelDeltaX)>Math.abs(s.wheelDeltaY)?-a:-f):s.wheelDelta!==void 0&&s.wheelDelta!==0&&(u.delta=0<s.wheelDelta?1:-1),t.doMouseWheel(),tr(u,s)}},t.Fk=function(s){t.isEnabled&&(t.ag=!1,Co(t,s,!0),s=t.currentTool,s.cancelWaitAfter(),s.standardMouseOver())},t.Ow=function(s){if(t.isEnabled){t.fk=!1,t.pe=!0;var u=Tw(t,s,s.targetTouches[0],1<s.touches.length),a=null;if(0<s.targetTouches.length?a=s.targetTouches[0]:0<s.changedTouches.length&&(a=s.changedTouches[0]),a!==null){var f=a.screenX;a=a.screenY;var c=t.Ao;s.timeStamp-t.Qj<t.ot&&!(25<Math.abs(c.x-f)||25<Math.abs(c.y-a))?t.wd++:t.wd=1,u.clickCount=t.wd,t.Qj=s.timeStamp,t.Ao.h(f,a)}t.doMouseDown(),tr(u,s)}},t.Nw=function(s){if(t.isEnabled){var u=null;0<s.targetTouches.length?u=s.targetTouches[0]:0<s.changedTouches.length&&(u=s.changedTouches[0]),u=Cw(t,s,u,1<s.touches.length),t.doMouseMove(),tr(u,s)}},t.Mw=function(s){if(t.isEnabled){if(t.fk)s.preventDefault();else if(!(1<s.touches.length)){var u=null,a=null;0<s.targetTouches.length?a=s.targetTouches[0]:0<s.changedTouches.length&&(a=s.changedTouches[0]);var f=Jc(t,s,!1,!0,!1,!1);a!==null&&(u=Y.document.elementFromPoint(a.clientX,a.clientY),u!==null&&u.shadowRoot!==void 0&&u!==null&&u.shadowRoot!==null&&(u=u.shadowRoot.elementFromPoint(a.clientX,a.clientY)),u!==null&&u.B instanceof O&&u.B!==t&&Tl(u.B,a,f),Tl(t,a,f),f.clickCount=t.wd),u===null?f.targetDiagram=_u(s):u.B?f.targetDiagram=u.B:f.targetDiagram=null,f.targetObject=null,t.doMouseUp(),tr(f,s),t.pe=!1}}},t.Kk=function(s){if(t.isEnabled){t.ag=!0;var u=t.Ms;u[s.pointerId]===void 0&&(u[s.pointerId]=s),u=t.$j;var a=!1;if(u[0]!==null&&u[0].pointerId===s.pointerId)u[0]=s;else if(u[1]!==null&&u[1].pointerId===s.pointerId)u[1]=s,a=!0;else if(u[0]===null)u[0]=s;else if(u[1]===null)u[1]=s,a=!0;else{s.preventDefault();return}(s.pointerType==="touch"||s.pointerType==="pen")&&(t.fk=!1,t.pe=!0),u=Tw(t,s,s,a),a=t.Ao;var f=s.pointerType==="touch"||s.pointerType==="pen"?25:10;s.timeStamp-t.Qj<t.ot&&!(Math.abs(a.x-s.screenX)>f||Math.abs(a.y-s.screenY)>f)?t.wd++:t.wd=1,u.clickCount=t.wd,t.Qj=s.timeStamp,t.Ao.Jg(s.screenX,s.screenY),t.doMouseDown(),s.button===1?s.preventDefault():tr(u,s)}},t.Lk=function(s){if(t.isEnabled){t.ag=!0;var u=t.$j;if(u[0]!==null&&u[0].pointerId===s.pointerId)u[0]=s;else{if(u[1]!==null&&u[1].pointerId===s.pointerId){u[1]=s;return}if(u[0]===null)u[0]=s;else return}u[0].pointerId===s.pointerId&&(u=Cw(t,s,s,u[1]!==null),u.targetDiagram=_u(s),t.doMouseMove(),tr(u,s))}},t.Nk=function(s){if(t.isEnabled){t.ag=!0;var u=s.pointerType==="touch"||s.pointerType==="pen",a=t.Ms;if(u&&t.fk)delete a[s.pointerId],s.preventDefault();else if(a=t.$j,a[0]!==null&&a[0].pointerId===s.pointerId){a[0]=null,a=Jc(t,s,!1,!0,!0,!1);var f=Y.document.elementFromPoint(s.clientX,s.clientY);f!==null&&f.B instanceof O&&f.B!==t&&Tl(f.B,s,a),Tl(t,s,a),a.clickCount=t.wd,f===null?a.targetDiagram=_u(s):f.B?a.targetDiagram=f.B:a.targetDiagram=null,a.targetObject=null,t.doMouseUp(),tr(a,s),u&&(t.pe=!1)}else a[1]!==null&&a[1].pointerId===s.pointerId&&(a[1]=null)}},t.Mk=function(s){if(t.isEnabled){t.ag=!1;var u=t.Ms;u[s.pointerId]&&delete u[s.pointerId],u=t.$j,u[0]!==null&&u[0].pointerId===s.pointerId&&(u[0]=null),u[1]!==null&&u[1].pointerId===s.pointerId&&(u[1]=null),s.pointerType!=="touch"&&s.pointerType!=="pen"&&(s=t.currentTool,s.cancelWaitAfter(),s.standardMouseOver())}},t.Tr=n.Y["d"+bw[1]+bw[2]+"wI"+qu.slice(1,5)]["b"+CT.slice(1,e)](n.Y,Jw,e,e),n.uc(!0),tT(t)}}qw.className="DiagramHelper";function cs(t){this.l=t===void 0?new k:t,this.v=new k}X.Object.defineProperties(cs.prototype,{point:{get:function(){return this.l},set:function(t){this.l=t}},shifted:{get:function(){return this.v},set:function(t){this.v=t}}});var bw="DraggingInfo";cs.className="DraggingInfo";function tM(t,e,i){this.node=t,this.info=e,this.Yv=i}tM.className="DraggingNodeInfoPair";function Cl(){this.reset()}Cl.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new pt(NaN,NaN).freeze(),this.gridSnapCellSpot=mi,this.gridSnapOrigin=new k(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},Cl.className="DraggingOptions";function np(t){1<arguments.length&&E("Palette constructor can only take one optional argument, the DIV HTML element or its id."),O.call(this,t),eM(this)}ut(np,O);function eM(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=io,t.layout=new Be}np.prototype.reset=function(){O.prototype.reset.call(this),eM(this)},np.className="Palette";function Do(t){1<arguments.length&&E("Overview constructor can only take one optional argument, the DIV HTML element or its id."),O.call(this,t);var e=this;this.animationManager.isEnabled=!1,this.Sb=!0,this.Ja=null,this.vl=this.ul=!1,this.v=this.I=!0,this.eb=0,this.T=!1,this.cm=null,this.Vy("drawShadows",!1);var i=new rt,n=new gt;n.stroke="magenta",n.strokeWidth=2,n.fill="transparent",n.name="BOXSHAPE",i.selectable=!0,i.selectionAdorned=!1,i.selectionObjectName="BOXSHAPE",i.locationObjectName="BOXSHAPE",i.resizeObjectName="BOXSHAPE",i.cursor="move",i.add(n),this.l=i,this.allowDelete=this.allowCopy=!1,this.allowSelect=!0,this.autoScrollRegion=new Rt(0,0,0,0),this.la.h(0,0),this.toolManager.Xa("Dragging",new Ll,this.toolManager.mouseMoveTools),this.click=function(){var r=e.observed;if(r!==null){var o=r.viewportBounds,s=e.lastInput.documentPoint;r.position=new k(s.x-o.width/2,s.y-o.height/2)}},this.Wh=function(){e.Oa(),za(e)},this.Vh=function(){e.observed!==null&&(e.Oa(),e.M())},this.Uc=function(){1>e.updateDelay?e.M():e.T||(e.T=!0,setTimeout(function(){e.T=!1;var r=e.ta,o=e.Hb;if(r!==null&&o!==null){if(Ba(e),e.cm===null){var s=new Nn(null);s.width=r.width,s.height=r.height,e.cm=s}try{e.ta=e.cm,e.Hb=e.ta.context,e.Hb.uc(!0),e.Hb.setTransform(1,0,0,1,0,0),e.Hb.clearRect(0,0,e.ta.width,e.ta.height),iM(e)}finally{e.ta=r,e.Hb=o}}e.M()},e.updateDelay))},this.Md=function(){e.observed!==null&&za(e)},this.autoScale=Qu,this.Sb=!1}ut(Do,O),Do.prototype.computePixelRatio=function(){return 1},Do.prototype.cc=function(){if(this.Ea===null&&E("No div specified"),this.ta===null&&E("No canvas specified"),!(this.ta instanceof so)&&(V0(this.box),this.Ec)){var t=this.observed;if(t!==null&&!t.animationManager.isAnimating&&t.oj){Ba(this);var e=this.ta;t=this.Hb,t.uc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?iM(this):this.cm!==null&&(t.drawImage(this.cm.Ga,0,0),e=this.qb,e.reset(),this.scale!==1&&e.scale(this.scale),this.position.x===0&&this.position.y===0||e.translate(-this.position.x,-this.position.y),t.scale(this.Tb,this.Tb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy)),e=this.La.j;for(var i=e.length,n=0;n<i;n++)e[n].cc(t,this);this.Ec=this.vi=!1}}};function iM(t){var e=t.observed;if(e!==null){var i=t.drawsTemporaryLayers,n=t.drawsGrid&&i,r=e.grid;n&&r!==null&&r.visible&&!isNaN(r.width)&&!isNaN(r.height)&&(r=I.alloc().assign(t.viewportBounds).Tc(e.viewportBounds),jo(e,r),I.free(r),Ci(e));var o=t.qb;o.reset(),t.scale!==1&&o.scale(t.scale),t.position.x===0&&t.position.y===0||o.translate(-t.position.x,-t.position.y),r=t.Hb,r.scale(t.Tb,t.Tb),r.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),e=e.La.j,o=e.length;for(var s=0;s<o;s++){var u=e[s],a=t;if(u.visible&&u.opacity!==0){var f=u.diagram.grid.part;if(!i&&u.isTemporary)n&&f.layer===u&&(u=Wu(u,r),f.cc(r,a),r.globalAlpha=u);else{for(var c=Wu(u,r),d=a.scale,g=I.alloc(),m=u.Da.j,y=m.length,x=0;x<y;x++){var M=m[x];(n||M!==f)&&u.cj(r,M,a,null,d,g,!1)}I.free(g),r.globalAlpha=c}}}}}function za(t){var e=t.box;if(e!==null){var i=t.observed;if(i!==null){t.Ec=!0,i=i.viewportBounds;var n=e.selectionObject,r=pt.alloc();r.h(i.width,i.height),n.desiredSize=r,pt.free(r),t=2/t.scale,n instanceof gt&&(n.strokeWidth=t),e.location=new k(i.x-t/2,i.y-t/2),e.isSelected=!0}}}Do.prototype.computeBounds=function(){var t=this.observed;if(t===null)return Fc;var e=t.documentBounds.copy();return e.Tc(t.viewportBounds),e},Do.prototype.Gy=function(){this.Ec!==!0&&(this.Ec=!0,this.Eb())},Do.prototype.Tq=function(t,e,i,n){this.Sb||(as(this),this.M(),hs(this),this.Oa(),za(this),this.Jc.scale=i,this.Jc.position.x=t.x,this.Jc.position.y=t.y,this.Jc.bounds.assign(t),this.Jc.fw=n,this.R("ViewportBoundsChanged",this.Jc,t))},X.Object.defineProperties(Do.prototype,{observed:{get:function(){return this.Ja},set:function(t){var e=this.Ja;if(t instanceof Do&&E("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(e!==null&&(this.remove(this.box),e.Jm("ViewportBoundsChanged",this.Wh),e.Jm("DocumentBoundsChanged",this.Vh),e.Jm("InvalidateDraw",this.Uc),e.Jm("AnimationFinished",this.Md)),this.Ja=t,t!==null&&(t.ik("ViewportBoundsChanged",this.Wh),t.ik("DocumentBoundsChanged",this.Vh),t.ik("InvalidateDraw",this.Uc),t.ik("AnimationFinished",this.Md),this.add(this.box)),this.Oa(),t===null){this.cm=null;var i=this.ta,n=this.Hb;i&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height))}else this.Uc(null),za(this),this.M();this.g("observed",e,t)}}},box:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.remove(e),this.add(this.l),za(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t,this.Le())}},drawsGrid:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t,this.Le())}},updateDelay:{get:function(){return this.eb},set:function(t){0>t&&(t=0),this.eb!==t&&(this.eb=t)}}}),Do.className="Overview";function Ll(){fe.call(this),this.l=null}ut(Ll,fe),Ll.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t===null||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(e===null)return!1;var i=t.lastInput;return!i.left||t.currentTool!==this&&(!this.isBeyondDragSize()||i.isTouchEvent&&i.timestamp-t.firstInput.timestamp<this.delay)?!1:(this.findDraggablePart()===null&&(i=e.viewportBounds,this.l=new k(i.width/2,i.height/2),t=t.firstInput.documentPoint,e.position=new k(t.x-this.l.x,t.y-this.l.y)),!0)},Ll.prototype.doActivate=function(){this.l=null,fe.prototype.doActivate.call(this)},Ll.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;e!==null&&e.cursor&&(t.currentCursor=e.cursor)},Ll.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(e!==null){var i=t.box;if(i!==null){if(this.l===null){var n=t.firstInput.documentPoint;i=i.location,this.l=new k(n.x-i.x,n.y-i.y)}t=t.lastInput.documentPoint,e.position=new k(t.x-this.l.x,t.y-this.l.y)}}},Ll.className="OverviewDraggingTool";function _t(){Oe(this),this.B=Zu,this.eb=this.I=this.v=!0,this.T=this.Ja=this.Uc=this.Ka=!1,this.Ii=this.l=null,this.Md=1.05,this.Zu=NaN,this.zx=null,this.zv=NaN,this.yv=Fc,this.Cc=!0,this.tg=null,this.Vc=200}_t.prototype.toString=function(){return"CommandHandler"},_t.prototype.ce=function(t){this.B=t},_t.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,i=te?e.meta:e.control,n=e.shift,r=e.alt,o=e.key;!i||o!=="C"&&o!=="Insert"?i&&o==="X"||n&&o==="Del"?this.canCutSelection()&&this.cutSelection():i&&o==="V"||n&&o==="Insert"?this.canPasteSelection()&&this.pasteSelection():i&&o==="Y"||r&&n&&o==="Backspace"?this.canRedo()&&this.redo():i&&o==="Z"||r&&o==="Backspace"?this.canUndo()&&this.undo():o==="Del"||o==="Backspace"?this.canDeleteSelection()&&this.deleteSelection():i&&o==="A"?this.canSelectAll()&&this.selectAll():o==="Esc"?this.canStopCommand()&&this.stopCommand():o==="Up"?t.allowVerticalScroll&&(i?t.scroll("pixel","up"):t.scroll("line","up")):o==="Down"?t.allowVerticalScroll&&(i?t.scroll("pixel","down"):t.scroll("line","down")):o==="Left"?t.allowHorizontalScroll&&(i?t.scroll("pixel","left"):t.scroll("line","left")):o==="Right"?t.allowHorizontalScroll&&(i?t.scroll("pixel","right"):t.scroll("line","right")):o==="PageUp"?n&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):o==="PageDown"?n&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):o==="Home"?i&&t.allowVerticalScroll?t.scroll("document","up"):!i&&t.allowHorizontalScroll&&t.scroll("document","left"):o==="End"?i&&t.allowVerticalScroll?t.scroll("document","down"):!i&&t.allowHorizontalScroll&&t.scroll("document","right"):o===" "?this.canScrollToPart()&&this.scrollToPart():o==="Subtract"?this.canDecreaseZoom()&&this.decreaseZoom():o==="Add"?this.canIncreaseZoom()&&this.increaseZoom():i&&o==="0"?this.canResetZoom()&&this.resetZoom():n&&o==="Z"?this.canZoomToFit()&&this.zoomToFit():i&&!n&&o==="G"?this.canGroupSelection()&&this.groupSelection():i&&n&&o==="G"?this.canUngroupSelection()&&this.ungroupSelection():e.event&&e.event.key==="F2"?this.canEditTextBlock()&&this.editTextBlock():e.event&&e.event.key==="ContextMenu"?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},_t.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},_t.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof he&&t.allowSelect&&t.clearSelection(),e!==null&&e.doCancel()},_t.prototype.canStopCommand=function(){return!0},_t.prototype.selectAll=function(){var t=this.diagram;t.M();try{t.currentCursor="wait",t.R("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var i=t.nodes;i.next();)i.value.isSelected=!0;for(var n=t.links;n.next();)n.value.isSelected=!0}finally{t.R("ChangedSelection",t.selection),t.currentCursor=""}},_t.prototype.canSelectAll=function(){return this.diagram.allowSelect},_t.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.xa("Delete"),t.R("SelectionDeleting",t.selection);for(var e=new W,i=t.selection.iterator;i.next();)ys(e,i.value,!0,this.deletesTree?Infinity:0,this.deletesConnectedLinks?null:!1,function(n){return n.canDelete()});t.eu(e,!0),t.R("SelectionDeleted",e)}finally{t.Wa("Delete"),t.R("ChangedSelection",t.selection),t.currentCursor=""}},_t.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||t.selection.count===0)},_t.prototype.copySelection=function(){var t=this.diagram,e=new W;for(t=t.selection.iterator;t.next();)ys(e,t.value,!0,this.copiesTree?Infinity:0,this.copiesConnectedLinks,function(i){return i.canCopy()});this.copyToClipboard(e)},_t.prototype.canCopySelection=function(){var t=this.diagram;return!!(t.allowCopy&&t.allowClipboard&&t.selection.count!==0)},_t.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},_t.prototype.canCutSelection=function(){var t=this.diagram;return!!(!t.isReadOnly&&!t.isModelReadOnly&&t.allowCopy&&t.allowDelete&&t.allowClipboard&&t.selection.count!==0)},_t.prototype.copyToClipboard=function(t){var e=this.diagram,i=null;if(t===null)Ju=null,Fa="";else{i=e.model;var n=!1,r=!1,o=null;try{i.Cm()&&(n=i.qk,i.qk=this.copiesParentKey),i.yk()&&(r=i.pk,i.pk=this.copiesGroupKey),o=e.rk(t,null,!0)}finally{i.Cm()&&(i.qk=n),i.yk()&&(i.pk=r),i=new J,i.addAll(o),Ju=i,Fa=e.model.dataFormat}}e.R("ClipboardChanged",i)},_t.prototype.pasteFromClipboard=function(){var t=new W,e=Ju;if(e===null)return t;var i=this.diagram;if(Fa!==i.model.dataFormat)return t;var n=i.model,r=!1,o=!1,s=null;try{n.Cm()&&(r=n.qk,n.qk=this.copiesParentKey),n.yk()&&(o=n.pk,n.pk=this.copiesGroupKey),s=i.rk(e,i,!1)}finally{for(n.Cm()&&(n.qk=r),n.yk()&&(n.pk=o),e=s.iterator;e.next();)i=e.value,n=e.key,i.location.u()||(n.location.u()?i.location=n.location:!i.position.u()&&n.position.u()&&(i.position=n.position)),t.add(i)}return t},_t.prototype.pasteSelection=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.xa("Paste");var i=this.pasteFromClipboard();0<i.count&&e.clearSelection(!0);for(var n=i.iterator;n.next();)n.value.isSelected=!0;if(t!==null){var r=e.computePartsBounds(e.selection);if(r.u()){var o=this.computeEffectiveCollection(e.selection,e.il);Jy(e,o,new k(t.x-r.centerX,t.y-r.centerY),e.il,!1)}}e.R("ClipboardPasted",i)}finally{e.Wa("Paste"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},_t.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||Ju===null||Ju.count===0||Fa!==t.model.dataFormat)},_t.prototype.undo=function(){this.diagram.undoManager.undo()},_t.prototype.canUndo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canUndo()},_t.prototype.redo=function(){this.diagram.undoManager.redo()},_t.prototype.canRedo=function(){var t=this.diagram;return t.isReadOnly||t.isModelReadOnly?!1:t.allowUndo&&t.undoManager.canRedo()},_t.prototype.decreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===Xi&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},_t.prototype.canDecreaseZoom=function(t){t===void 0&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale!==Xi?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},_t.prototype.increaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===Xi&&(t=e.scale*t,t<e.minScale||t>e.maxScale||(e.scale=t))},_t.prototype.canIncreaseZoom=function(t){t===void 0&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale!==Xi?!1:(t=e.scale*t,t<e.minScale||t>e.maxScale?!1:e.allowZoom)},_t.prototype.resetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},_t.prototype.canResetZoom=function(t){t===void 0&&(t=this.defaultScale);var e=this.diagram;return t<e.minScale||t>e.maxScale?!1:e.allowZoom},_t.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.Sc(),t.Le();var i=t.position,n=t.scale;ls(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&n===this.zv&&!isNaN(this.Zu)&&t.documentBounds.w(this.yv)?(t.scale=this.Zu,t.position=this.zx,this.zv=NaN,this.yv=Fc):(this.Zu=n,this.zx=i.copy(),t.zoomToFit(),this.zv=t.scale,this.yv=t.documentBounds.copy()),zy(e)},_t.prototype.canZoomToFit=function(){return this.diagram.allowZoom},_t.prototype.scrollToPart=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.Ta(),t===null){try{this.tg!==null&&(this.tg.next()?t=this.tg.value:this.tg=null)}catch(a){this.tg=null}t===null&&(0<e.highlighteds.count?this.tg=e.highlighteds.iterator:0<e.selection.count&&(this.tg=e.selection.iterator),this.tg!==null&&this.tg.next()&&(t=this.tg.value))}if(t!==null){var i=e.animationManager;ls(i,"Scroll To Part");var n=this.scrollToPartPause;if(0<n){var r=jl(this,t,[t]);if(r.length===1)e.xa(),e.yt(t.actualBounds),e.Wa("Scroll To Part");else{var o=function(){e.xa();for(var a=r.pop();0<r.length&&a instanceof Z&&a.isTreeExpanded&&(!(a instanceof dt)||a.isSubGraphExpanded);)a=r.pop();0<r.length?(a instanceof rt&&e.Aw(a.actualBounds),a instanceof Z&&!a.isTreeExpanded&&(a.isTreeExpanded=!0),a instanceof dt&&!a.isSubGraphExpanded&&(a.isSubGraphExpanded=!0)):(a instanceof rt&&e.yt(a.actualBounds),e.Jm("LayoutCompleted",s)),e.Wa("Scroll To Part")},s=function(){H(o,(i.isEnabled?i.duration:0)+n)};e.ik("LayoutCompleted",s),o()}}else{var u=e.position.copy();e.yt(t.actualBounds),u.Na(e.position)&&i.Sc()}}};function jl(t,e,i){if(e.isVisible())return i;if(e instanceof Ct)jl(t,e.adornedPart,i);else if(e instanceof z){var n=e.fromNode;n!==null&&jl(t,n,i),e=e.toNode,e!==null&&jl(t,e,i)}else e instanceof Z&&(n=e.labeledLink,n!==null&&jl(t,n,i),n=e.Gg(),n!==null&&(n.isTreeExpanded||n.wasTreeExpanded||i.push(n),jl(t,n,i))),e=e.containingGroup,e!==null&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||i.push(e),jl(t,e,i));return i}_t.prototype.canScrollToPart=function(t){return t===void 0&&(t=null),t!==null&&!(t instanceof rt)?!1:(t=this.diagram,t.selection.count===0&&t.highlighteds.count===0?!1:t.allowHorizontalScroll&&t.allowVerticalScroll)},_t.prototype.collapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.xa("Collapse Tree"),ls(e.animationManager,"Collapse Tree");var i=new J;if(t!==null&&t.isTreeExpanded)t.collapseTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof Z&&r.isTreeExpanded&&(r.collapseTree(),i.add(r))}e.R("TreeCollapsed",i)}finally{e.Wa("Collapse Tree")}},_t.prototype.canCollapseTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof Z&&t.isTreeExpanded))return!1;if(0<t.Dq().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof Z&&e.isTreeExpanded&&0<e.Dq().count)return!0;return!1},_t.prototype.expandTree=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.xa("Expand Tree"),ls(e.animationManager,"Expand Tree");var i=new J;if(t!==null&&!t.isTreeExpanded)t.expandTree(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof Z&&!r.isTreeExpanded&&(r.expandTree(),i.add(r))}e.R("TreeExpanded",i)}finally{e.Wa("Expand Tree")}},_t.prototype.canExpandTree=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null){if(!(t instanceof Z)||t.isTreeExpanded)return!1;if(0<t.Dq().count)return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof Z&&!e.isTreeExpanded&&0<e.Dq().count)return!0;return!1},_t.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.zk()){var i=this.archetypeGroupData;if(i!==null){var n=null;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.xa("Group");for(var r=new J,o=t.selection.iterator;o.next();){var s=o.value;s.Oc()&&s.canGroup()&&r.add(s)}for(var u=new J,a=r.iterator;a.next();){var f=a.value;o=!1;for(var c=r.iterator;c.next();)if(f.Hd(c.value)){o=!0;break}o||u.add(f)}if(0<u.count){var d=u.first().containingGroup;if(d!==null)for(;d!==null;){r=!1;for(var g=u.iterator;g.next();)if(!g.value.Hd(d)){r=!0;break}if(r)d=d.containingGroup;else break}if(i instanceof dt)Tn(i),n=i.copy(),n!==null&&t.add(n);else if(e.dw(i)){var m=e.copyNodeData(i);at(m)&&(e.wf(m),n=t.fj(m))}if(n!==null){d!==null&&this.isValidMember(d,n)&&(n.containingGroup=d);for(var y=u.iterator;y.next();){var x=y.value;this.isValidMember(n,x)&&(x.containingGroup=n)}t.clearSelection(!0),n.isSelected=!0}}t.R("SelectionGrouped",n)}finally{t.Wa("Group"),t.R("ChangedSelection",t.selection),t.currentCursor=""}}}},_t.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.zk()||this.archetypeGroupData===null)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Oc()&&e.canGroup())return!0}return!1};function c0(t){var e=Dt();for(t=t.iterator;t.next();){var i=t.value;i instanceof z||e.push(i)}t=new W,i=e.length;for(var n=0;n<i;n++){for(var r=e[n],o=!0,s=0;s<i;s++)if(r.Hd(e[s])){o=!1;break}o&&t.add(r)}return Xt(e),t}_t.prototype.isValidMember=function(t,e){if(e===null||t===e||e instanceof z)return!1;if(t!==null){if(t===e||t.Hd(e))return!1;var i=t.memberValidation;if(i!==null&&!i(t,e)||t.data===null&&e.data!==null||t.data!==null&&e.data===null)return!1}return i=this.memberValidation,i!==null?i(t,e):!0},_t.prototype.ungroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.model;if(i.zk())try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.xa("Ungroup");var n=new J;if(t!==null)n.add(t);else for(var r=e.selection.iterator;r.next();){var o=r.value;o instanceof dt&&o.canUngroup()&&n.add(o)}var s=new J;if(0<n.count){e.clearSelection(!0);for(var u=n.iterator;u.next();){var a=u.value;a.expandSubGraph();var f=a.containingGroup,c=f!==null&&f.data!==null?i.ja(f.data):void 0;s.addAll(a.memberParts);for(var d=s.iterator;d.next();){var g=d.value;if(g.isSelected=!0,!(g instanceof z)){var m=g.data;m!==null?i.cr(m,c):g.containingGroup=f}}e.remove(a)}}e.R("SelectionUngrouped",n,s)}finally{e.Wa("Ungroup"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},_t.prototype.canUngroupSelection=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.zk())return!1;if(t!==null){if(!(t instanceof dt))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof dt&&e.canUngroup())return!0;return!1},_t.prototype.addTopLevelParts=function(t,e){var i=!0;for(t=c0(t).iterator;t.next();){var n=t.value;n.containingGroup!==null&&(!e||this.isValidMember(null,n)?n.containingGroup=null:i=!1)}return i},_t.prototype.collapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.xa("Collapse SubGraph"),ls(e.animationManager,"Collapse SubGraph");var i=new J;if(t!==null&&t.isSubGraphExpanded)t.collapseSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof dt&&r.isSubGraphExpanded&&(r.collapseSubGraph(),i.add(r))}e.R("SubGraphCollapsed",i)}finally{e.Wa("Collapse SubGraph")}},_t.prototype.canCollapseSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return!!(t instanceof dt&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof dt&&e.isSubGraphExpanded)return!0;return!1},_t.prototype.expandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;try{e.xa("Expand SubGraph"),ls(e.animationManager,"Expand SubGraph");var i=new J;if(t!==null&&!t.isSubGraphExpanded)t.expandSubGraph(),i.add(t);else if(t===null)for(var n=e.selection.iterator;n.next();){var r=n.value;r instanceof dt&&!r.isSubGraphExpanded&&(r.expandSubGraph(),i.add(r))}e.R("SubGraphExpanded",i)}finally{e.Wa("Expand SubGraph")}},_t.prototype.canExpandSubGraph=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(t!==null)return t instanceof dt&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if(e=t.value,e instanceof dt&&!e.isSubGraphExpanded)return!0;return!1},_t.prototype.editTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram,i=e.toolManager.findTool("TextEditing");if(i!==null){if(t===null){t=null;for(var n=e.selection.iterator;n.next();){var r=n.value;if(r.canEdit()){t=r;break}}if(t===null)return;t=t.vm(function(o){return o instanceof qt&&o.editable})}t!==null&&(e.currentTool=null,i.textBlock=t,e.currentTool=i)}},_t.prototype.canEditTextBlock=function(t){t===void 0&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||e.toolManager.findTool("TextEditing")===null)return!1;if(t!==null){if(!(t instanceof qt))return!1;if(t=t.part,t!==null&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if(t=e.value,t.canEdit()&&(t=t.vm(function(i){return i instanceof qt&&i.editable}),t!==null))return!0;return!1},_t.prototype.showContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");if(i!==null&&(t===void 0&&(t=0<e.selection.count?e.selection.first():e),t=i.findObjectWithContextMenu(t),t!==null)){var n=e.lastInput,r=null;t instanceof ot?r=t.da(Wt):e.viewportBounds.$(n.documentPoint)||(r=e.viewportBounds,r=new k(r.x+r.width/2,r.y+r.height/2)),r!==null&&(n.viewPoint=e.gr(r),n.documentPoint=r,n.left=!1,n.right=!0,n.up=!0),e.currentTool=i,nw(i,!1,t)}},_t.prototype.canShowContextMenu=function(t){var e=this.diagram,i=e.toolManager.findTool("ContextMenu");return i===null?!1:(t===void 0&&(t=0<e.selection.count?e.selection.first():e),i.findObjectWithContextMenu(t)!==null)},_t.prototype.computeEffectiveCollection=function(t,e){var i=this.diagram,n=i.toolManager.findTool("Dragging"),r=i.currentTool===n;if(e===void 0&&(e=r?n.dragOptions:i.il),n=new ct,t===null)return n;for(var o=t.iterator;o.next();)Lo(i,n,o.value,r,e);if(i.draggedLink!==null&&e.dragsLink)return n;for(o=t.iterator;o.next();)t=o.value,t instanceof z&&(e=t.fromNode,e===null||n.contains(e)?(e=t.toNode,e===null||n.contains(e)||n.remove(t)):n.remove(t));return n},X.Object.defineProperties(_t.prototype,{diagram:{get:function(){return this.B}},copiesClipboardData:{get:function(){return this.v},set:function(t){this.v=t}},copiesConnectedLinks:{get:function(){return this.I},set:function(t){this.I=t}},deletesConnectedLinks:{get:function(){return this.eb},set:function(t){this.eb=t}},copiesTree:{get:function(){return this.Ka},set:function(t){this.Ka=t}},deletesTree:{get:function(){return this.Uc},set:function(t){this.Uc=t}},copiesParentKey:{get:function(){return this.Ja},set:function(t){this.Ja=t}},copiesGroupKey:{get:function(){return this.T},set:function(t){this.T=t}},archetypeGroupData:{get:function(){return this.l},set:function(t){this.l=t}},memberValidation:{get:function(){return this.Ii},set:function(t){this.Ii=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Md},set:function(t){1<t||E("zoomFactor must be larger than 1.0, not: "+t),this.Md=t}},isZoomToFitRestoreEnabled:{get:function(){return this.Cc},set:function(t){this.Cc=t}},scrollToPartPause:{get:function(){return this.Vc},set:function(t){this.Vc=t}}}),_t.className="CommandHandler",Gy=function(){return new _t};function ot(){Oe(this),this.F=4225027,this.hb=1,this.qg=null,this.Qa="",this.ec=this.mb=null,this.la=new k(NaN,NaN).freeze(),this.Zc=oy,this.hg=Nu,this.gg=dx,this.qb=new Nt,this.Yh=new Nt,this.eg=new Nt,this.ya=this.ol=1,this.Yb=0,this.Be=xr,this.jh=Tu,this.qc=new I(NaN,NaN,NaN,NaN).freeze(),this.yb=new I(NaN,NaN,NaN,NaN).freeze(),this.rc=new I(0,0,NaN,NaN).freeze(),this.O=this.qp=this.rp=null,this.Yk=this.zb=ni,this.Dp=0,this.Ep=1,this.Sg=0,this.wn=1,this.Xp=null,this.Kp=-Infinity,this.Yl=0,this.Zl=Po,this.$l=ji,this.ni="",this.fb=this.N=null,this.bl=-1,this.bm=this.Ya=this.mi=this.fm=null,this.Ps=ve,this.Gp=this.Ng=this.Zj=null}var ye,ve,vr,xr,_e,ei,Ua,Ya,Ga,Xa;ot.prototype.cloneProtected=function(t){t.F=this.F|6144,t.hb=this.hb,t.Qa=this.Qa,t.mb=this.mb,t.ec=this.ec,t.Ng=this.Ng,t.la.assign(this.la),t.Zc=this.Zc.G(),t.hg=this.hg.G(),t.gg=this.gg.G(),t.eg=this.eg.copy(),t.ya=this.ya,t.Yb=this.Yb,t.Be=this.Be,t.jh=this.jh.G(),t.qc.assign(this.qc),t.yb.assign(this.yb),t.rc.assign(this.rc),t.qp=this.qp,this.O!==null&&(t.O=this.O.copy()),t.zb=this.zb.G(),t.Yk=this.Yk.G(),t.Dp=this.Dp,t.Ep=this.Ep,t.Sg=this.Sg,t.wn=this.wn,t.Xp=this.Xp,t.Kp=this.Kp,t.Yl=this.Yl,t.Zl=this.Zl.G(),t.$l=this.$l,t.ni=this.ni,this.N!==null&&(t.N=this.N.copy()),t.fb=this.fb,t.bl=this.bl,this.mi!==null&&(t.mi=Ge(this.mi)),this.Ya!==null&&(t.Ya=this.Ya.copy()),t.bm=this.bm},ot.prototype.Ux=function(t){var e=this.mi;if(jt(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return}else this.mi=e=[];e.push(t)},ot.prototype.Af=function(t){t.rp=null,t.Zj=null,t.o()},ot.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),this.mi!==null)for(var e=0;e<this.mi.length;e++){var i=this.mi[e];t[i]=this[i]}return t},ot.prototype.copy=function(){return this.clone()},l=ot.prototype,l.jb=function(t){t.classType===z?t.name.indexOf("Orient")===0?this.segmentOrientation=t:E("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===ot&&(this.stretch=t)},l.toString=function(){return Ee(this.constructor)+"#"+Ne(this)};function tn(t){t.N===null&&(t.N=new lp)}l.Lc=function(){if(this.O===null){var t=new cf;t.bh=qe,t.Bh=qe,t.$g=10,t.zh=10,t.ah=0,t.Ah=0,this.O=t}},l.bb=function(t,e,i,n,r,o,s){var u=this.part;if(u!==null&&(u.Ok(t,e,i,n,r,o,s),i===this&&t===le&&Dl(this)&&zs(this,u,e),o=this.diagram,this.Ng===null||o===null||!o.oj||o.undoManager.isUndoingRedoing||o.currentTool!==o.toolManager||o.animationManager.qn||(t=this.Ng.get(e),t!==null&&o.animationManager.isEnabled&&!o.animationManager.isTicking&&(this.Gp===null&&(this.Gp=new ct),s=o.undoManager.transactionLevel===0,t.startCondition===Yy?s=!0:t.startCondition===xw&&(s=!1),s?(o=new oi,qN(t,o),s=this.Gp.get(t),s!==null&&s.stop(),this.Gp.add(t,o),o.vv=this,o.Px=t,o.add(this,e,n,r),o.start()):(lw(o.animationManager,"Trigger"),o.animationManager.defaultAnimation.add(this,e,n,r)))),this instanceof V&&i===u&&(u.F&16777216)!=0&&u.data!==null))for(i=this.W.j,n=i.length,r=0;r<n;r++)u=i[r],u instanceof V&&Xs(u,function(a){a.data!==null&&(a.F&16777216)!=0&&a.Ca(e)})};function zs(t,e,i){var n=t.hj();if(n!==null)for(var r=t.fb.iterator;r.next();){var o=r.value,s=null;if(o.sourceName!==null){if(s=YS(o,n,t),s===null)continue;o.jr(t,s,i,null)}else if(o.isToModel){var u=e.diagram;u===null||u.skipsModelSourceBindings||o.jr(t,u.model.modelData,i,n)}else{if(u=n.data,u===null)continue;var a=e.diagram;a===null||a.skipsModelSourceBindings||o.jr(t,u,i,n)}s===t&&(u=n.Ft(o.vj),u!==null&&o.Tw(u,s,i))}}l.Ft=function(t){return this.bl===t?this:null},l.g=function(t,e,i){this.bb(le,t,this,e,i)};function ro(t,e,i,n,r){var o=t.qc,s=t.eg;s.reset(),d0(t,s,e,i,n,r),t.eg=s,o.h(e,i,n,r),s.St()||s.Pw(o)}function nM(t,e,i,n){return t.pickable===!1?!1:(n.multiply(t.transform),i?t.Nc(e,n):t.Ih(e,n))}l.ty=function(t,e,i){if(this.pickable===!1)return!1;var n=this.naturalBounds;return e=t.Ge(e),i?yi(t.x,t.y,0,0,0,n.height)<=e||yi(t.x,t.y,0,n.height,n.width,n.height)<=e||yi(t.x,t.y,n.width,n.height,n.width,0)<=e||yi(t.x,t.y,n.width,0,0,0)<=e:t.rd(0,0)<=e&&t.rd(0,n.height)<=e&&t.rd(n.width,0)<=e&&t.rd(n.width,n.height)<=e},l.fe=function(){return!0},l.$=function(t){var e=k.alloc();e.assign(t),this.transform.sa(e);var i=this.actualBounds;if(!i.u())return k.free(e),!1;var n=this.diagram;if(n!==null&&n.pe){var r=n.zm("extraTouchThreshold"),o=n.zm("extraTouchArea"),s=o/2,u=this.naturalBounds;n=this.Cf()*n.scale;var a=1/n;if(u.width*n<r&&u.height*n<r)return t=Zn(i.x-s*a,i.y-s*a,i.width+o*a,i.height+o*a,e.x,e.y),k.free(e),t}return r=!1,(this instanceof Ct||this instanceof gt?Zn(i.x-5,i.y-5,i.width+10,i.height+10,e.x,e.y):i.$(e))&&(this.Ya&&!this.Ya.$(e)?r=!1:this.ec!==null&&i.$(e)||this.mb!==null&&this.rc.$(t)?r=!0:r=this.Jh(t)),k.free(e),r},l.Jh=function(t){var e=this.naturalBounds;return Zn(0,0,e.width,e.height,t.x,t.y)},l.Ee=function(t){if(this.angle===0)return this.actualBounds.Ee(t);var e=this.naturalBounds;e=I.allocAt(0,0,e.width,e.height);var i=this.transform,n=!1,r=k.allocAt(t.x,t.y);return e.$(i.Gd(r))&&(r.h(t.x,t.bottom),e.$(i.Gd(r))&&(r.h(t.right,t.bottom),e.$(i.Gd(r))&&(r.h(t.right,t.y),e.$(i.Gd(r))&&(n=!0)))),k.free(r),I.free(e),n},l.Ih=function(t,e){if(e===void 0)return t.Ee(this.actualBounds);var i=this.naturalBounds,n=!1,r=k.allocAt(0,0);return t.$(e.sa(r))&&(r.h(0,i.height),t.$(e.sa(r))&&(r.h(i.width,i.height),t.$(e.sa(r))&&(r.h(i.width,0),t.$(e.sa(r))&&(n=!0)))),k.free(r),n},l.Nc=function(t,e){if(e===void 0&&(e=this.transform,this.angle===0))return t.Nc(this.actualBounds);var i=this.naturalBounds,n=k.allocAt(0,0),r=k.allocAt(0,i.height),o=k.allocAt(i.width,i.height),s=k.allocAt(i.width,0),u=!1;if(t.$(e.sa(n))||t.$(e.sa(r))||t.$(e.sa(o))||t.$(e.sa(s)))u=!0;else{i=I.allocAt(0,0,i.width,i.height);var a=k.allocAt(t.x,t.y);i.$(e.Gd(a))?u=!0:(a.h(t.x,t.bottom),i.$(e.Gd(a))?u=!0:(a.h(t.right,t.bottom),i.$(e.Gd(a))?u=!0:(a.h(t.right,t.y),i.$(e.Gd(a))&&(u=!0)))),k.free(a),I.free(i),!u&&(j.Pt(t,n,r)||j.Pt(t,r,o)||j.Pt(t,o,s)||j.Pt(t,s,n))&&(u=!0)}return k.free(n),k.free(r),k.free(o),k.free(s),u},l.da=function(t,e){if(e===void 0&&(e=new k),t instanceof st){var i=this.naturalBounds;e.h(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else e.set(t);return this.Ed.sa(e),e},l.lj=function(t){t===void 0&&(t=new I);var e=this.naturalBounds,i=this.Ed,n=k.allocAt(0,0).transform(i);return t.h(n.x,n.y,0,0),n.h(e.width,0).transform(i),Ue(t,n.x,n.y,0,0),n.h(e.width,e.height).transform(i),Ue(t,n.x,n.y,0,0),n.h(0,e.height).transform(i),Ue(t,n.x,n.y,0,0),k.free(n),t},l.kj=function(){var t=this.Ed;return t.m11===1&&t.m12===0?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI,0>t&&(t+=360)),t},l.Cf=function(){if((this.F&4096)==0)return this.ol;var t=this.ya;return this.panel!==null?t*this.panel.Cf():t},l.Lt=function(t,e){return e===void 0&&(e=new k),e.assign(t),this.Ed.Gd(e),e},l.Mt=function(t,e,i){return this.wk(t.x,t.y,e.x,e.y,i)},l.wk=function(t,e,i,n,r){var o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),u=o.m22*s,a=-o.m12*s,f=-o.m21*s,c=o.m11*s,d=s*(o.m21*o.dy-o.m22*o.dx),g=s*(o.m12*o.dx-o.m11*o.dy);return this.areaBackground!==null?(o=this.actualBounds,j.Ef(o.left,o.top,o.right,o.bottom,t,e,i,n,r)):(s=t*u+e*f+d,t=t*a+e*c+g,e=i*u+n*f+d,i=i*a+n*c+g,r.h(0,0),n=this.naturalBounds,i=j.Ef(0,0,n.width,n.height,s,t,e,i,r),r.transform(o),i)},ot.prototype.measure=function(t,e,i,n){if(Eo(this)!==!1){var r=this.jh,o=r.right+r.left;r=r.top+r.bottom,t=Math.max(t-o,0),e=Math.max(e-r,0),i=Math.max((i||0)-o,0),n=Math.max((n||0)-r,0),o=this.angle,r=this.desiredSize;var s=0;this instanceof gt&&(s=this.strokeWidth),o===90||o===270?(t=isFinite(r.height)?r.height+s:t,e=isFinite(r.width)?r.width+s:e):(t=isFinite(r.width)?r.width+s:t,e=isFinite(r.height)?r.height+s:e),r=i||0,s=n||0;var u=this instanceof V;switch(er(this,!0)){case ve:s=r=0,u&&(e=t=Infinity);break;case ye:isFinite(t)&&t>i&&(r=t),isFinite(e)&&e>n&&(s=e);break;case _e:isFinite(t)&&t>i&&(r=t),s=0,u&&(e=Infinity);break;case ei:isFinite(e)&&e>n&&(s=e),r=0,u&&(t=Infinity)}u=this.maxSize;var a=this.minSize;r>u.width&&a.width<u.width&&(r=u.width),s>u.height&&a.height<u.height&&(s=u.height),i=Math.max(r/this.scale,a.width),n=Math.max(s/this.scale,a.height),u.width<i&&(i=Math.min(a.width,i)),u.height<n&&(n=Math.min(a.height,n)),t=Math.min(u.width,t),e=Math.min(u.height,e),t=Math.max(i,t),e=Math.max(n,e),(o===90||o===270)&&(o=t,t=e,e=o,o=i,i=n,n=o),this.qc.ea(),this.Fm(t,e,i,n),this.qc.freeze(),this.qc.u()||E("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.qc.toString()),en(this,!1)}},ot.prototype.Fm=function(){},ot.prototype.Hf=function(){return!1},ot.prototype.arrange=function(t,e,i,n,r){this.El();var o=I.alloc();o.assign(this.yb),this.yb.ea(),Pn(this)===!1?this.yb.h(t,e,i,n):this.Hh(t,e,i,n),this.yb.freeze(),r===void 0?this.Ya=null:this.Ya=r,i=!1,r!==void 0?i=!0:(r=this.panel,r===null||r.type!==V.TableRow&&r.type!==V.TableColumn||(r=r.panel),r!==null&&(r=r.rc,n=this.measuredBounds,this.areaBackground!==null&&(n=this.yb),i=e+n.height,n=t+n.width,i=!(0<=t+.05&&n<=r.width+.05&&0<=e+.05&&i<=r.height+.05),this instanceof qt&&(t=this.naturalBounds,this.us>t.height||this.ub>t.width))&&(i=!0)),this.F=i?this.F|256:this.F&-257,this.yb.u()||E("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.yb.toString()),this.Gm(o,this.yb),Us(this,!1),I.free(o)},l=ot.prototype,l.Hh=function(){};function p0(t,e,i,n,r){if(t.yb.h(e,i,n,r),!t.desiredSize.u()){var o=t.qc;i=t.jh,e=i.right+i.left;var s=i.top+i.bottom;switch(i=o.width+e,o=o.height+s,n+=e,r+=s,e=er(t,!0),i===n&&o===r&&(e=ve),e){case ve:(i>n||o>r)&&(en(t,!0),t.measure(i>n?n:i,o>r?r:o,0,0));break;case ye:en(t,!0),t.measure(n,r,0,0);break;case _e:en(t,!0),t.measure(n,o,0,0);break;case ei:en(t,!0),t.measure(i,r,0,0)}}}l.Gm=function(t,e){var i=this.part;i!==null&&i.diagram!==null&&(i.selectionObject!==this&&i.resizeObject!==this&&i.rotateObject!==this||Y0(i,!0),this.M(),sy(t,e)||(i.Nh(),this.gp(i)))},l.gp=function(t){this.portId!==null&&(Y0(t,!0),t instanceof Z&&qM(t,this))},l.cc=function(t,e){if(this.visible){var i=this instanceof V&&(this.type===V.TableRow||this.type===V.TableColumn),n=this.yb;if(i||n.width!==0&&n.height!==0&&!isNaN(n.x)&&!isNaN(n.y)){var r=this.opacity;if(r!==0){var o=1;if(r!==1&&(o=t.globalAlpha,t.globalAlpha=o*r),!this.my(t,e))if(i)rM(this,t,e);else{this instanceof z&&this.Ck(!1),i=this.transform;var s=this.panel;(this.F&4096)!=0&&rp(this);var u=this.part,a=!1,f=0;if(u&&e.Ie("drawShadows")&&(a=u.isShadowed)){var c=u.shadowOffset;f=Math.max(c.y,c.x)*e.scale*e.Tb}if(!(c=e.wi||!this.Hf())){var d=this.naturalBounds;c=this.Yh;var g=c.m11,m=c.m21,y=c.dx,x=c.m12,M=c.m22,S=c.dy,N,T=N=0;c=N*g+T*m+y;var C=N*x+T*M+S;N=d.width+f,T=0;var D=N*g+T*m+y;N=N*x+T*M+S,T=Math.min(c,D);var F=Math.min(C,N),$=Math.max(c+0,D)-T,G=Math.max(C+0,N)-F;c=T,C=F,N=d.width+f,T=d.height+f,D=N*g+T*m+y,N=N*x+T*M+S,T=Math.min(c,D),F=Math.min(C,N),$=Math.max(c+$,D)-T,G=Math.max(C+G,N)-F,c=T,C=F,N=0,T=d.height+f,D=N*g+T*m+y,N=N*x+T*M+S,T=Math.min(c,D),F=Math.min(C,N),$=Math.max(c+$,D)-T,G=Math.max(C+G,N)-F,c=T,C=F,f=e.viewportBounds,d=f.x,g=f.y,c=!(c>f.width+d||d>$+c||C>f.height+g||g>G+C)}if(c){if(c=(this.F&256)!=0,t.clipInsteadOfFill&&(c=!1),this instanceof qt&&(t.font=this.font),c){if(C=s.fe()?s.naturalBounds:s.actualBounds,this.Ya!==null?(d=this.Ya,$=d.x,G=d.y,f=d.width,d=d.height):($=Math.max(n.x,C.x),G=Math.max(n.y,C.y),f=Math.min(n.right,C.right)-$,d=Math.min(n.bottom,C.bottom)-G),$>n.width+n.x||n.x>C.width+C.x){r!==1&&(t.globalAlpha=o);return}t.save(),t.beginPath(),t.rect($,G,f,d),t.clip()}if(this.Hf()){if(!u.isVisible()){r!==1&&(t.globalAlpha=o);return}a&&(C=u.shadowOffset,t.Iw(C.x*e.scale*e.Tb,C.y*e.scale*e.Tb,u.shadowBlur),Io(t),t.shadowColor=u.shadowColor)}a&&this.shadowVisible===!0?Io(t):a&&this.shadowVisible===!1&&lo(t),u=this.naturalBounds,this.ec!==null&&(Hi(this,t,this.ec,!0,!0,u,n),this.ec instanceof At&&this.ec.type===Wi?(t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.He(this.ec)):t.fillRect(n.x,n.y,n.width,n.height)),t.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),a&&(s!==null&&(s.F&512)!=0||s!==null&&(s.type===V.Auto||s.type===V.Spot)&&s.rb()!==this)&&this.shadowVisible===null&&lo(t),this.mb!==null&&(f=this.naturalBounds,$=C=0,G=f.width,f=f.height,d=0,this instanceof gt&&(f=this.na.bounds,C=f.x,$=f.y,G=f.width,f=f.height,d=this.strokeWidth),Hi(this,t,this.mb,!0,!1,u,n),this.mb instanceof At&&this.mb.type===Wi?(t.beginPath(),t.rect(C-d/2,$-d/2,G+d,f+d),t.He(this.mb)):t.fillRect(C-d/2,$-d/2,G+d,f+d)),a&&(this.mb!==null||this.ec!==null||s!==null&&(s.F&512)!=0||s!==null&&(s.type===V.Auto||s.type===V.Spot)&&s.rb()!==this)?(op(this,!0),this.shadowVisible===null&&lo(t)):op(this,!1),this.dj(t,e),a&&(this.F&512)!=0&&Io(t),this.Hf()&&a&&lo(t),c?(t.restore(),this instanceof V?t.uc(!0):t.uc(!1)):i.St()||(e=1/(i.m11*i.m22-i.m12*i.m21),t.transform(i.m22*e,-i.m12*e,-i.m21*e,i.m11*e,e*(i.m21*i.dy-i.m22*i.dx),e*(i.m12*i.dx-i.m11*i.dy)))}}r!==1&&(t.globalAlpha=o)}}}},l.my=function(){return!1};function rM(t,e,i){var n=t.yb,r=t.rc;t.ec!==null&&(Hi(t,e,t.ec,!0,!0,r,n),t.ec instanceof At&&t.ec.type===Wi?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.He(t.ec)):e.fillRect(n.x,n.y,n.width,n.height)),t.mb!==null&&(Hi(t,e,t.mb,!0,!1,r,n),t.mb instanceof At&&t.mb.type===Wi?(e.beginPath(),e.rect(n.x,n.y,n.width,n.height),e.He(t.mb)):e.fillRect(n.x,n.y,n.width,n.height)),t.dj(e,i)}l.dj=function(){};function Hi(t,e,i,n,r,o,s){if(i!==null){var u=1,a=1;if(typeof i=="string")n?e.fillStyle=i:e.strokeStyle=i;else if(i.type===Bo)n?e.fillStyle=i.color:e.strokeStyle=i.color;else{var f=0;if(t instanceof gt&&(f=t.strokeWidth),u=o.width,a=o.height,r?(u=s.width,a=s.height):n||(u+=f,a+=f),(o=e instanceof Gs)&&i.ie&&(i.type===sh||i.el===u&&i.xu===a))var c=i.ie;else{var d=0,g=0,m=0,y=0,x=0,M=0;if(M=x=0,r?(x=s.x,M=s.y):n||(x-=f/2,M-=f/2),d=i.start.x*u+i.start.offsetX,g=i.start.y*a+i.start.offsetY,m=i.end.x*u+i.end.offsetX,y=i.end.y*a+i.end.offsetY,d+=x,m+=x,g+=M,y+=M,i.type===ho)c=e.createLinearGradient(d,g,m,y);else if(i.type===Wi)M=isNaN(i.endRadius)?Math.max(u,a)/2:i.endRadius,isNaN(i.startRadius)?(x=0,M=Math.max(u,a)/2):x=i.startRadius,c=e.createRadialGradient(d,g,x,m,y,M);else if(i.type===sh)try{c=e.createPattern(i.pattern,"repeat")}catch(N){c=null}if(i.type!==sh&&(r=i.colorStops,r!==null))for(r=r.iterator;r.next();)c.addColorStop(r.key,r.value);if(o&&(i.ie=c,c!==null&&(i.el=u,i.xu=a),c===null&&i.type===sh&&i.el!==-1)){i.el=-1;var S=t.diagram;S!==null&&i.el===-1&&H(function(){S.Le()},600)}}n?e.fillStyle=c:e.strokeStyle=c}}}l.Hg=function(t){if(t instanceof V)t:{if(this!==t&&t!==null)for(var e=this.panel;e!==null;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},l.If=function(){if(!this.visible)return!1;var t=this.panel;return t!==null?t.If():!0},l.Ig=function(){for(var t=this instanceof V?this:this.panel;t!==null&&t.isEnabled;)t=t.panel;return t===null};function rp(t){if((t.F&2048)!=0){var e=t.qb;if(e.reset(),!t.yb.u()||!t.qc.u()){th(t,!1);return}if(e.translate(t.yb.x-t.qc.x,t.yb.y-t.qc.y),t.scale!==1||t.angle!==0){var i=t.naturalBounds;d0(t,e,i.x,i.y,i.width,i.height)}th(t,!1),ps(t,!0)}(t.F&4096)!=0&&(e=t.panel,e===null?(t.Yh.set(t.qb),t.ol=t.scale,ps(t,!1)):e.Ed!==null&&(i=t.Yh,i.reset(),e.fe()?i.multiply(e.Yh):e.panel!==null&&i.multiply(e.panel.Yh),i.multiply(t.qb),t.ol=t.scale*e.ol,ps(t,!1)))}function d0(t,e,i,n,r,o){if(t.scale!==1&&e.scale(t.scale),t.Yb!==0){var s=Wt;t.Hf()&&t.locationSpot.kb()&&(s=t.locationSpot);var u=k.alloc();if(t instanceof rt&&t.locationObject!==t)for(i=t.locationObject,n=i.naturalBounds,u.Qk(n.x,n.y,n.width,n.height,s),i.eg.sa(u),u.offset(-i.measuredBounds.x,-i.measuredBounds.y),s=i.panel;s!==null&&s!==t;)s.eg.sa(u),u.offset(-s.measuredBounds.x,-s.measuredBounds.y),s=s.panel;else u.Qk(i,n,r,o,s);e.rotate(t.Yb,u.x,u.y),k.free(u)}}l.o=function(t){if(t===void 0&&(t=!1),Eo(this)!==!0){en(this,!0),Us(this,!0);var e=this.panel;e===null||t||e.o()}},l.Bm=function(){Eo(this)!==!0&&(en(this,!0),Us(this,!0))};function bu(t){if(Pn(t)===!1){var e=t.panel;e!==null?e.o():t.Hf()&&(e=t.diagram,e!==null&&(e.vd.add(t),t instanceof Z&&t.td(),e.Eb())),Us(t,!0)}}l.El=function(){(this.F&2048)==0&&(th(this,!0),ps(this,!0))},l.bw=function(){ps(this,!0)},l.M=function(){var t=this.part;t!==null&&t.M()};function er(t,e){var i=t.stretch,n=t.panel;return n!==null&&n.type===V.Table?Ha(t,n.getRowDefinition(t.row),n.getColumnDefinition(t.column),e):n!==null&&n.type===V.Auto&&n.rb()===t?oo(t,ye,e):i===xr?n!==null?n.type===V.Spot&&n.rb()===t?oo(t,ye,e):(i=n.defaultStretch,i===xr?oo(t,ve,e):oo(t,i,e)):oo(t,ve,e):oo(t,i,e)}function Ha(t,e,i,n){var r=t.stretch;if(r!==xr)return oo(t,r,n);var o=r=null;switch(e.stretch){case ei:o=!0;break;case ye:o=!0}switch(i.stretch){case _e:r=!0;break;case ye:r=!0}return e=t.panel.defaultStretch,r===null&&(r=e===_e||e===ye),o===null&&(o=e===ei||e===ye),r===!0&&o===!0?oo(t,ye,n):r===!0?oo(t,_e,n):o===!0?oo(t,ei,n):oo(t,ve,n)}function oo(t,e,i){if(i)return e;if(e===ve||(i=t.desiredSize,i.u()))return ve;if(t=t.angle,!isNaN(i.width))if(t!==90&&t!==270){if(e===_e)return ve;if(e===ye)return ei}else{if(e===ei)return ve;if(e===ye)return _e}if(!isNaN(i.height))if(t!==90&&t!==270){if(e===ei)return ve;if(e===ye)return _e}else{if(e===_e)return ve;if(e===ye)return ei}return e}function op(t,e){t.F=e?t.F|512:t.F&-513}function Dl(t){return(t.F&1024)!=0}function g0(t,e){t.F=e?t.F|1024:t.F&-1025}function th(t,e){t.F=e?t.F|2048:t.F&-2049}function ps(t,e){t.F=e?t.F|4096:t.F&-4097}function Eo(t){return(t.F&8192)!=0}function en(t,e){t.F=e?t.F|8192:t.F&-8193}function Pn(t){return(t.F&16384)!=0}function Us(t,e){t.F=e?t.F|16384:t.F&-16385}l.rj=function(t){this.qg=t},l.ju=function(){},l.Ew=function(t){return this.la.assign(t),bu(this),!0},l.dr=function(t,e){(this.la.x!==t||this.la.y!==e)&&(this.la.h(t,e),this.El())};function Ys(t){var e=t.part;if(e instanceof Z&&(t.portId!==null||t===e.port)){var i=e.diagram;i===null||i.undoManager.isUndoingRedoing||qM(e,t)}}function oM(t){var e=t.diagram;e===null||e.undoManager.isUndoingRedoing||(t instanceof V?t instanceof Z?t.td():t.Ym(t,function(i){Ys(i)}):Ys(t))}l.bind=function(t){t.qd=this;var e=this.hj();e!==null&&xM(e)&&E("Cannot add a Binding to a template that has already been copied: "+t),this.fb===null&&(this.fb=new J),this.fb.add(t)},l.hj=function(){for(var t=this instanceof V?this:this.panel;t!==null;){if(t.ki!==null)return t;t=t.panel}return null},l.Fw=function(t){Ia(this,t)},l.Qw=function(t){t.qd=this,this.Ng===null&&(this.Ng=new ct),this.Ng.add(t.propertyName,t)};function pn(t,e){for(var i=1;i<arguments.length;++i);i=arguments;var n=null,r=null;if(typeof t=="function")r=t;else if(typeof t=="string"){var o=Wa.H(t);typeof o=="function"?(i=Ge(arguments),n=o(i),at(n)||E('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):r=Y.go[t]}if(n===null&&(r!=null&&r.constructor||E("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),n=new r),r=1,n instanceof O&&1<i.length){o=n;var s=i[1];(typeof s=="string"||s instanceof HTMLDivElement)&&(f0(o,s),r++)}for(;r<i.length;r++)o=i[r],o===void 0?E("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+n):sM(n,o);return n}function sM(t,e){if(typeof e=="string")if(t instanceof qt)t.text=e;else if(t instanceof gt)t.figure=e;else if(t instanceof nr)t.source=e;else if(t instanceof V)e=ir.H(e),e!==null&&(t.type=e);else if(t instanceof At){var i=br(At,e);i!==null?t.type=i:E("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof Mt?(e=br(Mt,e),e!==null&&(t.type=e)):t instanceof Ht&&(e=br(Ht,e),e!==null&&(t.type=e));else if(e instanceof ot)t instanceof V||E("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof ke){var n;e.isRow&&typeof t.getRowDefinition=="function"?n=t.getRowDefinition(e.index):e.isRow||typeof t.getColumnDefinition!="function"||(n=t.getColumnDefinition(e.index)),n instanceof ke?n.Bt(e):E("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof K)typeof t.jb=="function"&&t.jb(e);else if(e instanceof $e)t.type=e;else if(e instanceof Me)t instanceof ot||t instanceof ke?t.bind(e):E("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof jr)t instanceof ot?t.Qw(e):E("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof be)t instanceof Mt?t.figures.add(e):E("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof Ht)t instanceof be?t.segments.add(e):E("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof It)t instanceof O||t instanceof dt?t.layout=e:E("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(i=0;i<e.length;i++)sM(t,e[i]);else if(typeof e=="object"&&e!==null)if(t instanceof At){i=new Qi;for(var r in e)n=parseFloat(r),isNaN(n)?i[r]=e[r]:t.addColorStop(n,e[r]);Ia(t,i)}else if(t instanceof ke){e.row!==void 0?(r=e.row,(r==null||r===Infinity||isNaN(r)||0>r)&&E("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+r),t.isRow=!0,t.index=r):e.column!==void 0&&(r=e.column,(r==null||r===Infinity||isNaN(r)||0>r)&&E("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+r),t.isRow=!1,t.index=r),r=new Qi;for(i in e)i!=="row"&&i!=="column"&&(r[i]=e[i]);Ia(t,r)}else Ia(t,e);else E('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Oo(t,e){Wa.add(t,e)}function sp(t,e,i){i===void 0&&(i=null);var n=t[1];if(typeof i=="function"?i(n):typeof n=="string")return t.splice(1,1),n;if(e===void 0)throw Error("no "+(typeof i=="function"?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}X.Object.defineProperties(ot.prototype,{shadowVisible:{get:function(){return this.bm},set:function(t){var e=this.bm;e!==t&&(this.bm=t,this.M(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return this.N!==null?this.N.Tn:null},set:function(t){tn(this);var e=this.N.Tn;e!==t&&(this.N.Tn=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.$l},set:function(t){var e=this.$l;e!==t&&(this.$l=t,this.o(),this.g("segmentOrientation",e,t),t===ji&&(this.angle=0))}},segmentIndex:{get:function(){return this.Kp},set:function(t){t=Math.round(t);var e=this.Kp;e!==t&&(this.Kp=t,this.o(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Yl},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.Yl;e!==t&&(this.Yl=t,this.o(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Zl},set:function(t){var e=this.Zl;e.w(t)||(this.Zl=t=t.G(),this.o(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.Be},set:function(t){var e=this.Be;e!==t&&(this.Be=t,this.o(),this.g("stretch",e,t))}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,this.part!==null&&(this.part.Vj=null),this.g("name",e,t))}},opacity:{get:function(){return this.hb},set:function(t){var e=this.hb;e!==t&&((0>t||1<t)&&lt(t,"0 <= value <= 1",ot,"opacity"),this.hb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,t!==null&&e!==null&&t.M(Al(e,e.actualBounds)))}},visible:{get:function(){return(this.F&1)!=0},set:function(t){var e=(this.F&1)!=0;e!==t&&(this.F^=1,this.g("visible",e,t),e=this.panel,e!==null?e.o():this.Hf()&&this.Pb(t),this.M(),oM(this))}},pickable:{get:function(){return(this.F&2)!=0},set:function(t){var e=(this.F&2)!=0;e!==t&&(this.F^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return(this.F&4)!=0},set:function(t){var e=(this.F&4)!=0;e!==t&&(this.F^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return(this.F&8)!=0},set:function(t){var e=(this.F&8)!=0;e!==t&&(this.F^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return(this.F&16)!=0},set:function(t){var e=(this.F&16)!=0;e!==t&&(this.F^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return(this.F&32)!=0},set:function(t){var e=(this.F&32)!=0;e!==t&&(this.F^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return(this.F&64)!=0},set:function(t){var e=(this.F&64)!=0;e!==t&&(this.F^=64,this.o(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return(this.F&128)!=0},set:function(t){var e=(this.F&128)!=0;e!==t&&(this.F^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.ec},set:function(t){var e=this.ec;e!==t&&(t!==null&&Ol(t,"GraphObject.areaBackground"),t instanceof At&&t.freeze(),this.ec=t,this.M(),this.g("areaBackground",e,t))}},background:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&(t!==null&&Ol(t,"GraphObject.background"),t instanceof At&&t.freeze(),this.mb=t,this.M(),this.g("background",e,t))}},part:{get:function(){if(this.Hf())return this;if(this.Zj!==null)return this.Zj;var t;for(t=this.panel;t;){if(t instanceof rt)return this.Zj=t;t=t.panel}return null}},svg:{get:function(){return this.bq},set:function(t){this.bq=t}},panel:{get:function(){return this.qg}},layer:{get:function(){var t=this.part;return t!==null?t.layer:null}},diagram:{get:function(){var t=this.part;return t!==null?t.diagram:null}},position:{get:function(){return this.la},set:function(t){var e=t.x,i=t.y,n=this.la,r=n.x,o=n.y;(r===e||isNaN(r)&&isNaN(e))&&(o===i||isNaN(o)&&isNaN(i))?this.ju():(t=t.copy(),this.Ew(t,n)&&this.g("position",n.copy(),t.copy()))}},actualBounds:{get:function(){return this.yb}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&(0>=t&&E("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.ya=t,this.o(),this.g("scale",e,t))}},angle:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&(t%=360,0>t&&(t+=360),e!==t&&(this.Yb=t,oM(this),this.o(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Zc},set:function(t){var e=t.width,i=t.height,n=this.Zc,r=n.width,o=n.height;(r===e||isNaN(r)&&isNaN(e))&&(o===i||isNaN(o)&&isNaN(i))||(this.Zc=t=t.G(),this.o(),this instanceof gt&&this.dc(),this.g("desiredSize",n,t),Dl(this)&&(t=this.part,t!==null&&(zs(this,t,"width"),zs(this,t,"height"))))}},width:{get:function(){return this.Zc.width},set:function(t){var e=this.Zc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Zc,this.Zc=t=new pt(t,this.Zc.height).freeze(),this.o(),this instanceof gt&&this.dc(),this.g("desiredSize",e,t),Dl(this)&&(t=this.part,t!==null&&zs(this,t,"width")))}},height:{get:function(){return this.Zc.height},set:function(t){var e=this.Zc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Zc,this.Zc=t=new pt(this.Zc.width,t).freeze(),this.o(),this instanceof gt&&this.dc(),this.g("desiredSize",e,t),Dl(this)&&(t=this.part,t!==null&&zs(this,t,"height")))}},minSize:{get:function(){return this.hg},set:function(t){var e=this.hg;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.hg=t,this.o(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.gg},set:function(t){var e=this.gg;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=Infinity),isNaN(t.height)&&(t.height=Infinity),t.freeze(),this.gg=t,this.o(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.qc}},naturalBounds:{get:function(){return this.rc}},margin:{get:function(){return this.jh},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.jh;e.w(t)||(this.jh=t=t.G(),this.o(),this.g("margin",e,t))}},transform:{get:function(){return(this.F&2048)!=0&&rp(this),this.qb}},Ed:{get:function(){return(this.F&4096)!=0&&rp(this),this.Yh}},alignment:{get:function(){return this.zb},set:function(t){var e=this.zb;e.w(t)||(t.nc()&&!t.Nb()&&E("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.zb=t=t.G(),bu(this),this.g("alignment",e,t))}},column:{get:function(){return this.Sg},set:function(t){t=Math.round(t);var e=this.Sg;e!==t&&(0>t&&lt(t,">= 0",ot,"column"),this.Sg=t,this.o(),this.g("column",e,t))}},columnSpan:{get:function(){return this.wn},set:function(t){t=Math.round(t);var e=this.wn;e!==t&&(1>t&&lt(t,">= 1",ot,"columnSpan"),this.wn=t,this.o(),this.g("columnSpan",e,t))}},row:{get:function(){return this.Dp},set:function(t){t=Math.round(t);var e=this.Dp;e!==t&&(0>t&&lt(t,">= 0",ot,"row"),this.Dp=t,this.o(),this.g("row",e,t))}},rowSpan:{get:function(){return this.Ep},set:function(t){t=Math.round(t);var e=this.Ep;e!==t&&(1>t&&lt(t,">= 1",ot,"rowSpan"),this.Ep=t,this.o(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.Xp},set:function(t){var e=this.Xp;e!==t&&(this.Xp=t,this.o(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.Yk},set:function(t){var e=this.Yk;e.w(t)||(this.Yk=t=t.G(),this.o(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.qp},set:function(t){var e=this.qp;if(e!==t){var i=this.part;i===null||i instanceof Z||(E("Cannot set portID on a Link: "+t),i=null),e!==null&&i!==null&&H0(i,this),this.qp=t,t!==null&&i!==null&&(i.Mh=!0,eS(i,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return this.O!==null?this.O.Bh:qe},set:function(t){this.Lc();var e=this.O.Bh;e.w(t)||(t=t.G(),this.O.Bh=t,this.g("toSpot",e,t),Ys(this))}},toEndSegmentLength:{get:function(){return this.O!==null?this.O.zh:10},set:function(t){this.Lc();var e=this.O.zh;e!==t&&(0>t&&lt(t,">= 0",ot,"toEndSegmentLength"),this.O.zh=t,this.g("toEndSegmentLength",e,t),Ys(this))}},toShortLength:{get:function(){return this.O!==null?this.O.Ah:0},set:function(t){this.Lc();var e=this.O.Ah;e!==t&&(this.O.Ah=t,this.g("toShortLength",e,t),Ys(this))}},toLinkable:{get:function(){return this.O!==null?this.O.gq:null},set:function(t){this.Lc();var e=this.O.gq;e!==t&&(this.O.gq=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return this.O!==null?this.O.hq:Infinity},set:function(t){this.Lc();var e=this.O.hq;e!==t&&(0>t&&lt(t,">= 0",ot,"toMaxLinks"),this.O.hq=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return this.O!==null?this.O.bh:qe},set:function(t){this.Lc();var e=this.O.bh;e.w(t)||(t=t.G(),this.O.bh=t,this.g("fromSpot",e,t),Ys(this))}},fromEndSegmentLength:{get:function(){return this.O!==null?this.O.$g:10},set:function(t){this.Lc();var e=this.O.$g;e!==t&&(0>t&&lt(t,">= 0",ot,"fromEndSegmentLength"),this.O.$g=t,this.g("fromEndSegmentLength",e,t),Ys(this))}},fromShortLength:{get:function(){return this.O!==null?this.O.ah:0},set:function(t){this.Lc();var e=this.O.ah;e!==t&&(this.O.ah=t,this.g("fromShortLength",e,t),Ys(this))}},fromLinkable:{get:function(){return this.O!==null?this.O.$n:null},set:function(t){this.Lc();var e=this.O.$n;e!==t&&(this.O.$n=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return this.O!==null?this.O.ao:Infinity},set:function(t){this.Lc();var e=this.O.ao;e!==t&&(0>t&&lt(t,">= 0",ot,"fromMaxLinks"),this.O.ao=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.ni},set:function(t){var e=this.ni;e!==t&&(this.ni=t,this.g("cursor",e,t))}},click:{get:function(){return this.N!==null?this.N.Rf:null},set:function(t){tn(this);var e=this.N.Rf;e!==t&&(this.N.Rf=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.N!==null?this.N.Wf:null},set:function(t){tn(this);var e=this.N.Wf;e!==t&&(this.N.Wf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.N!==null?this.N.Sf:null},set:function(t){tn(this);var e=this.N.Sf;e!==t&&(this.N.Sf=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return this.N!==null?this.N.jg:null},set:function(t){tn(this);var e=this.N.jg;e!==t&&(this.N.jg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.N!==null?this.N.mg:null},set:function(t){tn(this);var e=this.N.mg;e!==t&&(this.N.mg=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return this.N!==null?this.N.ng:null},set:function(t){tn(this);var e=this.N.ng;e!==t&&(this.N.ng=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.N!==null?this.N.lg:null},set:function(t){tn(this);var e=this.N.lg;e!==t&&(this.N.lg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.N!==null?this.N.kg:null},set:function(t){tn(this);var e=this.N.kg;e!==t&&(this.N.kg=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return this.N!==null?this.N.Uo:null},set:function(t){tn(this);var e=this.N.Uo;e!==t&&(this.N.Uo=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return this.N!==null?this.N.Vo:null},set:function(t){tn(this);var e=this.N.Vo;e!==t&&(this.N.Vo=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return this.N!==null?this.N.ig:null},set:function(t){tn(this);var e=this.N.ig;e!==t&&(this.N.ig=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return this.N!==null?this.N.dn:null},set:function(t){tn(this);var e=this.N.dn;e!==t&&(this.N.dn=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return this.N!==null?this.N.en:null},set:function(t){tn(this);var e=this.N.en;e!==t&&(this.N.en=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return this.N!==null?this.N.fn:null},set:function(t){tn(this);var e=this.N.fn;e!==t&&(this.N.fn=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return this.N!==null?this.N.cn:null},set:function(t){tn(this);var e=this.N.cn;e!==t&&(this.N.cn=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return this.N!==null?this.N.xg:null},set:function(t){tn(this);var e=this.N.xg;e!==t&&(this.N.xg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.N!==null?this.N.Tf:null},set:function(t){tn(this);var e=this.N.Tf;e!==t&&(this.N.Tf=t,this.g("contextMenu",e,t))}}}),ot.prototype.trigger=ot.prototype.Qw,ot.prototype.setProperties=ot.prototype.Fw,ot.prototype.findTemplateBinder=ot.prototype.hj,ot.prototype.bind=ot.prototype.bind,ot.prototype.isEnabledObject=ot.prototype.Ig,ot.prototype.isVisibleObject=ot.prototype.If,ot.prototype.isContainedBy=ot.prototype.Hg,ot.prototype.getNearestIntersectionPoint=ot.prototype.Mt,ot.prototype.getLocalPoint=ot.prototype.Lt,ot.prototype.getDocumentScale=ot.prototype.Cf,ot.prototype.getDocumentAngle=ot.prototype.kj,ot.prototype.getDocumentBounds=ot.prototype.lj,ot.prototype.getDocumentPoint=ot.prototype.da,ot.prototype.intersectsRect=ot.prototype.Nc,ot.prototype.containedInRect=ot.prototype.Ih,ot.prototype.containsRect=ot.prototype.Ee,ot.prototype.containsPoint=ot.prototype.$,ot.prototype.raiseChanged=ot.prototype.g,ot.prototype.raiseChangedEvent=ot.prototype.bb,ot.prototype.addCopyProperty=ot.prototype.Ux;var Wa=null;ot.className="GraphObject",Wa=new ct,Oo("Button",function(){function t(i,n){return i.diagram.Vb(i.documentPoint,function(r){for(;r.panel!==null&&!r.isActionable;)r=r.panel;return r},function(r){return r===n})!==null}var e=pn(V,V.Auto,{isActionable:!0,enabledChanged:function(i,n){if(i instanceof V){var r=i.ab("ButtonBorder");r!==null&&(r.fill=n?i._buttonFillNormal:i._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},pn(gt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new st(0,0,2.76142374915397,2.761423749153969),spot2:new st(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(i,n){if(n.Ig()&&n instanceof V&&(i=n.ab("ButtonBorder"),i instanceof gt)){var r=n._buttonFillOver;n._buttonFillNormal=i.fill,i.fill=r,r=n._buttonStrokeOver,n._buttonStrokeNormal=i.stroke,i.stroke=r}},e.mouseLeave=function(i,n){n.Ig()&&n instanceof V&&(i=n.ab("ButtonBorder"),i instanceof gt&&(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal))},e.actionDown=function(i,n){if(n.Ig()&&n instanceof V&&n._buttonFillPressed!==null&&i.button===0){var r=n.ab("ButtonBorder");if(r instanceof gt){i=i.diagram;var o=i.skipsUndoManager;i.skipsUndoManager=!0;var s=n._buttonFillPressed;n._buttonFillOver=r.fill,r.fill=s,s=n._buttonStrokePressed,n._buttonStrokeOver=r.stroke,r.stroke=s,i.skipsUndoManager=o}}},e.actionUp=function(i,n){if(n.Ig()&&n instanceof V&&n._buttonFillPressed!==null&&i.button===0){var r=n.ab("ButtonBorder");if(r instanceof gt){var o=i.diagram,s=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),o.skipsUndoManager=s}}},e.actionCancel=function(i,n){if(n.Ig()&&n instanceof V&&n._buttonFillPressed!==null){var r=n.ab("ButtonBorder");if(r instanceof gt){var o=i.diagram,s=o.skipsUndoManager;o.skipsUndoManager=!0,t(i,n)?(r.fill=n._buttonFillOver,r.stroke=n._buttonStrokeOver):(r.fill=n._buttonFillNormal,r.stroke=n._buttonStrokeNormal),o.skipsUndoManager=s}}},e.actionMove=function(i,n){if(n.Ig()&&n instanceof V&&n._buttonFillPressed!==null){var r=i.diagram;if(r.firstInput.button===0&&(r.currentTool.standardMouseOver(),t(i,n)&&(i=n.ab("ButtonBorder"),i instanceof gt))){var o=r.skipsUndoManager;r.skipsUndoManager=!0;var s=n._buttonFillPressed;i.fill!==s&&(i.fill=s),s=n._buttonStrokePressed,i.stroke!==s&&(i.stroke=s),r.skipsUndoManager=o}}},e}),Oo("TreeExpanderButton",function(){var t=pn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},pn(gt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:wl},new Me("figure","isTreeExpanded",function(e,i){return i=i.panel,e?i._treeExpandedFigure:i._treeCollapsedFigure}).Sq()),{visible:!1},new Me("visible","isTreeLeaf",function(e){return!e}).Sq());return t.click=function(e,i){if(i=i.part,i instanceof Ct&&(i=i.adornedPart),i instanceof Z){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isTreeExpanded){if(!n.canCollapseTree(i))return}else if(!n.canExpandTree(i))return;e.handled=!0,i.isTreeExpanded?n.collapseTree(i):n.expandTree(i)}}},t}),Oo("SubGraphExpanderButton",function(){var t=pn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},pn(gt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:wl},new Me("figure","isSubGraphExpanded",function(e,i){return i=i.panel,e?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).Sq()));return t.click=function(e,i){if(i=i.part,i instanceof Ct&&(i=i.adornedPart),i instanceof dt){var n=i.diagram;if(n!==null){if(n=n.commandHandler,i.isSubGraphExpanded){if(!n.canCollapseSubGraph(i))return}else if(!n.canExpandSubGraph(i))return;e.handled=!0,i.isSubGraphExpanded?n.collapseSubGraph(i):n.expandSubGraph(i)}}},t}),Oo("ToolTip",function(){return pn(Ct,V.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new k(0,3),shadowBlur:5},pn(gt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new st(0,0,4,6),spot2:new st(1,1,-4,-4)}))}),Oo("ContextMenu",function(){return pn(Ct,V.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new k(0,3),shadowBlur:5},new Me("background","",function(t){return t.adornedPart!==null&&t.placeholder!==null?null:"#F5F5F5"}))}),Oo("ContextMenuButton",function(){var t=pn("Button");t.stretch=_e;var e=t.ab("ButtonBorder");return e instanceof gt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new st(0,0,2,3),e.spot2=new st(1,1,-2,-2)),t}),Oo("PanelExpanderButton",function(t){var e=sp(t,"COLLAPSIBLE"),i=pn("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},pn(gt,{name:"ButtonIcon",strokeWidth:2},new Me("geometryString","visible",function(n){return n?i._buttonExpandedFigure:i._buttonCollapsedFigure}).Sq(e)));return t=i.ab("ButtonBorder"),t instanceof gt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),i.click=function(n,r){var o=r.diagram;if(o!==null&&!o.isReadOnly){var s=r.hj();s===null&&(s=r.part),s!==null&&(r=s.ab(e),r!==null&&(n.handled=!0,o.xa("Collapse/Expand Panel"),r.visible=!r.visible,o.Wa("Collapse/Expand Panel")))}},i}),Oo("CheckBoxButton",function(t){var e=sp(t);return t=pn("Button",{desiredSize:new pt(14,14)},pn(gt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:ye,geometryStretch:vr,visible:!1},e!==""?new Me("visible",e).Ky():[])),t.click=function(i,n){if(n instanceof V){var r=i.diagram;if(!(r===null||r.isReadOnly||e!==""&&r.model.isReadOnly)){i.handled=!0;var o=n.ab("ButtonIcon");r.xa("checkbox"),o.visible=!o.visible,typeof n._doClick=="function"&&n._doClick(i,n),r.Wa("checkbox")}}},t}),Oo("CheckBox",function(t){t=sp(t),t=pn("CheckBoxButton",t,{name:"Button",isActionable:!1,margin:new Rt(0,1,0,0)});var e=pn(V,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),ot.None=ve=new K(ot,"None",0),ot.Default=xr=new K(ot,"Default",0),ot.Vertical=ei=new K(ot,"Vertical",4),ot.Horizontal=_e=new K(ot,"Horizontal",5),ot.Fill=ye=new K(ot,"Fill",3),ot.Uniform=vr=new K(ot,"Uniform",1),ot.UniformToFill=Ua=new K(ot,"UniformToFill",2),ot.FlipVertical=Ya=new K(ot,"FlipVertical",1),ot.FlipHorizontal=Ga=new K(ot,"FlipHorizontal",2),ot.FlipBoth=Xa=new K(ot,"FlipBoth",3),ot.make=pn,ot.getBuilders=function(){var t=new ct,e;for(e in Wa)if(e!==e.toLowerCase()){var i=Wa.H(e);typeof i=="function"&&t.add(e,i)}return t.freeze(),t},ot.defineBuilder=Oo,ot.takeBuilderArgument=sp;function lp(){this.Tn=this.Tf=this.xg=this.cn=this.fn=this.en=this.dn=this.ig=this.Vo=this.Uo=this.kg=this.lg=this.ng=this.mg=this.jg=this.Sf=this.Wf=this.Rf=null}lp.prototype.copy=function(){var t=new lp;return t.Rf=this.Rf,t.Wf=this.Wf,t.Sf=this.Sf,t.jg=this.jg,t.mg=this.mg,t.ng=this.ng,t.lg=this.lg,t.kg=this.kg,t.Uo=this.Uo,t.Vo=this.Vo,t.ig=this.ig,t.dn=this.dn,t.en=this.en,t.fn=this.fn,t.cn=this.cn,t.xg=this.xg,t.Tf=this.Tf,t.Tn=this.Tn,t},lp.className="GraphObjectEventHandlers";function ds(){this.Ma=[1,0,0,1,0,0]}ds.prototype.copy=function(){var t=new ds;return t.Ma[0]=this.Ma[0],t.Ma[1]=this.Ma[1],t.Ma[2]=this.Ma[2],t.Ma[3]=this.Ma[3],t.Ma[4]=this.Ma[4],t.Ma[5]=this.Ma[5],t},ds.prototype.translate=function(t,e){this.Ma[4]+=this.Ma[0]*t+this.Ma[2]*e,this.Ma[5]+=this.Ma[1]*t+this.Ma[3]*e},ds.prototype.scale=function(t,e){this.Ma[0]*=t,this.Ma[1]*=t,this.Ma[2]*=e,this.Ma[3]*=e},ds.className="STransform";function eh(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.ey=[],this.pattern=null}eh.prototype.addColorStop=function(t,e){this.ey.push({offset:t,color:e})},eh.className="SGradient";function so(t,e){this.ownerDocument=t=e===void 0?Y.document:e,this.LA="http://www.w3.org/2000/svg",t!==void 0&&(this.Ga=this.xb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.zq=null,this.context=new El(this)}so.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.style.width=i+"px",this.style.height=n+"px",this.Ga.setAttributeNS(null,"width",i+"px"),this.Ga.setAttributeNS(null,"height",n+"px"),this.Ga.setAttributeNS(null,"viewBox","0 0 "+i+" "+n),this.context.av.firstElementChild.setAttributeNS(null,"width",i+"px"),this.context.av.firstElementChild.setAttributeNS(null,"height",n+"px"),!0):!1},so.prototype.xb=function(t,e,i){if(t=this.ownerDocument.createElementNS(this.LA,t),at(e))for(var n in e)t.setAttributeNS(n==="href"?"http://www.w3.org/1999/xlink":"",n,e[n]);return i!==void 0&&(t.textContent=i),t},so.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},so.prototype.focus=function(){this.Ga.focus()},so.prototype.ly=function(){this.ownerDocument=null},X.Object.defineProperties(so.prototype,{width:{get:function(){return this.Ga.width.baseVal.value},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height.baseVal.value},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),so.className="SVGSurface";function El(t){this.Rk=t,this.svg=t.Ga,this.stack=[],this.Ac=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.lf=this.Tp=this.Sp=0,this.Mq=null,this.path=[],this.Su=!1,this.uh=null,this.vh=0,this.ae=new ds,Ao(this,1,0,0,1,0,0);var e=ko++,i=this.xb("clipPath",{id:"mainClip"+e});i.appendChild(this.xb("rect",{x:0,y:0,width:t.width,height:t.height})),this.av=i,this.Rk.Ga.appendChild(i),this.Ac[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.NA={}}l=El.prototype,l.reset=function(){this.stack=[],this.Ac=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.lf=this.Tp=this.Sp=0,this.Mq=null,this.path=[],this.ae=new ds,Ao(this,1,0,0,1,0,0);var t=ko++,e=this.xb("clipPath",{id:"mainClip"+t});e.appendChild(this.xb("rect",{x:0,y:0,width:this.Rk.width,height:this.Rk.height})),this.av=e,this.Rk.Ga.appendChild(e),this.Ac[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")},l.arc=function(t,e,i,n,r,o,s,u){var a=2*Math.PI,f=a-1e-6,c=i*Math.cos(n),d=i*Math.sin(n),g=t+c,m=e+d,y=o?0:1;n=o?n-r:r-n,(1e-6<Math.abs(s-g)||1e-6<Math.abs(u-m))&&this.path.push(["L",g,+m]),0>n&&(n=n%a+a),n>f?(this.path.push(["A",i,i,0,1,y,t-c,e-d]),this.path.push(["A",i,i,0,1,y,g,m])):1e-6<n&&this.path.push(["A",i,i,0,+(n>=Math.PI),y,t+i*Math.cos(r),e+i*Math.sin(r)])},l.beginPath=function(){this.path=[]},l.bezierCurveTo=function(t,e,i,n,r,o){this.path.push(["C",t,e,i,n,r,o])},l.clearRect=function(){},l.clip=function(){this.addPath("clipPath",this.path,this.ae),this.addPath("clipPath",this.path,new ds)},l.closePath=function(){this.path.push(["z"])},l.createLinearGradient=function(t,e,i,n){var r=new eh("linear");return r.x1=t,r.y1=e,r.x2=i,r.y2=n,r},l.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var i=this.NA;if(i[e])return"url(#"+i[e]+")";var n="PATTERN"+ko++,r={x:0,y:0,width:t.width,height:t.height,href:e};return t=this.xb("pattern",{width:t.width,height:t.height,id:n,patternUnits:"userSpaceOnUse"}),t.appendChild(this.xb(qu,r)),this.svg.appendChild(t),i[e]=n,"url(#"+n+")"},l.createRadialGradient=function(t,e,i,n,r,o){var s=new eh("radial");return s.x1=t,s.y1=e,s.r1=i,s.x2=n,s.y2=r,s.r2=o,s},l.drawImage=function(t,e,i,n,r,o,s,u,a){var f="";t instanceof HTMLCanvasElement&&(f=t.toDataURL()),t instanceof HTMLImageElement&&(f=t.getAttribute("src"));var c=t instanceof HTMLImageElement?t.naturalWidth:t.width,d=t instanceof HTMLImageElement?t.naturalHeight:t.height;n===void 0&&(o=e,s=i,u=n=c,a=r=d),n=n||0,r=r||0,o=o||0,s=s||0,u=u||0,a=a||0,t={x:0,y:0,width:c||n,height:d||r,href:f},j.aa(n,u)&&j.aa(r,a)?f.toLowerCase().indexOf(".svg")===-1&&f.toLowerCase().indexOf("data:image/svg")===-1&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",f="",u/=n,a/=r,(o!==0||s!==0)&&(f+=" translate("+o+", "+s+")"),(u!==1||a!==1)&&(f+=" scale("+u+", "+a+")"),(e!==0||i!==0)&&(f+=" translate("+-e+", "+-i+")"),(e!==0||i!==0||n!==c||r!==d)&&(o="CLIP"+ko++,s=this.xb("clipPath",{id:o}),s.appendChild(this.xb("rect",{x:e,y:i,width:n,height:r})),this.svg.appendChild(s),t["clip-path"]="url(#"+o+")"),Ka(this,qu,t,this.ae,f),this.addElement(qu,t)},l.fill=function(){this.addPath("fill",this.path,this.ae)},l.He=function(){this.clipInsteadOfFill?this.clip():this.fill()},l.fillRect=function(t,e,i,n){t=[t,e,i,n],t={x:t[0],y:t[1],width:t[2],height:t[3]},Ka(this,"fill",t,this.ae),this.addElement("rect",t)},l.fillText=function(t,e,i){t=[t,e,i],e=this.textAlign,e==="left"?e="start":e==="right"?e="end":e==="center"&&(e="middle"),e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},Ka(this,"fill",e,this.ae),this.addElement("text",e,t[0])},l.lineTo=function(t,e){this.path.push(["L",t,e])},l.moveTo=function(t,e){this.path.push(["M",t,e])},l.quadraticCurveTo=function(t,e,i,n){this.path.push(["Q",t,e,i,n])},l.rect=function(t,e,i,n){this.path.push(["M",t,e],["L",t+i,e],["L",t+i,e+n],["L",t,e+n],["z"])},l.restore=function(){this.ae=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},l.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.ae.copy())},l.setTransform=function(t,e,i,n,r,o){t===1&&e===0&&i===0&&n===1&&r===0&&o===0||Ao(this,t,e,i,n,r,o)},l.scale=function(t,e){this.ae.scale(t,e)},l.translate=function(t,e){this.ae.translate(t,e)},l.transform=function(){},l.stroke=function(){this.addPath("stroke",this.path,this.ae)},l.uj=function(){this.clipInsteadOfFill||this.stroke()},l.xb=function(t,e,i){return this.Rk.xb(t,e,i)},l.addElement=function(t,e,i){return t=this.xb(t,e,i),0<this.Ac.length?this.Ac[this.Ac.length-1].appendChild(t):this.svg.appendChild(t),this.Mq=t};function Ka(t,e,i,n,r){t.globalAlpha!==1&&(i.opacity=t.globalAlpha),e==="fill"?(t.fillStyle instanceof eh?i.fill=lM(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),i.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",i["fill-opacity"]=t[4]):i.fill=t.fillStyle,i.stroke="none"):e==="stroke"&&(i.fill="none",t.strokeStyle instanceof eh?i.stroke=lM(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),i.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",i["stroke-opacity"]=e[4]):i.stroke=t.strokeStyle,i["stroke-width"]=t.lineWidth,i["stroke-linecap"]=t.lineCap,i["stroke-linejoin"]=t.lineJoin,i["stroke-miterlimit"]=t.miterLimit),n=n.Ma,n="matrix("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")",r!==void 0&&(n+=r),i.transform=n}function lM(t,e){var i="GRAD"+ko++;if(e.type==="linear")var n=t.xb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:i,gradientUnits:"userSpaceOnUse"});else if(e.type==="radial")n=t.xb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:i});else throw Error("invalid gradient");var r=e.ey;e=r.length;for(var o=[],s=0;s<e;s++){var u=r[s],a=u.color;u={offset:u.offset,"stop-color":a},/^rgba\(/.test(a)&&(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a),u["stop-color"]="rgb("+a[1]+","+a[2]+","+a[3]+")",u["stop-opacity"]=a[4]),o.push(u)}for(o.sort(function(f,c){return f.offset>c.offset?1:-1}),r=0;r<e;r++)n.appendChild(t.xb("stop",o[r]));return t.svg.appendChild(n),"url(#"+i+")"}l.addPath=function(t,e,i){for(var n=[],r=0;r<e.length;r++){var o=Ge(e[r]),s=[o.shift()];if(s[0]==="A")s.push(o.shift()+","+o.shift(),o.shift(),o.shift()+","+o.shift(),o.shift()+","+o.shift());else for(;o.length;)s.push(o.shift()+","+o.shift());n.push(s.join(" "))}e={d:n.join(" ")},t==="stroke"&&this.Su&&(e["stroke-dasharray"]=this.uh.toString(),e["stroke-dashoffset"]=this.vh),Ka(this,t,e,i),t==="clipPath"?(t="CLIP"+ko++,i=this.xb("clipPath",{id:t}),i.appendChild(this.xb("path",e)),this.svg.appendChild(i),0<this.Ac.length&&this.Ac[this.Ac.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)};function Ao(t,e,i,n,r,o,s){var u=new ds;u.Ma=[e,i,n,r,o,s],e={},Ka(t,"g",e,u),u=t.addElement("g",e),t.Ac.push(u)}l.er=function(){if(this.shadowOffsetX!==0||this.shadowOffsetY!==0||this.shadowBlur!==0){var t="SHADOW"+ko++,e=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),i=this.xb("feGaussianBlur",{in:"SourceAlpha",result:"blur",yB:this.shadowBlur/2}),n=this.xb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),r=this.xb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),o=this.xb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),s=this.xb("feMerge",{});s.appendChild(this.xb("feMergeNode",{in:"offsetBlur"})),s.appendChild(this.xb("feMergeNode",{in:"SourceGraphic"})),e.appendChild(i),e.appendChild(n),e.appendChild(r),e.appendChild(o),e.appendChild(s),0<this.Ac.length&&this.Ac[this.Ac.length-1].setAttributeNS(null,"filter","url(#"+t+")")}},l.Iw=function(t,e,i){this.Sp=t,this.Tp=e,this.lf=i};function lo(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Io(t){t.shadowOffsetX=t.Sp,t.shadowOffsetY=t.Tp,t.shadowBlur=t.lf}l.Et=function(t,e){this.Su=!0,this.uh=t,this.vh=e},l.Ct=function(){this.Su=!1},l.uc=function(){},l.Uy=function(){},El.prototype.rotate=function(){},El.prototype.getImageData=function(){return null},El.prototype.measureText=function(){return null},El.className="SVGContext",O.prototype.Yt=function(t){var e=new so(this,Y.document);t===void 0&&(t=new Qi);var i=this;return Yw(this,function(n,r){return n=Gw(i,n,"SVG",e),n=n!==null?n.svg:null,typeof r=="function"?(r(n),null):n},t)},O.prototype.makeSvg=O.prototype.Yt,O.prototype.gw=function(t){return this.Yt(t)},O.prototype.makeSVG=O.prototype.gw,ot.prototype.my=function(t,e){if(!(t instanceof El))return!1;if(!this.visible)return!0;var i=null,n=t.Mq;if(this instanceof V&&(this.type===V.TableRow||this.type===V.TableColumn))return rM(this,t,e),!0;var r=this.yb;if(r.width===0||r.height===0||isNaN(r.x)||isNaN(r.y))return!0;var o=this.transform,s=this.panel;(this.F&4096)!=0&&rp(this);var u=(this.F&256)!=0,a=!1;if(this instanceof qt&&(t.font=this.font),u){if(a=s.fe()?s.naturalBounds:s.actualBounds,this.Ya!==null){var f=this.Ya,c=f.x,d=f.y,g=f.width;f=f.height}else c=Math.max(r.x,a.x),d=Math.max(r.y,a.y),g=Math.min(r.right,a.right)-c,f=Math.min(r.bottom,a.bottom)-d;if(c>r.width+r.x||r.x>a.width+a.x||d>r.height+r.y||r.y>a.height+a.y)return!0;a=!0,Ao(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(c,d,g,f),t.clip()}if(this.Hf()&&!this.isVisible())return!0;if(t.ae.Ma=[1,0,0,1,0,0],(this instanceof qt&&1<this.lineCount||this instanceof gt&&1<this.geometry.figures.length)&&Ao(t,1,0,0,1,0,0),c=!1,this.Hf()&&this.isShadowed&&e.Ie("drawShadows")&&(d=this.shadowOffset,t.Iw(d.x*e.scale*e.Tb,d.y*e.scale*e.Tb,this.shadowBlur),Io(t),t.shadowColor=this.shadowColor),d=!1,this.part&&e.Ie("drawShadows")&&(d=this.part.isShadowed),this.shadowVisible===!0?(Io(t),c===!1&&d&&(Ao(t,1,0,0,1,0,0),t.er(),c=!0)):this.shadowVisible===!1&&lo(t),g=this.naturalBounds,this.areaBackground!==null&&(Hi(this,t,this.areaBackground,!0,!0,g,r),c===!1&&d&&(Ao(t,1,0,0,1,0,0),t.er(),c=!0),this.areaBackground instanceof At&&this.areaBackground.type===Wi?(t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.He(this.areaBackground)):t.fillRect(r.x,r.y,r.width,r.height)),this instanceof V?Ao(t,o.m11,o.m12,o.m21,o.m22,o.dx,o.dy):t.ae.Ma=[o.m11,o.m12,o.m21,o.m22,o.dx,o.dy],this.background!==null){c===!1&&d&&(Ao(t,1,0,0,1,0,0),t.er(),c=!0);var m=this.naturalBounds;f=o=0;var y=m.width;m=m.height;var x=0;this instanceof gt&&(m=this.geometry.bounds,o=m.x,f=m.y,y=m.width,m=m.height,x=this.strokeWidth),Hi(this,t,this.background,!0,!1,g,r),this.background instanceof At&&this.background.type===Wi?(t.beginPath(),t.rect(o-x/2,f-x/2,y+x,m+x),t.He(this.background)):t.fillRect(o-x/2,f-x/2,y+x,m+x)}return d&&(this.background!==null||this.areaBackground!==null||s!==null&&(s.F&512)!=0||s!==null&&(s.type===V.Auto||s.type===V.Spot)&&s.rb()!==this)?(op(this,!0),this.shadowVisible===null&&lo(t)):op(this,!1),this.dj(t,e),d&&(this.F&512)!=0&&Io(t),this.Hf()&&d&&lo(t),u&&(t.restore(),a&&t.Ac.pop()),this instanceof V&&(i=t.Ac.pop()),c===!0&&t.Ac.pop(),(this instanceof qt&&1<this.lineCount||this instanceof gt&&1<this.geometry.figures.length)&&(i=t.Ac.pop()),t.Rk.zq!==null&&(i===null&&(n===t.Mq?(Ao(t,1,0,0,1,0,0),i=t.Ac.pop()):i=t.Mq),t.Rk.zq(this,i)),this.svg=i,!0};function Nn(t,e){this.ownerDocument=e=e===void 0?Y.document:e,this.zq=null,e=e.createElement("canvas"),e.tabIndex=0,this.Ga=e,this.Ga.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new Gs(e),e.B=t}Nn.prototype.resize=function(t,e,i,n){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.style.width=i+"px",this.style.height=n+"px",!0):!1},Nn.prototype.toDataURL=function(t,e){return this.Ga.toDataURL(t,e)},Nn.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},Nn.prototype.focus=function(){this.Ga.focus()},Nn.prototype.ly=function(){this.ownerDocument=this.Ga.B=null},X.Object.defineProperties(Nn.prototype,{width:{get:function(){return this.Ga.width},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),Nn.className="CanvasSurface";function Gs(t){t.getContext&&t.getContext("2d")||E("Browser does not support HTML Canvas Element"),this.Y=t.getContext("2d"),this.uu=this.wu=this.vu="",this.vn=!1,this.lf=this.Tp=this.Sp=0}l=Gs.prototype,l.Uy=function(t){this.Y.imageSmoothingEnabled=t},l.arc=function(t,e,i,n,r,o){this.Y.arc(t,e,i,n,r,o)},l.beginPath=function(){this.Y.beginPath()},l.bezierCurveTo=function(t,e,i,n,r,o){this.Y.bezierCurveTo(t,e,i,n,r,o)},l.clearRect=function(t,e,i,n){this.Y.clearRect(t,e,i,n)},l.clip=function(){this.Y.clip()},l.closePath=function(){this.Y.closePath()},l.createLinearGradient=function(t,e,i,n){return this.Y.createLinearGradient(t,e,i,n)},l.createPattern=function(t,e){return this.Y.createPattern(t,e)},l.createRadialGradient=function(t,e,i,n,r,o){return this.Y.createRadialGradient(t,e,i,n,r,o)},l.drawImage=function(t,e,i,n,r,o,s,u,a){n===void 0?this.Y.drawImage(t,e,i):this.Y.drawImage(t,e,i,n,r,o,s,u,a)},l.fill=function(){this.Y.fill()},l.fillRect=function(t,e,i,n){this.Y.fillRect(t,e,i,n)},l.fillText=function(t,e,i){this.Y.fillText(t,e,i)},l.getImageData=function(t,e,i,n){return this.Y.getImageData(t,e,i,n)},l.lineTo=function(t,e){this.Y.lineTo(t,e)},l.measureText=function(t){return this.Y.measureText(t)},l.moveTo=function(t,e){this.Y.moveTo(t,e)},l.quadraticCurveTo=function(t,e,i,n){this.Y.quadraticCurveTo(t,e,i,n)},l.rect=function(t,e,i,n){this.Y.rect(t,e,i,n)},l.restore=function(){this.Y.restore()},Gs.prototype.rotate=function(t){this.Y.rotate(t)},l=Gs.prototype,l.save=function(){this.Y.save()},l.setTransform=function(t,e,i,n,r,o){this.Y.setTransform(t,e,i,n,r,o)},l.scale=function(t,e){this.Y.scale(t,e)},l.stroke=function(){this.Y.stroke()},l.transform=function(t,e,i,n,r,o){t===1&&e===0&&i===0&&n===1&&r===0&&o===0||this.Y.transform(t,e,i,n,r,o)},l.translate=function(t,e){this.Y.translate(t,e)},l.He=function(t){if(t instanceof At&&t.type===Wi){var e=t.el;t=t.xu,t>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.vn?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.vn?this.clip():this.fill()},l.uj=function(){this.vn||this.stroke()},l.Iw=function(t,e,i){this.Sp=t,this.Tp=e,this.lf=i},l.Et=function(t,e){var i=this.Y;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)},l.Ct=function(){var t=this.Y;t.setLineDash!==void 0&&(t.setLineDash(aT),t.lineDashOffset=0)},l.uc=function(t){t&&(this.vu=""),this.uu=this.wu=""},X.Object.defineProperties(Gs.prototype,{fillStyle:{get:function(){return this.Y.fillStyle},set:function(t){this.uu!==t&&(this.uu=this.Y.fillStyle=t)}},font:{get:function(){return this.Y.font},set:function(t){this.vu!==t&&(this.vu=this.Y.font=t)}},globalAlpha:{get:function(){return this.Y.globalAlpha},set:function(t){this.Y.globalAlpha=t}},lineCap:{get:function(){return this.Y.lineCap},set:function(t){this.Y.lineCap=t}},lineDashOffset:{get:function(){return this.Y.lineDashOffset},set:function(t){this.Y.lineDashOffset=t}},lineJoin:{get:function(){return this.Y.lineJoin},set:function(t){this.Y.lineJoin=t}},lineWidth:{get:function(){return this.Y.lineWidth},set:function(t){this.Y.lineWidth=t}},miterLimit:{get:function(){return this.Y.miterLimit},set:function(t){this.Y.miterLimit=t}},shadowBlur:{get:function(){return this.Y.shadowBlur},set:function(t){this.Y.shadowBlur=t}},shadowColor:{get:function(){return this.Y.shadowColor},set:function(t){this.Y.shadowColor=t}},shadowOffsetX:{get:function(){return this.Y.shadowOffsetX},set:function(t){this.Y.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Y.shadowOffsetY},set:function(t){this.Y.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Y.strokeStyle},set:function(t){this.wu!==t&&(this.wu=this.Y.strokeStyle=t)}},textAlign:{get:function(){return this.Y.textAlign},set:function(t){this.Y.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Y.imageSmoothingEnabled},set:function(t){this.Y.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.vn},set:function(t){this.vn=t}}});var aT=Object.freeze([]);Gs.className="CanvasSurfaceContext";function _a(){this.T=this.v=this.I=this.l=0}_a.className="ColorNumbers";function At(t){oh||(M0(),oh=!0),Oe(this),this.s=!1,t===void 0?(this.pa=Bo,this.dl="black"):typeof t=="string"?(this.pa=Bo,this.dl=t):(this.pa=t,this.dl="black"),t=this.pa,t===ho?(this.Cd=io,this.ql=Ml):this.ql=t===Wi?this.Cd=Wt:this.Cd=qe,this.ht=0,this.Vr=NaN,this.ie=this.Ks=this.he=null,this.xu=this.el=0}At.prototype.copy=function(){var t=new At;return t.pa=this.pa,t.dl=this.dl,t.Cd=this.Cd.G(),t.ql=this.ql.G(),t.ht=this.ht,t.Vr=this.Vr,this.he!==null&&(t.he=this.he.copy()),t.Ks=this.Ks,t},l=At.prototype,l.freeze=function(){return this.s=!0,this.he!==null&&this.he.freeze(),this},l.ea=function(){return Object.isFrozen(this)&&E("cannot thaw constant: "+this),this.s=!1,this.he!==null&&this.he.ea(),this},l.jb=function(t){t.classType===At&&(this.type=t)},l.toString=function(){var t="Brush(";if(this.type===Bo)t+=this.color;else if(t=this.type===ho?t+"Linear ":this.type===Wi?t+"Radial ":this.type===sh?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,this.colorStops!==null)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},l.addColorStop=function(t,e){return this.s&&et(this),(typeof t!="number"||!isFinite(t)||1<t||0>t)&&lt(t,"0 <= loc <= 1",At,"addColorStop:loc"),this.he===null&&(this.he=new ct),this.he.add(t,e),this.pa===Bo&&(this.type=ho),this.ie=null,this},l.FA=function(t,e){if(this.s&&et(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?lh:e,this.type===Bo)uo(this.color),this.color=nh(t,e);else if((this.type===ho||this.type===Wi)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)uo(i.value),this.addColorStop(i.key,nh(t,e));return this};function uM(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?lh:i,uo(t),nh(e,i)}l.Iz=function(t,e){if(this.s&&et(this),t=t===void 0||typeof t!="number"?.2:t,e=e===void 0?lh:e,this.type===Bo)uo(this.color),this.color=nh(-t,e);else if((this.type===ho||this.type===Wi)&&this.colorStops!==null)for(var i=this.colorStops.iterator;i.next();)uo(i.value),this.addColorStop(i.key,nh(-t,e));return this};function hM(t,e,i){return e=e===void 0||typeof e!="number"?.2:e,i=i===void 0?lh:i,uo(t),nh(-e,i)}function y0(t,e,i){uo(t),t=Qt.l;var n=Qt.I,r=Qt.v,o=Qt.T;return uo(e),i===void 0&&(i=.5),"rgba("+Math.round((Qt.l-t)*i+t)+", "+Math.round((Qt.I-n)*i+n)+", "+Math.round((Qt.v-r)*i+r)+", "+Math.round((Qt.T-o)*i+o)+")"}l.Hy=function(){if(this.type===Bo)return ih(this.color);if((this.type===ho||this.type===Wi)&&this.colorStops!==null){var t=this.colorStops;if(this.type===Wi)return ih(t.first().value);if(t.get(.5)!==null)return ih(t.get(.5));if(t.count===2)return t=t.ma(),ih(y0(t[0].value,t[1].value));for(var e=t.iterator,i=-1,n=-1,r=1,o=1;e.next();){var s=e.key,u=Math.abs(.5-e.key);r>o&&u<r?(i=s,r=u):o>=r&&u<o&&(n=s,o=u)}return i>n&&(o=i,i=n,n=o,o=r),r=n-i,ih(y0(t.get(i),t.get(n),1-o/r))}return!1};function ih(t){return t?t instanceof At?t.Hy():(uo(t),128>(299*Qt.l+587*Qt.I+114*Qt.v)/1e3):!1}function nh(t,e){switch(e){case lh:e=100*v0(Qt.l);var i=100*v0(Qt.I),n=100*v0(Qt.v);return vi.l=.4124564*e+.3575761*i+.1804375*n,vi.I=.2126729*e+.7151522*i+.072175*n,vi.v=.0193339*e+.119192*i+.9503041*n,vi.T=Qt.T,e=w0(vi.l/rh[0]),i=w0(vi.I/rh[1]),n=w0(vi.v/rh[2]),Dr.l=116*i-16,Dr.I=500*(e-i),Dr.v=200*(i-n),Dr.T=vi.T,Dr.l=Math.min(100,Math.max(0,Dr.l+100*t)),t=(Dr.l+16)/116,e=t-Dr.v/200,vi.l=rh[0]*aM(Dr.I/500+t),vi.I=rh[1]*(Dr.l>up*S0?Math.pow(t,3):Dr.l/up),vi.v=rh[2]*aM(e),vi.T=Dr.T,t=-.969266*vi.l+1.8760108*vi.I+.041556*vi.v,e=.0556434*vi.l+-.2040259*vi.I+1.0572252*vi.v,Qt.l=255*x0((3.2404542*vi.l+-1.5371385*vi.I+-.4985314*vi.v)/100),Qt.I=255*x0(t/100),Qt.v=255*x0(e/100),Qt.T=vi.T,Qt.l=Math.round(Qt.l),255<Qt.l?Qt.l=255:0>Qt.l&&(Qt.l=0),Qt.I=Math.round(Qt.I),255<Qt.I?Qt.I=255:0>Qt.I&&(Qt.I=0),Qt.v=Math.round(Qt.v),255<Qt.v?Qt.v=255:0>Qt.v&&(Qt.v=0),"rgba("+Qt.l+", "+Qt.I+", "+Qt.v+", "+Qt.T+")";case fM:return m0(),nn.v=Math.min(100,Math.max(0,nn.v+100*t)),"hsla("+nn.l+", "+nn.I+"%, "+nn.v+"%, "+nn.T+")";default:return E("Unknown color space: "+e),"rgba(0, 0, 0, 1)"}}function uo(t){oh||(M0(),oh=!0);var e=k0;if(e!==null){e.clearRect(0,0,1,1),e.fillStyle="#000000";var i=e.fillStyle;e.fillStyle=t,e.fillStyle!==i?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Qt.l=t[0],Qt.I=t[1],Qt.v=t[2],Qt.T=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Qt.l=0,Qt.I=0,Qt.v=0,Qt.T=1)}}function m0(){var t=Qt.l/255,e=Qt.I/255,i=Qt.v/255,n=Math.max(t,e,i),r=Math.min(t,e,i),o=n-r;if(r=(n+r)/2,o===0)var s=t=0;else{switch(n){case t:s=(e-i)/o%6;break;case e:s=(i-t)/o+2;break;case i:s=(t-e)/o+4}s*=60,0>s&&(s+=360),t=o/(1-Math.abs(2*r-1))}nn.l=Math.round(s),nn.I=Math.round(100*t),nn.v=Math.round(100*r),nn.T=Qt.T}function v0(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function x0(t){return .0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function w0(t){return t>S0?Math.pow(t,1/3):(up*t+16)/116}function aM(t){var e=t*t*t;return e>S0?e:(116*t-16)/up}function Ol(t,e){typeof t!="string"&&(t instanceof At||E("Value for "+e+" must be a color string or a Brush, not "+t))}function M0(){k0=Vn?new Nn(null).context:null}X.Object.defineProperties(At.prototype,{type:{get:function(){return this.pa},set:function(t){this.s&&et(this,t),this.pa=t,this.start.nc()&&(t===ho?this.start=io:t===Wi&&(this.start=Wt)),this.end.nc()&&(t===ho?this.end=Ml:t===Wi&&(this.end=Wt)),this.ie=null}},color:{get:function(){return this.dl},set:function(t){this.s&&et(this,t),this.dl=t,this.ie=null}},start:{get:function(){return this.Cd},set:function(t){this.s&&et(this,t),this.Cd=t.G(),this.ie=null}},end:{get:function(){return this.ql},set:function(t){this.s&&et(this,t),this.ql=t.G(),this.ie=null}},startRadius:{get:function(){return this.ht},set:function(t){this.s&&et(this,t),0>t&&lt(t,">= zero",At,"startRadius"),this.ht=t,this.ie=null}},endRadius:{get:function(){return this.Vr},set:function(t){this.s&&et(this,t),0>t&&lt(t,">= zero",At,"endRadius"),this.Vr=t,this.ie=null}},colorStops:{get:function(){return this.he},set:function(t){this.s&&et(this,t),this.he=t,this.ie=null}},pattern:{get:function(){return this.Ks},set:function(t){this.s&&et(this,t),this.Ks=t,this.ie=null}}}),At.prototype.isDark=At.prototype.Hy,At.prototype.darkenBy=At.prototype.Iz,At.prototype.lightenBy=At.prototype.FA,At.prototype.addColorStop=At.prototype.addColorStop;var S0=216/24389,up=24389/27,rh=[95.047,100,108.883],k0=null,Qt=new _a,nn=new _a,vi=new _a,Dr=new _a,oh=!1;At.className="Brush";var Bo;At.Solid=Bo=new K(At,"Solid",0);var ho;At.Linear=ho=new K(At,"Linear",1);var Wi;At.Radial=Wi=new K(At,"Radial",2);var sh;At.Pattern=sh=new K(At,"Pattern",4);var lh;At.Lab=lh=new K(At,"Lab",5);var fM;At.HSL=fM=new K(At,"HSL",6),At.randomColor=function(t,e){t===void 0&&(t=128),e===void 0&&(e=Math.max(t,255));var i=Math.abs(e-t);e=Math.floor(t+Math.random()*i).toString(16);var n=Math.floor(t+Math.random()*i).toString(16);return t=Math.floor(t+Math.random()*i).toString(16),2>e.length&&(e="0"+e),2>n.length&&(n="0"+n),2>t.length&&(t="0"+t),"#"+e+n+t},At.isValidColor=function(t){if(t==="black")return!0;if(t==="")return!1;oh||(M0(),oh=!0);var e=k0;if(e===null)return!0;e.fillStyle="#000000";var i=e.fillStyle;return e.fillStyle=t,e.fillStyle!==i?!0:(e.fillStyle="#FFFFFF",i=e.fillStyle,e.fillStyle=t,e.fillStyle!==i)},At.lighten=function(t){return uM(t)},At.lightenBy=uM,At.darken=function(t){return hM(t)},At.darkenBy=hM,At.mix=y0,At.isDark=ih;function $e(){this.name="Base"}$e.prototype.measure=function(){},$e.prototype.IA=function(t,e,i,n,r){t.measure(e,i,n,r)},$e.prototype.arrange=function(){},$e.prototype.wz=function(t,e,i,n,r,o){t.arrange(e,i,n,r,o)},$e.prototype.cc=function(){},X.Object.defineProperties($e.prototype,{classType:{get:function(){return V}}}),$e.prototype.arrangeElement=$e.prototype.wz,$e.prototype.measureElement=$e.prototype.IA,$e.className="PanelLayout";function hp(){this.name="Base"}ut(hp,$e),hp.prototype.measure=function(t,e,i,n,r,o,s){var u=n.length;t=ao(t);for(var a=0;a<u;a++){var f=n[a];if(f.visible||f===t){var c=f.margin,d=c.right+c.left;c=c.top+c.bottom,f.measure(e,i,o,s);var g=f.measuredBounds;d=Math.max(g.width+d,0),c=Math.max(g.height+c,0),g=f.position.x;var m=f.position.y;isFinite(g)||(g=0),isFinite(m)||(m=0),f instanceof gt&&f.isGeometryPositioned&&(f=f.strokeWidth/2,g-=f,m-=f),Ue(r,g,m,d,c)}}},hp.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding;for(t=i.x-r.left,i=i.y-r.top,r=0;r<n;r++){var o=e[r],s=o.measuredBounds,u=o.margin,a=o.position.x,f=o.position.y;if(a=isNaN(a)?-t:a-t,f=isNaN(f)?-i:f-i,o instanceof gt&&o.isGeometryPositioned){var c=o.strokeWidth/2;a-=c,f-=c}o.visible&&o.arrange(a+u.left,f+u.top,s.width,s.height)}};function ap(){this.name="Base"}ut(ap,$e),ap.prototype.measure=function(t,e,i,n,r,o,s){var u=n.length;e=Dt(),o=ao(t);for(var a=0;a<u;a++){var f=n[a];if(f.visible||f===o){var c=er(f,!1);if(c!==ve&&c!==_e)e.push(f);else{f.measure(Infinity,i,0,s),c=f.margin,f=f.measuredBounds;var d=Math.max(f.height+c.top+c.bottom,0);r.width+=Math.max(f.width+c.right+c.left,0),r.height=Math.max(r.height,d)}}}for(n=e.length,t.desiredSize.height?i=Math.min(t.desiredSize.height,t.maxSize.height):r.height!==0&&(i=Math.min(r.height,t.maxSize.height)),t=0;t<n;t++)a=e[t],(a.visible||a===o)&&(c=a.margin,u=c.right+c.left,c=c.top+c.bottom,a.measure(Infinity,i,0,s),a=a.measuredBounds,c=Math.max(a.height+c,0),r.width+=Math.max(a.width+u,0),r.height=Math.max(r.height,c));Xt(e)},ap.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.top,s=t.isOpposite,u=s?i.width:r.left,a=0;a<n;a++){var f=o,c=e[a];if(c.visible){var d=c.measuredBounds,g=c.margin,m=g.top+g.bottom,y=o+r.bottom,x=d.height,M=er(c,!1);(isNaN(c.desiredSize.height)&&M===ye||M===ei)&&(x=Math.max(i.height-m-y,0)),m=x+m+y,y=c.alignment,y.Nb()&&(y=t.defaultAlignment),y.kb()||(y=Wt),s&&(u-=d.width+g.left+g.right),c.arrange(u+y.offsetX+g.left,f+y.offsetY+g.top+(i.height*y.y-m*y.y),d.width,x),s||(u+=d.width+g.left+g.right)}}};function fp(){this.name="Base"}ut(fp,$e),fp.prototype.measure=function(t,e,i,n,r,o){var s=n.length;i=Dt();for(var u=ao(t),a=0;a<s;a++){var f=n[a];if(f.visible||f===u){var c=er(f,!1);if(c!==ve&&c!==ei)i.push(f);else{var d=f.margin;c=d.right+d.left,d=d.top+d.bottom,f.measure(e,Infinity,o,0),f=f.measuredBounds,eo(r,Math.max(r.width,Math.max(f.width+c,0)),r.height+Math.max(f.height+d,0))}}}if(n=i.length,n!==0){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):r.width!==0&&(e=Math.min(r.width,t.maxSize.width)),t=0;t<n;t++)a=i[t],(a.visible||a===u)&&(f=a.margin,s=f.right+f.left,f=f.top+f.bottom,a.measure(e,Infinity,o,0),a=a.measuredBounds,f=Math.max(a.height+f,0),r.width=Math.max(r.width,Math.max(a.width+s,0)),r.height+=f);Xt(i)}},fp.prototype.arrange=function(t,e,i){for(var n=e.length,r=t.padding,o=r.left,s=t.isOpposite,u=s?i.height:r.top,a=0;a<n;a++){var f=o,c=e[a];if(c.visible){var d=c.measuredBounds,g=c.margin,m=g.left+g.right,y=o+r.right,x=d.width,M=er(c,!1);(isNaN(c.desiredSize.width)&&M===ye||M===_e)&&(x=Math.max(i.width-m-y,0)),m=x+m+y,y=c.alignment,y.Nb()&&(y=t.defaultAlignment),y.kb()||(y=Wt),s&&(u-=d.height+g.bottom+g.top),c.arrange(f+y.offsetX+g.left+(i.width*y.x-m*y.x),u+y.offsetY+g.top,x,d.height),s||(u+=d.height+g.bottom+g.top)}}};function cp(){this.name="Base"}ut(cp,$e),cp.prototype.measure=function(t,e,i,n,r,o,s){var u=n.length,a=t.rb(),f=a.margin,c=f.right+f.left,d=f.top+f.bottom;a.measure(e,i,o,s);var g=a.measuredBounds;o=g.width,s=g.height;for(var m=Math.max(o+c,0),y=Math.max(s+d,0),x=t.isClipping,M=I.allocAt(-f.left,-f.top,m,y),S=!0,N=ao(t),T=0;T<u;T++){var C=n[T];if(C!==a&&(C.visible||C===N)){switch(f=C.margin,m=f.right+f.left,y=f.top+f.bottom,g=er(C,!1),g){case ye:e=o,i=s;break;case _e:e=o;break;case ei:i=s}C.measure(e,i,0,0),g=C.measuredBounds,m=Math.max(g.width+m,0),y=Math.max(g.height+y,0);var D=C.alignment;D.Nb()&&(D=t.defaultAlignment),D.kb()||(D=Wt);var F=C.alignmentFocus;F.Nb()&&(F=Wt);var $=null;if(C instanceof V&&C.Mg!==""&&(C.arrange(0,0,g.width,g.height),$=C.ab(C.Mg),$===C&&($=null)),$!==null){for(f=$.naturalBounds,g=$.margin,f=k.allocAt(F.x*f.width-F.offsetX-g.left,F.y*f.height-F.offsetY-g.top);$!==C;)$.transform.sa(f),$=$.panel;C=D.x*o+D.offsetX-f.x,g=D.y*s+D.offsetY-f.y,k.free(f)}else C=D.x*o+D.offsetX-(F.x*g.width+F.offsetX)-f.left,g=D.y*s+D.offsetY-(F.y*g.height+F.offsetY)-f.top;S?(S=!1,r.h(C,g,m,y)):Ue(r,C,g,m,y)}}switch(S?r.assign(M):x?r.$v(M.x,M.y,M.width,M.height):Ue(r,M.x,M.y,M.width,M.height),I.free(M),g=a.stretch,g===xr&&(g=er(a,!1)),g){case ve:return;case ye:if(!isFinite(e)&&!isFinite(i))return;break;case _e:if(!isFinite(e))return;break;case ei:if(!isFinite(i))return}for(g=a.measuredBounds,o=g.width,s=g.height,m=Math.max(o+c,0),y=Math.max(s+d,0),f=a.margin,M=I.allocAt(-f.left,-f.top,m,y),e=0;e<u;e++)i=n[e],i===a||!i.visible&&i!==N||(f=i.margin,m=f.right+f.left,y=f.top+f.bottom,g=i.measuredBounds,m=Math.max(g.width+m,0),y=Math.max(g.height+y,0),c=i.alignment,c.Nb()&&(c=t.defaultAlignment),c.kb()||(c=Wt),i=i.alignmentFocus,i.Nb()&&(i=Wt),S?(S=!1,r.h(c.x*o+c.offsetX-(i.x*g.width+i.offsetX)-f.left,c.y*s+c.offsetY-(i.y*g.height+i.offsetY)-f.top,m,y)):Ue(r,c.x*o+c.offsetX-(i.x*g.width+i.offsetX)-f.left,c.y*s+c.offsetY-(i.y*g.height+i.offsetY)-f.top,m,y));S?r.assign(M):x?r.$v(M.x,M.y,M.width,M.height):Ue(r,M.x,M.y,M.width,M.height),I.free(M)},cp.prototype.arrange=function(t,e,i){var n=e.length,r=t.rb(),o=r.measuredBounds,s=o.width;o=o.height;var u=t.padding,a=u.left;u=u.top;var f=a-i.x,c=u-i.y;r.arrange(f,c,s,o);for(var d=0;d<n;d++){var g=e[d];if(g!==r){var m=g.measuredBounds,y=m.width;m=m.height,c=g.alignment,c.Nb()&&(c=t.defaultAlignment),c.kb()||(c=Wt);var x=g.alignmentFocus;if(x.Nb()&&(x=Wt),f=null,g instanceof V&&g.Mg!==""&&(f=g.ab(g.Mg),f===g&&(f=null)),f!==null){var M=f.naturalBounds;for(x=k.allocAt(x.x*M.width-x.offsetX,x.y*M.height-x.offsetY);f!==g;)f.transform.sa(x),f=f.panel;f=c.x*s+c.offsetX-x.x,c=c.y*o+c.offsetY-x.y,k.free(x)}else f=c.x*s+c.offsetX-(x.x*y+x.offsetX),c=c.y*o+c.offsetY-(x.y*m+x.offsetY);f-=i.x,c-=i.y,g.visible&&g.arrange(a+f,u+c,y,m)}}};function pp(){this.name="Base"}ut(pp,$e),pp.prototype.measure=function(t,e,i,n,r,o,s){var u=n.length,a=t.rb(),f=a.margin,c=e,d=i,g=f.right+f.left,m=f.top+f.bottom;a.measure(e,i,o,s),f=a.measuredBounds;var y=0,x=null;a instanceof gt&&(x=a,y=x.strokeWidth*x.scale);var M=Math.max(f.width+g,0);f=Math.max(f.height+m,0);var S=T0(a),N=S.x*M+S.offsetX;S=S.y*f+S.offsetY;var T=C0(a),C=T.x*M+T.offsetX;for(T=T.y*f+T.offsetY,isFinite(e)&&(c=Math.max(Math.abs(N-C)-y,0)),isFinite(i)&&(d=Math.max(Math.abs(S-T)-y,0)),y=pt.alloc(),y.h(0,0),t=ao(t),T=0;T<u;T++)S=n[T],S===a||!S.visible&&S!==t||(f=S.margin,M=f.right+f.left,N=f.top+f.bottom,S.measure(c,d,0,0),f=S.measuredBounds,M=Math.max(f.width+M,0),f=Math.max(f.height+N,0),y.h(Math.max(M,y.width),Math.max(f,y.height)));if(u===1)r.width=M,r.height=f,pt.free(y);else{switch(S=T0(a),T=C0(a),u=n=0,T.x!==S.x&&T.y!==S.y&&(n=y.width/Math.abs(T.x-S.x),u=y.height/Math.abs(T.y-S.y)),pt.free(y),y=0,x!==null&&(y=x.strokeWidth*x.scale,E0(x)===vr&&(n=u=Math.max(n,u))),n+=Math.abs(S.offsetX)+Math.abs(T.offsetX)+y,u+=Math.abs(S.offsetY)+Math.abs(T.offsetY)+y,x=a.stretch,x===xr&&(x=er(a,!1)),x){case ve:s=o=0;break;case ye:isFinite(e)&&(n=e),isFinite(i)&&(u=i);break;case _e:isFinite(e)&&(n=e),s=0;break;case ei:o=0,isFinite(i)&&(u=i)}a.Bm(),a.measure(n,u,o,s),r.width=a.measuredBounds.width+g,r.height=a.measuredBounds.height+m}},pp.prototype.arrange=function(t,e){var i=e.length,n=t.rb(),r=n.measuredBounds,o=I.alloc();o.h(0,0,1,1);var s=n.margin,u=s.left;s=s.top;var a=t.padding,f=a.left;a=a.top,n.arrange(f+u,a+s,r.width,r.height);var c=T0(n),d=C0(n),g=c.y*r.height+c.offsetY,m=d.x*r.width+d.offsetX;for(d=d.y*r.height+d.offsetY,o.x=c.x*r.width+c.offsetX,o.y=g,Ue(o,m,d,0,0),o.x+=u+f,o.y+=s+a,r=0;r<i;r++)u=e[r],u!==n&&(f=u.measuredBounds,s=u.margin,a=Math.max(f.width+s.right+s.left,0),c=Math.max(f.height+s.top+s.bottom,0),g=u.alignment,g.Nb()&&(g=t.defaultAlignment),g.kb()||(g=Wt),a=o.width*g.x+g.offsetX-a*g.x+s.left+o.x,s=o.height*g.y+g.offsetY-c*g.y+s.top+o.y,u.visible&&(Zn(o.x,o.y,o.width,o.height,a,s,f.width,f.height)?u.arrange(a,s,f.width,f.height):u.arrange(a,s,f.width,f.height,new I(o.x,o.y,o.width,o.height))));I.free(o)};function dp(){this.name="Base",this.name="Table"}ut(dp,$e),dp.prototype.measure=function(t,e,i,n,r){for(var o=n.length,s=Dt(),u=Dt(),a=0;a<o;a++){var f=n[a],c=f instanceof V?f:null;if(c===null||c.type!==V.TableRow&&c.type!==V.TableColumn||!f.visible)s.push(f);else{u.push(c);for(var d=c.W.j,g=d.length,m=0;m<g;m++){var y=d[m];c.type===V.TableRow?y.row=f.row:c.type===V.TableColumn&&(y.column=f.column),s.push(y)}}}o=s.length,o===0&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var x=[],M=0;M<o;M++){var S=s[M];en(S,!0),Us(S,!0),x[S.row]||(x[S.row]=[]),x[S.row][S.column]||(x[S.row][S.column]=[]),x[S.row][S.column].push(S)}Xt(s);var N=Dt(),T=Dt(),C=Dt(),D={count:0},F={count:0},$=e,G=i,nt=t.vb;o=nt.length;for(var q=0;q<o;q++){var R=nt[q];R!==void 0&&(R.actual=0)}nt=t.sb,o=nt.length;for(var Lt=0;Lt<o;Lt++)R=nt[Lt],R!==void 0&&(R.actual=0);for(var mt=x.length,Ot=0,re=0;re<mt;re++)x[re]&&(Ot=Math.max(Ot,x[re].length));var je=Math.min(t.topIndex,mt-1),oe=Math.min(t.leftIndex,Ot-1),se=0;mt=x.length;for(var Mr=ao(t),Ei=0;Ei<mt;Ei++)if(x[Ei]){Ot=x[Ei].length;var Oi=t.getRowDefinition(Ei);Oi.actual=0;for(var De=Oi.ac=0;De<Ot;De++)if(x[Ei][De]){var Sr=t.getColumnDefinition(De);N[De]===void 0&&(Sr.actual=0,Sr.ac=0,N[De]=!0);for(var Ql=x[Ei][De],ql=Ql.length,Wo=0;Wo<ql;Wo++){var li=Ql[Wo];if(li.visible||li===Mr){var Oh=1<li.rowSpan||1<li.columnSpan;Oh&&(Ei<je||De<oe||T.push(li));var bl=li.margin,Ah=bl.right+bl.left,Ih=bl.top+bl.bottom,Pe=Ha(li,Oi,Sr,!1),Df=li.desiredSize,Vd=!isNaN(Df.height),tu=!isNaN(Df.width)&&Vd;if(Oh||Pe===ve||tu||Ei<je||De<oe||(D[De]!==void 0||Pe!==ye&&Pe!==_e||(D[De]=-1,D.count++),F[Ei]!==void 0||Pe!==ye&&Pe!==ei||(F[Ei]=-1,F.count++),C.push(li)),li.measure(Infinity,Infinity,0,0),!(Ei<je||De<oe)){var ur=li.measuredBounds,_i=Math.max(ur.width+Ah,0),Zs=Math.max(ur.height+Ih,0);if(li.rowSpan===1&&(Pe===ve||Pe===_e)){R=t.getRowDefinition(Ei);var sn=R.wc();se=Math.max(Zs-R.actual,0),se+sn>G&&(se=Math.max(G-sn,0));var eu=R.ha===0;R.ac=R.ac+se,R.actual=R.ha+se,G=Math.max(G-(se+(eu?sn:0)),0)}if(li.columnSpan===1&&(Pe===ve||Pe===ei)){R=t.getColumnDefinition(De);var Bh=R.wc();se=Math.max(_i-R.actual,0),se+Bh>$&&(se=Math.max($-Bh,0));var Gm=R.ha===0;R.ac=R.ac+se,R.actual=R.ha+se,$=Math.max($-(se+(Gm?Bh:0)),0)}Oh&&li.Bm()}}}}}Xt(N);var Fr=0,co=0;o=t.columnCount;for(var iu=0;iu<o;iu++){var nu=t.sb[iu];nu!==void 0&&(Fr+=nu.ac,nu.ac!==0&&(Fr+=nu.wc()))}o=t.rowCount;for(var Wn=0;Wn<o;Wn++){var po=t.vb[Wn];po!==void 0&&(co+=po.ac,po.ac!==0&&(co+=po.wc()))}$=Math.max(e-Fr,0);var zi=G=Math.max(i-co,0),Rh=$;o=C.length;for(var Fh=0;Fh<o;Fh++){var Kn=C[Fh],Ef=t.getRowDefinition(Kn.row),go=t.getColumnDefinition(Kn.column),Cs=Kn.measuredBounds,kr=Kn.margin,zd=kr.right+kr.left,Xm=kr.top+kr.bottom;D[Kn.column]=go.ac===0&&D[Kn.column]!==void 0?Math.max(Cs.width+zd,D[Kn.column]):null,F[Kn.row]=Ef.ac===0&&F[Kn.row]!==void 0?Math.max(Cs.height+Xm,F[Kn.row]):null}var Js=0,ui=0,Vr;for(Vr in F)Vr!=="count"&&(Js+=F[Vr]);for(Vr in D)Vr!=="count"&&(ui+=D[Vr]);for(var Re=pt.alloc(),Of=0;Of<o;Of++){var Ai=C[Of];if(Ai.visible||Ai===Mr){var ln=t.getRowDefinition(Ai.row),$i=t.getColumnDefinition(Ai.column),zr=0;isFinite($i.width)?zr=$i.width:(isFinite($)&&D[Ai.column]!==null?ui===0?zr=$i.actual+$:zr=D[Ai.column]/ui*Rh:D[Ai.column]!==null?zr=$:zr=$i.actual||$,zr=Math.max(0,zr-$i.wc()));var Ur=0;switch(isFinite(ln.height)?Ur=ln.height:(isFinite(G)&&F[Ai.row]!==null?Js===0?Ur=ln.actual+G:Ur=F[Ai.row]/Js*zi:F[Ai.row]!==null?Ur=G:Ur=ln.actual||G,Ur=Math.max(0,Ur-ln.wc())),Re.h(Math.max($i.minimum,Math.min(zr,$i.maximum)),Math.max(ln.minimum,Math.min(Ur,ln.maximum))),Pe=Ha(Ai,ln,$i,!1),Pe){case _e:Re.height=Math.max(Re.height,ln.actual+G);break;case ei:Re.width=Math.max(Re.width,$i.actual+$)}var ru=Ai.margin,yn=ru.right+ru.left,Vh=ru.top+ru.bottom;Ai.Bm(),Ai.measure(Re.width,Re.height,$i.minimum,ln.minimum);var ou=Ai.measuredBounds,Yr=Math.max(ou.width+yn,0),zh=Math.max(ou.height+Vh,0);isFinite($)&&(Yr=Math.min(Yr,Re.width)),isFinite(G)&&(zh=Math.min(zh,Re.height));var Ls=0;Ls=ln.actual,ln.actual=Math.max(ln.actual,zh),ln.ac=Math.max(ln.ac,zh),se=ln.actual-Ls,G=Math.max(G-se,0),F[Ai.row]===null&&(zi=Math.max(zi-se,0)),Ls=$i.actual,$i.actual=Math.max($i.actual,Yr),$i.ac=Math.max($i.ac,Yr),se=$i.actual-Ls,$=Math.max($-se,0),D[Ai.column]===null&&(Rh=Math.max(Rh-se,0))}}Xt(C);var Ko=pt.alloc(),Gr=Dt(),Xr=Dt();if(o=T.length,o!==0){for(var _o=0;_o<mt;_o++)if(x[_o]){Ot=x[_o].length;var Uh=t.getRowDefinition(_o);Gr[_o]=Uh.actual;for(var yo=0;yo<Ot;yo++)if(x[_o][yo]){var Hm=t.getColumnDefinition(yo);Xr[yo]=Hm.actual}}}for(var Ui=0;Ui<o;Ui++){var ce=T[Ui];if(ce.visible||ce===Mr){var Yi=t.getRowDefinition(ce.row),Hr=t.getColumnDefinition(ce.column);switch(Re.h(Math.max(Hr.minimum,Math.min(e,Hr.maximum)),Math.max(Yi.minimum,Math.min(i,Yi.maximum))),Pe=Ha(ce,Yi,Hr,!1),Pe){case ye:Xr[Hr.index]!==0&&(Re.width=Math.min(Re.width,Xr[Hr.index])),Gr[Yi.index]!==0&&(Re.height=Math.min(Re.height,Gr[Yi.index]));break;case _e:Xr[Hr.index]!==0&&(Re.width=Math.min(Re.width,Xr[Hr.index]));break;case ei:Gr[Yi.index]!==0&&(Re.height=Math.min(Re.height,Gr[Yi.index]))}isFinite(Hr.width)&&(Re.width=Hr.width),isFinite(Yi.height)&&(Re.height=Yi.height),Ko.h(0,0);for(var $o=Hr.minimum,Yh=Yi.minimum,Zo=1;Zo<ce.rowSpan&&!(ce.row+Zo>=t.rowCount);Zo++)R=t.getRowDefinition(ce.row+Zo),se=0,se=Pe===ye||Pe===ei?Math.max(R.minimum,Gr[ce.row+Zo]===0?R.maximum:Math.min(Gr[ce.row+Zo],R.maximum)):Math.max(R.minimum,isNaN(R.cd)?R.maximum:Math.min(R.cd,R.maximum)),Ko.height+=se,Yh+=R.minimum;for(var jn=1;jn<ce.columnSpan&&!(ce.column+jn>=t.columnCount);jn++)R=t.getColumnDefinition(ce.column+jn),se=0,se=Pe===ye||Pe===_e?Math.max(R.minimum,Xr[ce.column+jn]===0?R.maximum:Math.min(Xr[ce.column+jn],R.maximum)):Math.max(R.minimum,isNaN(R.cd)?R.maximum:Math.min(R.cd,R.maximum)),Ko.width+=se,$o+=R.minimum;Re.width+=Ko.width,Re.height+=Ko.height;var js=ce.margin,Gh=js.right+js.left,Wm=js.top+js.bottom;ce.measure(Re.width,Re.height,$o,Yh);for(var su=ce.measuredBounds,hr=Math.max(su.width+Gh,0),Wr=Math.max(su.height+Wm,0),mo=0,vo=0;vo<ce.rowSpan&&!(ce.row+vo>=t.rowCount);vo++)R=t.getRowDefinition(ce.row+vo),mo+=R.total||0;if(mo<Wr){var Kr=Wr-mo,xo=Wr-mo;if(ce.spanAllocation!==null)for(var Ud=ce.spanAllocation,Jo=0;Jo<ce.rowSpan&&!(0>=Kr)&&!(ce.row+Jo>=t.rowCount);Jo++){R=t.getRowDefinition(ce.row+Jo);var Af=R.ha||0,Km=Ud(ce,R,xo);R.actual=Math.min(R.maximum,Af+Km),R.ha!==Af&&(Kr-=R.ha-Af)}for(;0<Kr;){var ar=R.ha||0;if(isNaN(R.height)&&R.maximum>ar&&(R.actual=Math.min(R.maximum,ar+Kr),R.ha!==ar&&(Kr-=R.ha-ar)),R.index===0)break;R=t.getRowDefinition(R.index-1)}}for(var Qs=0,Xh=0;Xh<ce.columnSpan&&!(ce.column+Xh>=t.columnCount);Xh++)R=t.getColumnDefinition(ce.column+Xh),Qs+=R.total||0;if(Qs<hr){var lu=hr-Qs,UT=hr-Qs;if(ce.spanAllocation!==null)for(var YT=ce.spanAllocation,Yd=0;Yd<ce.columnSpan&&!(0>=lu)&&!(ce.column+Yd>=t.columnCount);Yd++){R=t.getColumnDefinition(ce.column+Yd);var _m=R.ha||0,GT=YT(ce,R,UT);R.actual=Math.min(R.maximum,_m+GT),R.ha!==_m&&(lu-=R.ha-_m)}for(;0<lu;){var Gd=R.ha||0;if(isNaN(R.width)&&R.maximum>Gd&&(R.actual=Math.min(R.maximum,Gd+lu),R.ha!==Gd&&(lu-=R.ha-Gd)),R.index===0)break;R=t.getColumnDefinition(R.index-1)}}}}Xt(T),pt.free(Ko),pt.free(Re),Gr!==void 0&&Xt(Gr),Xr!==void 0&&Xt(Xr);var uu=0,hu=0,Xd=t.desiredSize,T2=t.maxSize;Pe=er(t,!0);var If=co=Fr=0,Bf=0;o=t.columnCount;for(var Hd=0;Hd<o;Hd++)t.sb[Hd]!==void 0&&(R=t.getColumnDefinition(Hd),isFinite(R.width)?(If+=R.width,If+=R.wc()):Sp(R)===Ja?(If+=R.ha,If+=R.wc()):R.ha!==0&&(Fr+=R.ha,Fr+=R.wc()));isFinite(Xd.width)?uu=Math.min(Xd.width,T2.width):uu=Pe!==ve&&isFinite(e)?e:Fr,uu=Math.max(uu,t.minSize.width),uu=Math.max(uu-If,0);for(var XT=Fr===0?1:Math.max(uu/Fr,1),Wd=0;Wd<o;Wd++)t.sb[Wd]!==void 0&&(R=t.getColumnDefinition(Wd),isFinite(R.width)||Sp(R)===Ja||(R.actual=R.ha*XT),R.position=r.width,R.ha!==0&&(r.width+=R.ha,r.width+=R.wc()));o=t.rowCount;for(var Kd=0;Kd<o;Kd++)t.vb[Kd]!==void 0&&(R=t.getRowDefinition(Kd),isFinite(R.height)?(Bf+=R.height,Bf+=R.wc()):Sp(R)===Ja?(Bf+=R.ha,Bf+=R.wc()):R.ha!==0&&(co+=R.ha,R.ha!==0&&(co+=R.wc())));isFinite(Xd.height)?hu=Math.min(Xd.height,T2.height):hu=Pe!==ve&&isFinite(i)?i:co,hu=Math.max(hu,t.minSize.height),hu=Math.max(hu-Bf,0);for(var HT=co===0?1:Math.max(hu/co,1),_d=0;_d<o;_d++)t.vb[_d]!==void 0&&(R=t.getRowDefinition(_d),isFinite(R.height)||Sp(R)===Ja||(R.actual=R.ha*HT),R.position=r.height,R.ha!==0&&(r.height+=R.ha,R.ha!==0&&(r.height+=R.wc())));o=u.length;for(var $m=0;$m<o;$m++){var fr=u[$m],Zm=0,Jm=0;fr.type===V.TableRow?(Zm=r.width,R=t.getRowDefinition(fr.row),Jm=R.actual):(R=t.getColumnDefinition(fr.column),Zm=R.actual,Jm=r.height),fr.measuredBounds.h(0,0,Zm,Jm),en(fr,!1),x[fr.row]||(x[fr.row]=[]),x[fr.row][fr.column]||(x[fr.row][fr.column]=[]),x[fr.row][fr.column].push(fr)}Xt(u),t.Fp=x},dp.prototype.arrange=function(t,e,i){var n=e.length,r=t.padding,o=r.left;r=r.top;for(var s=t.Fp,u,a,f=s.length,c=0,d=0;d<f;d++)s[d]&&(c=Math.max(c,s[d].length));for(d=Math.min(t.topIndex,f-1);d!==f&&(t.vb[d]===void 0||t.vb[d].ha===0);)d++;for(d=Math.min(d,f-1),d=-t.vb[d].position,u=Math.min(t.leftIndex,c-1);u!==c&&(t.sb[u]===void 0||t.sb[u].ha===0);)u++;u=Math.min(u,c-1);for(var g=-t.sb[u].position,m=pt.alloc(),y=0;y<f;y++)if(s[y]){c=s[y].length;var x=t.getRowDefinition(y);a=x.position+d+r,x.ha!==0&&(a+=x.Hv());for(var M=0;M<c;M++)if(s[y][M]){var S=t.getColumnDefinition(M);u=S.position+g+o,S.ha!==0&&(u+=S.Hv());for(var N=s[y][M],T=N.length,C=0;C<T;C++){var D=N[C],F=D.measuredBounds,$=D instanceof V?D:null;if($===null||$.type!==V.TableRow&&$.type!==V.TableColumn){m.h(0,0);for(var G=1;G<D.rowSpan&&!(y+G>=t.rowCount);G++)$=t.getRowDefinition(y+G),m.height+=$.total;for(G=1;G<D.columnSpan&&!(M+G>=t.columnCount);G++)$=t.getColumnDefinition(M+G),m.width+=$.total;var nt=S.ha+m.width,q=x.ha+m.height;G=u,$=a;var R=nt,Lt=q,mt=u,Ot=a,re=nt,je=q;u+nt>i.width&&(re=Math.max(i.width-u,0)),a+q>i.height&&(je=Math.max(i.height-a,0));var oe=D.alignment;if(oe.Nb()){oe=t.defaultAlignment,oe.kb()||(oe=Wt);var se=oe.x,Mr=oe.y,Ei=oe.offsetX;oe=oe.offsetY;var Oi=S.alignment,De=x.alignment;Oi.kb()&&(se=Oi.x,Ei=Oi.offsetX),De.kb()&&(Mr=De.y,oe=De.offsetY)}else se=oe.x,Mr=oe.y,Ei=oe.offsetX,oe=oe.offsetY;(isNaN(se)||isNaN(Mr))&&(Mr=se=.5,oe=Ei=0),Oi=F.width,De=F.height;var Sr=D.margin,Ql=Sr.left+Sr.right,ql=Sr.top+Sr.bottom,Wo=Ha(D,x,S,!1);!isNaN(D.desiredSize.width)||Wo!==ye&&Wo!==_e||(Oi=Math.max(nt-Ql,0)),!isNaN(D.desiredSize.height)||Wo!==ye&&Wo!==ei||(De=Math.max(q-ql,0)),nt=D.maxSize,q=D.minSize,Oi=Math.min(nt.width,Oi),De=Math.min(nt.height,De),Oi=Math.max(q.width,Oi),De=Math.max(q.height,De),nt=De+ql,G+=R*se-(Oi+Ql)*se+Ei+Sr.left,$+=Lt*Mr-nt*Mr+oe+Sr.top,D.visible&&(Zn(mt,Ot,re,je,G,$,F.width,F.height)?D.arrange(G,$,Oi,De):D.arrange(G,$,Oi,De,new I(mt,Ot,re,je)))}else D.El(),D.actualBounds.ea(),R=D.actualBounds,G=I.allocAt(R.x,R.y,R.width,R.height),R.x=$.type===V.TableRow?o:u,R.y=$.type===V.TableColumn?r:a,R.width=F.width,R.height=F.height,D.actualBounds.freeze(),Us(D,!1),sy(G,R)||(F=D.part,F!==null&&(F.Nh(),D.gp(F))),I.free(G)}}}for(pt.free(m),t=0;t<n;t++)i=e[t],o=i instanceof V?i:null,o===null||o.type!==V.TableRow&&o.type!==V.TableColumn||(o=i.actualBounds,i.naturalBounds.ea(),i.naturalBounds.h(0,0,o.width,o.height),i.naturalBounds.freeze())};function gp(){this.name="Base"}ut(gp,$e),gp.prototype.measure=function(){},gp.prototype.arrange=function(){};function yp(){this.name="Base"}ut(yp,$e),yp.prototype.measure=function(){},yp.prototype.arrange=function(){};function mp(){this.name="Base"}ut(mp,$e),mp.prototype.measure=function(t,e,i,n,r,o,s){1<n.length&&E("Viewbox Panel cannot contain more than one GraphObject."),n=n[0],n.ya=1,n.Bm(),n.measure(Infinity,Infinity,o,s);var u=n.measuredBounds,a=n.margin,f=a.right+a.left;if(a=a.top+a.bottom,isFinite(e)||isFinite(i)){var c=n.scale,d=u.width;u=u.height;var g=Math.max(e-f,0),m=Math.max(i-a,0),y=1;t.viewboxStretch===vr?d!==0&&u!==0&&(y=Math.min(g/d,m/u)):d!==0&&u!==0&&(y=Math.max(g/d,m/u)),y===0&&(y=1e-4),n.ya*=y,c!==n.scale&&(en(n,!0),n.measure(Infinity,Infinity,o,s))}u=n.measuredBounds,r.width=isFinite(e)?e:Math.max(u.width+f,0),r.height=isFinite(i)?i:Math.max(u.height+a,0)},mp.prototype.arrange=function(t,e,i){e=e[0];var n=e.measuredBounds,r=e.margin,o=Math.max(n.width+(r.right+r.left),0);r=Math.max(n.height+(r.top+r.bottom),0);var s=e.alignment;s.Nb()&&(s=t.defaultAlignment),s.kb()||(s=Wt),e.arrange(i.width*s.x-o*s.x+s.offsetX,i.height*s.y-r*s.y+s.offsetY,n.width,n.height)};function $a(){this.name="Base"}ut($a,$e),$a.prototype.measure=function(){},$a.prototype.arrange=function(){},$a.prototype.cc=function(t,e,i){i=t.Cf()*i.scale,0>=i&&(i=1);var n=t.gridCellSize,r=n.width;n=n.height;var o=t.naturalBounds,s=t.actualBounds,u=o.width,a=o.height,f=Math.ceil(u/r),c=Math.ceil(a/n),d=t.gridOrigin,g=d.x;d=d.y,e.save(),e.beginPath(),e.rect(0,0,u,a),e.clip();for(var m=[],y=t.W.j,x=y.length,M=0;M<x;M++){var S=y[M],N=[];if(m.push(N),S.visible){var T=S.interval;if(!(0>T)){S=P0(S.figure);for(var C=0;C<x;C++)if(C!==M){var D=y[C];D.visible&&P0(D.figure)===S&&(D=D.interval,D>T&&N.push(D))}}}}for(y=t.W.j,x=y.length,M=0;M<x;M++){var F=y[M];if(F.visible&&(N=F.interval||1,S=Math.abs(N),!(2>r*S*i))){if(T=F.segmentIndex,(!isFinite(T)||isNaN(T))&&(T=0),0>T&&(T=S-Math.min(-T,S)),T=Math.round(T%S),S=F.opacity,C=1,S!==1){if(S===0)continue;C=e.globalAlpha,e.globalAlpha=C*S}D=m[M];var $=!1,G=F.strokeDashArray;if(G!==null&&($=!0,e.Et(G,F.strokeDashOffset)),F.figure==="LineV"&&F.stroke!==null&&0<F.strokeWidth){for(e.lineWidth=F.strokeWidth,Hi(t,e,F.stroke,!1,!1,o,s),e.beginPath(),G=F=Math.floor((g-r)/r);G<=F+f;G++){var nt=G*r+g;0<=nt&&nt<=u&&vp(G,N,T,D)&&(e.moveTo(nt,0),e.lineTo(nt,a))}e.stroke()}else if(F.figure==="LineH"&&F.stroke!==null&&0<F.strokeWidth){for(e.lineWidth=F.strokeWidth,Hi(t,e,F.stroke,!1,!1,o,s),e.beginPath(),G=F=Math.floor((d-n)/n);G<=F+c;G++)nt=G*n+d,0<=nt&&nt<=a&&vp(G,N,T,D)&&(e.moveTo(0,nt),e.lineTo(u,nt));e.stroke()}else if(F.figure==="BarV"&&F.fill!==null)for(Hi(t,e,F.fill,!0,!1,o,s),F=F.width,isNaN(F)&&(F=r),nt=G=Math.floor((g-r)/r);nt<=G+f;nt++){var q=nt*r+g;0<=q+F&&q<=u&&vp(nt,N,T,D)&&e.fillRect(q,0,F,a)}else if(F.figure==="BarH"&&F.fill!==null)for(Hi(t,e,F.fill,!0,!1,o,s),F=F.height,isNaN(F)&&(F=n),nt=G=Math.floor((d-n)/n);nt<=G+c;nt++)q=nt*n+d,0<=q+F&&q<=a&&vp(nt,N,T,D)&&e.fillRect(0,q,u,F);$&&e.Ct(),S!==1&&(e.globalAlpha=C)}}e.restore(),e.uc(!1)};function vp(t,e,i,n){if(0>e)return t%e===i;if(t%e!==i)return!1;e=n.length;for(var r=0;r<e;r++)if(t%n[r]===i)return!1;return!0}function xp(){this.name="Base"}ut(xp,$e),xp.prototype.measure=function(t,e,i,n,r){if(i=n.length,t instanceof Ct||t instanceof z){var o=null,s=null,u=null;if(t instanceof z&&(s=o=t),t instanceof Ct&&(u=t,o=u.adornedPart),o instanceof z){var a=o;if(i===0)eo(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var f=t instanceof Ct?null:o.path,c=o.routeBounds;e=t.yg,e.h(0,0,c.width,c.height);var d=a.points;o=o.pointsCount,u!==null?u.Ck(!1):s!==null&&s.Ck(!1);var g=c.width,m=c.height;t.location.h(c.x,c.y),t.l.length=0,f!==null&&(cM(t,g,m,f),u=f.measuredBounds,e.Tc(u),t.l.push(u)),u=Nt.alloc();for(var y=k.alloc(),x=k.alloc(),M=0;M<i;M++){var S=n[M];if(S!==f)if(S.isPanelMain&&S instanceof gt){cM(t,g,m,S);var N=S.measuredBounds;e.Tc(N),t.l.push(N)}else if(2>o)S.measure(Infinity,Infinity,0,0),N=S.measuredBounds,e.Tc(N),t.l.push(N);else{var T=S.segmentIndex,C=S.segmentFraction,D=S.alignmentFocus;D.nc()&&(D=Wt);var F=S.segmentOrientation,$=S.segmentOffset;if(isNaN(T)){var G=a.na;N=Dt(),G.Wv(C,N);var nt=k.allocAt(N[0],N[1]);if(nt.add(a.i(0)),G.type===He||(G=G.figures.first()),nt.offset(-G.startX,-G.startY),G=N[2],F!==ji){var q=a.computeAngle(S,F,G);S.Yb=q}q=nt.x-c.x;var R=nt.y-c.y;k.free(nt),Xt(N)}else if(T<-o||T>=o)R=a.midPoint,G=a.midAngle,F!==ji&&(q=a.computeAngle(S,F,G),S.Yb=q),q=R.x-c.x,R=R.y-c.y;else{if(q=0,0<=T?(R=d.J(T),N=T<o-1?d.J(T+1):R):(q=o+T,R=d.J(q),N=0<q?d.J(q-1):R),R.Na(N)){0<=T?(G=0<T?d.J(T-1):R,q=T<o-2?d.J(T+2):N):(G=q<o-1?d.J(q+1):R,q=1<q?d.J(q-2):N),nt=G.Ge(R);var Lt=N.Ge(q);G=nt>Lt+10?0<=T?G.Sa(R):R.Sa(G):Lt>nt+10?0<=T?N.Sa(q):q.Sa(N):0<=T?G.Sa(q):q.Sa(G)}else G=0<=T?R.Sa(N):N.Sa(R);F!==ji&&(q=a.computeAngle(S,F,G),S.Yb=q),q=R.x+(N.x-R.x)*C-c.x,R=R.y+(N.y-R.y)*C-c.y}S.measure(Infinity,Infinity,0,0),N=S.measuredBounds,nt=S.naturalBounds;var mt=0;S instanceof gt&&(mt=S.strokeWidth),Lt=nt.width+mt;var Ot=nt.height+mt;u.reset(),u.translate(-N.x,-N.y),u.scale(S.scale,S.scale),u.rotate(F===ji?S.angle:G,Lt/2,Ot/2),F!==sf&&F!==uf||u.rotate(90,Lt/2,Ot/2),F!==lf&&F!==hf||u.rotate(-90,Lt/2,Ot/2),F===_p&&(45<G&&135>G||225<G&&315>G)&&u.rotate(-G,Lt/2,Ot/2),nt=new I(0,0,Lt,Ot),y.sj(nt,D),u.sa(y),D=-y.x+mt/2*S.scale,S=-y.y+mt/2*S.scale,x.assign($),mt=isNaN($.x);var re=isNaN($.y);if(mt||re){Lt=Lt/2+3,Ot=Ot/2+3;var je=45<=G&&135>=G,oe=225<=G&&315>=G;F===ji&&(je||oe)?(x.x=re?Lt:$.y,x.y=mt?Ot:$.x,je?0<=T||isNaN(T)&&.5>C||!mt||(x.y=-Ot):oe&&((0<=T||isNaN(T)&&.5>C)&&mt&&(x.y=-Ot),re&&(x.x=-Lt))):(mt&&(x.x=0<=T||isNaN(T)&&.5>C?Lt:-Lt),re&&(x.y=-Ot),x.rotate(G))}else x.rotate(G);q+=x.x,R+=x.y,nt.set(N),nt.h(q+D,R+S,N.width,N.height),t.l.push(nt),e.Tc(nt)}}if(s!==null)for(n=s.labelNodes;n.next();)n.value.measure(Infinity,Infinity);t.yg=e,t=t.location,t.h(t.x+e.x,t.y+e.y),eo(r,e.width||0,e.height||0),Nt.free(u),k.free(y),k.free(x)}}}},xp.prototype.arrange=function(t,e){var i=e.length;if(t instanceof Ct||t instanceof z){var n=null,r=null,o=null;t instanceof z&&(r=n=t),t instanceof Ct&&(o=t,n=o.adornedPart);var s=t instanceof Ct?null:n.path;if(t.l.length!==0){var u=t.l,a=0;if(s!==null&&a<t.l.length){var f=u[a];a++,s.arrange(f.x-t.yg.x,f.y-t.yg.y,f.width,f.height)}for(f=0;f<i;f++){var c=e[f];if(c!==s&&a<t.l.length){var d=u[a];a++,c.arrange(d.x-t.yg.x,d.y-t.yg.y,d.width,d.height)}}}if(e=n.points,i=e.count,2<=i&&t instanceof z)for(n=t.labelNodes;n.next();){var g=t;s=n.value,u=s.segmentIndex,a=s.segmentFraction;var m=s.alignmentFocus;if(f=s.segmentOrientation,c=s.segmentOffset,isNaN(u)){d=g.na;var y=Dt();d.Wv(a,y);var x=k.allocAt(y[0],y[1]);x.add(g.i(0)),d.type===He||(d=d.figures.first()),x.offset(-d.startX,-d.startY),d=y[2],f!==ji&&(g=g.computeAngle(s,f,d),s.angle=g),g=x.x;var M=x.y;k.free(x),Xt(y)}else if(u<-i||u>=i)M=g.midPoint,d=g.midAngle,f!==ji&&(g=g.computeAngle(s,f,d),s.angle=g),g=M.x,M=M.y;else{if(x=0,0<=u?(y=e.j[u],M=u<i-1?e.j[u+1]:y):(x=i+u,y=e.j[x],M=0<x?e.j[x-1]:y),y.Na(M)){0<=u?(d=0<u?e.j[u-1]:y,x=u<i-2?e.j[u+2]:M):(d=x<i-1?e.j[x+1]:y,x=1<x?e.j[x-2]:M);var S=d.Ge(y),N=M.Ge(x);d=S>N+10?0<=u?d.Sa(y):y.Sa(d):N>S+10?0<=u?M.Sa(x):x.Sa(M):0<=u?d.Sa(x):x.Sa(d)}else d=0<=u?y.Sa(M):M.Sa(y);f!==ji&&(g=g.computeAngle(s,f,d),s.angle=g),g=y.x+(M.x-y.x)*a,M=y.y+(M.y-y.y)*a}if(m.Ut())s.location=new k(g,M);else{m.nc()&&(m=Wt),y=Nt.alloc(),y.reset(),y.scale(s.scale,s.scale),y.rotate(s.angle,0,0);var T=s.naturalBounds;x=I.allocAt(0,0,T.width,T.height),S=k.alloc(),S.sj(x,m),y.sa(S),m=-S.x,N=-S.y;var C=T.width,D=T.height;T=k.alloc(),T.assign(c);var F=isNaN(c.x),$=isNaN(c.y);if(F||$){C=C/2+3,D=D/2+3;var G=45<=d&&135>=d,nt=225<=d&&315>=d;f===ji&&(G||nt)?(T.x=$?C:c.y,T.y=F?D:c.x,G?0<=u||isNaN(u)&&.5>a||!F||(T.y=-D):nt&&((0<=u||isNaN(u)&&.5>a)&&F&&(T.y=-D),$&&(T.x=-C))):(F&&(T.x=0<=u||isNaN(u)&&.5>a?C:-C),$&&(T.y=-D),T.rotate(d))}else T.rotate(d);g+=T.x,M+=T.y,y.Pw(x),m+=x.x,N+=x.y,u=k.allocAt(g+m,M+N),s.move(u),k.free(u),k.free(T),k.free(S),I.free(x),Nt.free(y)}}o!==null?o.Ck(!1):r!==null&&r.Ck(!1)}};function cM(t,e,i,n){if(Eo(n)!==!1){var r=n.strokeWidth;r===0&&t instanceof Ct&&t.type===V.Link&&t.adornedObject instanceof gt&&(r=t.adornedObject.strokeWidth),r*=n.ya,t instanceof z&&t.na!==null?(t=t.na.bounds,ro(n,t.x-r/2,t.y-r/2,t.width+r,t.height+r)):t instanceof Ct&&t.adornedPart.na!==null?(t=t.adornedPart.na.bounds,ro(n,t.x-r/2,t.y-r/2,t.width+r,t.height+r)):ro(n,-(r/2),-(r/2),e+r,i+r),en(n,!1)}}function Za(){this.name="Base"}ut(Za,$e),Za.prototype.measure=function(t,e,i,n,r,o,s){var u=t.rb();t.dh=[];var a=u.margin,f=a.right+a.left,c=a.top+a.bottom;u.measure(e,i,o,s);var d=u.measuredBounds,g=new I(-a.left,-a.top,Math.max(d.width+f,0),Math.max(d.height+c,0));t.dh.push(g),r.assign(g);for(var m=u.geometry,y=u.strokeWidth,x=m.flattenedSegments,M=m.flattenedLengths,S=m.flattenedTotalLength,N=x.length,T=0,C=0,D=Dt(),F=0;F<N;F++){var $=x[F],G=[];C=T=0;for(var nt=$.length,q=0;q<nt;q+=2){var R=$[q],Lt=$[q+1];if(q!==0){var mt=180*Math.atan2(Lt-C,R-T)/Math.PI;0>mt&&(mt+=360),G.push(mt)}T=R,C=Lt}D.push(G)}if(t.eh===null){for(var Ot=[],re=t.W.j,je=re.length,oe=0;oe<je;oe++){var se=re[oe],Mr=[];if(Ot.push(Mr),se.visible){var Ei=se.interval;if(!(0>Ei)){for(var Oi=0;Oi<je;Oi++)if(Oi!==oe){var De=re[Oi];if(De.visible&&se.constructor===De.constructor){var Sr=De.interval;Sr>Ei&&Mr.push(Sr)}}}}}t.eh=Ot}var Ql=t.eh,ql=t.W.j,Wo=ql.length,li=0,Oh=0,bl=S;t.Kj=[];for(var Ah,Ih=0;Ih<Wo;Ih++){var Pe=ql[Ih];if(Ah=[],Pe.visible&&Pe!==u){var Df=Math.abs(Pe.interval),Vd=t.graduatedTickUnit;if(!(2>Vd*Df*S/t.graduatedRange)){var tu=M[0][0],ur=0,_i=0;Oh=S*Pe.graduatedStart-1e-4,bl=S*Pe.graduatedEnd+1e-4;var Zs=Vd*Df,sn=t.graduatedTickBase;if(sn<t.graduatedMin){var eu=(t.graduatedMin-sn)/Zs;eu=eu%1==0?eu:Math.floor(eu+1),sn+=eu*Zs}else sn>t.graduatedMin+Zs&&(sn-=Math.floor((sn-t.graduatedMin)/Zs)*Zs);for(var Bh=Ql[Ih],Gm=sn,Fr=1;sn<t.graduatedMax+5e-8;Fr++){t:{for(var co=Bh.length,iu=0;iu<co;iu++)if(j.aa((sn-t.graduatedTickBase)%(Bh[iu]*t.graduatedTickUnit),0)){var nu=!1;break t}nu=!0}if(nu&&(Pe.graduatedSkip===null||!Pe.graduatedSkip(sn))&&(li=(sn-t.graduatedMin)*S/t.graduatedRange,li>S&&(li=S),Oh<=li&&li<=bl)){for(var Wn=D[ur][_i],po=M[ur][_i];ur<M.length;){for(;li>tu&&_i<M[ur].length-1;)_i++,Wn=D[ur][_i],po=M[ur][_i],tu+=po;if(li<=tu)break;ur++,_i=0,Wn=D[ur][_i],po=M[ur][_i],tu+=po}var zi=x[ur],Rh=zi[2*_i],Fh=zi[2*_i+1],Kn=(li-(tu-po))/po,Ef=new k(Rh+(zi[2*_i+2]-Rh)*Kn+y/2-m.bounds.x,Fh+(zi[2*_i+3]-Fh)*Kn+y/2-m.bounds.y);Ef.scale(u.scale,u.scale);var go=Wn,Cs=D[ur];if(1e-4>Kn?0<_i?go=Cs[_i-1]:j.aa(zi[0],zi[zi.length-2])&&j.aa(zi[1],zi[zi.length-1])&&(go=Cs[Cs.length-1]):.9999<Kn&&(_i+1<Cs.length?go=Cs[_i+1]:j.aa(zi[0],zi[zi.length-2])&&j.aa(zi[1],zi[zi.length-1])&&(go=Cs[0])),Wn!==go&&(180<Math.abs(Wn-go)&&(Wn<go?Wn+=360:go+=360),Wn=(Wn+go)/2%360),Pe instanceof qt){var kr="";Pe.graduatedFunction!==null?(kr=Pe.graduatedFunction(sn),kr=kr!=null?kr.toString():""):kr=(+sn.toFixed(2)).toString(),kr!==""&&Ah.push({Im:Ef,angle:Wn,text:kr})}else Ah.push({Im:Ef,angle:Wn})}sn=Gm+Fr*Zs}}}t.Kj.push(Ah)}Xt(D);var zd=t.Kj;if(zd!==null)for(var Xm=n.length,Js=0;Js<Xm;Js++){var ui=n[Js],Vr=zd[Js];if(ui.visible&&ui!==u&&Vr.length!==0){if(ui instanceof gt){var Re=t,Of=r,Ai=ui.alignmentFocus;Ai.nc()&&(Ai=io);var ln=ui.angle;ui.Yb=0,ui.measure(Infinity,Infinity,0,0),ui.Yb=ln;var $i=ui.measuredBounds,zr=$i.width,Ur=$i.height,ru=I.allocAt(0,0,zr,Ur),yn=k.alloc();yn.sj(ru,Ai),I.free(ru);for(var Vh=-yn.x,ou=-yn.y,Yr=new I,zh=Vr.length,Ls=0;Ls<zh;Ls++)for(var Ko=Vr[Ls],Gr=Ko.Im.x,Xr=Ko.Im.y,_o=Ko.angle,Uh=0;4>Uh;Uh++){switch(Uh){case 0:yn.h(Vh,ou);break;case 1:yn.h(Vh+zr,ou);break;case 2:yn.h(Vh,ou+Ur);break;case 3:yn.h(Vh+zr,ou+Ur)}yn.rotate(_o+ui.angle),yn.offset(Gr,Xr),Ls===0&&Uh===0?Yr.h(yn.x,yn.y,0,0):Yr.Oe(yn),yn.offset(-Gr,-Xr),yn.rotate(-_o-ui.angle)}k.free(yn),Re.dh!==null&&Re.dh.push(Yr),Ue(Of,Yr.x,Yr.y,Yr.width,Yr.height)}else if(ui instanceof qt){var yo=t,Hm=r;yo.yh===null&&(yo.yh=new qt);var Ui=yo.yh;TM(Ui,ui);var ce=ui.alignmentFocus;ce.nc()&&(ce=io);for(var Yi=ui.segmentOrientation,Hr=ui.segmentOffset,$o=new I,Yh=0,Zo=0,jn=0,js=0,Gh=0,Wm=Vr.length,su=0;su<Wm;su++){var hr=Vr[su];Yh=hr.Im.x,Zo=hr.Im.y,jn=hr.angle,Gh=js=ui.angle,Yi!==ji&&(Gh=Yi===of||Yi===Kp?jn+ui.angle:jn,js=z.computeAngle(Yi,Gh)),Ui.Yb=js,Ui.text=hr.text||"",Ui.measure(Infinity,Infinity,0,0);var Wr=Ui.measuredBounds,mo=Ui.naturalBounds,vo=mo.width,Kr=mo.height,xo=Nt.alloc();xo.reset(),xo.translate(-Wr.x,-Wr.y),xo.scale(Ui.scale,Ui.scale),xo.rotate(Gh,vo/2,Kr/2),Yi!==sf&&Yi!==uf||xo.rotate(90,vo/2,Kr/2),Yi!==lf&&Yi!==hf||xo.rotate(-90,vo/2,Kr/2),Yi===_p&&(45<jn&&135>jn||225<jn&&315>jn)&&xo.rotate(-jn,vo/2,Kr/2);var Ud=I.allocAt(0,0,vo,Kr),Jo=k.alloc();Jo.sj(Ud,ce),xo.sa(Jo);var Af=-Jo.x,Km=-Jo.y,ar=k.alloc();ar.assign(Hr),isNaN(ar.x)&&(ar.x=vo/2+3),isNaN(ar.y)&&(ar.y=-(Kr/2+3)),ar.rotate(jn),Yh+=ar.x+Af,Zo+=ar.y+Km;var Qs=new I(Yh,Zo,Wr.width,Wr.height),Xh=new I(Wr.x,Wr.y,Wr.width,Wr.height),lu=new I(mo.x,mo.y,mo.width,mo.height);hr.DA=js,hr.lineCount=Ui.lineCount,hr.lines=[Ui.ub,Ui.Ci,Ui.me,Ui.ze,Ui.Qb,Ui.lb,Ui.ke],hr.actualBounds=Qs,hr.measuredBounds=Xh,hr.naturalBounds=lu,su===0?$o.assign(Qs):$o.Tc(Qs),k.free(ar),k.free(Jo),I.free(Ud),Nt.free(xo)}yo.dh!==null&&yo.dh.push($o),Ue(Hm,$o.x,$o.y,$o.width,$o.height)}en(ui,!1)}}},Za.prototype.arrange=function(t,e,i){if(t.dh!==null){var n=t.rb(),r=t.Kj;if(r!==null){var o=t.dh,s=0,u=o[s];s++,n!==null&&n.arrange(u.x-i.x,u.y-i.y,u.width,u.height);for(var a=e.length,f=0;f<a;f++){var c=e[f];u=r[f],c.visible&&c!==n&&u.length!==0&&(u=o[s],s++,c.arrange(u.x-i.x,u.y-i.y,u.width,u.height))}t.dh=null}}},Za.prototype.cc=function(t,e,i){var n=i.wi;i.wi=!0;var r=t.naturalBounds,o=r.width;r=r.height,e.save(),e.beginPath(),e.rect(-1,-1,o+1,r+1),e.clip(),o=t.rb(),o.cc(e,i),r=t.Cf()*i.scale,0>=r&&(r=1);for(var s=o.actualBounds,u=t.W.j,a=t.Kj,f=u.length,c=0;c<f;c++){var d=u[c],g=a[c],m=g.length;if(d.visible&&d!==o&&g.length!==0){if(d instanceof gt){if(!(2>t.graduatedTickUnit*d.interval*o.geometry.flattenedTotalLength/t.graduatedRange*r)){var y=d.measuredBounds,x=d.strokeWidth*d.scale,M=d.alignmentFocus;M.nc()&&(M=io);for(var S=0;S<m;S++){var N=g[S].Im,T=g[S].angle,C=M,D=d.qb;D.reset(),D.translate(N.x+s.x,N.y+s.y),D.rotate(T+d.angle,0,0),D.translate(-y.width*C.x+C.offsetX+x/2,-y.height*C.y+C.offsetY+x/2),D.scale(d.scale,d.scale),th(d,!1),d.Yh.set(d.qb),d.ol=d.scale,ps(d,!1),d.cc(e,i),d.qb.reset()}}}else if(d instanceof qt)for(t.yh===null&&(t.yh=new qt),y=t.yh,TM(y,d),d=0;d<m;d++)x=g[d],x.actualBounds&&x.measuredBounds&&x.naturalBounds&&(y.Ub=x.text||"",y.Yb=x.DA||0,y.ad=x.lineCount||0,M=x.lines,M!==void 0&&(y.ub=M[0],y.Ci=M[1],y.me=M[2],y.ze=M[3],y.Qb=M[4],y.lb=M[5],y.ke=M[6]),x.naturalBounds&&(y.rc=x.naturalBounds),x.actualBounds&&(M=x.actualBounds,y.arrange(M.x,M.y,M.width,M.height)),M=x.actualBounds,y.arrange(M.x,M.y,M.width,M.height),S=x.measuredBounds,x=x.naturalBounds,N=y.qb,N.reset(),N.translate(M.x+s.x,M.y+s.y),N.translate(-S.x,-S.y),d0(y,N,x.x,x.y,x.width,x.height),th(y,!1),y.Yh.set(y.qb),y.ol=y.scale,ps(y,!1),y.cc(e,i))}}i.wi=n,e.restore(),e.uc(!0)};function V(t){ot.call(this),this.pa=t===void 0?V.Position:t,this.pa===null&&E("Panel type not specified or PanelLayout not loaded: "+t),this.W=new J,this.ib=Tu,this.pa===V.Grid&&(this.isAtomic=!0),this.Jn=ni,this.Uf=xr,this.pa===V.Table&&pM(this),this.lq=vr,this.jo=px,this.ko=Po,this.fo=0,this.eo=100,this.io=10,this.ho=0,this.ki=this.nb=this.eh=this.dh=this.Kj=null,this.xo=NaN,this.re=this.Ai=null,this.Il="category",this.Wd=null,this.yg=new I(NaN,NaN,NaN,NaN),this.yh=this.Fp=this.Ti=null,this.Mg=""}ut(V,ot);function pM(t){t.Dj=Tu,t.Vg=1,t.ri=null,t.pi=null,t.Ug=1,t.Tg=null,t.oi=null,t.vb=[],t.sb=[],t.bk=Qa,t.Aj=Qa,t.Wi=0,t.Ei=0}V.prototype.cloneProtected=function(t){if(ot.prototype.cloneProtected.call(this,t),t.pa=this.pa,t.ib=this.ib.G(),t.Jn=this.Jn.G(),t.Uf=this.Uf,t.pa===V.Table){t.Dj=this.Dj.G(),t.Vg=this.Vg,t.ri=this.ri,t.pi=this.pi,t.Ug=this.Ug,t.Tg=this.Tg,t.oi=this.oi;var e=[];if(0<this.vb.length){for(var i=this.vb,n=i.length,r=0;r<n;r++)if(i[r]!==void 0){var o=i[r].copy();o.rj(t),e[r]=o}}if(t.vb=e,e=[],0<this.sb.length)for(i=this.sb,n=i.length,r=0;r<n;r++)i[r]!==void 0&&(o=i[r].copy(),o.rj(t),e[r]=o);t.sb=e,t.bk=this.bk,t.Aj=this.Aj,t.Wi=this.Wi,t.Ei=this.Ei}t.lq=this.lq,t.jo=this.jo.G(),t.ko=this.ko.G(),t.fo=this.fo,t.eo=this.eo,t.io=this.io,t.ho=this.ho,t.Kj=this.Kj,t.eh=this.eh,t.nb=this.nb,t.ki=this.ki,t.xo=this.xo,t.Ai=this.Ai,t.re=this.re,t.Il=this.Il,t.yg.assign(this.yg),t.Mg=this.Mg,this.Fp!==null&&(t.Fp=this.Fp)},V.prototype.Af=function(t){ot.prototype.Af.call(this,t),t.W=this.W;for(var e=t.W.j,i=e.length,n=0;n<i;n++)e[n].qg=t;t.Ti=null},V.prototype.copy=function(){var t=ot.prototype.copy.call(this);if(t!==null){for(var e=this.W.j,i=e.length,n=0;n<i;n++){var r=e[n].copy();r.rj(t),r.Zj=null;var o=t.W,s=o.count;if(o.wb(s,r),o=t.part,o!==null){o.Vj=null,r.portId!==null&&o instanceof Z&&(o.Mh=!0);var u=t.diagram;u!==null&&u.undoManager.isUndoingRedoing||o.bb(Te,"elements",t,null,r,null,s)}}return t}return null},l=V.prototype,l.toString=function(){return"Panel("+this.type+")#"+Ne(this)},l.gp=function(t){ot.prototype.gp.call(this,t);for(var e=this.W.j,i=e.length,n=0;n<i;n++)e[n].gp(t)},l.dj=function(t,e){if(this.pa===V.Grid)this.pa.cc(this,t,e);else if(this.pa===V.Graduated)this.pa.cc(this,t,e);else{this.pa===V.Table&&(t.lineCap="butt",wp(this,t,!0,this.vb,!0),wp(this,t,!1,this.sb,!0),dM(this,t,!0,this.vb),dM(this,t,!1,this.sb),wp(this,t,!0,this.vb,!1),wp(this,t,!1,this.sb,!1));var i=this.isClipping&&this.pa===V.Spot;i&&t.save();for(var n=this.rb(),r=this.W.j,o=r.length,s=0;s<o;s++){var u=r[s];i&&u===n&&(t.clipInsteadOfFill=!0),u.cc(t,e),i&&u===n&&(t.clipInsteadOfFill=!1)}i&&(t.restore(),t.uc(!0))}};function dM(t,e,i,n){for(var r=n.length,o=t.actualBounds,s=t.naturalBounds,u=!0,a=0;a<r;a++){var f=n[a];if(f!==void 0){if(u)u=!1;else if(f.actual!==0){if(i){if(f.position>o.height)continue}else if(f.position>o.width)continue;var c=f.separatorStrokeWidth;isNaN(c)&&(c=i?t.Vg:t.Ug);var d=f.separatorStroke;if(d===null&&(d=i?t.ri:t.Tg),c!==0&&d!==null){Hi(t,e,d,!1,!1,s,o),d=!1;var g=f.separatorDashArray;g===null&&(g=i?t.pi:t.oi),g!==null&&(d=!0,e.Et(g,0)),e.beginPath(),g=f.position+c,i?g>o.height&&(c-=g-o.height):g>o.width&&(c-=g-o.width),f=f.position+c/2,e.lineWidth=c,c=t.ib,i?(f+=c.top,g=o.width-c.right,e.moveTo(c.left,f),e.lineTo(g,f)):(f+=c.left,g=o.height-c.bottom,e.moveTo(f,c.top),e.lineTo(f,g)),e.stroke(),d&&e.Ct()}}}}}function wp(t,e,i,n,r){for(var o=n.length,s=t.actualBounds,u=t.naturalBounds,a=0;a<o;a++){var f=n[a];if(f!==void 0&&f.background!==null&&f.coversSeparators!==r&&f.actual!==0){var c=i?s.height:s.width;if(!(f.position>c)){var d=f.wc(),g=f.separatorStrokeWidth;isNaN(g)&&(g=i?t.Vg:t.Ug);var m=f.separatorStroke;m===null&&(m=i?t.ri:t.Tg),m===null&&(g=0),d-=g,g=f.position+g,d+=f.actual,g+d>c&&(d=c-g),0>=d||(c=t.ib,Hi(t,e,f.background,!0,!1,u,s),i?e.fillRect(c.left,g+c.top,s.width-(c.left+c.right),d):e.fillRect(g+c.left,c.top,d,s.height-(c.top+c.bottom)))}}}}function P0(t){return t==="LineV"||t==="BarV"}l.wk=function(t,e,i,n,r){var o=this.fe(),s=this.transform,u=1/(s.m11*s.m22-s.m12*s.m21),a=s.m22*u,f=-s.m12*u,c=-s.m21*u,d=s.m11*u,g=u*(s.m21*s.dy-s.m22*s.dx),m=u*(s.m12*s.dx-s.m11*s.dy);if(this.areaBackground!==null)return s=this.actualBounds,j.Ef(s.left,s.top,s.right,s.bottom,t,e,i,n,r);if(this.background!==null)return o=t*a+e*c+g,u=t*f+e*d+m,t=i*a+n*c+g,a=i*f+n*d+m,r.h(0,0),i=this.naturalBounds,o=j.Ef(0,0,i.width,i.height,o,u,t,a,r),r.transform(s),o;o||(a=1,c=f=0,d=1,m=g=0),u=t*a+e*c+g,t=t*f+e*d+m,a=i*a+n*c+g,i=i*f+n*d+m,r.h(a,i),n=(a-u)*(a-u)+(i-t)*(i-t),f=!1,d=this.W.j,m=d.length,c=k.alloc(),g=null,e=Infinity;var y=null,x=this.isClipping&&this.pa===V.Spot;x&&(y=k.alloc(),g=this.rb(),(f=g.wk(u,t,a,i,y))&&(e=(u-y.x)*(u-y.x)+(t-y.y)*(t-y.y)));for(var M=0;M<m;M++){var S=d[M];S.visible&&S!==g&&S.wk(u,t,a,i,c)&&(f=!0,S=(u-c.x)*(u-c.x)+(t-c.y)*(t-c.y),S<n&&(n=S,r.set(c)))}return x&&(e>n&&r.set(y),k.free(y)),k.free(c),o&&r.transform(s),f},l.o=function(t){if(Eo(this)!==!0){ot.prototype.o.call(this,t),t=null,(this.pa===V.Auto||this.pa===V.Link)&&(t=this.rb());for(var e=this.W.j,i=e.length,n=0;n<i;n++){var r=e[n];if((r===t||r.isPanelMain)&&r.o(!0),!r.desiredSize.u()){var o=er(r,!1);(r instanceof xi||r instanceof V||r instanceof qt||o!==ve)&&r.o(!0)}}}},l.Bm=function(){if(Eo(this)===!1){en(this,!0),Us(this,!0);for(var t=this.W.j,e=t.length,i=0;i<e;i++)t[i].Bm()}},l.El=function(){if((this.F&2048)==0){th(this,!0),ps(this,!0);for(var t=this.W.j,e=t.length,i=0;i<e;i++)t[i].bw()}},l.bw=function(){ps(this,!0);for(var t=this.W.j,e=t.length,i=0;i<e;i++)t[i].bw()},l.Fm=function(t,e,i,n){var r=this.yg;r.h(0,0,0,0);var o=this.desiredSize,s=this.minSize;i===void 0&&(i=s.width,n=s.height),i=Math.max(i,s.width),n=Math.max(n,s.height);var u=this.maxSize;isNaN(o.width)||(t=Math.min(o.width,u.width)),isNaN(o.height)||(e=Math.min(o.height,u.height)),t=Math.max(i,t),e=Math.max(n,e);var a=this.ib;t=Math.max(t-a.left-a.right,0),e=Math.max(e-a.top-a.bottom,0);var f=this.W.j;f.length!==0&&this.pa.measure(this,t,e,f,r,i,n),t=r.width+a.left+a.right,a=r.height+a.top+a.bottom,isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(a=o.height),t=Math.min(u.width,t),a=Math.min(u.height,a),t=Math.max(s.width,t),a=Math.max(s.height,a),t=Math.max(i,t),a=Math.max(n,a),eo(r,t,a),eo(this.naturalBounds,t,a),ro(this,0,0,t,a)},l.rb=function(){if(this.Ti===null){var t=this.W.j,e=t.length;if(e===0)return null;for(var i=0;i<e;i++){var n=t[i];if(n.isPanelMain===!0)return this.Ti=n}this.Ti=t[0]}return this.Ti};function ao(t){return t.part!==null?t.part.locationObject:null}l.Hh=function(t,e,i,n){var r=this.W.j;if(this.actualBounds.h(t,e,i,n),r.length!==0){if(!this.desiredSize.u()){t=er(this,!0);var o=this.measuredBounds;e=o.width,o=o.height;var s=this.jh,u=s.left+s.right;switch(s=s.top+s.bottom,e===i&&o===n&&(t=ve),t){case ve:(e>i||o>n)&&(this.o(),this.measure(e>i?i:e,o>n?n:o,0,0));break;case ye:this.o(!0),this.measure(i+u,n+s,0,0);break;case _e:this.o(!0),this.measure(i+u,o+s,0,0);break;case ei:this.o(!0),this.measure(e+u,n+s,0,0)}}this.pa.arrange(this,r,this.yg)}},l.Jh=function(t){var e=this.naturalBounds,i=ao(this);if(Zn(0,0,e.width,e.height,t.x,t.y)){e=this.W.j;for(var n=e.length,r=k.allocAt(0,0);n--;){var o=e[n];if((o.visible||o===i)&&(gi(r.set(t),o.transform),o.$(r)))return k.free(r),!0}return k.free(r),!(this.mb===null&&this.ec===null)}return!1},l.Ft=function(t){if(this.bl===t)return this;for(var e=this.W.j,i=e.length,n=0;n<i;n++){var r=e[n].Ft(t);if(r!==null)return r}return null},l.Ym=function(t,e){if(e(this,t),t instanceof V){t=t.W.j;for(var i=t.length,n=0;n<i;n++)this.Ym(t[n],e)}};function Xs(t,e){gM(t,t,e)}function gM(t,e,i){i(e),e=e.W.j;for(var n=e.length,r=0;r<n;r++){var o=e[r];o instanceof V&&gM(t,o,i)}}function fT(t,e){yM(t,t,e)}function yM(t,e,i){if(i(e),e instanceof V){e=e.W.j;for(var n=e.length,r=0;r<n;r++)yM(t,e[r],i)}}l.vm=function(t){return mM(this,this,t)};function mM(t,e,i){if(i(e))return e;if(e instanceof V){e=e.W.j;for(var n=e.length,r=0;r<n;r++){var o=mM(t,e[r],i);if(o!==null)return o}}return null}l.ab=function(t){if(this.name===t)return this;var e=this.W.j,i=e.length;this.Ai===null&&this.re===null||(i=Mp(this));for(var n=0;n<i;n++){var r=e[n];if(r instanceof V){var o=r.ab(t);if(o!==null)return o}if(r.name===t)return r}return null};function vM(t){t=t.W.j;for(var e=t.length,i=0,n=0;n<e;n++){var r=t[n];r instanceof V?i=Math.max(i,vM(r)):r instanceof gt&&(i=Math.max(i,r.wh/2*r.ek*r.Cf()))}return i}l.fe=function(){return!(this.type===V.TableRow||this.type===V.TableColumn)},l.Vb=function(t,e,i){if(this.pickable===!1||(e===void 0&&(e=null),i===void 0&&(i=null),Pn(this)))return null;var n=this.naturalBounds,r=1/this.Cf(),o=this.fe(),s=o?t:gi(k.allocAt(t.x,t.y),this.transform),u=this.diagram,a=10,f=5;if(u!==null&&(a=u.zm("extraTouchArea"),f=a/2),Zn(-(f*r),-(f*r),n.width+a*r,n.height+a*r,s.x,s.y)){if(!this.isAtomic){r=this.W.j;var c=r.length;if(u=k.alloc(),f=(a=this.isClipping&&this.pa===V.Spot)?this.rb():null,a&&(f.fe()?gi(u.set(t),f.transform):u.set(t),!f.$(u)))return k.free(u),o||k.free(s),null;for(var d=ao(this);c--;){var g=r[c];if((g.visible||g===d)&&(g.fe()?gi(u.set(t),g.transform):u.set(t),!a||g!==f)){var m=null;if(g instanceof V?m=g.Vb(u,e,i):g.pickable===!0&&g.$(u)&&(m=g),m!==null&&(e!==null&&(m=e(m)),m!==null&&(i===null||i(m))))return k.free(u),o||k.free(s),m}}k.free(u)}return this.background===null&&this.areaBackground===null?(o||k.free(s),null):(t=Zn(0,0,n.width,n.height,s.x,s.y)?this:null,o||k.free(s),t)}return o||k.free(s),null},l.gj=function(t,e,i,n){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var r=this.naturalBounds,o=this.fe(),s=o?t:gi(k.allocAt(t.x,t.y),this.transform);if(r=Zn(0,0,r.width,r.height,s.x,s.y),this.type===V.TableRow||this.type===V.TableColumn||r){if(!this.isAtomic){for(var u=this.W.j,a=u.length,f=k.alloc(),c=ao(this);a--;){var d=u[a];if(d.visible||d===c){d.fe()?gi(f.set(t),d.transform):f.set(t);var g=d;d=d instanceof V?d:null,(d!==null?d.gj(f,e,i,n):g.$(f))&&g.pickable!==!1&&(e!==null&&(g=e(g)),g===null||i!==null&&!i(g)||n.add(g))}}k.free(f)}return o||k.free(s),r&&(this.background!==null||this.areaBackground!==null)}return o||k.free(s),!1},l.Bf=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var s=o;if(o===void 0&&(s=Nt.alloc(),s.reset()),s.multiply(this.transform),this.Ih(t,s))return N0(this,e,i,r),o===void 0&&Nt.free(s),!0;if(this.Nc(t,s)){if(!this.isAtomic)for(var u=ao(this),a=this.W.j,f=a.length;f--;){var c=a[f];if(c.visible||c===u){var d=c.actualBounds,g=this.naturalBounds;d.x>g.width||d.y>g.height||0>d.x+d.width||0>d.y+d.height||(d=c,c=c instanceof V?c:null,g=Nt.alloc(),g.set(s),(c!==null?c.Bf(t,e,i,n,r,g):nM(d,t,n,g))&&(e!==null&&(d=e(d)),d===null||i!==null&&!i(d)||r.add(d)),Nt.free(g))}}return o===void 0&&Nt.free(s),n}return o===void 0&&Nt.free(s),!1};function N0(t,e,i,n){for(var r=t.W.j,o=r.length;o--;){var s=r[o];if(s.visible){var u=s.actualBounds,a=t.naturalBounds;u.x>a.width||u.y>a.height||0>u.x+u.width||0>u.y+u.height||(s instanceof V&&N0(s,e,i,n),e!==null&&(s=e(s)),s===null||i!==null&&!i(s)||n.add(s))}}}l.Fg=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;i===void 0&&(i=null),n===void 0&&(n=null);var s=this.naturalBounds,u=this.fe(),a=u?t:gi(k.allocAt(t.x,t.y),this.transform),f=u?e:gi(k.allocAt(e.x,e.y),this.transform),c=a.Ge(f),d=0<a.x&&a.x<s.width&&0<a.y&&a.y<s.height||yi(a.x,a.y,0,0,0,s.height)<=c||yi(a.x,a.y,0,s.height,s.width,s.height)<=c||yi(a.x,a.y,s.width,s.height,s.width,0)<=c||yi(a.x,a.y,s.width,0,0,0)<=c;if(s=a.rd(0,0)<=c&&a.rd(0,s.height)<=c&&a.rd(s.width,0)<=c&&a.rd(s.width,s.height)<=c,u||(k.free(a),k.free(f)),d){if(!this.isAtomic){a=k.alloc(),f=k.alloc(),c=ao(this);for(var g=this.W.j,m=g.length;m--;){var y=g[m];if(y.visible||y===c){var x=y.actualBounds,M=this.naturalBounds;(!u||!(x.x>M.width||x.y>M.height||0>x.x+x.width||0>x.y+x.height))&&(y.fe()?(x=y.transform,gi(a.set(t),x),gi(f.set(e),x)):(a.set(t),f.set(e)),x=y,y=y instanceof V?y:null,(y!==null?y.Fg(a,f,i,n,r,o):x.ty(a,f,r))&&(i!==null&&(x=i(x)),x===null||n!==null&&!n(x)||o.add(x)))}}k.free(a),k.free(f)}return r?d:s}return!1};function T0(t){var e=null;return t instanceof gt&&(e=t.spot1,e===ni&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot1)),e===null&&(e=mi),e}function C0(t){var e=null;return t instanceof gt&&(e=t.spot2,e===ni&&(e=null),t=t.geometry,t!==null&&e===null&&(e=t.spot2)),e===null&&(e=Tr),e}l.add=function(t){this.wb(this.W.count,t)},l.J=function(t){return this.W.J(t)},l.wb=function(t,e){e instanceof rt&&E("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.Hg(e))&&(this===e&&E("Cannot make a Panel contain itself: "+this.toString()),E("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var i=e.panel;if(i!==null&&i!==this&&E("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.pa!==V.Grid||e instanceof gt||E("Can only add Shapes to a Grid Panel, not: "+e),this.pa!==V.Graduated||e instanceof gt||e instanceof qt||E("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.rj(this),e.Zj=null,this.itemArray!==null){var n=e.data;n!==null&&typeof n=="object"&&(this.Wd===null&&(this.Wd=new ct),this.Wd.add(n,e))}var r=this.W;if(n=-1,i===this){for(var o=-1,s=this.W.j,u=s.length,a=0;a<u;a++)if(s[a]===e){o=a;break}if(o!==-1){if(o===t||o+1>=r.count&&t>=r.count)return;r.cb(o),n=o}else E("element "+e.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>r.count)&&(t=r.count),r.wb(t,e),(t===0||e.isPanelMain)&&(this.Ti=null),Eo(this)||this.o(),e.o(!1),e.portId!==null?this.Mh=!0:e instanceof V&&e.Mh===!0&&(this.Mh=!0),this.eh=null,i=this.part,i!==null&&(i.Vj=null,i.kh=NaN,this.Mh&&i instanceof Z&&(i.Mh=!0),i.Mh&&i instanceof Z&&(i.tc=null),r=this.diagram,r!==null&&r.undoManager.isUndoingRedoing||(n!==-1&&i.bb(Ce,"elements",this,e,null,n,null),i.bb(Te,"elements",this,null,e,null,t),this.Ig()||j0(this,e,!1)))};function L0(t,e){t.F=e?t.F|16777216:t.F&-16777217}l.remove=function(t){for(var e=this.W.j,i=e.length,n=-1,r=0;r<i;r++)if(e[r]===t){n=r;break}n!==-1&&this.Mc(n,!0)},l.cb=function(t){0<=t&&this.Mc(t,!0)},l.Mc=function(t,e){var i=this.W,n=i.J(t);if(n.Zj=null,n.rj(null),this.Wd!==null){var r=n.data;typeof r=="object"&&this.Wd.remove(r)}i.cb(t),en(this,!1),this.o(),this.Ti===n&&(this.Ti=null),this.eh=null;var o=this.part;o!==null&&(o.Vj=null,o.kh=NaN,o.Mb(),o instanceof Z&&(n instanceof V?n.Ym(n,function(s,u){H0(o,u,e)}):H0(o,n,e)),i=this.diagram,i!==null&&i.undoManager.isUndoingRedoing||o.bb(Ce,"elements",this,n,null,t,null))},V.prototype.getRowDefinition=function(t){0>t&&lt(t,">= 0",V,"getRowDefinition:idx"),t=Math.round(t);var e=this.vb;if(e===void 0)return null;if(e[t]===void 0){var i=new ke;i.rj(this),i.isRow=!0,i.index=t,e[t]=i}return e[t]},V.prototype.uw=function(t){0>t&&lt(t,">= 0",V,"removeRowDefinition:idx"),t=Math.round(t);var e=this.vb;e!==void 0&&(this.bb(Ce,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},V.prototype.getColumnDefinition=function(t){0>t&&lt(t,">= 0",V,"getColumnDefinition:idx"),t=Math.round(t);var e=this.sb;if(e===void 0)return null;if(e[t]===void 0){var i=new ke;i.rj(this),i.isRow=!1,i.index=t,e[t]=i}return e[t]},l=V.prototype,l.sw=function(t){0>t&&lt(t,">= 0",V,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.sb;e!==void 0&&(this.bb(Ce,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},l.aA=function(t){if(0>t||this.type!==V.Table)return-1;for(var e=0,i=this.vb,n=i.length,r=this.Wi;r<n;r++){var o=i[r];if(o!==void 0&&(e+=o.total,t<e))break}return r},l.Tz=function(t){if(0>t||this.type!==V.Table)return-1;for(var e=0,i=this.sb,n=i.length,r=this.Ei;r<n;r++){var o=i[r];if(o!==void 0&&(e+=o.total,t<e))break}return r},l.qA=function(t,e){if(e===void 0&&(e=new k(NaN,NaN)),this.type!==V.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var i=this.rb();return i.geometry.Vv((t-this.graduatedMin)/this.graduatedRange,e),i.transform.sa(e)},l.rA=function(t){if(this.type!==V.Graduated)return NaN;var e=this.rb();return e.transform.Gd(t),e.geometry.xy(t)*this.graduatedRange+this.graduatedMin};function xM(t){return t=t.ki,t!==null&&t.s}function Tn(t){var e=t.ki;if(e===null)t.data!==null&&E("Template cannot have .data be non-null: "+t),t.ki=e=new J;else if(e.s)return;var i=new J;L0(t,!1),t.Ym(t,function(f,c){var d=c.fb;if(d!==null)for(g0(c,!1),d=d.iterator;d.next();){var g=d.value;g.mode===ud&&g0(c,!0);var m=g.sourceName;m!==null&&(m==="/"&&L0(f,!0),m=YS(g,f,c),m!==null&&(i.add(m),m.fm===null&&(m.fm=new J),m.fm.add(g))),e.add(g)}if(c instanceof V&&c.type===V.Table){if(0<c.vb.length){for(f=c.vb,d=f.length,g=0;g<d;g++)if(m=f[g],m!==void 0&&m.fb!==null)for(var y=m.fb.iterator;y.next();){var x=y.value;x.qd=m,x.cq=2,x.lm=m.index,e.add(x)}}if(0<c.sb.length){for(c=c.sb,f=c.length,d=0;d<f;d++)if(g=c[d],g!==void 0&&g.fb!==null)for(m=g.fb.iterator;m.next();)y=m.value,y.qd=g,y.cq=1,y.lm=g.index,e.add(y)}}});for(var n=i.iterator;n.next();){var r=n.value;if(r.fm!==null){g0(r,!0);for(var o=r.fm.iterator;o.next();){var s=o.value;r.fb===null&&(r.fb=new J),r.fb.add(s)}}r.fm=null}for(n=e.iterator;n.next();)if(r=n.value,o=r.qd,o!==null){r.qd=null;var u=r.targetProperty,a=u.indexOf(".");0<a&&o instanceof V&&(s=u.substring(0,a),u=u.substr(a+1),a=o.ab(s),a!==null?(o=a,r.targetProperty=u):wt('Warning: unable to find GraphObject named "'+s+'" for Binding: '+r.toString())),o instanceof ke?(s=Ne(o.panel),r.vj=s===void 0?-1:s,o.panel.bl=r.vj):o instanceof ot?(s=Ne(o),r.vj=s===void 0?-1:s,o.bl=r.vj):E("Unknown type of binding target: "+o)}e.freeze(),t instanceof rt&&t.Oc()&&t.Ta()}l.Gz=function(t){t===void 0&&(t=!1);var e=this.copy();return fT(e,function(i){i instanceof V&&(i.ki=null,i.nb=null);var n=i.fb;n!==null&&(i.fb=null,n.each(function(r){i.bind(r.copy())})),n=i.Ng,n!==null&&(i.Ng=null,n.each(function(r){i.Qw(r.value.copy())}))}),t&&Tn(e),e},l.Ca=function(t){var e=this.ki;if(e!==null)for(t===void 0&&(t=""),e=e.iterator;e.next();){var i=e.value,n=i.sourceProperty;if((t===""||n===""||n===t)&&(n=i.targetProperty,i.converter!==null||n!=="")){n=this.data;var r=i.sourceName;if(r!==null)n=r===""?this:r==="/"?this:r==="."?this:r===".."?this:this.ab(r);else{var o=this.diagram;o!==null&&i.isToModel&&(n=o.model.modelData)}if(n!==null){o=this;var s=i.vj;if(s!==-1){if(o=this.Ft(s),o===null)continue}else i.qd!==null&&(o=i.qd);if(r==="/"?n=o.part:r==="."?n=o:r===".."&&(n=o.panel),r=i.cq,r!==0){if(!(o instanceof V))continue;r===1?o=o.getColumnDefinition(i.lm):r===2&&(o=o.getRowDefinition(i.lm))}o!==void 0&&i.Tw(o,n)}}}};function cT(t,e){t=t.W.j;for(var i=t.length,n=e.length,r=0,o=null;r<i&&(o=t[r],!(o instanceof V&&o.data!==null));)r++,o=t[r];if(i-r!==n)return!0;if(o===null)return 0<n;for(var s=0;r<i&&s<n;){if(o=t[r],!(o instanceof V)||o.data!==e[s])return!0;r++,s++}return!1}function Mp(t){if(t.type===V.Spot||t.type===V.Auto)return Math.min(t.W.length,1);if(t.type===V.Link){t=t.W;for(var e=t.length,i=0;i<e;i++){var n=t.J(i);if(!(n instanceof gt&&n.isPanelMain))break}return i}return t.type===V.Table&&0<t.W.length&&(t=t.W.J(0),t.isPanelMain&&t instanceof V&&(t.type===V.TableRow||t.type===V.TableColumn))?1:0}l.cu=function(){for(var t=Mp(this);this.W.length>t;)this.Mc(this.W.length-1,!1);if(t=this.itemArray,t!==null)for(var e=t.length,i=0;i<e;i++)wM(this,t[i],i)},l.sy=function(t){return t==null||this.Wd===null?null:this.Wd.H(t)};function wM(t,e,i){if(!(e==null||0>i)){var n=pT(t,e),r=t.itemTemplateMap,o=null;r!==null&&(o=r.H(n)),o===null&&(SM||(SM=!0,wt('No item template Panel found for category "'+n+'" on '+t),wt("  Using default item template."),n=new V,r=new qt,r.bind(new Me("text","",Xe)),n.add(r),kM=n),o=kM),n=o,n!==null&&(Tn(n),n=n.copy(),(n.F&16777216)!=0&&(r=t.hj(),r!==null&&L0(r,!0)),typeof e=="object"&&(t.Wd===null&&(t.Wd=new ct),t.Wd.add(e,n)),r=i+Mp(t),t.wb(r,n),n.nb=e,MM(t,r,i),n.nb=null,n.data=e)}}function MM(t,e,i){for(t=t.W;e<t.length;){var n=t.J(e);if(n instanceof V){var r=e,o=i;n.type===V.TableRow?n.row=r:n.type===V.TableColumn&&(n.column=r),n.itemIndex=o}e++,i++}}function pT(t,e){if(e===null)return"";if(t=t.Il,typeof t=="function")t=t(e);else if(typeof t=="string"&&typeof e=="object"){if(t==="")return"";t=ge(e,t)}else return"";return t===void 0?"":typeof t=="string"?t:(E("Panel.getCategoryForItemData found a non-string category for "+e+": "+t),"")}function j0(t,e,i){var n=e.enabledChanged;if(n!==null&&n(e,i),e instanceof V){e=e.W.j,n=e.length;for(var r=0;r<n;r++){var o=e[r];i&&o instanceof V&&!o.isEnabled||j0(t,o,i)}}}function wr(t,e){e.name=t,ir.add(t,e)}X.Object.defineProperties(V.prototype,{type:{get:function(){return this.pa},set:function(t){var e=this.pa;e!==t&&(this.pa=t,this.pa===V.Grid?this.isAtomic=!0:this.pa===V.Table&&pM(this),this.o(),this.g("type",e,t))}},elements:{get:function(){return this.W.iterator}},naturalBounds:{get:function(){return this.rc}},padding:{get:function(){return this.ib},set:function(t){typeof t=="number"?(0>t&&lt(t,">= 0",V,"padding"),t=new Rt(t)):(0>t.left&&lt(t.left,">= 0",V,"padding:value.left"),0>t.right&&lt(t.right,">= 0",V,"padding:value.right"),0>t.top&&lt(t.top,">= 0",V,"padding:value.top"),0>t.bottom&&lt(t.bottom,">= 0",V,"padding:value.bottom"));var e=this.ib;e.w(t)||(this.ib=t=t.G(),this.o(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Jn},set:function(t){var e=this.Jn;e.w(t)||(this.Jn=t=t.G(),this.o(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Uf},set:function(t){var e=this.Uf;e!==t&&(this.Uf=t,this.o(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return this.Dj===void 0?Tu:this.Dj},set:function(t){if(this.Dj!==void 0){typeof t=="number"&&(t=new Rt(t));var e=this.Dj;e.w(t)||(this.Dj=t=t.G(),this.o(),this.g("defaultSeparatorPadding",e,t))}}},defaultRowSeparatorStroke:{get:function(){return this.ri===void 0?null:this.ri},set:function(t){var e=this.ri;e!==t&&(t===null||typeof t=="string"||t instanceof At)&&(t instanceof At&&t.freeze(),this.ri=t,this.M(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return this.Vg===void 0?1:this.Vg},set:function(t){if(this.Vg!==void 0){var e=this.Vg;e!==t&&isFinite(t)&&0<=t&&(this.Vg=t,this.o(),this.g("defaultRowSeparatorStrokeWidth",e,t))}}},defaultRowSeparatorDashArray:{get:function(){return this.pi===void 0?null:this.pi},set:function(t){if(this.pi!==void 0){var e=this.pi;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||E("defaultRowSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.pi=t,this.M(),this.g("defaultRowSeparatorDashArray",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return this.Tg===void 0?null:this.Tg},set:function(t){if(this.Tg!==void 0){var e=this.Tg;e!==t&&(t===null||typeof t=="string"||t instanceof At)&&(t instanceof At&&t.freeze(),this.Tg=t,this.M(),this.g("defaultColumnSeparatorStroke",e,t))}}},defaultColumnSeparatorStrokeWidth:{get:function(){return this.Ug===void 0?1:this.Ug},set:function(t){if(this.Ug!==void 0){var e=this.Ug;e!==t&&isFinite(t)&&0<=t&&(this.Ug=t,this.o(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}}},defaultColumnSeparatorDashArray:{get:function(){return this.oi===void 0?null:this.oi},set:function(t){if(this.oi!==void 0){var e=this.oi;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||E("defaultColumnSeparatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.oi=t,this.M(),this.g("defaultColumnSeparatorDashArray",e,t)}}}},viewboxStretch:{get:function(){return this.lq},set:function(t){var e=this.lq;e!==t&&(this.lq=t,this.o(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.jo},set:function(t){var e=this.jo;if(!e.w(t)){t.u()&&t.width!==0&&t.height!==0||E("Invalid Panel.gridCellSize: "+t),this.jo=t.G();var i=this.diagram;i!==null&&this===i.grid&&jo(i),this.M(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.ko},set:function(t){var e=this.ko;if(!e.w(t)){t.u()||E("Invalid Panel.gridOrigin: "+t),this.ko=t.G();var i=this.diagram;i!==null&&this===i.grid&&jo(i),this.M(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.fo},set:function(t){var e=this.fo;e!==t&&(this.fo=t,this.o(),this.g("graduatedMin",e,t),Dl(this)&&(t=this.part,t!==null&&zs(this,t,"graduatedRange")))}},graduatedMax:{get:function(){return this.eo},set:function(t){var e=this.eo;e!==t&&(this.eo=t,this.o(),this.g("graduatedMax",e,t),Dl(this)&&(t=this.part,t!==null&&zs(this,t,"graduatedRange")))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.io},set:function(t){var e=this.io;e!==t&&0<t&&(this.io=t,this.o(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.ho},set:function(t){var e=this.ho;e!==t&&(this.ho=t,this.o(),this.g("graduatedTickBase",e,t))}},Mh:{get:function(){return(this.F&8388608)!=0},set:function(t){(this.F&8388608)!=0!==t&&(this.F^=8388608)}},rowCount:{get:function(){return this.vb===void 0?0:this.vb.length}},columnCount:{get:function(){return this.sb===void 0?0:this.sb.length}},rowSizing:{get:function(){return this.bk===void 0?Qa:this.bk},set:function(t){if(this.bk!==void 0){var e=this.bk;e!==t&&(this.bk=t,this.o(),this.g("rowSizing",e,t))}}},columnSizing:{get:function(){return this.Aj===void 0?Qa:this.Aj},set:function(t){if(this.Aj!==void 0){var e=this.Aj;e!==t&&(this.Aj=t,this.o(),this.g("columnSizing",e,t))}}},topIndex:{get:function(){return this.Wi===void 0?0:this.Wi},set:function(t){if(this.Wi!==void 0){var e=this.Wi;e!==t&&((!isFinite(t)||0>t)&&E("Panel.topIndex must be greater than zero and a real number, not: "+t),this.Wi=t,this.o(),this.g("topIndex",e,t))}}},leftIndex:{get:function(){return this.Ei===void 0?0:this.Ei},set:function(t){if(this.Ei!==void 0){var e=this.Ei;e!==t&&((!isFinite(t)||0>t)&&E("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.Ei=t,this.o(),this.g("leftIndex",e,t))}}},data:{get:function(){return this.nb},set:function(t){var e=this.nb;if(e!==t){var i=this instanceof rt&&!(this instanceof Ct);Tn(this),this.nb=t;var n=this.diagram;n!==null&&(i?(i=n.partManager,this instanceof z?(e!==null&&i.Ue.remove(e),t!==null&&i.Ue.add(t,this)):this instanceof rt&&(e!==null&&i.Ve.remove(e),t!==null&&i.Ve.add(t,this))):(i=this.panel,i!==null&&i.Wd!==null&&(e!==null&&i.Wd.remove(e),t!==null&&i.Wd.add(t,this)))),this.g("data",e,t),n!==null&&n.undoManager.isUndoingRedoing||t!==null&&this.Ca()}}},itemIndex:{get:function(){return this.xo},set:function(t){var e=this.xo;e!==t&&(this.xo=t,this.g("itemIndex",e,t))}},itemArray:{get:function(){return this.Ai},set:function(t){var e=this.Ai;if(e!==t||t!==null&&cT(this,t)){var i=this.diagram;e!==t&&(i!==null&&e!==null&&cm(i.partManager,this,i),this.Ai=t,i!==null&&t!==null&&fm(i.partManager,this)),this.g("itemArray",e,t),i!==null&&i.undoManager.isUndoingRedoing||this.cu()}}},itemTemplate:{get:function(){return this.re===null?null:this.re.H("")},set:function(t){if(this.re===null){if(t===null)return;this.re=new ct}var e=this.re.H("");e!==t&&((t instanceof rt||t.isPanelMain)&&E("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.re.add("",t),this.g("itemTemplate",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.cu())}},itemTemplateMap:{get:function(){return this.re},set:function(t){var e=this.re;if(e!==t){for(var i=t.iterator;i.next(););this.re=t,this.g("itemTemplateMap",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.cu()}}},itemCategoryProperty:{get:function(){return this.Il},set:function(t){var e=this.Il;e!==t&&(this.Il=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return(this.F&1048576)!=0},set:function(t){var e=(this.F&1048576)!=0;e!==t&&(this.F^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return(this.F&2097152)!=0},set:function(t){var e=(this.F&2097152)!=0;e!==t&&(!t||this.type===V.Spot||this instanceof dt||wt("Warning: Panel.isClipping set on non-Spot Panel: "+this.toString()),this.F^=2097152,this instanceof dt&&(this.Ya=null),this.o(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return(this.F&33554432)!=0},set:function(t){var e=(this.F&33554432)!=0;e!==t&&(this.F^=33554432,this.o(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return(this.F&4194304)!=0},set:function(t){var e=(this.F&4194304)!=0;if(e!==t){var i=this.panel===null||this.panel.Ig();this.F^=4194304,this.g("isEnabled",e,t),e=this.diagram,e!==null&&e.undoManager.isUndoingRedoing||i&&j0(this,this,t)}}},alignmentFocusName:{get:function(){return this.Mg},set:function(t){var e=this.Mg;e!==t&&(this.Mg=t,this.o(),this.g("alignmentFocusName",e,t))}}}),X.Object.defineProperties(V,{Position:{get:function(){return ir.H("Position")}},Horizontal:{get:function(){return ir.H("Horizontal")}},Vertical:{get:function(){return ir.H("Vertical")}},Spot:{get:function(){return ir.H("Spot")}},Auto:{get:function(){return ir.H("Auto")}},Table:{get:function(){return ir.H("Table")}},Viewbox:{get:function(){return ir.H("Viewbox")}},TableRow:{get:function(){return ir.H("TableRow")}},TableColumn:{get:function(){return ir.H("TableColumn")}},Link:{get:function(){return ir.H("Link")}},Grid:{get:function(){return ir.H("Grid")}},Graduated:{get:function(){return ir.H("Graduated")}}}),V.prototype.findItemPanelForData=V.prototype.sy,V.prototype.rebuildItemElements=V.prototype.cu,V.prototype.updateTargetBindings=V.prototype.Ca,V.prototype.copyTemplate=V.prototype.Gz,V.prototype.graduatedValueForPoint=V.prototype.rA,V.prototype.graduatedPointForValue=V.prototype.qA,V.prototype.findColumnForLocalX=V.prototype.Tz,V.prototype.findRowForLocalY=V.prototype.aA,V.prototype.removeColumnDefinition=V.prototype.sw,V.prototype.removeRowDefinition=V.prototype.uw,V.prototype.removeAt=V.prototype.cb,V.prototype.remove=V.prototype.remove,V.prototype.insertAt=V.prototype.wb,V.prototype.elt=V.prototype.J,V.prototype.add=V.prototype.add,V.prototype.findObject=V.prototype.ab,V.prototype.findInVisualTree=V.prototype.vm,V.prototype.walkVisualTreeFrom=V.prototype.Ym,V.prototype.findMainElement=V.prototype.rb;var SM=!1,kM=null,ir=new ct;V.className="Panel",V.definePanelLayout=wr,wr("Position",new hp),wr("Vertical",new fp),wr("Auto",new pp),wr("Link",new xp);function ke(){Oe(this),this.qg=null,this.ns=!0,this.Pa=0,this.cd=NaN,this.nh=0,this.lh=Infinity,this.zb=ni,this.la=this.ac=this.ha=0,this.fb=null,this.Up=D0,this.Be=xr,this.Op=this.ug=null,this.Pp=NaN,this.mb=this.dk=null,this.Fn=!1}ke.prototype.copy=function(){var t=new ke;return t.ns=this.ns,t.Pa=this.Pa,t.cd=this.cd,t.nh=this.nh,t.lh=this.lh,t.zb=this.zb,t.ha=this.ha,t.ac=this.ac,t.la=this.la,t.Be=this.Be,t.Up=this.Up,this.ug===null?t.ug=null:t.ug=this.ug.G(),t.Op=this.Op,t.Pp=this.Pp,t.dk=null,this.dk!==null&&(t.separatorDashArray=Ge(this.separatorDashArray)),t.mb=this.mb,t.Fn=this.Fn,t.fb=this.fb,t},l=ke.prototype,l.Bt=function(t){t.isRow?this.height=t.height:this.width=t.width,this.minimum=t.minimum,this.maximum=t.maximum,this.alignment=t.alignment,this.stretch=t.stretch,this.sizing=t.sizing,this.ug=t.separatorPadding===null?null:t.separatorPadding.G(),this.separatorStroke=t.separatorStroke,this.separatorStrokeWidth=t.separatorStrokeWidth,this.dk=null,t.separatorDashArray&&(this.dk=Ge(t.separatorDashArray)),this.background=t.background,this.coversSeparators=t.coversSeparators,this.fb=t.fb},l.jb=function(t){t.classType===ke&&(this.sizing=t)},l.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Ne(this)},l.rj=function(t){this.qg=t},l.Hv=function(){var t=0,e=0,i=this.qg,n=this.isRow;if(i!==null&&i.type===V.Table)for(var r=n?i.vb.length:i.sb.length,o=0;o<r;o++){var s=n?i.vb[o]:i.sb[o];if(s!==void 0){e=s.index;break}}if(this.index!==e&&(e=this.separatorStroke,e===null&&i!==null&&(e=this.isRow?i.defaultRowSeparatorStroke:i.defaultColumnSeparatorStroke),e!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(i!==null?t=this.isRow?i.defaultRowSeparatorStrokeWidth:i.defaultColumnSeparatorStrokeWidth:t=0))),e=this.ug,e===null)if(i!==null)e=i.defaultSeparatorPadding;else return t;return t+(this.isRow?e.top:e.left)},l.wc=function(){var t=0,e=this.qg,i=0,n=this.isRow;if(e!==null&&e.type===V.Table)for(var r=n?e.vb.length:e.sb.length,o=0;o<r;o++){var s=n?e.vb[o]:e.sb[o];if(s!==void 0){i=s.index;break}}if(this.index!==i&&(i=this.separatorStroke,i===null&&e!==null&&(i=n?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),i!==null&&(t=this.separatorStrokeWidth,isNaN(t)&&(e!==null?t=n?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:t=0))),n=this.ug,n===null)if(e!==null)n=e.defaultSeparatorPadding;else return t;return t+(this.isRow?n.top+n.bottom:n.left+n.right)},l.Cb=function(t,e,i){var n=this.qg;if(n!==null&&(n.bb(le,t,this,e,i,void 0,void 0),this.fb!==null&&(e=n.diagram,e!==null&&!e.skipsModelSourceBindings&&(n=n.hj(),n!==null&&(e=n.data,e!==null)))))for(i=this.fb.iterator;i.next();)i.value.jr(this,e,t,n)};function Sp(t){if(t.sizing===D0){var e=t.qg;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}l.bind=function(t){t.qd=this;var e=this.panel;if(e!==null){var i=e.hj();i!==null&&xM(i)&&E("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+e)}this.fb===null&&(this.fb=new J),this.fb.add(t)},X.Object.defineProperties(ke.prototype,{panel:{get:function(){return this.qg}},isRow:{get:function(){return this.ns},set:function(t){this.ns=t}},index:{get:function(){return this.Pa},set:function(t){this.Pa=t}},height:{get:function(){return this.cd},set:function(t){var e=this.cd;e!==t&&(0>t&&lt(t,">= 0",ke,"height"),this.cd=t,this.actual=this.ha,this.panel!==null&&this.panel.o(),this.Cb("height",e,t))}},width:{get:function(){return this.cd},set:function(t){var e=this.cd;e!==t&&(0>t&&lt(t,">= 0",ke,"width"),this.cd=t,this.actual=this.ha,this.panel!==null&&this.panel.o(),this.Cb("width",e,t))}},minimum:{get:function(){return this.nh},set:function(t){var e=this.nh;e!==t&&((0>t||!isFinite(t))&&lt(t,">= 0",ke,"minimum"),this.nh=t,this.actual=this.ha,this.panel!==null&&this.panel.o(),this.Cb("minimum",e,t))}},maximum:{get:function(){return this.lh},set:function(t){var e=this.lh;e!==t&&(0>t&&lt(t,">= 0",ke,"maximum"),this.lh=t,this.actual=this.ha,this.panel!==null&&this.panel.o(),this.Cb("maximum",e,t))}},alignment:{get:function(){return this.zb},set:function(t){var e=this.zb;e.w(t)||(this.zb=t.G(),this.panel!==null&&this.panel.o(),this.Cb("alignment",e,t))}},stretch:{get:function(){return this.Be},set:function(t){var e=this.Be;e!==t&&(this.Be=t,this.panel!==null&&this.panel.o(),this.Cb("stretch",e,t))}},separatorPadding:{get:function(){return this.ug},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.ug;t!==null&&e!==null&&e.w(t)||(t!==null&&(t=t.G()),this.ug=t,this.panel!==null&&this.panel.o(),this.Cb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.Op},set:function(t){var e=this.Op;e!==t&&(t!==null&&Ol(t,"RowColumnDefinition.separatorStroke"),t instanceof At&&t.freeze(),this.Op=t,this.panel!==null&&this.panel.o(),this.Cb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Pp},set:function(t){var e=this.Pp;e!==t&&(this.Pp=t,this.panel!==null&&this.panel.o(),this.Cb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.dk},set:function(t){var e=this.dk;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];typeof o=="number"&&0<=o&&isFinite(o)||E("separatorDashArray value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.dk=t,this.panel!==null&&this.panel.M(),this.Cb("separatorDashArray",e,t)}}},background:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&(t!==null&&Ol(t,"RowColumnDefinition.background"),t instanceof At&&t.freeze(),this.mb=t,this.panel!==null&&this.panel.M(),this.Cb("background",e,t))}},coversSeparators:{get:function(){return this.Fn},set:function(t){var e=this.Fn;e!==t&&(this.Fn=t,this.panel!==null&&this.panel.M(),this.Cb("coversSeparators",e,t))}},sizing:{get:function(){return this.Up},set:function(t){var e=this.Up;e!==t&&(this.Up=t,this.panel!==null&&this.panel.o(),this.Cb("sizing",e,t))}},actual:{get:function(){return this.ha},set:function(t){this.ha=isNaN(this.cd)?Math.max(Math.min(this.lh,t),this.nh):Math.max(Math.min(this.lh,this.cd),this.nh)}},measured:{get:function(){return this.ac},set:function(t){this.ac=t}},total:{get:function(){return this.ha+this.wc()},set:function(t){this.ha=isNaN(this.cd)?Math.max(Math.min(this.lh,t),this.nh):Math.max(Math.min(this.lh,this.cd),this.nh),this.ha=Math.max(0,this.ha-this.wc())}},position:{get:function(){return this.la},set:function(t){this.la=t}}}),ke.prototype.bind=ke.prototype.bind,ke.prototype.computeEffectiveSpacing=ke.prototype.wc,ke.prototype.computeEffectiveSpacingTop=ke.prototype.Hv;var D0=new K(ke,"Default",0),Ja=new K(ke,"None",1),Qa=new K(ke,"ProportionalExtra",2);ke.className="RowColumnDefinition",ke.Default=D0,ke.None=Ja,ke.ProportionalExtra=Qa;function gt(){ot.call(this),this.Dd=this.na=null,this.Vn="None",this.co=xr,this.Ic=this.rl="black",this.wh=1,this.hm="butt",this.im="miter",this.ek=10,this.uh=null,this.vh=0,this.rf=this.qf=ni,this.np=this.mp=NaN,this.po=!1,this.pp=null,this.sl=this.om="None",this.Vd=1,this.Td=0,this.Rd=1,this.Sd=null}ut(gt,ot),gt.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.na=this.na,t.Vn=this.Vn,t.co=this.co,t.Dd=this.Dd,t.rl=this.rl,t.Ic=this.Ic,t.wh=this.wh,t.hm=this.hm,t.im=this.im,t.ek=this.ek,this.uh!==null&&(t.uh=Ge(this.uh)),t.vh=this.vh,t.qf=this.qf.G(),t.rf=this.rf.G(),t.mp=this.mp,t.np=this.np,t.po=this.po,t.pp=this.pp,t.om=this.om,t.sl=this.sl,t.Vd=this.Vd,t.Td=this.Td,t.Rd=this.Rd,t.Sd=this.Sd},l=gt.prototype,l.jb=function(t){t===ve||t===vr||t===Ua||t===xr?this.geometryStretch=t:ot.prototype.jb.call(this,t)},l.toString=function(){return"Shape("+(this.figure!=="None"?this.figure:this.toArrow!=="None"?this.toArrow:this.fromArrow)+")#"+Ne(this)};function uh(t,e,i,n){var r=i.length;if(!(4>r)){var o=n.measuredBounds,s=Math.max(1,o.width);o=o.height;for(var u=i[0],a=i[1],f,c,d,g,m,y,x=0,M=Dt(),S=2;S<r;S+=2)f=i[S],c=i[S+1],d=f-u,u=c-a,d===0&&(d=.001),g=u/d,m=Math.atan2(u,d),y=Math.sqrt(d*d+u*u),M.push([d,m,g,y]),x+=y,u=f,a=c;u=i[0],a=i[1],d=n.measuredBounds.width,n instanceof gt&&(d-=n.strokeWidth),1>d&&(d=1),r=i=d,f=s/2,c=f!==0,S=0,y=M[S],d=y[0],m=y[1],g=y[2],y=y[3];for(var N=0;.1<=x;){if(N===0&&(c?(r=i,r-=f,x-=f,c=!1):r=i,r===0&&(r=1)),r>x){Xt(M);return}r>y?(N=r-y,r=y):N=0;var T=Math.sqrt(r*r/(1+g*g));if(0>d&&(T=-T),u+=T,a+=g*T,t.translate(u,a),t.rotate(m),t.translate(-(s/2),-(o/2)),N===0&&n.dj(t,e),t.translate(s/2,o/2),t.rotate(-m),t.translate(-u,-a),x-=r,y-=r,N!==0){if(S++,S===M.length){Xt(M);return}y=M[S],d=y[0],m=y[1],g=y[2],y=y[3],r=N}}Xt(M)}}l.dj=function(t,e){var i=this.Ic,n=this.rl;if(i!==null||n!==null){var r=this.actualBounds,o=this.naturalBounds;n!==null&&Hi(this,t,n,!0,!1,o,r);var s=this.part,u=this.wh;i===null||u!==0||s===null||!this.isPanelMain&&s.rb()!==this||(u=s.type===V.Link&&s instanceof Ct&&s.category==="Selection"&&s.adornedObject instanceof gt&&s.adornedPart.rb()===s.adornedObject?s.adornedObject.strokeWidth:0),u===0&&(i=null),i!==null&&u!==0&&(Hi(this,t,i,!1,!1,o,r),t.lineWidth=u,t.lineJoin=this.im,t.lineCap=this.hm,t.miterLimit=this.ek),r=!1,s&&e.Ie("drawShadows")&&(r=s.isShadowed),s=!0,i===null||n!==null&&n!=="transparent"||(s=!1),o=!1,u=this.strokeDashArray,u!==null&&(o=!0,t.Et(u,this.vh));var a=this.na;if(a!==null){if(a.type===He)t.beginPath(),t.moveTo(a.startX,a.startY),t.lineTo(a.endX,a.endY),i!==null&&t.uj();else if(a.type===Rn){var f=a.startX;u=a.startY;var c=a.endX,d=a.endY;a=Math.min(f,c);var g=Math.min(u,d);f=Math.abs(c-f),u=Math.abs(d-u),t.beginPath(),t.rect(a,g,f,u),n!==null&&t.He(n),i!==null&&(s&&r&&lo(t),(f===0||u===0)&&(t.beginPath(),t.rect(a,g,Math.max(f,.1),Math.max(u,.1))),t.uj(),s&&r&&Io(t))}else if(a.type===yr)f=a.startX,u=a.startY,c=a.endX,d=a.endY,a=Math.abs(c-f)/2,g=Math.abs(d-u)/2,f=Math.min(f,c)+a,u=Math.min(u,d)+g,t.beginPath(),t.moveTo(f,u-g),t.bezierCurveTo(f+j.Lg*a,u-g,f+a,u-j.Lg*g,f+a,u),t.bezierCurveTo(f+a,u+j.Lg*g,f+j.Lg*a,u+g,f,u+g),t.bezierCurveTo(f-j.Lg*a,u+g,f-a,u+j.Lg*g,f-a,u),t.bezierCurveTo(f-a,u-j.Lg*g,f-j.Lg*a,u-g,f,u-g),t.closePath(),n!==null&&t.He(n),i!==null&&(s&&r?(lo(t),t.uj(),Io(t)):t.uj());else if(a.type===an)for(u=a.figures,a=u.length,g=0;g<a;g++){f=u.j[g],t.beginPath(),t.moveTo(f.startX,f.startY),c=f.segments.j,d=c.length;for(var m=null,y=0;y<d;y++){var x=c[y];switch(x.type){case Fn:t.moveTo(x.endX,x.endY);break;case me:t.lineTo(x.endX,x.endY);break;case fn:t.bezierCurveTo(x.point1X,x.point1Y,x.point2X,x.point2Y,x.endX,x.endY);break;case mr:t.quadraticCurveTo(x.point1X,x.point1Y,x.endX,x.endY);break;case ri:if(x.radiusX===x.radiusY){var M=Math.PI/180;t.arc(x.point1X,x.point1Y,x.radiusX,x.startAngle*M,(x.startAngle+x.sweepAngle)*M,0>x.sweepAngle,m!==null?m.endX:f.startX,m!==null?m.endY:f.startY)}else if(m=no(x,f),M=m.length,M===0)t.lineTo(x.centerX,x.centerY);else for(var S=0;S<M;S++){var N=m[S];S===0&&t.lineTo(N[0],N[1]),t.bezierCurveTo(N[2],N[3],N[4],N[5],N[6],N[7])}break;case Jn:if(S=M=0,m!==null&&m.type===ri){if(m=no(m,f),N=m.length,N===0){t.lineTo(x.centerX,x.centerY);break}m=m[N-1]||null,m!==null&&(M=m[6],S=m[7])}else M=m!==null?m.endX:f.startX,S=m!==null?m.endY:f.startY;if(m=Rs(x,f,M,S),M=m.length,M===0){t.lineTo(x.centerX,x.centerY);break}for(S=0;S<M;S++)N=m[S],t.bezierCurveTo(N[2],N[3],N[4],N[5],N[6],N[7]);break;default:E("Segment not of valid type: "+x.type)}x.isClosed&&t.closePath(),m=x}c=f.isFilled,r?f.isShadowed?(c===!0&&n!=="transparent"&&n!==null&&t.He(n),i!==null&&(c&&s&&lo(t),t.uj(),c&&s&&Io(t))):(lo(t),c&&n!=="transparent"&&n!==null&&t.He(n),i!==null&&t.uj(),Io(t)):(c&&n!==null&&t.He(n),i!==null&&t.uj())}if(o&&t.Ct(),this.pathPattern!==null){if(i=this.pathPattern,i.measure(Infinity,Infinity),n=i.measuredBounds,i.arrange(0,0,n.width,n.height),r=this.geometry,t.save(),t.beginPath(),n=Dt(),r.type===He)n.push(r.startX),n.push(r.startY),n.push(r.endX),n.push(r.endY),uh(t,e,n,i);else if(r.type===an)for(r=r.figures.iterator;r.next();){for(s=r.value,n.length=0,n.push(s.startX),n.push(s.startY),o=s.startX,u=s.startY,a=o,g=u,f=s.segments.j,c=f.length,d=0;d<c;d++){switch(y=f[d],y.type){case Fn:uh(t,e,n,i),n.length=0,n.push(y.endX),n.push(y.endY),o=y.endX,u=y.endY,a=o,g=u;break;case me:n.push(y.endX),n.push(y.endY),o=y.endX,u=y.endY;break;case fn:j.De(o,u,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,n),o=y.endX,u=y.endY;break;case mr:j.Uq(o,u,y.point1X,y.point1Y,y.endX,y.endY,.5,n),o=y.endX,u=y.endY;break;case ri:if(x=no(y,s),m=x.length,m===0){n.push(y.centerX),n.push(y.centerY),o=y.centerX,u=y.centerY;break}for(M=0;M<m;M++)S=x[M],j.De(o,u,S[2],S[3],S[4],S[5],S[6],S[7],.5,n),o=S[6],u=S[7];break;case Jn:if(x=Rs(y,s,o,u),m=x.length,m===0){n.push(y.centerX),n.push(y.centerY),o=y.centerX,u=y.centerY;break}for(M=0;M<m;M++)S=x[M],j.De(o,u,S[2],S[3],S[4],S[5],S[6],S[7],.5,n),o=S[6],u=S[7];break;default:E("Segment not of valid type: "+y.type)}y.isClosed&&(n.push(a),n.push(g),uh(t,e,n,i))}uh(t,e,n,i)}else if(r.type===Rn)n.push(r.startX),n.push(r.startY),n.push(r.endX),n.push(r.startY),n.push(r.endX),n.push(r.endY),n.push(r.startX),n.push(r.endY),n.push(r.startX),n.push(r.startY),uh(t,e,n,i);else if(r.type===yr){if(u=new be,u.startX=r.endX,u.startY=(r.startY+r.endY)/2,o=new Ht(ri),o.startAngle=0,o.sweepAngle=360,o.centerX=(r.startX+r.endX)/2,o.centerY=(r.startY+r.endY)/2,o.radiusX=Math.abs(r.startX-r.endX)/2,o.radiusY=Math.abs(r.startY-r.endY)/2,u.add(o),r=no(o,u),s=r.length,s===0)n.push(o.centerX),n.push(o.centerY);else for(o=u.startX,u=u.startY,a=0;a<s;a++)g=r[a],j.De(o,u,g[2],g[3],g[4],g[5],g[6],g[7],.5,n),o=g[6],u=g[7];uh(t,e,n,i)}Xt(n),t.restore(),t.uc(!1)}}}},l.da=function(t,e){if(e===void 0&&(e=new k),t instanceof st){t.nc()&&E("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.naturalBounds,n=this.strokeWidth;e.h(t.x*(i.width+n)-n/2+i.x+t.offsetX,t.y*(i.height+n)-n/2+i.y+t.offsetY)}else e.set(t);return this.Ed.sa(e),e},l.lj=function(t){t===void 0&&(t=new I);var e=this.naturalBounds,i=this.Ed;e=I.allocAt(e.x,e.y,e.width,e.height);var n=this.strokeWidth;return e.Kc(n/2,n/2),n=k.allocAt(e.x,e.y).transform(i),t.h(n.x,n.y,0,0),n.h(e.right,e.y).transform(i),Ue(t,n.x,n.y,0,0),n.h(e.right,e.bottom).transform(i),Ue(t,n.x,n.y,0,0),n.h(e.x,e.bottom).transform(i),Ue(t,n.x,n.y,0,0),I.free(e),k.free(n),t},l.Jh=function(t,e){var i=this.geometry;if(i===null||this.fill===null&&this.stroke===null)return!1;var n=i.bounds,r=this.strokeWidth/2;i.type!==He||e||(r+=2);var o=I.alloc();if(o.assign(n),o.Kc(r+2,r+2),!o.$(t))return I.free(o),!1;if(n=r+1e-4,i.type===He)return this.stroke===null||(n=(i.endX-i.startX)*(t.x-i.startX)+(i.endY-i.startY)*(t.y-i.startY),0>(i.startX-i.endX)*(t.x-i.endX)+(i.startY-i.endY)*(t.y-i.endY)||0>n)?!1:(I.free(o),j.Ob(i.startX,i.startY,i.endX,i.endY,r,t.x,t.y));if(i.type===Rn){e=i.startX;var s=i.startY,u=i.endX;if(i=i.endY,o.x=Math.min(e,u),o.y=Math.min(s,i),o.width=Math.abs(u-e),o.height=Math.abs(i-s),this.fill===null){if(o.Kc(-n,-n),o.$(t))return I.free(o),!1;o.Kc(n,n)}return this.stroke!==null&&o.Kc(r,r),t=o.$(t),I.free(o),t}if(i.type===yr){s=i.startX,r=i.startY,u=i.endX;var a=i.endY;if(i=Math.min(s,u),e=Math.min(r,a),s=Math.abs(u-s)/2,r=Math.abs(a-r)/2,i=t.x-(i+s),e=t.y-(e+r),this.fill===null){if(s-=n,r-=n,0>=s||0>=r||1>=i*i/(s*s)+e*e/(r*r))return I.free(o),!1;s+=n,r+=n}return this.stroke!==null&&(s+=n,r+=n),I.free(o),0>=s||0>=r?!1:1>=i*i/(s*s)+e*e/(r*r)}return i.type===an?(I.free(o),this.fill===null?Vx(i,t.x,t.y,r):ky(i,t,r,1<this.strokeWidth,e)):(E("Unknown Geometry type: "+i.type),!1)},l.Fm=function(t,e,i,n){var r=this.desiredSize,o=this.wh;if(t=Math.max(t,0),e=Math.max(e,0),this.Dd!==null)var s=this.geometry.bounds;else{var u=this.figure,a=O0[u];if(a===void 0){var f=j.Qe[u];typeof f=="string"&&(f=j.Qe[f]),typeof f=="function"?(a=f(null,100,100),O0[u]=a):E("Unsupported Figure: "+u)}s=a.bounds}u=s.width,a=s.height,f=s.width;var c=s.height;switch(er(this,!0)){case ve:n=i=0;break;case ye:f=Math.max(t-o,0),c=Math.max(e-o,0);break;case _e:f=Math.max(t-o,0),n=0;break;case ei:i=0,c=Math.max(e-o,0)}switch(isFinite(r.width)&&(f=r.width),isFinite(r.height)&&(c=r.height),r=this.maxSize,s=this.minSize,i=Math.max(i-o,s.width),n=Math.max(n-o,s.height),f=Math.min(r.width,f),c=Math.min(r.height,c),f=isFinite(f)?Math.max(i,f):Math.max(u,i),c=isFinite(c)?Math.max(n,c):Math.max(a,n),i=E0(this),i){case ve:break;case ye:u=f,a=c;break;case vr:i=Math.min(f/u,c/a),isFinite(i)||(i=1),u*=i,a*=i;break;default:E(i+" is not a valid geometryStretch.")}this.Dd!==null?(u=Math.max(u,.01),a=Math.max(a,.01),i=this.Dd!==null?this.Dd:this.na,r=i.bounds,n=u/r.width,r=a/r.height,isFinite(n)||(n=1),isFinite(r)||(r=1),this.na=n===1&&r===1?i:i.copy().scale(n,r)):this.na!==null&&j.aa(this.na.Cl,t-o)&&j.aa(this.na.Bl,e-o)||(this.na=gt.makeGeometry(this,u,a)),s=this.na.bounds,t===Infinity||e===Infinity?ro(this,s.x-o/2,s.y-o/2,t===0&&u===0?0:s.width+o,e===0&&a===0?0:s.height+o):ro(this,-(o/2),-(o/2),f+o,c+o)};function E0(t){var e=t.geometryStretch;return t.Dd!==null?e===xr?ye:e:e===xr?O0[t.figure].defaultStretch:e}l.Hh=function(t,e,i,n){p0(this,t,e,i,n)},l.Mt=function(t,e,i){return this.wk(t.x,t.y,e.x,e.y,i)},l.wk=function(t,e,i,n,r){var o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),u=o.m22*s,a=-o.m12*s,f=-o.m21*s,c=o.m11*s,d=s*(o.m21*o.dy-o.m22*o.dx),g=s*(o.m12*o.dx-o.m11*o.dy);o=t*u+e*f+d,s=t*a+e*c+g,u=i*u+n*f+d,a=i*a+n*c+g,d=this.wh/2,f=this.na,f===null&&(this.measure(Infinity,Infinity),f=this.na);var m=f.bounds;if(c=!1,f.type===He)if(1.5>=this.strokeWidth)c=j.Ke(f.startX,f.startY,f.endX,f.endY,o,s,u,a,r);else{if(f.startX===f.endX?(n=d,c=0):(e=(f.endY-f.startY)/(f.endX-f.startX),c=d/Math.sqrt(1+e*e),n=c*e),e=Dt(),t=new k,j.Ke(f.startX+n,f.startY+c,f.endX+n,f.endY+c,o,s,u,a,t)&&e.push(t),t=new k,j.Ke(f.startX-n,f.startY-c,f.endX-n,f.endY-c,o,s,u,a,t)&&e.push(t),t=new k,j.Ke(f.startX+n,f.startY+c,f.startX-n,f.startY-c,o,s,u,a,t)&&e.push(t),t=new k,j.Ke(f.endX+n,f.endY+c,f.endX-n,f.endY-c,o,s,u,a,t)&&e.push(t),u=e.length,u===0)return Xt(e),!1;for(c=!0,a=Infinity,n=0;n<u;n++)t=e[n],i=(t.x-o)*(t.x-o)+(t.y-s)*(t.y-s),i<a&&(a=i,r.x=t.x,r.y=t.y);Xt(e)}else if(f.type===Rn)c=j.Ef(m.x-d,m.y-d,m.x+m.width+d,m.y+m.height+d,o,s,u,a,r);else if(f.type===yr){e=I.allocAt(m.x,m.y,m.width,m.height).Kc(d,d);t:if(e.width===0)c=j.Ke(e.x,e.y,e.x,e.y+e.height,o,s,u,a,r);else if(e.height===0)c=j.Ke(e.x,e.y,e.x+e.width,e.y,o,s,u,a,r);else{if(t=e.width/2,f=e.height/2,n=e.x+t,c=e.y+f,i=9999,o!==u&&(i=(s-a)/(o-u)),9999>Math.abs(i)){if(a=s-c-i*(o-n),0>t*t*i*i+f*f-a*a){r.x=NaN,r.y=NaN,c=!1;break t}d=Math.sqrt(t*t*i*i+f*f-a*a),u=(-(t*t*i*a)+t*f*d)/(f*f+t*t*i*i)+n,t=(-(t*t*i*a)-t*f*d)/(f*f+t*t*i*i)+n,f=i*(u-n)+a+c,a=i*(t-n)+a+c,Math.abs((o-u)*(o-u))+Math.abs((s-f)*(s-f))<Math.abs((o-t)*(o-t))+Math.abs((s-a)*(s-a))?(r.x=u,r.y=f):(r.x=t,r.y=a)}else{if(u=f*f,a=o-n,u-=u/(t*t)*a*a,0>u){r.x=NaN,r.y=NaN,c=!1;break t}a=Math.sqrt(u),u=c+a,a=c-a,Math.abs(u-s)<Math.abs(a-s)?(r.x=o,r.y=u):(r.x=o,r.y=a)}c=!0}I.free(e)}else if(f.type===an){g=k.alloc();var y=u-o,x=a-s,M=y*y+x*x,S=o,N=s;if(0<M&&m.contains(S,N)&&(g.x=S,g.y=N,this.$(g)))for(S-=y,N-=x;m.contains(S,N);)S-=y,N-=x;for(r.x=u,r.y=a,x=0;x<f.figures.count;x++){var T=f.figures.j[x],C=T.isFilled?S:o,D=T.isFilled?N:s,F=T.segments;m=T.startX,y=T.startY;for(var $=m,G=y,nt=0;nt<F.count;nt++){var q=F.j[nt],R=q.type,Lt=q.endX,mt=q.endY,Ot=!1;switch(R){case Fn:$=Lt,G=mt;break;case me:Ot=Pp(m,y,Lt,mt,C,D,u,a,g);break;case fn:Ot=j.sq(m,y,q.point1X,q.point1Y,q.point2X,q.point2Y,Lt,mt,C,D,u,a,.6,g);break;case mr:Ot=j.sq(m,y,m+2/3*(q.point1X-m),y+2/3*(q.point1Y-y),Lt+2/3*(q.point1X-Lt),mt+2/3*(q.point1Y-mt),Lt,mt,C,D,u,a,.6,g);break;case ri:case Jn:R=q.type===ri?no(q,T):Rs(q,T,m,y);var re=R.length;if(re===0){Ot=Pp(m,y,q.centerX,q.centerY,C,D,u,a,g);break}for(mt=null,Lt=0;Lt<re;Lt++){if(mt=R[Lt],Lt===0&&Pp(m,y,mt[0],mt[1],C,D,u,a,g)){var je=kp(C,D,g,M,r);je<M&&(M=je,c=!0)}j.sq(mt[0],mt[1],mt[2],mt[3],mt[4],mt[5],mt[6],mt[7],C,D,u,a,.6,g)&&(je=kp(C,D,g,M,r),je<M&&(M=je,c=!0))}Lt=mt[6],mt=mt[7];break;default:E("Unknown Segment type: "+R)}m=Lt,y=mt,Ot&&(Ot=kp(C,D,g,M,r),Ot<M&&(M=Ot,c=!0)),q.isClosed&&(Lt=$,mt=G,Pp(m,y,Lt,mt,C,D,u,a,g)&&(q=kp(C,D,g,M,r),q<M&&(M=q,c=!0)))}}o=i-t,s=n-e,u=Math.sqrt(o*o+s*s),u!==0&&(o/=u,s/=u),r.x-=o*d,r.y-=s*d,k.free(g)}else E("Unknown Geometry type: "+f.type);return c?(this.transform.sa(r),!0):!1};function kp(t,e,i,n,r){return t=i.x-t,e=i.y-e,e=t*t+e*e,e<n?(r.x=i.x,r.y=i.y,e):n}function Pp(t,e,i,n,r,o,s,u,a){var f=!1,c=(r-s)*(e-n)-(o-u)*(t-i);return c===0?!1:(a.x=((r*u-o*s)*(t-i)-(r-s)*(t*n-e*i))/c,a.y=((r*u-o*s)*(e-n)-(o-u)*(t*n-e*i))/c,(t>i?t-i:i-t)<(e>n?e-n:n-e)?(t=e<n?e:n,e=e<n?n:e,(a.y>t||j.aa(a.y,t))&&(a.y<e||j.aa(a.y,e))&&(f=!0)):(e=t<i?t:i,t=t<i?i:t,(a.x>e||j.aa(a.x,e))&&(a.x<t||j.aa(a.x,t))&&(f=!0)),f)}l.Ih=function(t,e){if(e===void 0)return t.Ee(this.actualBounds);var i=this.na;i===null&&(this.measure(Infinity,Infinity),i=this.na),i=i.bounds;var n=this.strokeWidth/2,r=!1,o=k.alloc();return o.h(i.x-n,i.y-n),t.$(e.sa(o))&&(o.h(i.x-n,i.bottom+n),t.$(e.sa(o))&&(o.h(i.right+n,i.bottom+n),t.$(e.sa(o))&&(o.h(i.right+n,i.y-n),t.$(e.sa(o))&&(r=!0)))),k.free(o),r},l.Nc=function(t,e){if(this.Ih(t,e)||e===void 0&&(e=this.transform,t.Ee(this.actualBounds)))return!0;var i=Nt.alloc();i.set(e),i.Rt();var n=t.left,r=t.right,o=t.top;t=t.bottom;var s=k.alloc();if(s.h(n,o),i.sa(s),this.Jh(s,!0)||(s.h(r,o),i.sa(s),this.Jh(s,!0))||(s.h(n,t),i.sa(s),this.Jh(s,!0))||(s.h(r,t),i.sa(s),this.Jh(s,!0)))return k.free(s),!0;var u=k.alloc(),a=k.alloc();return i.set(e),i.hw(this.transform),i.Rt(),u.x=r,u.y=o,u.transform(i),s.x=n,s.y=o,s.transform(i),e=!1,Hs(this,s,u,a)?e=!0:(s.x=r,s.y=t,s.transform(i),Hs(this,s,u,a)?e=!0:(u.x=n,u.y=t,u.transform(i),Hs(this,s,u,a)?e=!0:(s.x=n,s.y=o,s.transform(i),Hs(this,s,u,a)&&(e=!0)))),k.free(s),Nt.free(i),k.free(u),k.free(a),e};function Hs(t,e,i,n){if(!t.Mt(e,i,n))return!1;t=e.x,e=e.y;var r=i.x,o=i.y;return i=n.x,n=n.y,t===r?(e<o?(t=e,e=o):t=o,n>=t&&n<=e):(t<r?(n=t,t=r):n=r,i>=n&&i<=t)}l.ty=function(t,e,i){function n(M,S){for(var N=M.length,T=0;T<N;T+=2)if(S.rd(M[T],M[T+1])>r)return!0;return!1}if(i&&this.fill!==null&&this.Jh(t,!0))return!0;var r=t.Ge(e),o=r;if(1.5<this.strokeWidth&&(r=this.strokeWidth/2+Math.sqrt(r),r*=r),e=this.na,e===null&&(this.measure(Infinity,Infinity),e=this.na,e===null))return!1;if(!i){var s=e.bounds,u=s.x,a=s.y,f=s.x+s.width;if(s=s.y+s.height,to(t.x,t.y,u,a)<=r&&to(t.x,t.y,f,a)<=r&&to(t.x,t.y,u,s)<=r&&to(t.x,t.y,f,s)<=r)return!0}if(u=e.startX,a=e.startY,f=e.endX,s=e.endY,e.type===He){if(i=(u-f)*(t.x-f)+(a-s)*(t.y-s),yi(t.x,t.y,u,a,f,s)<=(0<=(f-u)*(t.x-u)+(s-a)*(t.y-a)&&0<=i?r:o))return!0}else{if(e.type===Rn)return e=!1,i&&(e=yi(t.x,t.y,u,a,u,s)<=r||yi(t.x,t.y,u,a,f,a)<=r||yi(t.x,t.y,f,a,f,s)<=r||yi(t.x,t.y,u,s,f,s)<=r),e;if(e.type===yr){e=t.x-(u+f)/2,o=t.y-(a+s)/2;var c=Math.abs(f-u)/2,d=Math.abs(s-a)/2;if(c===0||d===0)return yi(t.x,t.y,u,a,f,s)<=r;if(i){if(t=j.Mz(c,d,e,o),t*t<=r)return!0}else return!(to(e,o,-c,0)>=r||to(e,o,0,-d)>=r||to(e,o,0,d)>=r||to(e,o,c,0)>=r)}else if(e.type===an){if(f=e.bounds,o=f.x,u=f.y,a=f.x+f.width,f=f.y+f.height,t.x>a&&t.x<o&&t.y>f&&t.y<u&&yi(t.x,t.y,o,u,o,f)>r&&yi(t.x,t.y,o,u,a,u)>r&&yi(t.x,t.y,a,f,o,f)>r&&yi(t.x,t.y,a,f,a,u)>r)return!1;if(o=Math.sqrt(r),i){if(this.fill===null?Vx(e,t.x,t.y,o):ky(e,t,o,!0,!1))return!0}else{for(i=e.figures,e=0;e<i.count;e++){if(o=i.j[e],s=o.startX,c=o.startY,t.rd(s,c)>r)return!1;for(u=o.segments.j,a=u.length,f=0;f<a;f++)switch(d=u[f],d.type){case Fn:case me:if(s=d.endX,c=d.endY,t.rd(s,c)>r)return!1;break;case fn:var g=Dt();if(j.De(s,c,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.8,g),s=n(g,t),Xt(g),s||(s=d.endX,c=d.endY,t.rd(s,c)>r))return!1;break;case mr:if(g=Dt(),j.Uq(s,c,d.point1X,d.point1Y,d.endX,d.endY,.8,g),s=n(g,t),Xt(g),s||(s=d.endX,c=d.endY,t.rd(s,c)>r))return!1;break;case ri:case Jn:g=d.type===ri?no(d,o):Rs(d,o,s,c);var m=g.length;if(m===0){if(s=d.centerX,c=d.centerY,t.rd(s,c)>r)return!1;break}d=null;for(var y=Dt(),x=0;x<m;x++)if(d=g[x],y.length=0,j.De(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.8,y),n(y,t))return Xt(y),!1;Xt(y),d!==null&&(s=d[6],c=d[7]);break;default:E("Unknown Segment type: "+d.type)}}return!0}}}return!1},l.dc=function(){this.na=null};function PM(t){var e=t.diagram;e!==null&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=of,t.om!=="None"?(t.segmentIndex=-1,t.alignmentFocus=Gi):t.sl!=="None"&&(t.segmentIndex=0,t.alignmentFocus=new st(1-Gi.x,Gi.y)))}gt.makeGeometry=function(t,e,i){if(t.toArrow!=="None")var n=Er[t.toArrow];else t.fromArrow!=="None"?n=Er[t.fromArrow]:(n=j.Qe[t.figure],typeof n=="string"&&(n=j.Qe[n]),n===void 0&&E("Unknown Shape.figure: "+t.figure),n=n(t,e,i),n.Cl=e,n.Bl=i);if(n===null){var r=j.Qe.Rectangle;typeof r=="function"&&(n=r(t,e,i))}return n};function NM(t){var e=Er[t];if(e===void 0){var i=t.toLowerCase();if(i==="none")return"None";if(e=Er[i],e===void 0){var n=null,r;for(r in j.an)if(r.toLowerCase()===i){n=r;break}if(n!==null)return t=Au(j.an[n],!1),Er[n]=t,i!==n&&(Er[i]=n),n}}return typeof e=="string"?e:e instanceof Mt?t:null}X.Object.defineProperties(gt.prototype,{geometry:{get:function(){return this.na!==null?this.na:this.Dd},set:function(t){var e=this.na,i=this.Dd;if(e!==t){t!==null?this.Dd=this.na=t.freeze():this.Dd=this.na=null;var n=this.part;n!==null&&(n.kh=NaN),this.o(),this.g("geometry",e||i,t),Dl(this)&&(t=this.part,t!==null&&zs(this,t,"geometryString"))}}},geometryString:{get:function(){return this.geometry===null?"":this.geometry.toString()},set:function(t){t=Au(t);var e=t.normalize();this.geometry=t,this.position=t=k.allocAt(-e.x,-e.y),k.free(t)}},isGeometryPositioned:{get:function(){return this.po},set:function(t){var e=this.po;e!==t&&(this.po=t,this.o(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.rl},set:function(t){var e=this.rl;e!==t&&(t!==null&&Ol(t,"Shape.fill"),t instanceof At&&t.freeze(),this.rl=t,this.M(),this.g("fill",e,t))}},stroke:{get:function(){return this.Ic},set:function(t){var e=this.Ic;e!==t&&(t!==null&&Ol(t,"Shape.stroke"),t instanceof At&&t.freeze(),this.Ic=t,this.M(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.wh},set:function(t){var e=this.wh;if(e!==t)if(0<=t){this.wh=t,this.o();var i=this.part;i!==null&&(i.kh=NaN),this.g("strokeWidth",e,t)}else lt(t,"value >= 0",gt,"strokeWidth:value")}},strokeCap:{get:function(){return this.hm},set:function(t){var e=this.hm;e!==t&&(typeof t!="string"||t!=="butt"&&t!=="round"&&t!=="square"?lt(t,'"butt", "round", or "square"',gt,"strokeCap"):(this.hm=t,this.M(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.im},set:function(t){var e=this.im;e!==t&&(typeof t!="string"||t!=="miter"&&t!=="bevel"&&t!=="round"?lt(t,'"miter", "bevel", or "round"',gt,"strokeJoin"):(this.im=t,this.M(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.ek},set:function(t){var e=this.ek;if(e!==t&&1<=t){this.ek=t,this.M();var i=this.part;i!==null&&(i.kh=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.uh},set:function(t){var e=this.uh;if(e!==t){if(t!==null){for(var i=t.length,n=0,r=0;r<i;r++){var o=t[r];0<=o&&isFinite(o)||E("strokeDashArray:value "+o+" at index "+r+" must be a positive number or zero."),n+=o}if(n===0){if(e===null)return;t=null}}this.uh=t,this.M(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.vh},set:function(t){var e=this.vh;e!==t&&0<=t&&(this.vh=t,this.M(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Vn},set:function(t){var e=this.Vn;if(e!==t){var i=j.Qe[t];typeof i=="function"?i=t:(i=j.Qe[t.toLowerCase()])||E("Unknown Shape.figure: "+t),e!==i&&(t=this.part,t!==null&&(t.kh=NaN),this.Vn=i,this.Dd=null,this.dc(),this.o(),this.g("figure",e,i))}}},toArrow:{get:function(){return this.om},set:function(t){var e=this.om;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=NM(t);i===null?E("Unknown Shape.toArrow: "+t):e!==i&&(this.om=i,this.Dd=null,this.dc(),this.o(),PM(this),this.g("toArrow",e,i))}}},fromArrow:{get:function(){return this.sl},set:function(t){var e=this.sl;if(t===!0?t="Standard":t===!1&&(t=""),e!==t){var i=NM(t);i===null?E("Unknown Shape.fromArrow: "+t):e!==i&&(this.sl=i,this.Dd=null,this.dc(),this.o(),PM(this),this.g("fromArrow",e,i))}}},spot1:{get:function(){return this.qf},set:function(t){var e=this.qf;e.w(t)||(this.qf=t=t.G(),this.o(),this.g("spot1",e,t))}},spot2:{get:function(){return this.rf},set:function(t){var e=this.rf;e.w(t)||(this.rf=t=t.G(),this.o(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.mp},set:function(t){var e=this.mp;e!==t&&(this.mp=t,this.dc(),this.o(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.np},set:function(t){var e=this.np;e!==t&&(this.np=t,this.dc(),this.o(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){if(this.na!==null)return this.rc.assign(this.na.bounds),this.rc;var t=this.desiredSize;return new I(0,0,t.width,t.height)}},pathPattern:{get:function(){return this.pp},set:function(t){var e=this.pp;e!==t&&(this.pp=t,this.M(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.co},set:function(t){var e=this.co;e!==t&&(this.co=t,this.g("geometryStretch",e,t))}},interval:{get:function(){return this.Vd},set:function(t){var e=this.Vd;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.Vd=t;var i=this.diagram;i!==null&&this.panel===i.grid&&jo(i),this.o(),i=this.panel,i!==null&&(i.eh=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Td},set:function(t){var e=this.Td;e!==t&&(0>t?t=0:1<t&&(t=1),this.Td=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Rd},set:function(t){var e=this.Rd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Rd=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.Sd},set:function(t){var e=this.Sd;e!==t&&(this.Sd=t,this.o(),this.g("graduatedSkip",e,t))}}}),gt.prototype.intersectsRect=gt.prototype.Nc,gt.prototype.containedInRect=gt.prototype.Ih,gt.prototype.getNearestIntersectionPoint=gt.prototype.Mt,gt.prototype.getDocumentBounds=gt.prototype.lj,gt.prototype.getDocumentPoint=gt.prototype.da;var Er=new Qi,O0=new Qi;gt.className="Shape",gt.getFigureGenerators=function(){var t=new ct,e;for(e in j.Qe)e!==e.toLowerCase()&&t.add(e,j.Qe[e]);return t.freeze(),t},gt.defineFigureGenerator=function(t,e){var i=t.toLowerCase(),n=j.Qe;n[t]=e,n[i]=t},gt.getArrowheadGeometries=function(){var t=new ct;for(n in j.an)if(Er[n]===void 0){var e=Au(j.an[n],!1);Er[n]=e,e=n.toLowerCase(),e!==n&&(Er[e]=n)}for(var i in Er)if(i!==i.toLowerCase()){var n=Er[i];n instanceof Mt&&t.add(i,n)}return t.freeze(),t},gt.defineArrowheadGeometry=function(t,e){var i=null;typeof e=="string"?i=Au(e,!1):i=e,e=t.toLowerCase(),e!=="none"&&t!==e||E("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var n=Er;n[t]=i,n[e]=t};function qt(){ot.call(this),Dp||(Li=Vn?new Nn(null).context:null,Dp=!0),this.Kx=this.Ub="",this.Ic="black",this.le="13px sans-serif",this.Ui="start",this.Qd=ve,this.$i=xy,this.Nj=!0,this.yi=this.zi=!1,this.og=OM,this.Ag=DM,this.us=this.ub=this.ad=0,this.bv=this.cv=null,this.Sn=!1,this.Dc=this.un=this.eq=this.Vi=this.fq=null,this.pf=this.nf=0,this.te=Infinity,this.Ci=0,this.me=null,this.ze=0,this.ke=this.lb=this.Qb=null,this.Vd=1,this.Td=0,this.Rd=1,this.Sd=this.Jj=null}ut(qt,ot),qt.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.Ub=this.Ub,t.Kx=this.Kx,t.Ic=this.Ic,t.le=this.le,t.Ui=this.Ui,t.Qd=this.Qd,t.$i=this.$i,t.Nj=this.Nj,t.zi=this.zi,t.yi=this.yi,t.og=this.og,t.Ag=this.Ag,t.ad=this.ad,t.us=this.us,t.ub=this.ub,t.cv=this.cv,t.bv=this.bv,t.Sn=this.Sn,t.fq=this.fq,t.Vi=this.Vi,t.eq=this.eq,t.un=this.un,t.Dc=this.Dc,t.nf=this.nf,t.pf=this.pf,t.te=this.te,t.me=this.me,t.ze=this.ze,t.Qb=this.Qb,t.lb=this.lb,t.ke=this.ke,t.Ci=this.Ci,t.Vd=this.Vd,t.Td=this.Td,t.Rd=this.Rd,t.Jj=this.Jj,t.Sd=this.Sd};function TM(t,e){t.F=e.F|6144,t.hb=e.opacity,t.mb=e.background,t.ec=e.areaBackground,t.Zc=e.desiredSize.G(),t.hg=e.minSize.G(),t.gg=e.maxSize.G(),t.eg=e.eg.copy(),t.ya=e.scale,t.Yb=e.angle,t.Be=e.stretch,t.jh=e.margin.G(),t.zb=e.alignment.G(),t.Yk=e.alignmentFocus.G(),t.Yl=e.segmentFraction,t.Zl=e.segmentOffset.G(),t.$l=e.segmentOrientation,e.Ya!==null&&(t.Ya=e.Ya.copy()),t.bm=e.shadowVisible,e instanceof qt&&(t.Ub=e.Ub,t.Ic=e.Ic,t.le=e.le,t.Ui=e.Ui,t.Qd=e.Qd,t.$i=e.$i,t.Nj=e.Nj,t.zi=e.zi,t.yi=e.yi,t.og=e.og,t.Ag=e.Ag,t.me=null,t.nf=e.nf,t.pf=e.pf,t.te=e.te,t.Ci=e.Ci,t.Vd=e.Vd,t.Td=e.Td,t.Rd=e.Rd,t.Jj=e.Jj,t.Sd=e.Sd)}l=qt.prototype,l.jb=function(t){t.classType===qt?this.wrap=t:ot.prototype.jb.call(this,t)},l.toString=function(){return 22<this.Ub.length?'TextBlock("'+this.Ub.substring(0,20)+'"...)':'TextBlock("'+this.Ub+'")'},l.o=function(){ot.prototype.o.call(this),this.bv=this.cv=null},l.dj=function(t,e){if(this.Ic!==null&&this.Ub.length!==0&&this.le!==null){var i=this.naturalBounds,n=this.actualBounds,r=i.width,o=i.height,s=Np(this),u=t.textAlign=this.Ui,a=e.Fl;u==="start"?u=a?"right":"left":u==="end"&&(u=a?"left":"right"),a=this.zi;var f=this.yi;Hi(this,t,this.Ic,!0,!1,i,n),(a||f)&&Hi(this,t,this.Ic,!1,!1,i,n),n=0,i=!1;var c=k.allocAt(0,0);this.Ed.sa(c);var d=k.allocAt(0,s);this.Ed.sa(d);var g=c.Ge(d);switch(k.free(c),k.free(d),c=e.scale,8>g*c*c&&(i=!0),e.Hb!==t&&(i=!1),e.Ie("textGreeking")===!1&&(i=!1),e=this.nf,g=this.pf,this.flip){case Ga:t.translate(r,0),t.scale(-1,1);break;case Ya:t.translate(0,o),t.scale(1,-1);break;case Xa:t.translate(r,o),t.scale(-1,-1)}if(c=this.ad,d=(e+s+g)*c,o>d&&(n=this.$i,n=n.y*o-n.y*d+n.offsetY),c===1&&this.ke!==null)g=this.ub,g>r&&(g=r),this.cj(this.ke,t,0,n+e,r,s,g,i,u,a,f);else if(this.Qb!==null&&this.lb!==null)for(d=0;d<c;d++){var m=this.Qb[d];m>r&&(m=r),n+=e,this.cj(this.lb[d],t,0,n,r,s,m,i,u,a,f),n+=s+g}switch(this.flip){case Ga:t.scale(-1,1),t.translate(-r,0);break;case Ya:t.scale(1,-1),t.translate(0,-o);break;case Xa:t.scale(-1,-1),t.translate(-r,-o)}}},l.cj=function(t,e,i,n,r,o,s,u,a,f,c){var d=0;u?(a==="left"?d=0:a==="right"?d=r-s:a==="center"&&(d=(r-s)/2),e.fillRect(i+d,n+.25*o,s,1)):(a==="left"?d=0:a==="right"?d=r:a==="center"&&(d=r/2),r=Tp!==null?Tp(this,o):.75*o,e.fillText(t,i+d,n+r),t=o/20|0,t===0&&(t=1),a==="right"?d-=s:a==="center"&&(d-=s/2),f&&(a=Cp!==null?Cp(this,o):.8*o,e.beginPath(),e.lineWidth=t,e.moveTo(i+d,n+a),e.lineTo(i+d+s,n+a),e.stroke()),c&&(e.beginPath(),e.lineWidth=t,n=n+o-o/2.2|0,t%2!=0&&(n+=.5),e.moveTo(i+d,n),e.lineTo(i+d+s,n),e.stroke()))},l.Fm=function(t,e,i,n){this.Ci=t;var r=this.le;Li!==null&&IM!==r&&(IM=Li.font=r),this.ub=this.ze=0,this.ke=this.lb=this.Qb=this.me=null;var o;if(isNaN(this.desiredSize.width)){if(r=this.Ub.replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.length===0)r=0;else if(this.isMultiline){for(var s=o=0,u=!1;!u;){var a=r.indexOf(`
`,s);a===-1&&(a=r.length,u=!0),o=Math.max(o,zn(r.substr(s,a-s).trim())),s=a+1}r=o}else o=r.indexOf(`
`,0),0<=o&&(r=r.substr(0,o)),r=zn(r);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.desiredSize.width;if(this.panel!==null&&(r=Math.min(r,this.panel.maxSize.width)),o=LM(this,r),isNaN(this.desiredSize.height)?o=Math.min(o,e/this.scale):o=this.desiredSize.height,s=o,this.ub!==0&&this.Qb!==null&&this.lb!==null&&this.og===Lp&&(e=this.le,e=this.og===Lp?CM(e):0,u=this.nf+this.pf,u=Math.max(0,Np(this)+u),s=Math.min(this.maxLines-1,Math.max(Math.floor(s/u+.01)-1,0)),!(s+1>=this.lb.length))){for(u=this.lb[s],e=Math.max(1,t-e);zn(u)>e&&1<u.length;)u=u.substr(0,u.length-1);u+=ba,e=zn(u),this.lb[s]=u,this.lb=this.lb.slice(0,s+1),this.Qb[s]=e,this.Qb=this.Qb.slice(0,s+1),this.ze=this.lb.length,this.ub=Math.max(this.ub,e),this.ad=this.ze,this.ad===1&&(this.ke=this.lb[0])}(this.wrap===jM||isNaN(this.desiredSize.width))&&(r=isNaN(t)?this.ub:Math.min(t,this.ub),isNaN(this.desiredSize.width)&&(r=Math.max(8,r))),r=Math.max(i,r),o=Math.max(n,o),eo(this.rc,r,o),ro(this,0,0,r,o)},l.Hh=function(t,e,i,n){p0(this,t,e,i,n)};function qa(t,e,i){t.ke===null?(t.ke=e,t.ub=i):((t.lb===null||t.Qb===null)&&(t.lb=[],t.Qb=[],t.lb.push(t.ke),t.Qb.push(t.ub)),t.lb.push(e),t.Qb.push(i))}function A0(t,e,i,n){e=e.trim();var r=0,o=t.le,s=t.nf+t.pf;s=Math.max(0,Np(t)+s);var u=t.og===Lp?CM(o):0;if(t.ad>=t.te)n!==null&&n.h(0,s);else{var a=e;if(t.Ag===I0)if(t.ze=1,o=zn(e),u===0||o<=i)t.ub=Math.max(t.ub,o),qa(t,e,t.ub),n!==null&&n.h(o,s);else{for(r=hh(t,a),a=a.substr(r.length),e=hh(t,a),o=zn(r+e);0<e.length&&o<=i;)r+=e,a=a.substr(e.length),e=hh(t,a),o=zn((r+e).trim());for(r+=e.trim(),i=Math.max(1,i-u);zn(r)>i&&1<r.length;)r=r.substr(0,r.length-1);r+=ba,e=zn(r),t.ub=e,qa(t,r,e),n!==null&&n.h(e,s)}else{for(u=0,a.length===0&&(u=1,qa(t,a,0));0<a.length;){var f=hh(t,a);for(a=a.substr(f.length);zn(f)>i;){var c=1;for(o=zn(f.substr(0,c)),e=0;o<=i;)c++,e=o,o=zn(f.substr(0,c));if(c===1){var d=o;r=Math.max(r,o)}else d=e,r=Math.max(r,e);if(c--,1>c&&(c=1),qa(t,f.substr(0,c),d),u++,f=f.substr(c),t.ad+u>t.te)break}for(e=hh(t,a),o=zn(f+e);0<e.length&&o<=i;)f+=e,a=a.substr(e.length),e=hh(t,a),o=zn((f+e).trim());if(f=f.trim(),f!==""&&(f[f.length-1]==="­"&&(f=f.substring(0,f.length-1)+"‐"),e.length===0?(c=o,r=Math.max(r,o)):(c=e=zn(f),r=Math.max(r,e)),qa(t,f,c),u++,t.ad+u>t.te))break}t.ze=Math.min(t.te,u),t.ub=Math.max(t.ub,r),n!==null&&n.h(t.ub,s*t.ze)}}}function hh(t,e){if(t.Ag===EM)return e.substr(0,1);t=e.length;for(var i=0,n=dT;i<t&&!n.test(e.charAt(i));)i++;for(;i<t&&n.test(e.charAt(i));)i++;return i>=t?e:e.substr(0,i)}function zn(t){return Li===null?8*t.length:Li.measureText(t).width}function Np(t){if(t.me!==null)return t.me;var e=t.le;if(Li===null){var i=16;return t.me=i}return B0[e]!==void 0&&5e3>AM?i=B0[e]:(i=1.3*Li.measureText("M").width,B0[e]=i,AM++),t.me=i}function CM(t){if(Li===null)return 6;if(jp[t]!==void 0&&5e3>R0)var e=jp[t];else e=Li.measureText(ba).width,jp[t]=e,R0++;return e}function LM(t,e){var i=t.Ub.replace(/\r\n/g,`
`).replace(/\r/g,`
`),n=t.nf+t.pf;if(n=Math.max(0,Np(t)+n),i.length===0)return t.ub=0,t.ad=1,n;if(!t.isMultiline){var r=i.indexOf(`
`,0);0<=r&&(i=i.substr(0,r))}r=0;for(var o=t.ad=0,s,u=!1;!u;){if(s=i.indexOf(`
`,o),s===-1&&(s=i.length,u=!0),o<=s){if(o=i.substr(o,s-o),t.Ag!==I0){t.ze=0;var a=pt.alloc();A0(t,o,e,a),r+=a.height,pt.free(a),t.ad+=t.ze}else A0(t,o,e,null),r+=n,t.ad++;t.ad===t.te&&(u=!0)}o=s+1}return t.us=r}X.Object.defineProperties(qt.prototype,{font:{get:function(){return this.le},set:function(t){var e=this.le;e!==t&&(this.le=t,this.me=null,this.o(),this.g("font",e,t))}},text:{get:function(){return this.Ub},set:function(t){var e=this.Ub;t!=null?t=t.toString():t="",e!==t&&(this.Ub=t,this.o(),this.g("text",e,t))}},textAlign:{get:function(){return this.Ui},set:function(t){var e=this.Ui;e===t||t!=="start"&&t!=="end"&&t!=="left"&&t!=="right"&&t!=="center"||(this.Ui=t,this.M(),this.g("textAlign",e,t))}},flip:{get:function(){return this.Qd},set:function(t){var e=this.Qd;e!==t&&(this.Qd=t,this.M(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.$i},set:function(t){var e=this.$i;e.w(t)||(this.$i=t=t.G(),bu(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.rc.u()){var t=pt.alloc();A0(this,this.Ub,999999,t);var e=t.width;pt.free(t),t=LM(this,e);var i=this.desiredSize;isNaN(i.width)||(e=i.width),isNaN(i.height)||(t=i.height),eo(this.rc,e,t)}return this.rc}},isMultiline:{get:function(){return this.Nj},set:function(t){var e=this.Nj;e!==t&&(this.Nj=t,this.o(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.M(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return this.yi},set:function(t){var e=this.yi;e!==t&&(this.yi=t,this.M(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.Ag},set:function(t){var e=this.Ag;e!==t&&(this.Ag=t,this.o(),this.g("wrap",e,t))}},overflow:{get:function(){return this.og},set:function(t){var e=this.og;e!==t&&(this.og=t,this.o(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Ic},set:function(t){var e=this.Ic;e!==t&&(t!==null&&Ol(t,"TextBlock.stroke"),t instanceof At&&t.freeze(),this.Ic=t,this.M(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.ad}},editable:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.g("editable",e,t))}},textEditor:{get:function(){return this.fq},set:function(t){var e=this.fq;e!==t&&(this.fq=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.Dc},set:function(t){var e=this.Dc;e!==t&&(this.Dc=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.Vd},set:function(t){var e=this.Vd;if(t=Math.round(t),e!==t&&t!==0&&isFinite(t)){this.Vd=t,this.o();var i=this.panel;i!==null&&(i.eh=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Td},set:function(t){var e=this.Td;e!==t&&(0>t?t=0:1<t&&(t=1),this.Td=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Rd},set:function(t){var e=this.Rd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Rd=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.Jj},set:function(t){var e=this.Jj;e!==t&&(this.Jj=t,this.o(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.Sd},set:function(t){var e=this.Sd;e!==t&&(this.Sd=t,this.o(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.Vi},set:function(t){var e=this.Vi;e!==t&&(this.Vi=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.eq},set:function(t){var e=this.eq;e!==t&&(this.eq=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.nf},set:function(t){var e=this.nf;e!==t&&(this.nf=t,this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.pf},set:function(t){var e=this.pf;e!==t&&(this.pf=t,this.g("spacingBelow",e,t))}},maxLines:{get:function(){return this.te},set:function(t){var e=this.te;e!==t&&(t=Math.floor(t),0>=t&&lt(t,"> 0",qt,"maxLines"),this.te=t,this.g("maxLines",e,t),this.o())}},metrics:{get:function(){return{arrSize:this.Qb!==null?this.Qb:[this.ub],arrText:this.lb!==null?this.lb:[this.ke],maxLineWidth:this.ub,fontHeight:this.me}}},choices:{get:function(){return this.un},set:function(t){var e=this.un;e!==t&&(this.un=t,this.g("choices",e,t))}}});var Tp=null,Cp=null,I0=new K(qt,"None",0),jM=new K(qt,"WrapFit",1),DM=new K(qt,"WrapDesiredSize",2),EM=new K(qt,"WrapBreakAll",3),OM=new K(qt,"OverflowClip",0),Lp=new K(qt,"OverflowEllipsis",1),dT=/[ \u200b\u00ad]/,B0=new Qi,AM=0,jp=new Qi,R0=0,ba="...",IM="",Li=null,Dp=!1;qt.className="TextBlock",qt.getEllipsis=function(){return ba},qt.setEllipsis=function(t){ba=t,jp=new Qi,R0=0},qt.getBaseline=function(){return Tp},qt.setBaseline=function(t){Tp=t,t=Yt();for(var e=t.length,i=0;i<e;i++)t[i].Le()},qt.getUnderline=function(){return Cp},qt.setUnderline=function(t){Cp=t,t=Yt();for(var e=t.length,i=0;i<e;i++)t[i].Le()},qt.isValidFont=function(t){if(Dp||(Li=Vn?new Nn(null).context:null,Dp=!0),Li===null)return!0;var e=Li.font;if(t===e||t==="10px sans-serif")return!0;Li.font="10px sans-serif",Li.font=t;var i=Li.font;if(i!=="10px sans-serif")return Li.font=e,!0;Li.font="19px serif";var n=Li.font;return Li.font=t,i=Li.font,Li.font=e,i!==n},qt.None=I0,qt.WrapFit=jM,qt.WrapDesiredSize=DM,qt.WrapBreakAll=EM,qt.OverflowClip=OM,qt.OverflowEllipsis=Lp;function Ep(){this.Qb=[],this.lb=[]}Ep.prototype.reset=function(){this.Qb=[],this.lb=[]},Ep.prototype.Bt=function(t){this.Qb=Ge(t.Qb),this.lb=Ge(t.lb)},Ep.className="TextBlockMetrics";function nr(){ot.call(this),this.Zg=null,this.Wp="",this.th=kx,this.xl=ye,this.sf=this.Dc=null,this.wl=Wt,this.Qd=ve,this.km=null,this.Qu=!1,this.Yr=!0,this.Nl=!1,this.dm=null}ut(nr,ot),nr.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.element=this.Zg,t.Wp=this.Wp,t.th=this.th.G(),t.xl=this.xl,t.Qd=this.Qd,t.Dc=this.Dc,t.sf=this.sf,t.wl=this.wl.G(),t.Yr=this.Yr,t.dm=this.dm},l=nr.prototype,l.jb=function(t){t===ve||t===vr||t===Ua?this.imageStretch=t:ot.prototype.jb.call(this,t)},l.toString=function(){return"Picture("+this.source+")#"+Ne(this)};function Op(t){t===void 0&&(t=""),t!==""?ah[t]&&(delete ah[t],Ap--):(ah=new Qi,Ap=0)}function BM(t,e){t.ls=!0,t.tl=!1;for(var i,n=Yt(),r=n.length,o=0;o<r;o++){var s=n[o];i=t.getAttribute("src");var u=s.Oi.H(i);if(u!==null)for(var a=u.length,f=0;f<a;f++)i=u[f],s.Ls.add(i),s.Eb(),t.mv===void 0&&(t.mv=e,i.sf!==null&&i.sf(i,e))}}function RM(t,e){t.tl=e;for(var i,n=Yt(),r=n.length,o=0;o<r;o++){var s=n[o],u=t.getAttribute("src");if(i=s.Oi.H(u),i!==null){s=i.length,u=Dt();for(var a=0;a<s;a++)u.push(i[a]);for(a=0;a<s;a++)i=u[a],i.Dc!==null&&i.Dc(i,e);Xt(u)}}}l.QA=function(){if(this.source!==""){Op(this.source);var t=this.source;this.source="",this.source=t}},l.Le=function(){this.M()},l.dj=function(t,e){var i=this.Zg;if(i!==null){var n=i.getAttribute("src");if(!(i instanceof HTMLImageElement&&(n===null||n==="")||i.tl instanceof Event&&t instanceof Gs)){n=this.naturalBounds;var r=0,o=0,s=this.Qu,u=s?+i.width:i.naturalWidth;if(s=s?+i.height:i.naturalHeight,u===void 0&&i.videoWidth&&(u=i.videoWidth),s===void 0&&i.videoHeight&&(s=i.videoHeight),u=u||n.width,s=s||n.height,u!==0&&s!==0){var a=u,f=s;this.sourceRect.u()&&(r=this.th.x,o=this.th.y,u=this.th.width,s=this.th.height);var c=u,d=s,g=this.xl,m=this.wl;switch(g){case ve:if(this.sourceRect.u())break;c>=n.width&&(r=r+m.offsetX+(c*m.x-n.width*m.x)),d>=n.height&&(o=o+m.offsetY+(d*m.y-n.height*m.y)),u=Math.min(n.width,c),s=Math.min(n.height,d);break;case ye:c=n.width,d=n.height;break;case vr:case Ua:g===vr?(g=Math.min(n.height/d,n.width/c),c*=g,d*=g):g===Ua&&(g=Math.max(n.height/d,n.width/c),c*=g,d*=g,c>=n.width&&(r=(r+m.offsetX+(c*m.x-n.width*m.x)/c)*u),d>=n.height&&(o=(o+m.offsetY+(d*m.y-n.height*m.y)/d)*s),u*=1/(c/n.width),s*=1/(d/n.height),c=n.width,d=n.height)}g=this.Cf()*e.scale;var y=c*g*d*g,x=u*s/y,M=i.__goCache;g=null;var S=gT;if(i.ls&&M!==void 0&&4<y&&x>S*S)for(M.bj===null&&(VM(M,4,a,f,i),VM(M,16,a,f,i)),a=M.bj,f=a.length,y=0;y<f&&a[y].ratio*a[y].ratio<x;y++)g=a[y];if(!e.pl){if(this.km===null)if(this.Zg===null)this.km=!1;else{a=new Nn(null).context,a.drawImage(this.Zg,0,0);try{a.getImageData(0,0,1,1).data[3]&&(this.km=!1),this.km=!1}catch(N){this.km=!0}}if(this.km)return}switch(a=0,c<n.width&&(a=m.offsetX+(n.width*m.x-c*m.x)),f=0,d<n.height&&(f=m.offsetY+(n.height*m.y-d*m.y)),this.flip){case Ga:t.translate(Math.min(n.width,c),0),t.scale(-1,1);break;case Ya:t.translate(0,Math.min(n.height,d)),t.scale(1,-1);break;case Xa:t.translate(Math.min(n.width,c),Math.min(n.height,d)),t.scale(-1,-1)}if(e.Ie("pictureRatioOptimization")&&!e.wi&&M!==void 0&&g!==null&&g.ratio!==1){t.save(),e=g.ratio;try{t.drawImage(g.source,r/e,o/e,Math.min(g.source.width,u/e),Math.min(g.source.height,s/e),a,f,Math.min(n.width,c),Math.min(n.height,d))}catch(N){this.Yr=!1}t.restore()}else try{t.drawImage(i,r,o,u,s,a,f,Math.min(n.width,c),Math.min(n.height,d))}catch(N){this.Yr=!1}switch(this.flip){case Ga:t.scale(-1,1),t.translate(-Math.min(n.width,c),0);break;case Ya:t.scale(1,-1),t.translate(0,-Math.min(n.height,d));break;case Xa:t.scale(-1,-1),t.translate(-Math.min(n.width,c),-Math.min(n.height,d))}}}}},l.Fm=function(t,e,i,n){var r=this.desiredSize,o=er(this,!0),s=this.Zg,u=this.Qu;(u||!this.Nl&&s&&s.complete)&&(this.Nl=!0),s===null&&(isFinite(r.width)||(t=0),isFinite(r.height)||(e=0)),isFinite(r.width)||o===ye||o===_e?(isFinite(t)||(t=this.sourceRect.u()?this.sourceRect.width:u?+s.width:s.naturalWidth),i=0):s!==null&&this.Nl!==!1&&(t=this.sourceRect.u()?this.sourceRect.width:u?+s.width:s.naturalWidth),isFinite(r.height)||o===ye||o===ei?(isFinite(e)||(e=this.sourceRect.u()?this.sourceRect.height:u?+s.height:s.naturalHeight),n=0):s!==null&&this.Nl!==!1&&(e=this.sourceRect.u()?this.sourceRect.height:u?+s.height:s.naturalHeight),isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(e=r.height),r=this.maxSize,o=this.minSize,i=Math.max(i,o.width),n=Math.max(n,o.height),t=Math.min(r.width,t),e=Math.min(r.height,e),t=Math.max(i,t),e=Math.max(n,e),s===null||s.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),eo(this.rc,t,e),ro(this,0,0,t,e)},l.Hh=function(t,e,i,n){p0(this,t,e,i,n)},X.Object.defineProperties(nr.prototype,{element:{get:function(){return this.Zg},set:function(t){var e=this.Zg;if(e!==t){if(t===null||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||E("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.Qu=t instanceof HTMLCanvasElement,this.Zg=t,t!==null)if(t instanceof HTMLCanvasElement||t.complete===!0)t.tl instanceof Event&&this.Dc!==null&&this.Dc(this,t.tl),t.ls===!0&&this.sf!==null&&this.sf(this,t.mv),t.ls=!0,this.desiredSize.u()||(en(this,!1),this.o());else{var i=this;t.yx||(t.addEventListener("load",function(n){BM(t,n),i.desiredSize.u()||(en(i,!1),i.o())}),t.addEventListener("error",function(n){RM(t,n)}),t.yx=!0)}this.g("element",e,t),this.M()}}},source:{get:function(){return this.Wp},set:function(t){var e=this.Wp;if(e!==t){this.Wp=t;var i=ah,n=this.diagram;if(Vn){var r=null;if(i[t]!==void 0)r=i[t];else if(t!==""){30<Ap&&(Op(),i=ah),r=it("img");var o=this;r.addEventListener("load",function(u){BM(r,u),o.desiredSize.u()||(en(o,!1),o.o())}),r.addEventListener("error",function(u){RM(r,u)}),r.yx=!0;var s=this.dm;s!==null&&(r.crossOrigin=s(this)),r.src=t,i[t]=r,Ap++}n!==null&&e0(n,this),this.element=r,n!==null&&r!==null&&t0(n,this),r!==null&&r.__goCache===void 0&&(r.__goCache=new FM),this.o(),this.M()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.dm},set:function(t){if(this.dm!==t&&(this.dm=t,this.element!==null)){var e=this.element.getAttribute("src");t===null&&typeof e=="string"?this.element.crossOrigin=null:t!==null&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.th},set:function(t){var e=this.th;e.w(t)||(this.th=t=t.G(),this.M(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.xl},set:function(t){var e=this.xl;e!==t&&(this.xl=t,this.M(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Qd},set:function(t){var e=this.Qd;e!==t&&(this.Qd=t,this.M(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.wl},set:function(t){var e=this.wl;e.w(t)||(this.wl=t=t.G(),this.o(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Dc},set:function(t){var e=this.Dc;e!==t&&(this.Dc=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.sf},set:function(t){var e=this.sf;e!==t&&(this.sf=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.rc}}}),nr.prototype.redraw=nr.prototype.Le,nr.prototype.reloadSource=nr.prototype.QA;var ah=null,Ap=0,gT=4;nr.className="Picture",ah=new Qi,nr.clearCache=Op;function FM(){this.bj=null}function VM(t,e,i,n,r){t.bj===null&&(t.bj=[]);var o=new Nn(null),s=o.context,u=1/e;o.width=i/e,o.height=n/e,o.width!==0&&o.height!==0&&(e=new zM(o.Ga,e),i=1,0<t.bj.length&&(i=t.bj[t.bj.length-1],r=i.source,i=i.ratio),s.setTransform(u*i,0,0,u*i,0,0),s.drawImage(r,0,0),t.bj.push(e))}FM.className="PictureCacheArray";function zM(t,e){this.source=t,this.ratio=e}zM.className="PictureCacheInstance";function F0(){this.Jt=new Mt,this.ic=null}l=F0.prototype,l.reset=function(t){t!==null?(t.ea(),this.Jt=t,t.figures.clear()):this.Jt=new Mt,this.ic=null};function fh(t,e,i,n,r){t.ic=new be,t.ic.startX=e,t.ic.startY=i,t.ic.isFilled=n,t.Jt.figures.add(t.ic),r!==void 0&&(t.ic.isShadowed=r)}function yT(t){var e=t.ic.segments.length;0<e&&t.ic.segments.J(e-1).close()}l.er=function(t){this.ic.isShadowed=t},l.moveTo=function(t,e,i){i===void 0&&(i=!1);var n=new Ht(Fn);n.endX=t,n.endY=e,i&&n.close(),this.ic.segments.add(n)},l.lineTo=function(t,e,i){i===void 0&&(i=!1);var n=new Ht(me);n.endX=t,n.endY=e,i&&n.close(),this.ic.segments.add(n)};function Ro(t,e,i,n,r,o,s){var u;u===void 0&&(u=!1);var a=new Ht(fn);a.point1X=e,a.point1Y=i,a.point2X=n,a.point2Y=r,a.endX=o,a.endY=s,u&&a.close(),t.ic.segments.add(a)}function Ip(t,e,i,n,r){var o;o===void 0&&(o=!1);var s=new Ht(mr);s.point1X=e,s.point1Y=i,s.endX=n,s.endY=r,o&&s.close(),t.ic.segments.add(s)}l.arcTo=function(t,e,i,n,r,o,s){o===void 0&&(o=0),s===void 0&&(s=!1);var u=new Ht(ri);u.startAngle=t,u.sweepAngle=e,u.centerX=i,u.centerY=n,u.radiusX=r,u.radiusY=o!==0?o:r,s&&u.close(),this.ic.segments.add(u)};function mT(t,e,i,n,r,o,s,u){var a;a===void 0&&(a=!1),e=new Ht(Jn,s,u,e,i,n,r,o),a&&e.close(),t.ic.segments.add(e)}function UM(t){var e=Bp;return e!==null?(Bp=null,e.reset(t),e):(e=new F0,e.reset(t),e)}var Bp=null;F0.className="StreamGeometryContext";function Fi(t,e){var i=t.toLowerCase(),n=j.Qe;n[t]=e,n[i]=t}Fi("Rectangle",function(t,e,i){t="r"+e+","+i;var n=j.Th[t];return n!==void 0||(n=new Mt(Rn),n.endX=e,n.endY=i,50>j.Uh&&(j.Th[t]=n,j.Uh++)),n}),Fi("Square",function(t,e,i){t="s"+e+","+i;var n=j.Th[t];return n!==void 0||(n=new Mt(Rn),n.endX=e,n.endY=i,n.defaultStretch=vr,50>j.Uh&&(j.Th[t]=n,j.Uh++)),n}),Fi("RoundedRectangle",function(t,e,i){var n=t?t.parameter1:NaN;return(isNaN(n)||0>n)&&(n=5),n=Math.min(n,e/3),n=Math.min(n,i/3),t=n*j.Lg,e=new Mt().add(new be(n,0,!0).add(new Ht(me,e-n,0)).add(new Ht(fn,e,n,e-t,0,e,t)).add(new Ht(me,e,i-n)).add(new Ht(fn,e-n,i,e,i-t,e-t,i)).add(new Ht(me,n,i)).add(new Ht(fn,0,i-n,t,i,0,i-t)).add(new Ht(me,0,n)).add(new Ht(fn,n,0,0,t,t,0).close())),1<t&&(e.spot1=new st(0,0,t,t),e.spot2=new st(1,1,-t,-t)),e}),Fi("Border","RoundedRectangle"),Fi("Ellipse",function(t,e,i){t="e"+e+","+i;var n=j.Th[t];return n!==void 0||(n=new Mt(yr),n.endX=e,n.endY=i,n.spot1=wy,n.spot2=My,50>j.Uh&&(j.Th[t]=n,j.Uh++)),n}),Fi("Circle",function(t,e,i){t="c"+e+","+i;var n=j.Th[t];return n!==void 0||(n=new Mt(yr),n.endX=e,n.endY=i,n.spot1=wy,n.spot2=My,n.defaultStretch=vr,50>j.Uh&&(j.Th[t]=n,j.Uh++)),n}),Fi("TriangleRight",function(t,e,i){return new Mt().add(new be(0,0).add(new Ht(me,e,.5*i)).add(new Ht(me,0,i).close())).Wm(0,.25,.5,.75)}),Fi("TriangleDown",function(t,e,i){return new Mt().add(new be(0,0).add(new Ht(me,e,0)).add(new Ht(me,.5*e,i).close())).Wm(.25,0,.75,.5)}),Fi("TriangleLeft",function(t,e,i){return new Mt().add(new be(e,i).add(new Ht(me,0,.5*i)).add(new Ht(me,e,0).close())).Wm(.5,.25,1,.75)}),Fi("TriangleUp",function(t,e,i){return new Mt().add(new be(e,i).add(new Ht(me,0,i)).add(new Ht(me,.5*e,0).close())).Wm(.25,.5,.75,1)}),Fi("Triangle","TriangleUp"),Fi("Diamond",function(t,e,i){return new Mt().add(new be(.5*e,0).add(new Ht(me,0,.5*i)).add(new Ht(me,.5*e,i)).add(new Ht(me,e,.5*i).close())).Wm(.25,.25,.75,.75)}),Fi("LineH",function(t,e,i){return t=new Mt(He),t.startX=0,t.startY=i/2,t.endX=e,t.endY=i/2,t}),Fi("LineV",function(t,e,i){return t=new Mt(He),t.startX=e/2,t.startY=0,t.endX=e/2,t.endY=i,t}),Fi("None","Rectangle"),Fi("BarH","Rectangle"),Fi("BarV","Rectangle"),Fi("MinusLine","LineH"),Fi("PlusLine",function(t,e,i){return new Mt().add(new be(0,i/2,!1).add(new Ht(me,e,i/2)).add(new Ht(Fn,e/2,0)).add(new Ht(me,e/2,i)))}),Fi("XLine",function(t,e,i){return new Mt().add(new be(0,i,!1).add(new Ht(me,e,0)).add(new Ht(Fn,0,0)).add(new Ht(me,e,i)))}),j.an={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};function rt(t){V.call(this,t),this.D=2408959,this.ih=this.Pf="",this.Ap=this.wp=this.Lp=this.Bo=null,this.Np="",this.Nf=this.no=this.Mp=this.sh=null,this.yp="",this.xp=oy,this.Ub=this.Bp="",this.Di=this.xn=this.li=null,this.fg=new k(NaN,NaN).freeze(),this.Io="",this.df=null,this.Jo=mi,this.Cp=ni,this.So=ax,this.Ko=fx,this.Pn=null,this.Co=127,this.Rp=cx,this.Qp="gray",this.lf=4,this.Ax=-1,this.pq=NaN,this.gz=new I,this.Vj=null,this.kh=NaN}ut(rt,V),rt.prototype.cloneProtected=function(t){V.prototype.cloneProtected.call(this,t),t.D=this.D&-4097|49152,t.Pf=this.Pf,t.ih=this.ih,t.Bo=this.Bo,t.Lp=this.Lp,t.wp=this.wp,t.Ap=this.Ap,t.Np=this.Np,t.Mp=this.Mp,t.no=this.no,t.Nf=null,t.yp=this.yp,t.xp=this.xp.G(),t.Bp=this.Bp,t.Cp=this.Cp.G(),t.Ub=this.Ub,t.xn=this.xn,t.fg.assign(this.fg),t.Io=this.Io,t.Jo=this.Jo.G(),t.So=this.So.G(),t.Ko=this.Ko.G(),t.Pn=this.Pn,t.Co=this.Co,t.Rp=this.Rp.G(),t.Qp=this.Qp,t.lf=this.lf,t.pq=this.pq},rt.prototype.Af=function(t){V.prototype.Af.call(this,t),t.Nh(),t.sh=null,t.df=null,t.Vj=null},rt.prototype.toString=function(){var t=Ee(this.constructor)+"#"+Ne(this);return this.data!==null&&(t+="("+Xe(this.data)+")"),t},rt.prototype.Ok=function(t,e,i,n,r,o,s){var u=this.diagram;u!==null&&(t===Te&&e==="elements"?r instanceof V?Xs(r,function(a){fm(u.partManager,a),Aw(u,a)}):t0(u,r):t===Ce&&e==="elements"&&(r instanceof V?Xs(r,function(a){cm(u.partManager,a,u)}):e0(u,r)),u.bb(t,e,i,n,r,o,s))},rt.prototype.Ca=function(t){if(V.prototype.Ca.call(this,t),this.data!==null){for(var e=this.W.j,i=e.length,n=0;n<i;n++){var r=e[n];r instanceof V&&Xs(r,function(o){o.data!==null&&o.Ca()})}for(e=this.adornments;e.next();)e.value.Ca(t)}},rt.prototype.updateRelationshipsFromData=function(){this.data!==null&&this.diagram.partManager.updateRelationshipsFromData(this)},rt.prototype.uk=function(t){var e=this.Nf;return e===null?null:e.H(t)},rt.prototype.Fh=function(t,e){if(e!==null){var i=null,n=this.Nf;if(n!==null&&(i=n.H(t)),i!==e){if(i!==null){var r=i.diagram;r!==null&&r.remove(i)}n===null&&(this.Nf=n=new ct),e.Pf!==t&&(e.category=t),n.add(t,e),t=this.diagram,t!==null&&(t.add(e),t=e.adornedObject,t!==null&&(t=t.hj(),t!==null&&(e.data=t.data)))}}},rt.prototype.Jf=function(t){var e=this.Nf;if(e!==null){var i=e.H(t);if(i!==null){var n=i.diagram;n!==null&&n.remove(i)}e.remove(t),e.count===0&&(this.Nf=null)}},rt.prototype.lk=function(){var t=this.Nf;if(t!==null){var e=Dt();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var i=0;i<t;i++)this.Jf(e[i]);Xt(e)}},rt.prototype.updateAdornments=function(){var t=this.diagram;if(t!==null){for(var e=this.adornments;e.next();){var i=e.value;i.o(),i.placeholder&&i.placeholder.o()}t:{if(this.isSelected&&this.selectionAdorned&&(e=this.selectionObject,e!==null&&this.actualBounds.u()&&this.isVisible()&&e.If()&&e.actualBounds.u())){if(i=this.uk("Selection"),i===null){if(i=this.selectionAdornmentTemplate,i===null&&(i=this.Oh()?t.linkSelectionAdornmentTemplate:this instanceof dt?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(i instanceof Ct))break t;Tn(i),i=i.copy(),i!==null&&(this.Oh()&&this.selectionObject===this.path&&(i.type=V.Link),i.adornedObject=e)}if(i!==null){i.type===V.Link&&i.o(),this.Fh("Selection",i);break t}}this.Jf("Selection")}for(vT(this,t),e=this.adornments;e.next();)e.value.Ca()}},rt.prototype.Mb=function(){var t=this.diagram;t!==null&&(as(t),(this.D&16384)==0&&(this.D|=16384,t.Eb()))};function V0(t){(t.D&16384)!=0&&(t.updateAdornments(),t.D&=-16385)}function vT(t,e){e.toolManager.mouseDownTools.each(function(i){i.isEnabled&&i.updateAdornments(t)}),e.toolManager.updateAdornments(t)}function Rp(t){if(Fo(t)===!1){U0(t,!0),t.El();var e=t.diagram;e!==null&&(e.vd.add(t),e.Eb())}}function YM(t){if(t.D|=2097152,Fo(t)!==!1){var e=t.position,i=t.location;i.u()&&e.u()||XM(t,e,i),i=t.yb;var n=I.alloc().assign(i);i.ea(),i.x=e.x,i.y=e.y,i.freeze(),t.Gm(n,i),I.free(n),U0(t,!1)}}rt.prototype.move=function(t,e){e===!0?this.location=t:this.position=t},rt.prototype.moveTo=function(t,e,i){t=k.allocAt(t,e),this.move(t,i),k.free(t)},rt.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(t!==null){if(!t.visible)return!1;if(t=t.diagram,t!==null&&t.animationManager.au(this))return!0}return t=this.containingGroup,!!(t===null||t.isSubGraphExpanded&&t.isVisible())},l=rt.prototype,l.Pb=function(t){var e=this.diagram;t?(this.C(4),this.Mb(),e!==null&&e.vd.add(this)):(this.C(8),this.lk()),this.Nh(),e!==null&&(e.Oa(),e.M())},l.ab=function(t){if(this.name===t)return this;var e=this.Vj;if(e===null&&(this.Vj=e=new ct),e.H(t)!==null)return e.H(t);var i=V.prototype.ab.call(this,t);return i!==null?(e.set(t,i),i):(e.set(t,null),null)},l.Ff=function(t,e,i){i===void 0&&(i=new k),e=e.nc()?Wt:e;var n=t.naturalBounds;if(i.h(n.width*e.x+e.offsetX,n.height*e.y+e.offsetY),t===null||t===this)return i;for(t.transform.sa(i),t=t.panel;t!==null&&t!==this;)t.transform.sa(i),t=t.panel;return this.eg.sa(i),i.offset(-this.qc.x,-this.qc.y),i},l.lj=function(t){return t===void 0&&(t=new I),t.assign(this.actualBounds)},l.Ta=function(){Eo(this)===!0&&this.measure(Infinity,Infinity),this.arrange()};function Al(t,e){var i=t.gz;isNaN(t.kh)&&(t.kh=vM(t));var n=t.kh,r=2*n;if(!t.isShadowed)return i.h(e.x-1-n,e.y-1-n,e.width+2+r,e.height+2+r),i;n=e.x,r=e.y;var o=e.width;e=e.height;var s=t.shadowBlur;return t=t.shadowOffset,o+=s,e+=s,n-=s/2,r-=s/2,0<t.x?o+=t.x:(n+=t.x,o-=t.x),0<t.y?e+=t.y:(r+=t.y,e-=t.y),i.h(n-1,r-1,o+2,e+2),i}rt.prototype.arrange=function(){if(Pn(this)===!1)YM(this);else{Us(this,!1);var t=this.yb,e=I.alloc();e.assign(t);var i=gs(this);this.Hh(0,0,this.qc.width,this.qc.height);var n=this.position;XM(this,n,this.location),t.ea(),t.x=n.x,t.y=n.y,t.freeze(),this.Gm(e,t),e.w(t)?this.Ld(i):!this.Oc()||j.A(e.width,t.width)&&j.A(e.height,t.height)||0<=this.Ax&&this.C(16),I.free(e),U0(this,!1)}},l=rt.prototype,l.Gm=function(t,e){var i=this.diagram;if(i!==null){var n=!1;if(i.ti===!1&&t.u()){var r=I.alloc();r.assign(i.documentBounds),r.Jw(i.padding),t.x>r.x&&t.y>r.y&&t.right<r.right&&t.bottom<r.bottom&&e.x>r.x&&e.y>r.y&&e.right<r.right&&e.bottom<r.bottom&&(n=!0),I.free(r)}(this.D&65536)==0&&t.w(e)||KM(this,n,i),i.M(),sy(t,e)||(this instanceof Z&&!i.undoManager.isUndoingRedoing&&this.td(),this.Nh())}},l.Ew=function(t,e){if(this.Oh()||!t.u())return!1;var i=this.diagram;i!==null&&GM(this,i,t,e),this.la=t,this.D&=-2097153;var n=this.fg;return!n.u()||i!==null&&!i.animationManager.isTicking&&i.undoManager.isUndoingRedoing||(i=n.copy(),n.h(n.x+(t.x-e.x),n.y+(t.y-e.y)),this.g("location",i,n.copy())),Fo(this)===!1&&Pn(this)===!1&&(Rp(this),YM(this)),!0};function GM(t,e,i,n){e===null||t instanceof Ct||(e=e.animationManager,e.ff&&uw(e,t,n.copy(),i.copy()))}l.dr=function(t,e,i){var n=this.fg,r=this.la;if(i){if(n.x===t&&n.y===e)return;Fo(this)||Pn(this)?r.h(NaN,NaN):r.h(r.x+t-n.x,r.y+e-n.y),n.h(t,e)}else{if(r.x===t&&r.y===e)return;Fo(this)||Pn(this)?this.ju():n.h(n.x+t-r.x,n.y+e-r.y),r.h(t,e)}Rp(this)},l.ju=function(){this.D&=-2097153,Rp(this)};function XM(t,e,i){var n=k.alloc(),r=t.locationSpot,o=t.locationObject;r.nc()&&E("determineOffset: Part's locationSpot must be real: "+r.toString());var s=o.naturalBounds,u=o instanceof gt?o.strokeWidth:0;if(n.Qk(0,0,s.width+u,s.height+u,r),o!==t)for(n.offset(-u/2,-u/2),o.transform.sa(n),r=o.panel;r!==null&&r!==t;)r.transform.sa(n),r=r.panel;t.eg.sa(n),n.offset(-t.qc.x,-t.qc.y),r=t.diagram,o=i.u(),s=e.u(),o&&s?(t.D&2097152)!=0?HM(t,e,i,r,n):WM(t,e,i,r,n):o?HM(t,e,i,r,n):s&&WM(t,e,i,r,n),t.D|=2097152,k.free(n),t.El()}function HM(t,e,i,n,r){var o=e.x,s=e.y;e.h(i.x-r.x,i.y-r.y),n!==null&&(i=n.animationManager,(n=i.isAnimating)||!i.ff||t instanceof Ct||uw(i,t,new k(o,s),e),n||e.x===o&&e.y===s||t.g("position",new k(o,s),e.copy()))}function WM(t,e,i,n,r){var o=i.copy();i.h(e.x+r.x,e.y+r.y),i.w(o)||n===null||t.g("location",o,i.copy())}function KM(t,e,i){Y0(t,!1),t instanceof Z&&s0(i,t),t.layer.isTemporary||e||i.Oa(),e=t.yb;var n=i.viewportBounds;n.u()?gs(t)?(Mx(e,n)||t.Ld(!1),t.updateAdornments()):e.Nc(n)?(t.Ld(!0),t.updateAdornments()):t.Mb():i.vi=!0}l.qj=function(){return!0},l.Oc=function(){return!0},l.Oh=function(){return!1},l.Hf=function(){return!0};function z0(t,e,i,n){e.constructor===t.constructor||ZM||(ZM=!0,wt('Should not change the class of the Part when changing category from "'+i+'" to "'+n+'"'),wt("  Old class: "+Ee(t.constructor)+", new class: "+Ee(e.constructor)+", part: "+t.toString())),t.lk();var r=t.data;i=t.layerName;var o=t.isSelected,s=t.isHighlighted,u=!0,a=!0,f=!1;t instanceof Z&&(u=t.isTreeLeaf,a=t.isTreeExpanded,f=t.wasTreeExpanded),e.Af(t),e.cloneProtected(t),t.Pf=n,t.o(),t.M(),e=t.diagram,n=!0,e!==null&&(n=e.skipsUndoManager,e.skipsUndoManager=!0),t.nb=r,t.D=o?t.D|4096:t.D&-4097,t.D=s?t.D|524288:t.D&-524289,t instanceof Z&&(t.P=u?t.P|4:t.P&-5,t.P=a?t.P|1:t.P&-2,t.P=f?t.P|2:t.P&-3),r!==null&&t.Ca(),r=t.layerName,r!==i&&(t.ih=i,t.layerName=r),e!==null&&(e.skipsUndoManager=n),t.Oc()&&t.C(64)}rt.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return t===null?!0:t.allowCopy?(t=t.diagram,t===null?!0:!!t.allowCopy):!1},rt.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return t===null?!0:t.allowDelete?(t=t.diagram,t===null?!0:!!t.allowDelete):!1},rt.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return t===null?!0:t.allowTextEdit?(t=t.diagram,t===null?!0:!!t.allowTextEdit):!1},rt.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return t===null?!0:t.allowGroup?(t=t.diagram,t===null?!0:!!t.allowGroup):!1},rt.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return t===null?!0:t.allowMove?(t=t.diagram,t===null?!0:!!t.allowMove):!1},rt.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return t===null?!0:t.allowReshape?(t=t.diagram,t===null?!0:!!t.allowReshape):!1},rt.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return t===null?!0:t.allowResize?(t=t.diagram,t===null?!0:!!t.allowResize):!1},rt.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return t===null?!0:t.allowRotate?(t=t.diagram,t===null?!0:!!t.allowRotate):!1},rt.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return t===null?!0:t.allowSelect?(t=t.diagram,t===null?!0:!!t.allowSelect):!1};function Fo(t){return(t.D&32768)!=0}function U0(t,e){t.D=e?t.D|32768:t.D&-32769}function Y0(t,e){t.D=e?t.D|65536:t.D&-65537}function gs(t){return(t.D&131072)!=0}l=rt.prototype,l.Ld=function(t){this.D=t?this.D|131072:this.D&-131073};function Fp(t,e){t.D=e?t.D|1048576:t.D&-1048577}l.Nh=function(){var t=this.containingGroup;t!==null&&(t.o(),t.placeholder!==null&&t.placeholder.o(),t.td())},l.M=function(){var t=this.diagram;t!==null&&!Pn(this)&&!Fo(this)&&this.isVisible()&&this.yb.u()&&t.M(Al(this,this.yb))},l.o=function(){V.prototype.o.call(this);var t=this.diagram;t!==null&&(t.vd.add(this),this instanceof Z&&this.labeledLink!==null&&bu(this.labeledLink),t.Eb(!0))},l.Iq=function(t){t||(t=this.li,t!==null&&_0(t,this))},l.Jq=function(t){t||(t=this.li,t!==null&&$0(t,this))},l.sk=function(){var t=this.data;if(t!==null){var e=this.diagram;e!==null&&(e=e.model,e!==null&&e.Lm(t))}},l.bA=function(){return G0(this,this)};function G0(t,e){var i=e.containingGroup;return i!==null?1+G0(t,i):e instanceof Z&&(e=e.labeledLink,e!==null)?G0(t,e):0}l.eA=function(){return _M(this,this)};function _M(t,e){var i=e.containingGroup;return i!==null||e instanceof Z&&(i=e.labeledLink,i!==null)?_M(t,i):e}l.Hd=function(t){return t instanceof dt?X0(this,this,t):!1};function X0(t,e,i){if(e===i||i===null)return!1;var n=e.containingGroup;return n===null||n!==i&&!X0(t,n,i)?e instanceof Z&&(e=e.labeledLink,e!==null)?X0(t,e,i):!1:!0}l.py=function(t){if(t===null)return null;if(this===t)return this.containingGroup;for(var e=this;e!==null;){if(e instanceof dt&&Fp(e,!0),e instanceof Z){var i=e.labeledLink;i!==null&&(e=i)}e=e.containingGroup}for(i=null,e=t;e!==null;){if((e.D&1048576)!=0){i=e;break}e instanceof Z&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup}for(e=this;e!==null;)e instanceof dt&&Fp(e,!1),e instanceof Z&&(t=e.labeledLink,t!==null&&(e=t)),e=e.containingGroup;return i},rt.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(t!==null&&t.isTemporary||this instanceof Z&&this.isLinkLabel)},rt.prototype.C=function(t){if(t===void 0&&(t=16777215),this.isLayoutPositioned&&(t&this.layoutConditions)!=0){var e=this.layer;e!==null&&e.isTemporary||this instanceof Z&&this.isLinkLabel?e=!1:(e=this.diagram,e=!(e!==null&&e.undoManager.isUndoingRedoing))}else e=!1;if(e)if(e=this.li,e!==null){var i=e.layout;i!==null?i.C():e.C(t)}else t=this.diagram,t!==null&&(t=t.layout,t!==null&&t.C())};function $M(t){return t.isVisible()?(t=t.layer,!(t!==null&&t.isTemporary)):!1}function ys(t,e,i,n,r,o){if(o===void 0&&(o=null),!(t.contains(e)||o!==null&&!o(e)||e instanceof Ct)){if(t.add(e),e instanceof Z){if(i&&e instanceof dt)for(var s=e.memberParts;s.next();)ys(t,s.value,i,n,r,o);if(r!==!1)for(s=e.linksConnected;s.next();){var u=s.value;if(!t.contains(u)){var a=u.fromNode,f=u.toNode;a=a===null||t.contains(a),f=f===null||t.contains(f),(r?a&&f:a||f)&&ys(t,u,i,n,r,o)}}if(1<n)for(e=e.Uv();e.next();)ys(t,e.value,i,n-1,r,o)}else if(e instanceof z)for(e=e.labelNodes;e.next();)ys(t,e.value,i,n,r,o)}}X.Object.defineProperties(rt.prototype,{key:{get:function(){var t=this.diagram;if(t!==null)return t.model.ja(this.data)}},adornments:{get:function(){return this.Nf===null?Bn:this.Nf.iteratorValues}},layer:{get:function(){return this.Di}},diagram:{get:function(){var t=this.Di;return t!==null?t.diagram:null}},layerName:{get:function(){return this.ih},set:function(t){var e=this.ih;if(e!==t){var i=this.diagram;if((i===null||i.wm(t)!==null&&!i.partManager.addsToTemporaryLayer)&&(this.ih=t,i!==null&&i.Oa(),this.g("layerName",e,t),e=this.layer,e!==null&&e.name!==t&&(i=e.diagram,i!==null&&(t=i.wm(t),t!==null&&t!==e)))){var n=e.Mc(-1,this,!0);if(0<=n&&i.bb(Ce,"parts",e,this,null,n,!0),n=t.nj(99999999,this,!0),e.visible!==t.visible&&this.Pb(t.visible),0<=n&&i.bb(Te,"parts",t,null,this,!0,n),n=this.layerChanged,n!==null){var r=i.Z;i.Z=!0,n(this,e,t),i.Z=r}}}}},layerChanged:{get:function(){return this.Bo},set:function(t){var e=this.Bo;e!==t&&(this.Bo=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.pq},set:function(t){var e=this.pq;if(e!==t){this.pq=t;var i=this.layer;i!==null&&$c(i,-1,this),this.g("zOrder",e,t),t=this.diagram,t!==null&&t.M()}}},locationObject:{get:function(){if(this.df===null){var t=this.locationObjectName;t!==""?(t=this.ab(t),t!==null?this.df=t:this.df=this):this instanceof Ct?this.type!==V.Link&&this.placeholder!==null?this.df=this.placeholder:this.df=this:this.df=this}return this.df.visible?this.df:this}},minLocation:{get:function(){return this.So},set:function(t){var e=this.So;e.w(t)||(this.So=t=t.G(),this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.Ko},set:function(t){var e=this.Ko;e.w(t)||(this.Ko=t=t.G(),this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.Io},set:function(t){var e=this.Io;e!==t&&(this.Io=t,this.df=null,this.o(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.Jo},set:function(t){var e=this.Jo;e.w(t)||(this.Jo=t=t.G(),this.o(),this.g("locationSpot",e,t))}},location:{get:function(){return this.fg},set:function(t){var e=t.x,i=t.y,n=this.fg,r=n.x,o=n.y;(r===e||isNaN(r)&&isNaN(e))&&(o===i||isNaN(o)&&isNaN(i))||(t=t.copy(),e=t,this.Oh()?e=!1:(this.fg=e,this.D|=2097152,Pn(this)===!1&&(Rp(this),i=this.la,i.u()&&(r=this.diagram,r===null||r.animationManager.isTicking||!r.undoManager.isUndoingRedoing))&&(o=i.copy(),i.h(i.x+(e.x-n.x),i.y+(e.y-n.y)),GM(this,r,i,o),this.g("position",o,i.copy())),e=!0),e&&this.g("location",n.copy(),t.copy()))}},category:{get:function(){return this.Pf},set:function(t){var e=this.Pf;if(e!==t){var i=this.diagram,n=this.data,r=null;if(i!==null&&n!==null&&!(this instanceof Ct)){var o=i.model.undoManager;o.isEnabled&&!o.isUndoingRedoing&&(r=this.clone(),r.W.addAll(this.W))}this.Pf=t,this.g("category",e,t),i===null||n===null||this instanceof Ct?this instanceof Ct&&(r=this.adornedPart,r!==null&&(t=r.Nf,t!==null&&t.remove(e),r.Fh(this.category,this))):(o=i.model,o.undoManager.isUndoingRedoing||(this.Oh()?(i.partManager.setLinkCategoryForData(n,t),i=i.partManager.findLinkTemplateForCategory(t),i!==null&&(Tn(i),i=i.copy(),i!==null&&z0(this,i,e,t))):(o!==null&&o.Sm(n,t),i=TS(i.partManager,n,t),i!==null&&(Tn(i),i=i.copy(),i===null||i instanceof z||(n=this.location.copy(),z0(this,i,e,t),this.location.u()||(this.location=n)))),r!==null&&(e=this.clone(),e.W.addAll(this.W),this.g("self",r,e))))}}},self:{get:function(){return this},set:function(t){z0(this,t,this.category,t.category)}},copyable:{get:function(){return(this.D&1)!=0},set:function(t){var e=(this.D&1)!=0;e!==t&&(this.D^=1,this.g("copyable",e,t))}},deletable:{get:function(){return(this.D&2)!=0},set:function(t){var e=(this.D&2)!=0;e!==t&&(this.D^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return(this.D&4)!=0},set:function(t){var e=(this.D&4)!=0;e!==t&&(this.D^=4,this.g("textEditable",e,t),this.Mb())}},groupable:{get:function(){return(this.D&8)!=0},set:function(t){var e=(this.D&8)!=0;e!==t&&(this.D^=8,this.g("groupable",e,t))}},movable:{get:function(){return(this.D&16)!=0},set:function(t){var e=(this.D&16)!=0;e!==t&&(this.D^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return(this.D&32)!=0},set:function(t){var e=(this.D&32)!=0;e!==t&&(this.D^=32,this.g("selectionAdorned",e,t),this.Mb())}},isInDocumentBounds:{get:function(){return(this.D&64)!=0},set:function(t){var e=(this.D&64)!=0;if(e!==t){this.D^=64;var i=this.diagram;i!==null&&i.Oa(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return(this.D&128)!=0},set:function(t){var e=(this.D&128)!=0;e!==t&&(this.D^=128,this.g("isLayoutPositioned",e,t),this.C(t?4:8))}},selectable:{get:function(){return(this.D&256)!=0},set:function(t){var e=(this.D&256)!=0;e!==t&&(this.D^=256,this.g("selectable",e,t),this.Mb())}},reshapable:{get:function(){return(this.D&512)!=0},set:function(t){var e=(this.D&512)!=0;e!==t&&(this.D^=512,this.g("reshapable",e,t),this.Mb())}},resizable:{get:function(){return(this.D&1024)!=0},set:function(t){var e=(this.D&1024)!=0;e!==t&&(this.D^=1024,this.g("resizable",e,t),this.Mb())}},rotatable:{get:function(){return(this.D&2048)!=0},set:function(t){var e=(this.D&2048)!=0;e!==t&&(this.D^=2048,this.g("rotatable",e,t),this.Mb())}},isSelected:{get:function(){return(this.D&4096)!=0},set:function(t){var e=(this.D&4096)!=0;if(e!==t){var i=this.diagram;if(!t||this.canSelect()&&!(i!==null&&i.selection.count>=i.maxSelectionCount)){this.D^=4096;var n=!1;if(i!==null){n=i.skipsUndoManager,i.skipsUndoManager=!0;var r=i.selection;r.ea(),t?r.add(this):r.remove(this),r.freeze()}this.g("isSelected",e,t),this.Mb(),t=this.selectionChanged,t!==null&&t(this),i!==null&&(i.Eb(),i.skipsUndoManager=n)}}}},isHighlighted:{get:function(){return(this.D&524288)!=0},set:function(t){var e=(this.D&524288)!=0;if(e!==t){this.D^=524288;var i=this.diagram;i!==null&&(i=i.highlighteds,i.ea(),t?i.add(this):i.remove(this),i.freeze()),this.g("isHighlighted",e,t),this.M(),t=this.highlightedChanged,t!==null&&t(this)}}},isShadowed:{get:function(){return(this.D&8192)!=0},set:function(t){var e=(this.D&8192)!=0;e!==t&&(this.D^=8192,this.g("isShadowed",e,t),this.M())}},isAnimated:{get:function(){return(this.D&262144)!=0},set:function(t){var e=(this.D&262144)!=0;e!==t&&(this.D^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.no},set:function(t){var e=this.no;e!==t&&(this.no=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.Np},set:function(t){var e=this.Np;e!==t&&(this.Np=t,this.sh=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.Lp},set:function(t){var e=this.Lp;e!==t&&(this.Lp=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(this.sh===null){var t=this.selectionObjectName;t!==null&&t!==""?(t=this.ab(t),t!==null?this.sh=t:this.sh=this):this instanceof z?(t=this.path,t!==null?this.sh=t:this.sh=this):this.sh=this}return this.sh}},selectionChanged:{get:function(){return this.Mp},set:function(t){var e=this.Mp;e!==t&&(this.Mp=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.wp},set:function(t){var e=this.wp;e!==t&&(this.wp=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.yp},set:function(t){var e=this.yp;e!==t&&(this.yp=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return t!==""&&(t=this.ab(t),t!==null)?t:this}},resizeCellSize:{get:function(){return this.xp},set:function(t){var e=this.xp;e.w(t)||(this.xp=t=t.G(),this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.Ap},set:function(t){var e=this.Ap;e!==t&&(this.Ap=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.Bp},set:function(t){var e=this.Bp;e!==t&&(this.Bp=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return t!==""&&(t=this.ab(t),t!==null)?t:this}},rotationSpot:{get:function(){return this.Cp},set:function(t){var e=this.Cp;e.w(t)||(this.Cp=t=t.G(),this.g("rotationSpot",e,t))}},text:{get:function(){return this.Ub},set:function(t){var e=this.Ub;e!==t&&(this.Ub=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.li},set:function(t){if(this.Oc()){var e=this.li;if(e!==t){t===null||this!==t&&!t.Hd(this)||(this===t&&E("Cannot make a Group a member of itself: "+this.toString()),E("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.C(2);var i=this.diagram;if(e!==null?$0(e,this):this instanceof dt&&i!==null&&i.Ch.remove(this),this.li=t,t!==null?_0(t,this):this instanceof dt&&i!==null&&i.Ch.add(this),this.C(1),i!==null&&i.Z){var n=this.data,r=i.model;if(n!==null&&r.zk()){var o=r.ja(t!==null?t.data:null);r.cr(n,o)}}if(n=this.containingGroupChanged,n!==null&&(r=!0,i!==null&&(r=i.Z,i.Z=!0),n(this,e,t),i!==null&&(i.Z=r)),this instanceof dt){for(i=new W,ys(i,this,!0,0,!0),i=i.iterator;i.next();)if(n=i.value,n instanceof Z)for(n=n.linksConnected;n.next();)ch(n.value)}if(this instanceof Z){for(i=this.linksConnected;i.next();)ch(i.value);i=this.labeledLink,i!==null&&ch(i)}this.g("containingGroup",e,t),t!==null&&(e=t.layer,e!==null&&$c(e,-1,t))}}else E("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.xn},set:function(t){var e=this.xn;e!==t&&(this.xn=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(this.containingGroup!==null||this instanceof Z&&this.labeledLink!==null)}},layoutConditions:{get:function(){return this.Co},set:function(t){var e=this.Co;e!==t&&(this.Co=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.Pn},set:function(t){var e=this.Pn;e!==t&&(this.Pn=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.Rp},set:function(t){var e=this.Rp;e.w(t)||(this.Rp=t=t.G(),this.M(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.Qp},set:function(t){var e=this.Qp;e!==t&&(this.Qp=t,this.M(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.M(),this.g("shadowBlur",e,t))}}}),rt.prototype.invalidateLayout=rt.prototype.C,rt.prototype.findCommonContainingGroup=rt.prototype.py,rt.prototype.isMemberOf=rt.prototype.Hd,rt.prototype.findTopLevelPart=rt.prototype.eA,rt.prototype.findSubGraphLevel=rt.prototype.bA,rt.prototype.ensureBounds=rt.prototype.Ta,rt.prototype.getDocumentBounds=rt.prototype.lj,rt.prototype.getRelativePoint=rt.prototype.Ff,rt.prototype.findObject=rt.prototype.ab,rt.prototype.moveTo=rt.prototype.moveTo,rt.prototype.invalidateAdornments=rt.prototype.Mb,rt.prototype.clearAdornments=rt.prototype.lk,rt.prototype.removeAdornment=rt.prototype.Jf,rt.prototype.addAdornment=rt.prototype.Fh,rt.prototype.findAdornment=rt.prototype.uk,rt.prototype.updateTargetBindings=rt.prototype.Ca;var ZM=!1;rt.className="Part",rt.LayoutNone=0,rt.LayoutAdded=1,rt.LayoutRemoved=2,rt.LayoutShown=4,rt.LayoutHidden=8,rt.LayoutNodeSized=16,rt.LayoutGroupLayout=32,rt.LayoutNodeReplaced=64,rt.LayoutStandard=127,rt.LayoutAll=16777215;function Ct(t){rt.call(this,t),this.D&=-257,this.ih="Adornment",this.ge=null,this.Fx=0,this.Tx=!1,this.l=[],this.Ra=null}ut(Ct,rt),Ct.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(t!==null?t.toString():"")},Ct.prototype.updateRelationshipsFromData=function(){},Ct.prototype.Ck=function(t){var e=this.adornedObject.part;if(e instanceof z&&this.adornedObject instanceof gt){var i=e.path;e.Ck(t),t=i.geometry,e=this.W.j,i=e.length;for(var n=0;n<i;n++){var r=e[n];r.isPanelMain&&r instanceof gt&&(r.na=t)}}},Ct.prototype.qj=function(){var t=this.ge;return t===null?!0:(t=t.part,t===null||!Pn(t))},Ct.prototype.Oc=function(){return!1},Ct.prototype.Ok=function(t,e,i,n,r,o,s){if(t===Te&&e==="elements"){if(r instanceof xi)this.Ra===null&&(this.Ra=r);else if(r instanceof V){var u=r.vm(function(a){return a instanceof xi});u instanceof xi&&this.Ra===null&&(this.Ra=u)}}else t===Ce&&e==="elements"&&this.Ra!==null&&(n===this.Ra?this.Ra=null:n instanceof V&&this.Ra.Hg(n)&&(this.Ra=null));rt.prototype.Ok.call(this,t,e,i,n,r,o,s)},Ct.prototype.updateAdornments=function(){},Ct.prototype.sk=function(){},X.Object.defineProperties(Ct.prototype,{placeholder:{get:function(){return this.Ra}},adornedObject:{get:function(){return this.ge},set:function(t){var e=this.adornedPart,i=null;t!==null&&(i=t.part),e===null||t!==null&&e===i||e.Jf(this.category),this.ge=t,i!==null&&i.Fh(this.category,this)}},adornedPart:{get:function(){var t=this.ge;return t!==null?t.part:null}},containingGroup:{get:function(){return null}}}),Ct.className="Adornment";function Z(t){rt.call(this,t),this.P=13,this.Za=new J,this.jq=this.Jl=this.Gi=this.Eo=this.Do=null,this.al=Tx,this.tc=this.Te=null,this.sp=W0,this.Dh=!1}ut(Z,rt),Z.prototype.cloneProtected=function(t){rt.prototype.cloneProtected.call(this,t),t.P=this.P,t.P=this.P&-17,t.Do=this.Do,t.Eo=this.Eo,t.Gi=this.Gi,t.jq=this.jq,t.al=this.al.G(),t.sp=this.sp},l=Z.prototype,l.Af=function(t){rt.prototype.Af.call(this,t),t.td(),t.Te=this.Te,t.tc=null};function JM(t,e){e!==null&&(t.Te===null&&(t.Te=new W),t.Te.add(e))}function QM(t,e,i,n){if(e===null||t.Te===null)return null;for(var r=t.Te.iterator;r.next();){var o=r.value;if(o.Zt===t&&o.jw===e&&o.Oy===i&&o.Py===n||o.Zt===e&&o.jw===t&&o.Oy===n&&o.Py===i)return o}return null}l.xA=function(t,e,i){e==null&&(e=""),i==null&&(i=""),t=QM(this,t,e,i),t!==null&&t.Am()},l.Ok=function(t,e,i,n,r,o,s){t===Te&&e==="elements"?this.tc=null:t===Ce&&e==="elements"&&(this.tc=null),rt.prototype.Ok.call(this,t,e,i,n,r,o,s)},l.td=function(t){t===void 0&&(t=null);for(var e=this.linksConnected;e.next();){var i=e.value;t!==null&&t.contains(i)||(Ki(i.fromPort),Ki(i.toPort),i.Ua())}};function qM(t,e){for(t=t.linksConnected;t.next();){var i=t.value;(i.fromPort===e||i.toPort===e)&&(Ki(i.fromPort),Ki(i.toPort),i.Ua())}}function Ki(t){if(t!==null){var e=t.rp;e!==null&&e.Am(),t=t.part,e=t.containingGroup,e===null||t.isVisible()||Ki(e.port)}}l.qj=function(){return!0},Z.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.qq(this.al),t},Z.prototype.findVisibleNode=function(){for(var t=this;t!==null&&!t.isVisible();)t=t.containingGroup;return t},Z.prototype.isVisible=function(){if(!rt.prototype.isVisible.call(this))return!1;var t=!0,e=Vs,i=this.diagram;if(i!==null){if(i.animationManager.au(this))return!0;t=i.isTreePathToChildren,e=i.treeCollapsePolicy}if(e===Vs){if(t=this.Gg(),t!==null&&!t.isTreeExpanded)return!1}else if(e===u0){if(t=t?this.Rv():this.Sv(),0<t.count&&t.all(function(n){return!n.isTreeExpanded}))return!1}else if(e===h0&&(t=t?this.Rv():this.Sv(),0<t.count&&t.any(function(n){return!n.isTreeExpanded})))return!1;return t=this.labeledLink,t!==null?t.isVisible():!0},Z.prototype.Pb=function(t){rt.prototype.Pb.call(this,t);for(var e=this.linksConnected;e.next();){var i=e.value;if(t&&this.containingGroup!==null){var n=i.Gq(this);n===null||n.Hd(this.containingGroup)||i.Ua()}i.Pb(t)}},Z.prototype.qy=function(){var t=new W,e=new W;return bM(this,this,t,e),e.iterator};function bM(t,e,i,n){if(e!==null&&!i.has(e)){i.add(e);var r=!0,o=t.diagram;o!==null&&(r=o.isTreePathToChildren),e.linksConnected.each(function(s){s.isTreeLink?(r?s.fromNode===e:s.toNode===e)&&bM(t,r?s.toNode:s.fromNode,i,n):n.add(s)})}}Z.prototype.findLinksConnected=function(t){if(t===void 0&&(t=null),t===null)return this.Za.iterator;var e=new Ie(this.Za),i=this;return e.predicate=function(n){return n.fromNode===i&&n.fromPortId===t||n.toNode===i&&n.toPortId===t},e},l=Z.prototype,l.Bq=function(t){t===void 0&&(t=null);var e=new Ie(this.Za),i=this;return e.predicate=function(n){return n.fromNode!==i?!1:t===null?!0:n.fromPortId===t},e},l.Fd=function(t){t===void 0&&(t=null);var e=new Ie(this.Za),i=this;return e.predicate=function(n){return n.toNode!==i?!1:t===null?!0:n.toPortId===t},e},l.Qv=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.Za.iterator;n.next();){var r=n.value;r.fromNode===this?(t===null||r.fromPortId===t)&&(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new W,e.add(i),e.add(r)):i=r):r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new W,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new ze(i):Bn},l.Sv=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.Za.iterator;n.next();){var r=n.value;r.fromNode!==this||t!==null&&r.fromPortId!==t||(r=r.toNode,e!==null?e.add(r):i!==null&&i!==r?(e=new W,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new ze(i):Bn},l.Rv=function(t){t===void 0&&(t=null);for(var e=null,i=null,n=this.Za.iterator;n.next();){var r=n.value;r.toNode!==this||t!==null&&r.toPortId!==t||(r=r.fromNode,e!==null?e.add(r):i!==null&&i!==r?(e=new W,e.add(i),e.add(r)):i=r)}return e!==null?e.iterator:i!==null?new ze(i):Bn},l.Xz=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Ie(this.Za),r=this;return n.predicate=function(o){return!((o.fromNode!==r||o.toNode!==t||e!==null&&o.fromPortId!==e||i!==null&&o.toPortId!==i)&&(o.fromNode!==t||o.toNode!==r||i!==null&&o.fromPortId!==i||e!==null&&o.toPortId!==e))},n},l.Yz=function(t,e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=new Ie(this.Za),r=this;return n.predicate=function(o){return!(o.fromNode!==r||o.toNode!==t||e!==null&&o.fromPortId!==e||i!==null&&o.toPortId!==i)},n};function Vp(t,e,i){Ki(i);var n=t.Za.contains(e);if(n||t.Za.add(e),!n||e.fromNode===e.toNode){var r=t.linkConnected;if(r!==null){var o=!0,s=t.diagram;s!==null&&(o=s.Z,s.Z=!0),r(t,e,i),s!==null&&(s.Z=o)}}!n&&e.isTreeLink&&(i=e.fromNode,e=e.toNode,i!==null&&e!==null&&i!==e&&(n=!0,t=t.diagram,t!==null&&(n=t.isTreePathToChildren),r=n?e:i,o=n?i:e,r.Dh||(r.Dh=o),!o.isTreeLeaf||t!==null&&t.undoManager.isUndoingRedoing||(n?i===o&&(o.isTreeLeaf=!1):e===o&&(o.isTreeLeaf=!1))))}function zp(t,e,i){Ki(i);var n=t.Za.remove(e),r=null;if(n||e.toNode===e.fromNode){var o=t.linkDisconnected;if(r=t.diagram,o!==null){var s=!0;r!==null&&(s=r.Z,r.Z=!0),o(t,e,i),r!==null&&(r.Z=s)}}n&&e.isTreeLink&&(i=!0,r!==null&&(i=r.isTreePathToChildren),t=i?e.toNode:e.fromNode,e=i?e.fromNode:e.toNode,t!==null&&(t.Dh=!1),e===null||e.isTreeLeaf||(e.Za.count===0?(e.Dh=null,r!==null&&r.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):tf(e)))}function tf(t){if(t.Dh=!1,t.Za.count!==0){var e=!0,i=t.diagram;if(i===null||!i.undoManager.isUndoingRedoing){for(i!==null&&(e=i.isTreePathToChildren),i=t.Za.iterator;i.next();){var n=i.value;if(n.isTreeLink){if(e){if(n.fromNode===t){t.isTreeLeaf=!1;return}}else if(n.toNode===t){t.isTreeLeaf=!1;return}}}t.isTreeLeaf=!0}}}Z.prototype.updateRelationshipsFromData=function(){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)},l=Z.prototype,l.Iq=function(t){rt.prototype.Iq.call(this,t),t||(tf(this),t=this.Jl,t!==null&&uS(t,this))},l.Jq=function(t){rt.prototype.Jq.call(this,t),t||(t=this.Jl,t!==null&&t.od!==null&&(t.od.remove(this),t.o()))},l.sk=function(){if(0<this.Za.count){var t=this.diagram;if(t!==null)for(var e=t.commandHandler!==null?t.commandHandler.deletesConnectedLinks:!0,i=this.Za.copy().iterator;i.next();){var n=i.value;e?t.remove(n):(n.fromNode===this&&(n.fromNode=null),n.toNode===this&&(n.toNode=null))}}this.labeledLink=null,rt.prototype.sk.call(this)},l.It=function(t){if(this.tc===null){if(t===""&&this.Mh===!1)return this;tS(this)}var e=this.tc.H(t);return e!==null||t!==""&&(e=this.tc.H(""),e!==null)?e:this};function tS(t){t.tc===null?t.tc=new ct:t.tc.clear(),t.Ym(t,function(e,i){eS(e,i)}),t.tc.count===0&&t.tc.add("",t)}function eS(t,e){var i=e.portId;i!==null&&t.tc!==null&&t.tc.add(i,e)}function H0(t,e,i){var n=e.portId;if(n!==null&&(t.tc!==null&&t.tc.remove(n),e=t.diagram,e!==null&&i)){for(i=null,t=t.findLinksConnected(n);t.next();)n=t.value,i===null&&(i=Dt()),i.push(n);if(i!==null){for(t=0;t<i.length;t++)e.remove(i[t]);Xt(i)}}}l.zA=function(t){if(t===null||t===this)return!1;var e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this,e)for(;i!==t;){e=null;for(var n=i.Za.iterator;n.next();){var r=n.value;if(r.isTreeLink&&(e=r.fromNode,e!==i&&e!==this))break}if(e===this||e===null||e===i)return!1;i=e}else for(;i!==t;){for(e=null,n=i.Za.iterator;n.next()&&(r=n.value,!r.isTreeLink||(e=r.toNode,e===i||e===this)););if(e===this||e===null||e===i)return!1;i=e}return!0},l.iA=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var i=e.Za.iterator;i.next();){var n=i.value;if(n.isTreeLink&&(t=n.fromNode,t!==e&&t!==this))break}if(t===this)return this;if(t===null||t===e)return e;e=t}else for(;;){for(t=null,i=e.Za.iterator;i.next()&&(n=i.value,!n.isTreeLink||(t=n.toNode,t===e||t===this)););if(t===this)return this;if(t===null||t===e)return e;e=t}},l.Uz=function(t){if(t===null)return null;if(this===t)return this;for(var e=this;e!==null;)Fp(e,!0),e=e.Gg();var i=null;for(e=t;e!==null;){if((e.D&1048576)!=0){i=e;break}e=e.Gg()}for(e=this;e!==null;)Fp(e,!1),e=e.Gg();return i},l.ij=function(){var t=!0,e=this.diagram;if(e!==null&&(t=e.isTreePathToChildren),e=this.Za.iterator,t){for(;e.next();)if(t=e.value,t.isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if(t=e.value,t.isTreeLink&&t.toNode!==this)return t;return null},l.Gg=function(){var t=this.Dh;if(t===null)return null;if(t instanceof Z)return t;var e=!0;if(t=this.diagram,t!==null&&(e=t.isTreePathToChildren),t=this.Za.iterator,e){for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.fromNode,e!==this))return this.Dh=e}else for(;t.next();)if(e=t.value,e.isTreeLink&&(e=e.toNode,e!==this))return this.Dh=e;return this.Dh=null},l.gA=function(){function t(i,n){if(i!==null){n.add(i);var r=i.ij();r!==null&&(n.add(r),t(i.Gg(),n))}}var e=new W;return t(this,e),e},l.fA=function(){return iS(this,this)};function iS(t,e){return e=e.Gg(),e===null?0:1+iS(t,e)}l.Dq=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren),e=new Ie(this.Za);var i=this;return e.predicate=t?function(n){return!!(n.isTreeLink&&n.fromNode===i)}:function(n){return!!(n.isTreeLink&&n.toNode===i)},e},l.Uv=function(){var t=!0,e=this.diagram;e!==null&&(t=e.isTreePathToChildren);var i=e=null,n=this.Za.iterator;if(t)for(;n.next();)t=n.value,t.isTreeLink&&t.fromNode===this&&(t=t.toNode,e!==null?e.add(t):i!==null&&i!==t?(e=new J,e.add(i),e.add(t)):i=t);else for(;n.next();)t=n.value,t.isTreeLink&&t.toNode===this&&(t=t.fromNode,e!==null?e.add(t):i!==null&&i!==t?(e=new J,e.add(i),e.add(t)):i=t);return e!==null?e.iterator:i!==null?new ze(i):Bn},l.hA=function(t){t===void 0&&(t=Infinity);var e=new W;return ys(e,this,!1,t,!0),e},Z.prototype.collapseTree=function(t){t===void 0&&(t=1),1>t&&(t=1);var e=this.diagram;if(e!==null&&!e.Je){e.Je=!0;var i=new W;i.add(this),nS(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Vs),e.Je=!1}};function nS(t,e,i,n,r,o,s){if(1<n)for(var u=i?t.Bq():t.Fd();u.next();){var a=u.value;a.isTreeLink&&(a=a.Gq(t),a===null||a===t||e.contains(a)||(e.add(a),nS(a,e,i,n-1,r,o,s)))}else rS(t,e,i,r,o,s)}function rS(t,e,i,n,r,o){for(var s=r===t?!0:t.isTreeExpanded,u=i?t.Bq():t.Fd();u.next();){var a=u.value;if(a.isTreeLink&&(a=a.Gq(t),a!==null&&a!==t)){var f=e.contains(a);f||e.add(a),s&&(o&&n.hk(a,r),a.Nh(),a.Pb(!1)),a.isTreeExpanded&&(a.wasTreeExpanded=a.isTreeExpanded,f||rS(a,e,i,n,r,o))}}t.isTreeExpanded=!1}Z.prototype.expandTree=function(t){t===void 0&&(t=2),2>t&&(t=2);var e=this.diagram;if(e!==null&&!e.Je){e.Je=!0;var i=new W;i.add(this),oS(this,i,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Vs),e.Je=!1}};function oS(t,e,i,n,r,o,s){for(var u=o===t?!1:t.isTreeExpanded,a=i?t.Bq():t.Fd();a.next();){var f=a.value;f.isTreeLink&&(u||f.kd||f.Ua(),f=f.Gq(t),f!==null&&f!==t&&!e.contains(f)&&(e.add(f),u||(f.Pb(!0),f.Nh(),s&&r.jk(f,o)),2<n||f.wasTreeExpanded))&&(f.wasTreeExpanded=!1,oS(f,e,i,n-1,r,o,s))}t.isTreeExpanded=!0}X.Object.defineProperties(Z.prototype,{portSpreading:{get:function(){return this.sp},set:function(t){var e=this.sp;e!==t&&(this.sp=t,this.g("portSpreading",e,t),t=this.diagram,t!==null&&t.undoManager.isUndoingRedoing||this.td())}},avoidable:{get:function(){return(this.P&8)!=0},set:function(t){var e=(this.P&8)!=0;if(e!==t){this.P^=8;var i=this.diagram;i!==null&&s0(i,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.al},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.al;if(!e.w(t)){this.al=t=t.G();var i=this.diagram;i!==null&&s0(i,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.Za.iterator}},linkConnected:{get:function(){return this.Do},set:function(t){var e=this.Do;e!==t&&(this.Do=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.Eo},set:function(t){var e=this.Eo;e!==t&&(this.Eo=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.Gi},set:function(t){var e=this.Gi;e!==t&&(this.Gi=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return this.Jl!==null}},labeledLink:{get:function(){return this.Jl},set:function(t){var e=this.Jl;if(e!==t){var i=this.diagram,n=this.data;if(e!==null){if(e.od!==null&&(e.od.remove(this),e.o()),i!==null&&n!==null&&!i.undoManager.isUndoingRedoing){var r=e.data,o=i.model;if(r!==null&&o.pj()){var s=o.ja(n);s!==void 0&&o.Qy(r,s)}}this.containingGroup=null}this.Jl=t,t!==null&&(uS(t,this),i===null||n===null||i.undoManager.isUndoingRedoing||(r=t.data,i=i.model,r!==null&&i.pj()&&(n=i.ja(n),n!==void 0&&i.Bv(r,n))),this.containingGroup=t.containingGroup),bu(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.It("")}},ports:{get:function(){return this.tc===null&&tS(this),this.tc.iteratorValues}},isTreeExpanded:{get:function(){return(this.P&1)!=0},set:function(t){var e=(this.P&1)!=0;if(e!==t){this.P^=1;var i=this.diagram;if(this.g("isTreeExpanded",e,t),e=this.treeExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.Z,i.Z=!0),e(this),i!==null&&(i.Z=n)}i!==null&&i.undoManager.isUndoingRedoing?this.Pb(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return(this.P&2)!=0},set:function(t){var e=(this.P&2)!=0;e!==t&&(this.P^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.jq},set:function(t){var e=this.jq;e!==t&&(this.jq=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return(this.P&4)!=0},set:function(t){var e=(this.P&4)!=0;e!==t&&(this.P^=4,this.g("isTreeLeaf",e,t))}}}),Z.prototype.expandTree=Z.prototype.expandTree,Z.prototype.collapseTree=Z.prototype.collapseTree,Z.prototype.findTreeParts=Z.prototype.hA,Z.prototype.findTreeChildrenNodes=Z.prototype.Uv,Z.prototype.findTreeChildrenLinks=Z.prototype.Dq,Z.prototype.findTreeLevel=Z.prototype.fA,Z.prototype.findTreeParentChain=Z.prototype.gA,Z.prototype.findTreeParentNode=Z.prototype.Gg,Z.prototype.findTreeParentLink=Z.prototype.ij,Z.prototype.findCommonTreeParent=Z.prototype.Uz,Z.prototype.findTreeRoot=Z.prototype.iA,Z.prototype.isInTreeOf=Z.prototype.zA,Z.prototype.findPort=Z.prototype.It,Z.prototype.findLinksTo=Z.prototype.Yz,Z.prototype.findLinksBetween=Z.prototype.Xz,Z.prototype.findNodesInto=Z.prototype.Rv,Z.prototype.findNodesOutOf=Z.prototype.Sv,Z.prototype.findNodesConnected=Z.prototype.Qv,Z.prototype.findLinksInto=Z.prototype.Fd,Z.prototype.findLinksOutOf=Z.prototype.Bq,Z.prototype.findExternalTreeLinksConnected=Z.prototype.qy,Z.prototype.invalidateConnectedLinks=Z.prototype.td,Z.prototype.invalidateLinkBundle=Z.prototype.xA;var xT=new K(Z,"SpreadingNone",10),W0=new K(Z,"SpreadingEvenly",11),K0=new K(Z,"SpreadingPacked",12);Z.className="Node",Z.SpreadingNone=xT,Z.SpreadingEvenly=W0,Z.SpreadingPacked=K0;function dt(t){Z.call(this,t),this.P|=4608,this.Po=new W,this.Rl=new W,this.Ra=this.$p=this.Ii=this.Qo=this.Oo=this.Ya=null,this.lc=new It,this.lc.group=this}ut(dt,Z),dt.prototype.cloneProtected=function(t){Z.prototype.cloneProtected.call(this,t),this.P=this.P&-32769,this.Ya!==null&&(t.Ya=this.Ya.copy()),t.Oo=this.Oo,t.Qo=this.Qo,t.Ii=this.Ii,t.$p=this.$p;var e=t.vm(function(i){return i instanceof xi});e instanceof xi?t.Ra=e:t.Ra=null,this.lc!==null?(t.lc=this.lc.copy(),t.lc.group=t):(t.lc!==null&&(t.lc.group=null),t.lc=null)},l=dt.prototype,l.Af=function(t){Z.prototype.Af.call(this,t);var e=t.vk();for(t=t.memberParts;t.next();){var i=t.value;if(i.o(),i.C(8),i.lk(),i instanceof Z)i.td(e);else if(i instanceof z)for(i=i.labelNodes;i.next();)i.value.td(e)}},l.Ok=function(t,e,i,n,r,o,s){if(t===Te&&e==="elements"){if(r instanceof xi)this.Ra===null?this.Ra=r:this.Ra!==r&&E("Cannot insert a second Placeholder into the visual tree of a Group.");else if(r instanceof V){var u=r.vm(function(a){return a instanceof xi});u instanceof xi&&(this.Ra===null?this.Ra=u:this.Ra!==u&&E("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Ce&&e==="elements"&&this.Ra!==null&&(n===this.Ra?this.Ra=null:n instanceof V&&this.Ra.Hg(n)&&(this.Ra=null));Z.prototype.Ok.call(this,t,e,i,n,r,o,s)},l.Gm=function(t,e){Z.prototype.Gm.call(this,t,e),this.isClipping&&this.type!==V.Spot&&(t=this.resizeObject,t instanceof V&&(t=t.rb()),this.Ya===null&&(this.Ya=new I),t.lj(this.Ya),t instanceof gt&&this.Ya.Kc(-t.strokeWidth,-t.strokeWidth))},l.Hh=function(t,e,i,n){this.df=this.Ra,Z.prototype.Hh.call(this,t,e,i,n)},l.Ta=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof z||e.Ta()}),Z.prototype.Ta.call(this)},l.qj=function(){if(!Z.prototype.qj.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof Z){if(e.isVisible()&&Pn(e))return!1}else if(e instanceof z&&e.isVisible()&&Pn(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0};function _0(t,e){if(t.Po.add(e)){e instanceof dt&&t.Rl.add(e);var i=t.memberAdded;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.Z,r.Z=!0),i(t,e),r!==null&&(r.Z=n)}t.isVisible()&&t.isSubGraphExpanded||e.Pb(!1)}e instanceof z&&!t.computesBoundsIncludingLinks||(e=t.Ra,e===null&&(e=t),e.o())}function $0(t,e){if(t.Po.remove(e)){e instanceof dt&&t.Rl.remove(e);var i=t.memberRemoved;if(i!==null){var n=!0,r=t.diagram;r!==null&&(n=r.Z,r.Z=!0),i(t,e),r!==null&&(r.Z=n)}t.isVisible()&&t.isSubGraphExpanded||e.Pb(!0)}e instanceof z&&!t.computesBoundsIncludingLinks||(e=t.Ra,e===null&&(e=t),e.o())}l.sk=function(){if(0<this.Po.count){var t=this.diagram;if(t!==null)for(var e=this.Po.copy().iterator;e.next();)t.remove(e.value)}Z.prototype.sk.call(this)},dt.prototype.canAddMembers=function(t){var e=this.diagram;if(e===null)return!1;for(e=e.commandHandler,t=c0(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},dt.prototype.addMembers=function(t,e){var i=this.diagram;if(i===null)return!1;i=i.commandHandler;var n=!0;for(t=c0(t).iterator;t.next();){var r=t.value;!e||i.isValidMember(this,r)?r.containingGroup=this:n=!1}return n},dt.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return t!==null&&!t.allowUngroup?!1:(t=t.diagram,!!(t===null||t.allowUngroup))},l=dt.prototype,l.td=function(t){t===void 0&&(t=null);var e=(this.P&65536)!=0;if(Z.prototype.td.call(this,t),!e)for((this.P&65536)==0&&(this.P=this.P^65536),e=this.Pv();e.next();){var i=e.value;if(t===null||!t.contains(i)){var n=i.fromNode;n!==null&&n!==this&&n.Hd(this)&&!n.isVisible()?(Ki(i.fromPort),Ki(i.toPort),i.Ua()):(n=i.toNode,n!==null&&n!==this&&n.Hd(this)&&!n.isVisible()&&(Ki(i.fromPort),Ki(i.toPort),i.Ua()))}}},l.Pv=function(){var t=this.vk();t.add(this);for(var e=new W,i=t.iterator;i.next();){var n=i.value;if(n instanceof Z)for(n=n.linksConnected;n.next();){var r=n.value;t.contains(r)||e.add(r)}}return e.iterator},l.Wz=function(){var t=this.vk();t.add(this);for(var e=new W,i=t.iterator;i.next();){var n=i.value;if(n instanceof Z)for(n=n.linksConnected;n.next();){var r=n.value,o=r.fromNode;o===null||t.contains(o)&&o!==this||e.add(o),r=r.toNode,r===null||t.contains(r)&&r!==this||e.add(r)}}return e.iterator},l.Vz=function(){function t(i,n){i!==null&&(n.add(i),t(i.containingGroup,n))}var e=new W;return t(this,e),e},l.vk=function(){var t=new W;return ys(t,this,!0,0,!0),t.remove(this),t},l.Pb=function(t){Z.prototype.Pb.call(this,t);for(var e=this.memberParts;e.next();)e.value.Pb(t)},dt.prototype.collapseSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Je){t.Je=!0;var e=this.vk();sS(this,e,t,this),t.Je=!1}};function sS(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Pb(!1),o instanceof dt&&o.isSubGraphExpanded&&(o.wasSubGraphExpanded=o.isSubGraphExpanded,sS(o,e,i,n)),o instanceof Z)o.td(e),i.hk(o,n);else if(o instanceof z)for(o=o.labelNodes;o.next();)o.value.td(e)}t.isSubGraphExpanded=!1}dt.prototype.expandSubGraph=function(){var t=this.diagram;if(t!==null&&!t.Je){t.Je=!0;var e=this.vk();lS(this,e,t,this),t.Je=!1}};function lS(t,e,i,n){for(var r=t.memberParts;r.next();){var o=r.value;if(o.Pb(!0),o instanceof dt&&o.wasSubGraphExpanded&&(o.wasSubGraphExpanded=!1,lS(o,e,i,n)),o instanceof Z)o.td(e),i.jk(o,n);else if(o instanceof z)for(o=o.labelNodes;o.next();)o.value.td(e)}t.isSubGraphExpanded=!0}dt.prototype.move=function(t,e){e===void 0&&(e=!1);var i=e?this.location:this.position,n=i.x;i=i.y;var r=t.x,o=t.y;if(!(n===r||isNaN(n)&&isNaN(r))||!(i===o||isNaN(i)&&isNaN(o))){for(n=r-(isNaN(n)?0:n),i=o-(isNaN(i)?0:i),o=k.alloc(),Z.prototype.move.call(this,t,e),t=new W,e=this.vk().iterator;e.next();)r=e.value,r instanceof z&&(r.suspendsRouting&&t.add(r),r.kd||r.fromNode!==this&&r.toNode!==this)&&(r.suspendsRouting=!0);for(e.reset();e.next();)if(r=e.value,!(r.Oh()||r instanceof Z&&r.isLinkLabel)){var s=r.position,u=r.location;s.u()?(o.x=s.x+n,o.y=s.y+i,r.position=o):u.u()&&(o.x=u.x+n,o.y=u.y+i,r.location=o)}for(e.reset();e.next();)r=e.value,r instanceof z&&(r.suspendsRouting=t.contains(r),r.kd||r.fromNode!==this&&r.toNode!==this)&&(s=r.position,o.x=s.x+n,o.y=s.y+i,o.u()?r.move(o):r.Ua(),J0(r)&&r.Ua());k.free(o)}},X.Object.defineProperties(dt.prototype,{placeholder:{get:function(){return this.Ra}},computesBoundsAfterDrag:{get:function(){return(this.P&2048)!=0},set:function(t){var e=(this.P&2048)!=0;e!==t&&(this.P^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return(this.P&4096)!=0},set:function(t){var e=(this.P&4096)!=0;e!==t&&(this.P^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return(this.P&8192)!=0},set:function(t){var e=(this.P&8192)!=0;e!==t&&(this.P^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return(this.P&16384)!=0},set:function(t){var e=(this.P&16384)!=0;e!==t&&(this.P^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.Po.iterator}},layout:{get:function(){return this.lc},set:function(t){var e=this.lc;if(e!==t){e!==null&&(e.diagram=null,e.group=null),this.lc=t;var i=this.diagram;t!==null&&(t.diagram=i,t.group=this),i!==null&&(i.Og=!0),this.g("layout",e,t),i!==null&&i.Eb()}}},memberAdded:{get:function(){return this.Oo},set:function(t){var e=this.Oo;e!==t&&(this.Oo=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.Qo},set:function(t){var e=this.Qo;e!==t&&(this.Qo=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.Ii},set:function(t){var e=this.Ii;e!==t&&(this.Ii=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return(this.P&256)!=0},set:function(t){var e=(this.P&256)!=0;e!==t&&(this.P^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return(this.P&512)!=0},set:function(t){var e=(this.P&512)!=0;if(e!==t){this.P^=512;var i=this.diagram;if(this.g("isSubGraphExpanded",e,t),e=this.subGraphExpandedChanged,e!==null){var n=!0;i!==null&&(n=i.Z,i.Z=!0),e(this),i!==null&&(i.Z=n)}i!==null&&i.undoManager.isUndoingRedoing?(this.Ra!==null&&this.Ra.o(),this.memberParts.each(function(r){r.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return(this.P&1024)!=0},set:function(t){var e=(this.P&1024)!=0;e!==t&&(this.P^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.$p},set:function(t){var e=this.$p;e!==t&&(this.$p=t,this.g("subGraphExpandedChanged",e,t))}},Qh:{get:function(){return(this.P&32768)!=0},set:function(t){(this.P&32768)!=0!==t&&(this.P^=32768)}}}),dt.prototype.expandSubGraph=dt.prototype.expandSubGraph,dt.prototype.collapseSubGraph=dt.prototype.collapseSubGraph,dt.prototype.findSubGraphParts=dt.prototype.vk,dt.prototype.findContainingGroupChain=dt.prototype.Vz,dt.prototype.findExternalNodesConnected=dt.prototype.Wz,dt.prototype.findExternalLinksConnected=dt.prototype.Pv,dt.prototype.ensureBounds=dt.prototype.Ta,dt.className="Group";function xi(){ot.call(this),this.ib=Tu,this.Hp=new I(NaN,NaN,NaN,NaN)}ut(xi,ot),xi.prototype.cloneProtected=function(t){ot.prototype.cloneProtected.call(this,t),t.ib=this.ib.G(),t.Hp=this.Hp.copy()},xi.prototype.Jh=function(t){if(this.background===null&&this.areaBackground===null)return!1;var e=this.naturalBounds;return Zn(0,0,e.width,e.height,t.x,t.y)},xi.prototype.Fm=function(){var t=this.part;if(t!==null&&(t instanceof dt||t instanceof Ct)||E("Placeholder is not inside a Group or Adornment."),t instanceof dt){var e=this.computeBorder(this.Hp),i=this.minSize,n=this.rc;for(eo(n,(isFinite(i.width)?Math.max(i.width,e.width):e.width)||0,(isFinite(i.height)?Math.max(i.height,e.height):e.height)||0),ro(this,0,0,n.width,n.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,!i||n===null||n.animationManager.cw(t)||isNaN(e.x)||isNaN(e.y)||(i=k.alloc(),i.sj(e,t.locationSpot),i.w(t.location)||(t.location=new k(i.x,i.y)),k.free(i))}else{e=this.rc,i=this.ib,n=i.left+i.right;var r=i.top+i.bottom,o=t.adornedObject;t.angle=o.kj();var s=0;o instanceof gt&&(s=o.strokeWidth);var u=o.Cf(),a=o.naturalBounds,f=(a.width+s)*u;s=(a.height+s)*u,t.type!==V.Link&&(o=o.da(t.category==="Selection"?mi:t.locationSpot,k.alloc()),t.location=o,k.free(o)),isNaN(f)||isNaN(s)?(t=t.adornedObject,f=t.da(mi,k.alloc()),o=I.allocAt(f.x,f.y,0,0),o.Oe(t.da(Tr,f)),o.Oe(t.da(Cu,f)),o.Oe(t.da(Lu,f)),eo(e,o.width+n||0,o.height+r||0),ro(this,-i.left,-i.top,e.width,e.height),k.free(f),I.free(o)):(eo(e,f+n||0,s+r||0),ro(this,-i.left,-i.top,e.width,e.height))}},xi.prototype.Hh=function(t,e,i,n){this.actualBounds.h(t,e,i,n)},xi.prototype.computeBorder=function(t){var e=this.part,i=e.diagram;if(i!==null&&e instanceof dt&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.Hp.u()){var n=i.toolManager.findTool("Dragging");if(n===i.currentTool&&(i=n.computeBorder(e,this.Hp,t),i!==null))return i}i=I.alloc(),n=this.computeMemberBounds(i);var r=this.ib;return e instanceof dt&&!e.isSubGraphExpanded?t.h(n.x-r.left,n.y-r.top,0,0):t.h(n.x-r.left,n.y-r.top,Math.max(n.width+r.left+r.right,0),Math.max(n.height+r.top+r.bottom,0)),I.free(i),e instanceof dt&&e.computesBoundsIncludingLocation&&e.location.u()&&t.Oe(e.location),t},xi.prototype.computeMemberBounds=function(t){if(!(this.part instanceof dt))return t.h(0,0,0,0),t;for(var e=this.part,i=Infinity,n=Infinity,r=-Infinity,o=-Infinity,s=e.memberParts;s.next();){var u=s.value;if(u.isVisible()){if(u instanceof z&&(!e.computesBoundsIncludingLinks||Eo(u)||u.fromNode===e||u.toNode===e))continue;u=u.actualBounds,u.left<i&&(i=u.left),u.top<n&&(n=u.top),u.right>r&&(r=u.right),u.bottom>o&&(o=u.bottom)}}return isFinite(i)&&isFinite(n)?t.h(i,n,r-i,o-n):(e=e.location,t.h(e.x,e.y,0,0)),t},X.Object.defineProperties(xi.prototype,{padding:{get:function(){return this.ib},set:function(t){typeof t=="number"&&(t=new Rt(t));var e=this.ib;e.w(t)||(this.ib=t=t.G(),this.g("padding",e,t),this.o())}}}),xi.className="Placeholder";function z(){rt.call(this,V.Link),this.Fa=8,this.Xe=null,this.Ye="",this.tf=this.bo=null,this.uf="",this.iq=null,this.Wk=ji,this.En=0,this.Gn=ji,this.Hn=NaN,this.ak=tm,this.Vp=.5,this.od=null,this.Bb=new J().freeze(),this.sg=this.ph=null,this.Wl=new I,this.na=new Mt,this.I=this.v=this.Of=this.Xf=null,this.l=[],this.tv=new k,this.$r=this.Ox=this.Nx=null,this.Nu=NaN,this.O=null}ut(z,rt),z.prototype.cloneProtected=function(t){rt.prototype.cloneProtected.call(this,t),t.Fa=this.Fa&-113,t.Ye=this.Ye,t.bo=this.bo,t.uf=this.uf,t.iq=this.iq,t.Wk=this.Wk,t.En=this.En,t.Gn=this.Gn,t.Hn=this.Hn,t.ak=this.ak,t.Vp=this.Vp,this.O!==null&&(t.O=this.O.copy())},l=z.prototype,l.Af=function(t){rt.prototype.Af.call(this,t),this.Ye=t.Ye,this.uf=t.uf,t.ph=null,t.Ua(),t.Of=this.Of;var e=t.fromPort;e!==null&&Ki(e),t=t.toPort,t!==null&&Ki(t)},l.jb=function(t){t.classType===z?(t.value&2)==2?this.routing=t:t===rn||t===zo||t===dh?this.curve=t:t===rf||t===Hp||t===Wp?this.adjusting=t:t!==tm&&t!==ji&&E("Unknown Link enum value for a Link property: "+t):rt.prototype.jb.call(this,t)},l.Lc=function(){this.O===null&&(this.O=new cf)},l.qj=function(){var t=this.fromNode;if(t!==null){var e=t.findVisibleNode();if(e!==null&&(t=e),Pn(t)||Fo(t))return!1}return t=this.toNode,!(t!==null&&(e=t.findVisibleNode(),e!==null&&(t=e),Pn(t)||Fo(t)))},l.Ew=function(){return!1},l.ju=function(){},l.Oc=function(){return!1},z.prototype.computeAngle=function(t,e,i){return z.computeAngle(e,i)},z.computeAngle=function(t,e){switch(t){default:case ji:t=0;break;case of:t=e;break;case sf:t=e+90;break;case lf:t=e-90;break;case em:t=e+180;break;case Kp:t=j.Rq(e),90<t&&270>t&&(t-=180);break;case uf:t=j.Rq(e+90),90<t&&270>t&&(t-=180);break;case hf:t=j.Rq(e-90),90<t&&270>t&&(t-=180);break;case _p:if(t=j.Rq(e),45<t&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return j.Rq(t)};function ch(t){var e=t.fromNode,i=t.toNode,n=null;if(e!==null?n=i!==null?e.py(i):e.containingGroup:i!==null?n=i.containingGroup:n=null,e=n,i=t.li,i!==e){i!==null&&$0(i,t),t.li=e,e!==null&&_0(e,t);var r=t.containingGroupChanged;if(r!==null){var o=!0,s=t.diagram;s!==null&&(o=s.Z,s.Z=!0),r(t,i,e),s!==null&&(s.Z=o)}!t.kd||t.Nx!==i&&t.Ox!==i||t.Ua()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=n}l=z.prototype,l.Nh=function(){var t=this.containingGroup;t!==null&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&rt.prototype.Nh.call(this)},l.Gq=function(t){var e=this.fromNode;return t===e?this.toNode:e},l.nA=function(t){var e=this.fromPort;return t===e?this.toPort:e};function uS(t,e){t.od===null&&(t.od=new W),t.od.add(e),t.o()}l.Iq=function(t){if(rt.prototype.Iq.call(this,t),Ws(this)&&this.Lq(this.actualBounds),!t){t=this.Xe;var e=null;t!==null&&(e=this.fromPort,Vp(t,this,e));var i=this.tf;if(i!==null){var n=this.toPort;i===t&&n===e||Vp(i,this,n)}ef(this)}},l.Jq=function(t){if(rt.prototype.Jq.call(this,t),Ws(this)&&this.Lq(this.actualBounds),!t){t=this.Xe;var e=null;t!==null&&(e=this.fromPort,zp(t,this,e));var i=this.tf;if(i!==null){var n=this.toPort;i===t&&n===e||zp(i,this,n)}nf(this)}},l.sk=function(){if(this.kd=!0,this.od!==null){var t=this.diagram;if(t!==null)for(var e=this.od.copy().iterator;e.next();)t.remove(e.value)}this.data!==null&&(t=this.diagram,t!==null&&t.partManager.removeDataForLink(this))},z.prototype.updateRelationshipsFromData=function(){if(this.data!==null){var t=this.diagram;t!==null&&t.partManager.updateRelationshipsFromData(this)}},z.prototype.move=function(t,e){var i=e?this.location:this.position,n=i.x;isNaN(n)&&(n=0);var r=i.y;for(isNaN(r)&&(r=0),n=t.x-n,r=t.y-r,e===!0?rt.prototype.move.call(this,t,!1):(t=k.allocAt(i.x+n,i.y+r),rt.prototype.move.call(this,t,!1),k.free(t)),Vo(this,n,r),t=this.labelNodes;t.next();)e=t.value,i=e.position,e.moveTo(i.x+n,i.y+r)},z.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},z.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return t===null?!0:t.allowRelink?(t=t.diagram,!!(t===null||t.allowRelink)):!1},z.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(e===0)return t.assign(Ma),t;if(e===1)return t.assign(this.i(0)),t;if(e===2){var i=this.i(0),n=this.i(1);return t.h((i.x+n.x)/2,(i.y+n.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===rn))return this.na.Vv(.5,t),t.add(this.i(0)),i=this.na.figures.first(),t.offset(-i.startX,-i.startY),t;if(this.computeCurve()===rn){if(e===3)return this.i(1);if(n=(e-1)/3|0,i=3*(n/2|0),n%2==1){n=this.i(i);var r=this.i(i+1),o=this.i(i+2);i=this.i(i+3),j.yz(n.x,n.y,r.x,r.y,o.x,o.y,i.x,i.y,t)}else t.assign(this.i(i));return t}var s=this.flattenedLengths;for(i=this.flattenedTotalLength,r=o=n=0;n<i/2&&o<e&&(r=s[o],!(n+r>i/2));)n+=r,o++;return e=this.i(o),o=this.i(o+1),1>Math.abs(e.x-o.x)?e.y>o.y?t.h(e.x,e.y-(i/2-n)):t.h(e.x,e.y+(i/2-n)):1>Math.abs(e.y-o.y)?e.x>o.x?t.h(e.x-(i/2-n),e.y):t.h(e.x+(i/2-n),e.y):(i=(i/2-n)/r,t.h(e.x+i*(o.x-e.x),e.y+i*(o.y-e.y))),t},z.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(t===2)return this.i(0).Sa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===rn))return this.na.wy(.5);if(this.computeCurve()===rn&&4<=t){var e=(t-1)/3|0,i=3*(e/2|0);if(e%2==1){i=Math.floor(i),t=this.i(i),e=this.i(i+1);var n=this.i(i+2);return i=this.i(i+3),j.xz(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)}if(0<i&&i+1<t)return this.i(i-1).Sa(this.i(i+1))}e=this.flattenedLengths,n=this.flattenedTotalLength;var r=0;i=0;for(var o;r<n/2&&i<t&&(o=e[i],!(r+o>n/2));)r+=o,i++;if(e=this.i(i),n=this.i(i+1),1>Math.abs(e.x-n.x)&&1>Math.abs(e.y-n.y)){if(0<i&&i+2<t)return this.i(i-1).Sa(this.i(i+2))}else{if(1>Math.abs(e.x-n.x))return e.y>n.y?270:90;if(1>Math.abs(e.y-n.y))return e.x>n.x?180:0}return e.Sa(n)},l=z.prototype,l.i=function(t){return this.Bb.j[t]},l.Rc=function(t,e){this.Bb.Qc(t,e)},l.L=function(t,e,i){this.Bb.Qc(t,new k(e,i))},l.wA=function(t,e){this.Bb.wb(t,e)},l.m=function(t,e,i){this.Bb.wb(t,new k(e,i))},l.$d=function(t){this.Bb.add(t)},l.xf=function(t,e){this.Bb.add(new k(t,e))},l.tw=function(t){this.Bb.cb(t)},l.mk=function(){this.Bb.clear()};function Vo(t,e,i){if(e!==0||i!==0){for(var n=t.kd,r=new J,o=t.Bb.iterator;o.next();){var s=o.value;r.add(new k(s.x+e,s.y+i).freeze())}r.freeze(),o=t.Bb,t.Bb=r,s=t.diagram,isNaN(e)||isNaN(i)||s!==null&&s.animationManager.sc?t.o():(t.fg.h(t.fg.x+e,t.fg.y+i),t.la.h(t.la.x+e,t.la.y+i),bu(t)),n?Up(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),s!==null&&s.animationManager.sc&&(t.sg=r),t.g("points",o,r)}}l.Sh=function(){this.ph===null&&(this.ph=this.Bb,this.Bb=this.Bb.copy())},l.zf=function(){if(this.ph!==null){for(var t=this.ph,e=this.Bb,i=Infinity,n=Infinity,r=t.j,o=r.length,s=0;s<o;s++){var u=r[s];i=Math.min(u.x,i),n=Math.min(u.y,n)}u=s=Infinity;for(var a=e.j,f=a.length,c=0;c<f;c++){var d=a[c];s=Math.min(d.x,s),u=Math.min(d.y,u),d.freeze()}if(e.freeze(),f===o){for(o=0;o<f;o++)if(c=r[o],d=a[o],c.x-i!=d.x-s||c.y-n!=d.y-u){this.dc();break}}else this.dc();this.ph=null,i=this.diagram,i!==null&&i.animationManager.sc&&(this.sg=e),Up(this),this.g("points",t,e)}},l.yw=function(){this.ph!==null&&(this.Bb=this.ph,this.ph=null)};function Up(t){t.Bb.count===0?t.kd=!1:(t.kd=!0,t.$r=null,t.Nu=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),b0(t,!1))}l.Ua=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Wt.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager,t.isTicking&&!t.isAnimating))return;this.sg!==null&&!t.isTicking&&t.isAnimating&&(this.sg=null)}t=this.path,t!==null&&(this.kd=!1,this.o(),t.o())}},l.wj=function(){if(!this.kd&&!this.At){var t=!0;try{this.At=!0,this.Sh(),t=this.computePoints()}catch(e){this.At=!1,this.yw()}finally{this.At=!1,t?this.zf():this.yw()}}},z.prototype.computePoints=function(){if(this.diagram===null)return!1;var t=this.fromNode,e=null;if(t===null?(Rl||(Rl=new Z,Rl.desiredSize=Nu,Rl.Ta()),this.defaultFromPoint&&(Rl.location=this.defaultFromPoint,Rl.Ta(),e=t=Rl)):e=this.fromPort,e!==null&&!t.isVisible()){var i=t.findVisibleNode();i!==null&&i!==t?(t=i,e=i.port):t=i}if(this.Nx=t,t===null||!t.location.u())return!1;for(;!(e===null||e.actualBounds.u()&&e.If());)e=e.panel;if(e===null)return!1;var n=this.toNode,r=null;if(n===null?(Fl||(Fl=new Z,Fl.desiredSize=Nu,Fl.Ta()),this.defaultToPoint&&(Fl.location=this.defaultToPoint,Fl.Ta(),r=n=Fl)):r=this.toPort,r===null||n.isVisible()||(i=n.findVisibleNode(),i!==null&&i!==n?(n=i,r=i.port):n=i),this.Ox=n,n===null||!n.location.u())return!1;for(;!(r===null||r.actualBounds.u()&&r.If());)r=r.panel;if(r===null)return!1;var o=this.pointsCount,s=this.computeSpot(!0,e);i=this.computeSpot(!1,r);var u=ph(s),a=ph(i),f=e===r&&e!==null,c=this.isOrthogonal,d=this.curve===rn;this.Xf=f&&!c?d=!0:!1;var g=this.computeAdjusting()===ji||f;if(!c&&!f&&u&&a){if(u=!1,!g&&3<=o&&(g=this.getLinkPoint(t,e,s,!0,!1,n,r),a=this.getLinkPoint(n,r,i,!1,!1,t,e),u=this.adjustPoints(0,g,o-1,a))&&(g=this.getLinkPoint(t,e,s,!0,!1,n,r),a=this.getLinkPoint(n,r,i,!1,!1,t,e),this.adjustPoints(0,g,o-1,a)),!u)if(this.mk(),d){o=this.getLinkPoint(t,e,s,!0,!1,n,r),g=this.getLinkPoint(n,r,i,!1,!1,t,e),u=g.x-o.x,a=g.y-o.y,f=this.computeCurviness(),d=c=0;var m=o.x+u/3,y=o.y+a/3,x=m,M=y;j.A(a,0)?M=0<u?M-f:M+f:(c=-u/a,d=Math.sqrt(f*f/(c*c+1)),0>f&&(d=-d),x=(0>a?-1:1)*d+m,M=c*(x-m)+y),m=o.x+2*u/3,y=o.y+2*a/3;var S=m,N=y;j.A(a,0)?N=0<u?N-f:N+f:(S=(0>a?-1:1)*d+m,N=c*(S-m)+y),this.mk(),this.$d(o),this.xf(x,M),this.xf(S,N),this.$d(g),this.Rc(0,this.getLinkPoint(t,e,s,!0,!1,n,r)),this.Rc(3,this.getLinkPoint(n,r,i,!1,!1,t,e))}else o=n,g=r,n=this.getLinkPoint(t,e,s,!0,!1,o,g),r=this.getLinkPoint(o,g,i,!1,!1,t,e),this.hasCurviness()?(g=r.x-n.x,i=r.y-n.y,s=this.computeCurviness(),t=n.x+g/2,e=n.y+i/2,o=t,u=e,j.A(i,0)?u=0<g?u-s:u+s:(g=-g/i,o=Math.sqrt(s*s/(g*g+1)),0>s&&(o=-o),o=(0>i?-1:1)*o+t,u=g*(o-t)+e),this.$d(n),this.xf(o,u),this.$d(r)):(this.$d(n),this.$d(r),u=I.alloc(),e.lj(u),a=u.$(r),g.lj(u),f=u.$(n),(a||f)&&(s=e.da(Gp(s),new k),this.Rc(0,this.getLinkPointFromPoint(t,e,s,r,!0,s)),i=g.da(Gp(i),new k),this.Rc(1,this.getLinkPointFromPoint(o,g,i,n,!1,i))),I.free(u))}else{d=this.isAvoiding,g&&(c&&d||f)&&this.mk();var T=f?this.computeCurviness():0;d=this.getLinkPoint(t,e,s,!0,c,n,r),m=x=y=0,(c||!u||f)&&(M=this.computeEndSegmentLength(t,e,s,!0),m=this.getLinkDirection(t,e,d,s,!0,c,n,r),f&&(u||s.w(i)||!c&&s.x+i.x===1&&s.y+i.y===1)&&(m-=c?90:30,0>T&&(m-=180)),0>m?m+=360:360<=m&&(m-=360),f&&(M+=Math.abs(T)*(c?1:2)),m===0?y=M:m===90?x=M:m===180?y=-M:m===270?x=-M:(y=M*Math.cos(m*Math.PI/180),x=M*Math.sin(m*Math.PI/180)),s.nc()&&f&&(M=e.da(Wt,k.alloc()),S=k.allocAt(M.x+1e3*y,M.y+1e3*x),this.getLinkPointFromPoint(t,e,M,S,!0,d),k.free(M),k.free(S))),M=this.getLinkPoint(n,r,i,!1,c,t,e);var C=N=S=0;if(c||!a||f){var D=this.computeEndSegmentLength(n,r,i,!1);C=this.getLinkDirection(n,r,M,i,!1,c,t,e),f&&(a||s.w(i)||!c&&s.x+i.x===1&&s.y+i.y===1)&&(C+=c?0:30,0>T&&(C+=180)),0>C?C+=360:360<=C&&(C-=360),f&&(D+=Math.abs(T)*(c?1:2)),C===0?S=D:C===90?N=D:C===180?S=-D:C===270?N=-D:(S=D*Math.cos(C*Math.PI/180),N=D*Math.sin(C*Math.PI/180)),i.nc()&&f&&(i=r.da(Wt,k.alloc()),s=k.allocAt(i.x+1e3*S,i.y+1e3*N),this.getLinkPointFromPoint(n,r,i,s,!1,M),k.free(i),k.free(s))}i=d,(c||!u||f)&&(i=new k(d.x+y,d.y+x)),s=M,(c||!a||f)&&(s=new k(M.x+S,M.y+N)),!g&&!c&&u&&3<o&&this.adjustPoints(0,d,o-2,s)?this.Rc(o-1,M):!g&&!c&&a&&3<o&&this.adjustPoints(1,i,o-1,M)?this.Rc(0,d):!g&&(c?6<=o:4<o)&&this.adjustPoints(1,i,o-2,s)?(this.Rc(0,d),this.Rc(o-1,M)):(this.mk(),this.$d(d),(c||!u||f)&&this.$d(i),c&&this.addOrthoPoints(i,m,s,C,t,n),(c||!a||f)&&this.$d(s),this.$d(M))}return!0};function Z0(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}z.prototype.getLinkPointFromPoint=function(t,e,i,n,r,o){if(o===void 0&&(o=new k),t===null||e===null)return o.assign(i),o;if(t.isVisible()||(r=t.findVisibleNode(),r!==null&&r!==t&&(e=r.port)),t=null,r=e.panel,r===null||r.fe()||(r=r.panel),r===null){r=n.x,n=n.y;var s=i.x;i=i.y}else{t=r.Ed,r=1/(t.m11*t.m22-t.m12*t.m21),s=t.m22*r;var u=-t.m12*r,a=-t.m21*r,f=t.m11*r,c=r*(t.m21*t.dy-t.m22*t.dx),d=r*(t.m12*t.dx-t.m11*t.dy);r=n.x*s+n.y*a+c,n=n.x*u+n.y*f+d,s=i.x*s+i.y*a+c,i=i.x*u+i.y*f+d}return e.wk(r,n,s,i,o),t!==null&&o.transform(t),o};function Yp(t,e){var i=e.rp;return i===null&&(i=new Ul,i.port=e,i.node=e.part,e.rp=i),yS(i,t)}z.prototype.getLinkPoint=function(t,e,i,n,r,o,s,u){if(u===void 0&&(u=new k),i.kb()&&!ph(i))return e.da(i,u),u;if(i.Pc()){var a=Yp(this,e);if(a!==null){if(u.assign(a.Oq),r&&this.routing===aS){var f=Yp(this,s);if(f!==null&&a.tm<f.tm){a=k.alloc(),f=k.alloc();var c=new I(e.da(mi,a),e.da(Tr,f)),d=this.computeSpot(!n,s);t=this.getLinkPoint(o,s,d,!n,r,t,e,f),(i.Gf(Du)||i.Gf(Eu))&&t.y>=c.y&&t.y<=c.y+c.height?u.y=t.y:(i.Gf(ju)||i.Gf(Ou))&&t.x>=c.x&&t.x<=c.x+c.width&&(u.x=t.x),k.free(a),k.free(f)}}return u}}return i=e.da(Gp(i),k.alloc()),this.pointsCount>(r?6:2)?(s=n?this.i(1):this.i(this.pointsCount-2),r&&(s=Z0(i,s.copy()))):(a=this.computeSpot(!n,s),o=k.alloc(),s=s.da(Gp(a),o),r&&(s=Z0(i,s)),k.free(o)),this.getLinkPointFromPoint(t,e,i,s,n,u),k.free(i),u},z.prototype.getLinkDirection=function(t,e,i,n,r,o,s,u){t:if(n.kb())var a=n.x>n.y?n.x>1-n.y?0:n.x<1-n.y?270:315:n.x<n.y?n.x>1-n.y?90:n.x<1-n.y?180:135:.5>n.x?225:.5<n.x?45:0;else{if(n.Pc()&&(a=Yp(this,e),a!==null))switch(a.Bc){case 1:a=270;break t;case 2:a=180;break t;default:case 4:a=0;break t;case 8:a=90;break t}a=e.da(Wt,k.alloc()),this.pointsCount>(o?6:2)?(u=r?this.i(1):this.i(this.pointsCount-2),u=o?Z0(a,u.copy()):i):(i=k.alloc(),u=u.da(Wt,i),k.free(i)),i=Math.abs(u.x-a.x)>Math.abs(u.y-a.y)?u.x>=a.x?0:180:u.y>=a.y?90:270,k.free(a),a=i}return n.nc()&&s.Hd(t)&&(a+=180,360<=a&&(a-=360)),ph(n)||(t=e.kj(),t===0)||(45<=t&&135>t?a+=90:135<=t&&225>t?a+=180:225<=t&&315>t&&(a+=270),360<=a&&(a-=360)),a},z.prototype.computeEndSegmentLength=function(t,e,i,n){return e!==null&&i.Pc()&&(t=Yp(this,e),t!==null)?t.Nv:(t=n?this.fromEndSegmentLength:this.toEndSegmentLength,e!==null&&isNaN(t)&&(t=n?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},z.prototype.computeSpot=function(t,e){return e===void 0&&(e=null),t?(t=e||this.fromPort,t===null?t=Wt:(e=this.fromSpot,e.Nb()&&(e=t.fromSpot),t=e===ni?qe:e)):(t=e||this.toPort,t===null?t=Wt:(e=this.toSpot,e.Nb()&&(e=t.toSpot),t=e===ni?qe:e)),t};function ph(t){return t===qe||t.x===.5&&t.y===.5}function Gp(t){return t.x===.5&&t.y===.5?t:Wt}z.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==ji&&4<this.pointsCount?this.computeMidPoint(new k):(t=e.da(Wt),e=e.rp,e=e!==null?yS(e,this):null,e!==null&&(t=e.Oq),t)},z.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;e!==null&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&(e=this.toPort,e!==null&&(t=e.toShortLength)),isNaN(t)?0:t},z.prototype.Bf=function(t,e,i,n,r,o){if(this.pickable===!1)return!1;e===void 0&&(e=null),i===void 0&&(i=null);var s=o;if(o===void 0&&(s=Nt.alloc(),s.reset()),s.multiply(this.transform),this.Ih(t,s))return N0(this,e,i,r),o===void 0&&Nt.free(s),!0;if(this.Nc(t,s)){var u=!1;if(!this.isAtomic)for(var a=this.W.j,f=a.length;f--;){var c=a[f];if(c.visible||c===this.locationObject){var d=c.actualBounds,g=this.naturalBounds;if(!(d.x>g.width||d.y>g.height||0>d.x+d.width||0>d.y+d.height)){if(d=Nt.alloc(),d.set(s),c instanceof V)u=c.Bf(t,e,i,n,r,d);else if(this.path===c){if(c instanceof gt)if(u=t,g=n,c.pickable===!1)u=!1;else if(d.multiply(c.transform),g)t:{var m=u,y=d;if(c.Ih(m,y))u=!0;else{if(y===void 0&&(y=c.transform,m.Ee(c.actualBounds))){u=!0;break t}u=m.left,g=m.right;var x=m.top;m=m.bottom;var M=k.alloc(),S=k.alloc(),N=k.alloc(),T=Nt.alloc();T.set(y),T.hw(c.transform),T.Rt(),S.x=g,S.y=x,S.transform(T),M.x=u,M.y=x,M.transform(T),y=!1,Hs(c,M,S,N)?y=!0:(M.x=g,M.y=m,M.transform(T),Hs(c,M,S,N)?y=!0:(S.x=u,S.y=m,S.transform(T),Hs(c,M,S,N)?y=!0:(M.x=u,M.y=x,M.transform(T),Hs(c,M,S,N)&&(y=!0)))),Nt.free(T),k.free(M),k.free(S),k.free(N),u=y}}else u=c.Ih(u,d)}else u=nM(c,t,n,d);u&&(g=c,e!==null&&(g=e(c)),g&&(i===null||i(g))&&r.add(g)),Nt.free(d)}}}return o===void 0&&Nt.free(s),u||this.background!==null||this.areaBackground!==null}return o===void 0&&Nt.free(s),!1},z.prototype.computeCurve=function(){if(this.Xf===null){var t=this.fromPort,e=this.isOrthogonal;this.Xf=t!==null&&t===this.toPort&&!e}return this.Xf?rn:this.curve},z.prototype.computeCorner=function(){if(this.curve===rn)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},z.prototype.findMidLabel=function(){for(var t=this.path,e=this.W.j,i=e.length,n=0;n<i;n++){var r=e[n];if(r!==t&&!r.isPanelMain&&(r.segmentIndex===-Infinity||isNaN(r.segmentIndex)))return r}for(t=this.labelNodes;t.next();)if(e=t.value,e.segmentIndex===-Infinity||isNaN(e.segmentIndex))return e;return null},z.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=cS;t=Math.max(t,this.computeThickness());var e=this.fromPort,i=this.toPort;if(e!==null&&i!==null){var n=this.findMidLabel();if(n!==null){var r=n.naturalBounds,o=n.margin,s=isNaN(r.width)?30:r.width*n.scale+o.left+o.right;r=isNaN(r.height)?14:r.height*n.scale+o.top+o.bottom,n=n.segmentOrientation,n===of||n===Kp||n===em?t=Math.max(t,r):n===lf||n===hf||n===sf||n===uf?t=Math.max(t,s):(e=e.da(Wt).Sa(i.da(Wt))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*s)+Math.abs(Math.cos(e)*r)+1)),this.curve===rn&&(t*=1.333)}}return t},z.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var i=t[e];i.computeAdjusting()===ji&&i.Ua()}},z.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=fS;var e=this.Of;if(e!==null){for(var i=Dt(),n=0,r=e.links,o=0;o<r.length;o++){var s=r[o].computeSpacing();i.push(s),n+=s}for(n=-n/2,o=0;o<r.length;o++){if(r[o]===this){t=n+i[o]/2;break}n+=i[o]}e.Zt===this.fromNode&&(t=-t),Xt(i)}}return t},z.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return t!==null?Math.max(t.strokeWidth,1):1},z.prototype.hasCurviness=function(){return!isNaN(this.curviness)||this.Of!==null},z.prototype.adjustPoints=function(t,e,i,n){var r=this.computeAdjusting();if(this.isOrthogonal){if(r===Hp)return!1;r===Wp&&(r=rf)}switch(r){case Hp:var o=this.i(t),s=this.i(i);if(!o.Na(e)||!s.Na(n)){r=o.x,o=o.y;var u=s.x-r,a=s.y-o,f=Math.sqrt(u*u+a*a);if(!j.aa(f,0)){if(j.aa(u,0))var c=0>a?-Math.PI/2:Math.PI/2;else c=Math.atan(a/Math.abs(u)),0>u&&(c=Math.PI-c);s=e.x;var d=e.y;u=n.x-s;var g=n.y-d;for(a=Math.sqrt(u*u+g*g),j.aa(u,0)?g=0>g?-Math.PI/2:Math.PI/2:(g=Math.atan(g/Math.abs(u)),0>u&&(g=Math.PI-g)),f=a/f,c=g-c,this.Rc(t,e),t+=1;t<i;t++)e=this.i(t),u=e.x-r,a=e.y-o,e=Math.sqrt(u*u+a*a),j.aa(e,0)||(j.aa(u,0)?a=0>a?-Math.PI/2:Math.PI/2:(a=Math.atan(a/Math.abs(u)),0>u&&(a=Math.PI-a)),u=a+c,e*=f,this.L(t,s+e*Math.cos(u),d+e*Math.sin(u)));this.Rc(i,n)}}return!0;case Wp:if(o=this.i(t),d=this.i(i),!o.Na(e)||!d.Na(n)){r=o.x,o=o.y,s=d.x,d=d.y,f=(s-r)*(s-r)+(d-o)*(d-o),u=e.x,c=e.y,a=n.x,g=n.y;var m=1;if(a-u!=0){var y=(g-c)/(a-u);m=Math.sqrt(1+1/(y*y))}else y=9e9;for(this.Rc(t,e),t+=1;t<i;t++){e=this.i(t);var x=e.x,M=e.y,S=.5;f!==0&&(S=((r-x)*(r-s)+(o-M)*(o-d))/f);var N=r+S*(s-r),T=o+S*(d-o);e=Math.sqrt((x-N)*(x-N)+(M-T)*(M-T)),M<y*(x-N)+T&&(e=-e),0<y&&(e=-e),x=u+S*(a-u),S=c+S*(g-c),y!==0?(e=x+e/m,this.L(t,e,S-(e-x)/y)):this.L(t,x,S+e)}this.Rc(i,n)}return!0;case rf:t:{if(this.isOrthogonal&&(r=this.i(t),o=this.i(t+1),s=this.i(t+2),u=o.x,c=o.y,d=u,f=c,j.A(r.y,o.y)?j.A(o.x,s.x)?c=e.y:j.A(o.y,s.y)&&(u=e.x):j.A(r.x,o.x)&&(j.A(o.y,s.y)?u=e.x:j.A(o.x,s.x)&&(c=e.y)),this.L(t+1,u,c),r=this.i(i),o=this.i(i-1),s=this.i(i-2),u=o.x,c=o.y,a=u,g=c,j.A(r.y,o.y)?j.A(o.x,s.x)?c=n.y:j.A(o.y,s.y)&&(u=n.x):j.A(r.x,o.x)&&(j.A(o.y,s.y)?u=n.x:j.A(o.x,s.x)&&(c=n.y)),this.L(i-1,u,c),J0(this))){this.L(t+1,d,f),this.L(i-1,a,g),i=!1;break t}this.Rc(t,e),this.Rc(i,n),i=!0}return i;default:return!1}},z.prototype.addOrthoPoints=function(t,e,i,n,r,o){e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,n=-45<=n&&45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270;var s=r.actualBounds.copy(),u=o.actualBounds.copy();if(s.u()&&u.u()){if(s.Kc(af,af),u.Kc(af,af),s.Oe(t),u.Oe(i),e===0)if(i.x>t.x||n===270&&i.y<t.y&&u.right>t.x||n===90&&i.y>t.y&&u.right>t.x){var a=new k(i.x,t.y),f=new k(i.x,(t.y+i.y)/2);n===180?(a.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),f.x=a.x,f.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(a.x=t.x<u.left?this.computeMidOrthoPosition(t.x,t.y,u.left,i.y,!1):t.x<u.right&&(n===270&&t.y<u.top||n===90&&t.y>u.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):u.right,f.x=a.x,f.y=i.y):n===0&&t.x<u.left&&t.y>u.top&&t.y<u.bottom&&(a.x=t.x,a.y=t.y<i.y?Math.min(i.y,u.top):Math.max(i.y,u.bottom),f.y=a.y)}else a=new k(t.x,i.y),f=new k((t.x+i.x)/2,i.y),(n===180||n===90&&i.y<s.top||n===270&&i.y>s.bottom)&&(n===180&&(u.$(t)||s.$(i))?a.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===180||n===90)?a.y=this.computeMidOrthoPosition(t.x,s.top,i.x,Math.max(i.y,u.bottom),!0):i.y>t.y&&(n===180||n===270)&&(a.y=this.computeMidOrthoPosition(t.x,s.bottom,i.x,Math.min(i.y,u.top),!0)),f.x=i.x,f.y=a.y),a.y>s.top&&a.y<s.bottom&&(i.x>=s.left&&i.x<=t.x||t.x<=u.right&&t.x>=i.x?(n===90||n===270)&&(a=new k(Math.max((t.x+i.x)/2,t.x),t.y),f=new k(a.x,i.y)):(a.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===0?s.top:Math.min(s.top,u.top)):Math.max(i.y,n===0?s.bottom:Math.max(s.bottom,u.bottom)),f.x=i.x,f.y=a.y));else e===180?i.x<t.x||n===270&&i.y<t.y&&u.left<t.x||n===90&&i.y>t.y&&u.left<t.x?(a=new k(i.x,t.y),f=new k(i.x,(t.y+i.y)/2),n===0?(a.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1),f.x=a.x,f.y=i.y):n===270&&i.y<t.y||n===90&&i.y>t.y?(a.x=t.x>u.right?this.computeMidOrthoPosition(t.x,t.y,u.right,i.y,!1):t.x>u.left&&(n===270&&t.y<u.top||n===90&&t.y>u.bottom)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):u.left,f.x=a.x,f.y=i.y):n===180&&t.x>u.right&&t.y>u.top&&t.y<u.bottom&&(a.x=t.x,a.y=t.y<i.y?Math.min(i.y,u.top):Math.max(i.y,u.bottom),f.y=a.y)):(a=new k(t.x,i.y),f=new k((t.x+i.x)/2,i.y),(n===0||n===90&&i.y<s.top||n===270&&i.y>s.bottom)&&(n===0&&(u.$(t)||s.$(i))?a.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):i.y<t.y&&(n===0||n===90)?a.y=this.computeMidOrthoPosition(t.x,s.top,i.x,Math.max(i.y,u.bottom),!0):i.y>t.y&&(n===0||n===270)&&(a.y=this.computeMidOrthoPosition(t.x,s.bottom,i.x,Math.min(i.y,u.top),!0)),f.x=i.x,f.y=a.y),a.y>s.top&&a.y<s.bottom&&(i.x<=s.right&&i.x>=t.x||t.x>=u.left&&t.x<=i.x?(n===90||n===270)&&(a=new k(Math.min((t.x+i.x)/2,t.x),t.y),f=new k(a.x,i.y)):(a.y=n===270||(n===0||n===180)&&i.y<t.y?Math.min(i.y,n===180?s.top:Math.min(s.top,u.top)):Math.max(i.y,n===180?s.bottom:Math.max(s.bottom,u.bottom)),f.x=i.x,f.y=a.y))):e===90?i.y>t.y||n===180&&i.x<t.x&&u.bottom>t.y||n===0&&i.x>t.x&&u.bottom>t.y?(a=new k(t.x,i.y),f=new k((t.x+i.x)/2,i.y),n===270?(a.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),f.x=i.x,f.y=a.y):n===180&&i.x<t.x||n===0&&i.x>t.x?(a.y=t.y<u.top?this.computeMidOrthoPosition(t.x,t.y,i.x,u.top,!0):t.y<u.bottom&&(n===180&&t.x<u.left||n===0&&t.x>u.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):u.bottom,f.x=i.x,f.y=a.y):n===90&&t.y<u.top&&t.x>u.left&&t.x<u.right&&(a.x=t.x<i.x?Math.min(i.x,u.left):Math.max(i.x,u.right),a.y=t.y,f.x=a.x)):(a=new k(i.x,t.y),f=new k(i.x,(t.y+i.y)/2),(n===270||n===0&&i.x<s.left||n===180&&i.x>s.right)&&(n===270&&(u.$(t)||s.$(i))?a.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===270||n===0)?a.x=this.computeMidOrthoPosition(s.left,t.y,Math.max(i.x,u.right),i.y,!1):i.x>t.x&&(n===270||n===180)&&(a.x=this.computeMidOrthoPosition(s.right,t.y,Math.min(i.x,u.left),i.y,!1)),f.x=a.x,f.y=i.y),a.x>s.left&&a.x<s.right&&(i.y>=s.top&&i.y<=t.y||t.y<=u.bottom&&t.y>=i.y?(n===0||n===180)&&(a=new k(t.x,Math.max((t.y+i.y)/2,t.y)),f=new k(i.x,a.y)):(a.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===90?s.left:Math.min(s.left,u.left)):Math.max(i.x,n===90?s.right:Math.max(s.right,u.right)),f.x=a.x,f.y=i.y))):i.y<t.y||n===180&&i.x<t.x&&u.top<t.y||n===0&&i.x>t.x&&u.top<t.y?(a=new k(t.x,i.y),f=new k((t.x+i.x)/2,i.y),n===90?(a.y=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0),f.x=i.x,f.y=a.y):n===180&&i.x<t.x||n===0&&i.x>=t.x?(a.y=t.y>u.bottom?this.computeMidOrthoPosition(t.x,t.y,i.x,u.bottom,!0):t.y>u.top&&(n===180&&t.x<u.left||n===0&&t.x>u.right)?this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!0):u.top,f.x=i.x,f.y=a.y):n===270&&t.y>u.bottom&&t.x>u.left&&t.x<u.right&&(a.x=t.x<i.x?Math.min(i.x,u.left):Math.max(i.x,u.right),a.y=t.y,f.x=a.x)):(a=new k(i.x,t.y),f=new k(i.x,(t.y+i.y)/2),(n===90||n===0&&i.x<s.left||n===180&&i.x>s.right)&&(n===90&&(u.$(t)||s.$(i))?a.x=this.computeMidOrthoPosition(t.x,t.y,i.x,i.y,!1):i.x<t.x&&(n===90||n===0)?a.x=this.computeMidOrthoPosition(s.left,t.y,Math.max(i.x,u.right),i.y,!1):i.x>t.x&&(n===90||n===180)&&(a.x=this.computeMidOrthoPosition(s.right,t.y,Math.min(i.x,u.left),i.y,!1)),f.x=a.x,f.y=i.y),a.x>s.left&&a.x<s.right&&(i.y<=s.bottom&&i.y>=t.y||t.y>=u.top&&t.y<=i.y?(n===0||n===180)&&(a=new k(t.x,Math.min((t.y+i.y)/2,t.y)),f=new k(i.x,a.y)):(a.x=n===180||(n===90||n===270)&&i.x<t.x?Math.min(i.x,n===270?s.left:Math.min(s.left,u.left)):Math.max(i.x,n===270?s.right:Math.max(s.right,u.right)),f.x=a.x,f.y=i.y)));var c=a,d=f,g=i;if(this.isAvoiding){var m=this.diagram;if(m===null||!zw(m)||s.$(g)&&!o.Hd(r)||u.$(t)&&!r.Hd(o)||r===o||this.layer.isTemporary)e=!1;else{var y=r0(m,!0,this.containingGroup,null);if(this.segmentIndex!==17&&y.Ak(Math.min(t.x,c.x),Math.min(t.y,c.y),Math.abs(t.x-c.x),Math.abs(t.y-c.y))&&y.Ak(Math.min(c.x,d.x),Math.min(c.y,d.y),Math.abs(c.x-d.x),Math.abs(c.y-d.y))&&y.Ak(Math.min(d.x,g.x),Math.min(d.y,g.y),Math.abs(d.x-g.x),Math.abs(d.y-g.y)))e=!1;else{r=t,o=g;var x=i=null;if(m.isVirtualized){m=y.bounds.copy(),m.Kc(-y.vq,-y.uq);var M=k.alloc();gh(y,t.x,t.y)||(j.Ef(m.x,m.y,m.x+m.width,m.y+m.height,t.x,t.y,c.x,c.y,M)?(i=t=M.copy(),e=M.Sa(c)):j.Ef(m.x,m.y,m.x+m.width,m.y+m.height,c.x,c.y,d.x,d.y,M)?(i=t=M.copy(),e=M.Sa(d)):j.Ef(m.x,m.y,m.x+m.width,m.y+m.height,d.x,d.y,g.x,g.y,M)&&(i=t=M.copy(),e=M.Sa(g))),gh(y,g.x,g.y)||(j.Ef(m.x,m.y,m.x+m.width,m.y+m.height,g.x,g.y,d.x,d.y,M)?(x=g=M.copy(),n=d.Sa(M)):j.Ef(m.x,m.y,m.x+m.width,m.y+m.height,d.x,d.y,c.x,c.y,M)?(x=g=M.copy(),n=c.Sa(M)):j.Ef(m.x,m.y,m.x+m.width,m.y+m.height,c.x,c.y,t.x,t.y,M)&&(x=g=M.copy(),n=t.Sa(M))),k.free(M)}s=s.copy().Tc(u),s.Kc(y.vq*y.Yy,y.uq*y.Yy),dS(y,t,e,g,n,s,!0),u=Vl(y,g.x,g.y),!y.abort&&u>=yh&&(pS(y),s.Kc(y.vq*y.Iy,y.uq*y.Iy),dS(y,t,e,g,n,s,!1),u=Vl(y,g.x,g.y)),!y.abort&&u<yh&&Vl(y,g.x,g.y)!==Uo?(Q0(this,y,g.x,g.y,n,!0),u=this.i(2),4>this.pointsCount?(e===0||e===180?(u.x=t.x,u.y=g.y):(u.x=g.x,u.y=t.y),this.L(2,u.x,u.y),this.m(3,u.x,u.y)):(s=this.i(3),e===0||e===180?j.A(u.x,s.x)?(u=e===0?Math.max(u.x,t.x):Math.min(u.x,t.x),this.L(2,u,t.y),this.L(3,u,s.y)):j.A(u.y,s.y)?(Math.abs(t.y-u.y)<=y.uq/2&&(this.L(2,u.x,t.y),this.L(3,s.x,t.y)),this.m(2,u.x,t.y)):this.L(2,t.x,u.y):(e===90||e===270)&&(j.A(u.y,s.y)?(u=e===90?Math.max(u.y,t.y):Math.min(u.y,t.y),this.L(2,t.x,u),this.L(3,s.x,u)):j.A(u.x,s.x)?(Math.abs(t.x-u.x)<=y.vq/2&&(this.L(2,t.x,u.y),this.L(3,t.x,s.y)),this.m(2,t.x,u.y)):this.L(2,u.x,t.y))),i!==null&&(t=this.i(1),s=this.i(2),t.x!==s.x&&t.y!==s.y?e===0||e===180?this.m(2,t.x,s.y):this.m(2,s.x,t.y):e===0||e===180?this.m(2,r.x,i.y):this.m(2,i.x,r.y)),x!==null&&(n===0||n===180?this.xf(o.x,x.y):this.xf(x.x,o.y)),e=!0):e=!1}}}else e=!1;e||(this.$d(a),this.$d(f))}},z.prototype.computeMidOrthoPosition=function(t,e,i,n,r){var o=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Pc()||this.computeSpot(!1,this.toPort).Pc()||(o=this.computeCurviness()),r?(e+n)/2+o:(t+i)/2+o};function J0(t){if(t.diagram===null||!t.isAvoiding||!zw(t.diagram))return!1;var e=t.points.j,i=e.length;if(4>i)return!1;t=r0(t.diagram,!0,t.containingGroup,null);for(var n=1;n<i-2;n++){var r=e[n],o=e[n+1];if(!t.Ak(Math.min(r.x,o.x),Math.min(r.y,o.y),Math.abs(r.x-o.x),Math.abs(r.y-o.y)))return!0}return!1}function Q0(t,e,i,n,r,o){var s=e.vq,u=e.uq,a=Vl(e,i,n),f=i,c=n;for(r===0?f+=s:r===90?c+=u:r===180?f-=s:c-=u;a>zl&&Vl(e,f,c)===a-1;)i=f,n=c,r===0?f+=s:r===90?c+=u:r===180?f-=s:c-=u,--a;o?a>zl&&(r===180||r===0?i=Math.floor(i/s)*s+s/2:(r===90||r===270)&&(n=Math.floor(n/u)*u+u/2)):(i=Math.floor(i/s)*s+s/2,n=Math.floor(n/u)*u+u/2),a>zl&&(o=r,f=i,c=n,r===0?(o=90,c+=u):r===90?(o=180,f-=s):r===180?(o=270,c-=u):r===270&&(o=0,f+=s),Vl(e,f,c)===a-1?Q0(t,e,f,c,o,!1):(f=i,c=n,r===0?(o=270,c-=u):r===90?(o=0,f+=s):r===180?(o=90,c+=u):r===270&&(o=180,f-=s),Vl(e,f,c)===a-1&&Q0(t,e,f,c,o,!1))),t.xf(i,n)}z.prototype.Sz=function(t){var e=t.x;t=t.y;for(var i=this.i(0),n=this.i(1),r=yi(e,t,i.x,i.y,n.x,n.y),o=0,s=1;s<this.pointsCount-1;s++){i=this.i(s+1);var u=yi(e,t,n.x,n.y,i.x,i.y);n=i,u<r&&(o=s,r=u)}return o},z.prototype.dc=function(){this.Xm=!1,this.o()},z.prototype.Ck=function(t){if(!(!t&&(this.kd===!1||(t=this.rb(),this.Xm&&(t===null||t.geometry!==null))))&&(this.na=this.makeGeometry(),t=this.path,t!==null)){t.na=this.na;for(var e=this.W.j,i=e.length,n=0;n<i;n++){var r=e[n];r!==t&&r.isPanelMain&&r instanceof gt&&(r.na=this.na)}}},z.prototype.makeGeometry=function(){var t=this.na,e=this.pointsCount;if(2>e)return t.type=He,this.Xm=!0,t;var i=!1,n=this.diagram;n!==null&&Ws(this)&&n.Wg.contains(this)&&(this.Wl.width!==0||this.Wl.height!==0)&&(i=!0);var r=this.i(0).copy(),o=r.copy();n=this.Bb.j;var s=this.computeCurve();if(s===rn&&3<=e&&!j.aa(this.smoothness,0))if(e===3){var u=this.i(1);n=Math.min(r.x,u.x);var a=Math.min(r.y,u.y);u=this.i(2),n=Math.min(n,u.x),a=Math.min(a,u.y)}else{if(this.isOrthogonal)for(a=0;a<e;a++)u=n[a],o.x=Math.min(u.x,o.x),o.y=Math.min(u.y,o.y);else for(n=3;n<e;n+=3)n+3>=e&&(n=e-1),a=this.i(n),o.x=Math.min(a.x,o.x),o.y=Math.min(a.y,o.y);n=o.x,a=o.y}else{for(a=0;a<e;a++)u=n[a],o.x=Math.min(u.x,o.x),o.y=Math.min(u.y,o.y);n=o.x,a=o.y}if(n-=this.tv.x,a-=this.tv.y,r.x-=n,r.y-=a,e!==2||Ws(this)){if(t.type=an,u=UM(t),this.computeShortLength(!0)!==0&&(r=Il(this,r,!0,o)),fh(u,r.x,r.y,!1),s===rn&&3<=e&&!j.aa(this.smoothness,0))if(e===3)i=this.i(1),e=i.x-n,i=i.y-a,r=this.i(2).copy(),r.x-=n,r.y-=a,this.computeShortLength(!1)!==0&&(r=Il(this,r,!1,o)),Ro(u,e,i,e,i,r.x,r.y);else if(this.isOrthogonal){o=new k(n,a),r=this.i(1).copy(),s=new k(n,a),e=new k(n,a),i=this.i(0);for(var f,c=this.smoothness/3,d=1;d<this.pointsCount-1;d++){f=this.i(d);var g=i,m=f,y=this.i(q0(this,f,d,!1));if((!j.aa(g.x,m.x)||!j.aa(m.x,y.x))&&(!j.aa(g.y,m.y)||!j.aa(m.y,y.y))){var x=c;isNaN(x)&&(x=this.smoothness/3);var M=g.x;g=g.y;var S=m.x;m=m.y;var N=y.x;y=y.y;var T=x*Xp(M,g,S,m);x*=Xp(S,m,N,y),j.aa(g,m)&&j.aa(S,N)&&(S>M?y>m?(s.x=S-T,s.y=m-T,e.x=S+x,e.y=m+x):(s.x=S-T,s.y=m+T,e.x=S+x,e.y=m-x):y>m?(s.x=S+T,s.y=m-T,e.x=S-x,e.y=m+x):(s.x=S+T,s.y=m+T,e.x=S-x,e.y=m-x)),j.aa(M,S)&&j.aa(m,y)&&(m>g?(N>S?(s.x=S-T,s.y=m-T,e.x=S+x):(s.x=S+T,s.y=m-T,e.x=S-x),e.y=m+x):(N>S?(s.x=S-T,s.y=m+T,e.x=S+x):(s.x=S+T,s.y=m+T,e.x=S-x),e.y=m-x)),(j.aa(M,S)&&j.aa(S,N)||j.aa(g,m)&&j.aa(m,y))&&(M=.5*(M+N),g=.5*(g+y),s.x=M,s.y=g,e.x=M,e.y=g),(d===1||d===2&&j.aa(i.x,this.i(0).x)&&j.aa(i.y,this.i(0).y))&&(r.x=.5*(i.x+f.x),r.y=.5*(i.y+f.y)),Ro(u,r.x-n,r.y-a,s.x-n,s.y-a,f.x-n,f.y-a),o.set(s),r.set(e),i=f}}o=i.x,i=i.y,r=this.i(this.pointsCount-1),this.computeShortLength(!1)!==0&&(r=Il(this,r.copy(),!1,Po)),o=.5*(o+r.x),i=.5*(i+r.y),Ro(u,e.x-n,e.y-a,o-n,i-a,r.x-n,r.y-a)}else for(i=3;i<e;i+=3)o=this.i(i-2),i+3>=e&&(i=e-1),r=this.i(i-1),s=this.i(i),i===e-1&&this.computeShortLength(!1)!==0&&(s=Il(this,s.copy(),!1,Po)),Ro(u,o.x-n,o.y-a,r.x-n,r.y-a,s.x-n,s.y-a);else{for(o=k.alloc(),o.assign(this.i(0)),r=k.alloc(),r.assign(o),s=this.computeCorner(),d=1,f=0;d<e;){if(d=q0(this,o,d,1<d),c=this.i(d),d>=e-1){if(!o.w(c))this.computeShortLength(!1)!==0&&(c=Il(this,c.copy(),!1,Po)),Bl(this,u,-n,-a,o,c,i);else if(f===0)for(d=1;d<e;)r.assign(o),c=this.i(d++),Bl(this,u,-n,-a,o,c,i),o.assign(c);break}if(f=q0(this,c,d+1,d<e-3),d=-n,M=-a,g=c,x=this.i(f),S=i,j.A(o.y,g.y)&&j.A(g.x,x.x))if(m=Math.min(s,Math.abs(g.x-r.x)/2),m=N=Math.min(m,Math.abs(x.y-g.y)/2),j.A(m,0))Bl(this,u,d,M,o,g,S),o.assign(g);else{y=g.x,T=g.y;var C=y,D=T;g.x>o.x?y=g.x-m:y=g.x+m,x.y>g.y?D=g.y+N:D=g.y-N,Bl(this,u,d,M,o,new k(y,T),S),Ip(u,g.x+d,g.y+M,C+d,D+M),o.h(C,D)}else j.A(o.x,g.x)&&j.A(g.y,x.y)?(m=Math.min(s,Math.abs(g.y-r.y)/2),m=N=Math.min(m,Math.abs(x.x-g.x)/2),j.A(N,0)?(Bl(this,u,d,M,o,g,S),o.assign(g)):(y=g.x,T=g.y,C=y,D=T,g.y>o.y?T=g.y-m:T=g.y+m,x.x>g.x?C=g.x+N:C=g.x-N,Bl(this,u,d,M,o,new k(y,T),S),Ip(u,g.x+d,g.y+M,C+d,D+M),o.h(C,D))):(Bl(this,u,d,M,o,g,S),o.assign(g));r.assign(c),d=f}k.free(o)}Bp=u}else u=this.i(1).copy(),u.x-=n,u.y-=a,this.computeShortLength(!0)!==0&&(r=Il(this,r,!0,o)),this.computeShortLength(!1)!==0&&(u=Il(this,u,!1,o)),t.type=He,t.startX=r.x,t.startY=r.y,t.endX=u.x,t.endY=u.y;return this.Xm=!0,t};function Xp(t,e,i,n){return t=i-t,isNaN(t)||t===Infinity||t===-Infinity?NaN:(0>t&&(t=-t),e=n-e,isNaN(e)||e===Infinity||e===-Infinity?NaN:(0>e&&(e=-e),j.aa(t,0)?e:j.aa(e,0)?t:Math.sqrt(t*t+e*e)))}function Il(t,e,i,n){var r=t.pointsCount;if(2>r)return e;if(i){var o=t.i(1);if(i=o.x-n.x,o=o.y-n.y,n=Xp(e.x,e.y,i,o),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!0),t>r&&(t=r),r=t*(o-e.y)/n,e.x+=t*(i-e.x)/n,e.y+=r}else{if(o=t.i(r-2),i=o.x-n.x,o=o.y-n.y,n=Xp(e.x,e.y,i,o),n===0)return e;r=r===2?.5*n:n,t=t.computeShortLength(!1),t>r&&(t=r),r=t*(e.y-o)/n,e.x-=t*(e.x-i)/n,e.y-=r}return e}function q0(t,e,i,n){for(var r=t.pointsCount,o=e;j.aa(e.x,o.x)&&j.aa(e.y,o.y);){if(i>=r)return r-1;o=t.i(i++)}if(!j.aa(e.x,o.x)&&!j.aa(e.y,o.y))return i-1;for(var s=o;j.aa(e.x,o.x)&&j.aa(o.x,s.x)&&(!n||(e.y>=o.y?o.y>=s.y:o.y<=s.y))||j.aa(e.y,o.y)&&j.aa(o.y,s.y)&&(!n||(e.x>=o.x?o.x>=s.x:o.x<=s.x));){if(i>=r)return r-1;s=t.i(i++)}return i-2}function Bl(t,e,i,n,r,o,s){if(!s&&Ws(t)){s=[];var u=0;if(t.isVisible()&&(u=wT(t,r,o,s)),0<u){if(j.A(r.y,o.y))if(r.x<o.x)for(var a=0;a<u;){var f=Math.max(r.x,Math.min(s[a++]-5,o.x-10));e.lineTo(f+i,o.y+n);for(var c=f+i,d=Math.min(f+10,o.x);a<u&&(f=s[a],f<d+10);)a++,d=Math.min(f+5,o.x);f=o.y-10+n,d+=i;var g=o.y+n;t.curve===zo?fh(e,d,g,!1):Ro(e,c,f,d,f,d,g)}else for(--u;0<=u;){for(a=Math.min(r.x,Math.max(s[u--]+5,o.x+10)),e.lineTo(a+i,o.y+n),c=a+i,f=Math.max(a-10,o.x);0<=u&&(a=s[u],a>f-10);)u--,f=Math.max(a-5,o.x);a=o.y-10+n,f+=i,d=o.y+n,t.curve===zo?fh(e,f,d,!1):Ro(e,c,a,f,a,f,d)}else if(j.A(r.x,o.x))if(r.y<o.y)for(a=0;a<u;){for(f=Math.max(r.y,Math.min(s[a++]-5,o.y-10)),e.lineTo(o.x+i,f+n),c=f+n,f=Math.min(f+10,o.y);a<u&&(d=s[a],d<f+10);)a++,f=Math.min(d+5,o.y);d=o.x-10+i,g=o.x+i,f+=n,t.curve===zo?fh(e,g,f,!1):Ro(e,d,c,d,f,g,f)}else for(--u;0<=u;){for(a=Math.min(r.y,Math.max(s[u--]+5,o.y+10)),e.lineTo(o.x+i,a+n),c=a+n,a=Math.max(a-10,o.y);0<=u&&(f=s[u],f>a-10);)u--,a=Math.max(f-5,o.y);f=o.x-10+i,d=o.x+i,a+=n,t.curve===zo?fh(e,d,a,!1):Ro(e,f,c,f,a,d,a)}}}e.lineTo(o.x+i,o.y+n)}function wT(t,e,i,n){var r=t.diagram;if(r===null||e.w(i))return 0;for(r=r.layers;r.next();){var o=r.value;if(o!==null&&o.visible){o=o.Da.j;for(var s=o.length,u=0;u<s;u++){var a=o[u];if(a instanceof z){if(a===t)return 0<n.length&&n.sort(function(c,d){return c-d}),n.length;if(a.isVisible()&&Ws(a)){var f=a.routeBounds;f.u()&&t.routeBounds.Nc(f)&&!t.usesSamePort(a)&&(f=a.path,f!==null&&f.If()&&MT(e,i,n,a))}}}}}return 0<n.length&&n.sort(function(c,d){return c-d}),n.length}function MT(t,e,i,n){for(var r=j.A(t.y,e.y),o=n.pointsCount,s=n.i(0),u=k.alloc(),a=1;a<o;a++){var f=n.i(a);if(a<o-1){var c=n.i(a+1);if(s.y===f.y&&f.y===c.y){if(f.x>s.x&&c.x>=f.x||f.x<s.x&&c.x<=f.x)continue}else if(s.x===f.x&&f.x===c.x&&(f.y>s.y&&c.y>=f.y||f.y<s.y&&c.y<=f.y))continue}t:{c=t.x;var d=t.y,g=e.x,m=e.y,y=s.x;s=s.y;var x=f.x,M=f.y;if(j.A(c,g)){if(!j.A(d,m)&&j.A(s,M)&&Math.min(d,m)<s&&Math.max(d,m)>s&&Math.min(y,x)<c&&Math.max(y,x)>c&&!j.A(y,x)){u.x=c,u.y=s,c=!0;break t}}else if(j.A(d,m)&&j.A(y,x)&&Math.min(c,g)<y&&Math.max(c,g)>y&&Math.min(s,M)<d&&Math.max(s,M)>d&&!j.A(s,M)){u.x=y,u.y=d,c=!0;break t}u.x=0,u.y=0,c=!1}c&&(r?i.push(u.x):i.push(u.y)),s=f}k.free(u)}function Ws(t){return t=t.curve,t===dh||t===zo}function b0(t,e){(e||Ws(t))&&(e=t.diagram,e===null||e.animationManager.isTicking||e.Wg.contains(t)||t.Wl.width===0&&t.Wl.height===0||e.Wg.add(t,t.Wl.copy()))}z.prototype.Lq=function(t){var e=this.layer;if(e!==null&&e.visible&&!e.isTemporary){var i=e.diagram;if(i!==null&&!i.animationManager.isTicking){var n=!1;for(i=i.layers;i.next();){var r=i.value;if(r.visible){if(r===e){n=!0;var o=!1;r=r.Da.j;for(var s=r.length,u=0;u<s;u++){var a=r[u];a instanceof z&&(a===this?o=!0:o&&hS(this,a,t))}}else if(n)for(o=r.Da.j,r=o.length,s=0;s<r;s++)u=o[s],u instanceof z&&hS(this,u,t)}}}}};function hS(t,e,i){if(e!==null&&e.Xm&&e.kd&&Ws(e)){var n=e.routeBounds;n.u()&&(t.routeBounds.Nc(n)||i.Nc(n))&&(t.usesSamePort(e)||e.dc())}}z.prototype.usesSamePort=function(t){var e=this.pointsCount,i=t.pointsCount;if(0<e&&0<i){var n=this.i(0),r=t.i(0);if(n.Na(r)||(e=this.i(e-1),t=t.i(i-1),e.Na(t)||n.Na(t)||e.Na(r)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},z.prototype.isVisible=function(){if(!rt.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,i=this.diagram;if(i!==null&&(e=i.isTreePathToChildren),i=this.fromNode,i!==null){if(this.isTreeLink&&e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(var n=i;n!==null;){if(n.labeledLink===this)return!0;n=n.containingGroup}if(i=i.findVisibleNode(),i===null||i===t)return!1}if(i=this.toNode,i!==null){if(this.isTreeLink&&!e&&!i.isTreeExpanded)return!1;if(i===t)return!0;for(e=i;e!==null;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(e=i.findVisibleNode(),e===null||e===t)return!1}return!0},z.prototype.Pb=function(t){if(rt.prototype.Pb.call(this,t),this.Of!==null&&this.Of.Am(),this.od!==null)for(var e=this.od.iterator;e.next();)e.value.Pb(t)},z.prototype.computeAdjusting=function(){return this.isAvoiding&&this.diagram!==null&&this.diagram.animationManager.isAnimating?rf:this.Wk};function ef(t){var e=t.Xe;if(e!==null){var i=t.tf;if(i!==null&&isNaN(t.curviness)){for(var n=t.Ye,r=t.uf,o=t=null,s=e.Za.j,u=s.length,a=0;a<u;a++){var f=s[a];(f.Xe===e&&f.Ye===n&&f.tf===i&&f.uf===r||f.Xe===i&&f.Ye===r&&f.tf===e&&f.uf===n)&&(o===null?o=f:(t===null&&(t=[],t.push(o)),t.push(f)))}if(t!==null){for(o=QM(e,i,n,r),o===null&&(o=new $p(e,n,i,r),JM(e,o),JM(i,o)),o.links=t,e=0;e<t.length;e++)t[e].Of=o;o.Am()}}}}function nf(t){var e=t.Of;e!==null&&isNaN(t.curviness)&&(t.Of=null,t=e.links.indexOf(t),0<=t&&(Ve(e.links,t),e.Am()))}z.prototype.Oh=function(){return!0},X.Object.defineProperties(z.prototype,{fromNode:{get:function(){return this.Xe},set:function(t){var e=this.Xe;if(e!==t){var i=this.fromPort;e!==null&&(this.tf!==e&&zp(e,this,i),nf(this),this.C(2)),this.Xe=t,t!==null&&this.Pb(t.isVisible()),this.Xf=null,this.Ua();var n=this.diagram;n!==null&&n.Z&&n.partManager.setFromNodeForLink(this,t,e);var r=this.fromPort,o=this.fromPortChanged;if(o!==null){var s=!0;n!==null&&(s=n.Z,n.Z=!0),o(this,i,r),n!==null&&(n.Z=s)}t!==null&&(this.tf!==t&&Vp(t,this,r),ef(this),this.C(1)),this.g("fromNode",e,t),ch(this)}}},fromPortId:{get:function(){return this.Ye},set:function(t){var e=this.Ye;if(e!==t){var i=this.fromPort;i!==null&&Ki(i),nf(this),this.Ye=t;var n=this.fromPort;n!==null&&Ki(n);var r=this.diagram;if(r!==null){var o=this.data,s=r.model;o!==null&&s.pj()&&s.Cw(o,t)}i!==n&&(this.Xf=null,this.Ua(),o=this.fromPortChanged,o!==null&&(s=!0,r!==null&&(s=r.Z,r.Z=!0),o(this,i,n),r!==null&&(r.Z=s))),ef(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Xe;return t===null?null:t.It(this.Ye)}},fromPortChanged:{get:function(){return this.bo},set:function(t){var e=this.bo;e!==t&&(this.bo=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.tf},set:function(t){var e=this.tf;if(e!==t){var i=this.toPort;e!==null&&(this.Xe!==e&&zp(e,this,i),nf(this),this.C(2)),this.tf=t,t!==null&&this.Pb(t.isVisible()),this.Xf=null,this.Ua();var n=this.diagram;n!==null&&n.Z&&n.partManager.setToNodeForLink(this,t,e);var r=this.toPort,o=this.toPortChanged;if(o!==null){var s=!0;n!==null&&(s=n.Z,n.Z=!0),o(this,i,r),n!==null&&(n.Z=s)}t!==null&&(this.Xe!==t&&Vp(t,this,r),ef(this),this.C(1)),this.g("toNode",e,t),ch(this)}}},toPortId:{get:function(){return this.uf},set:function(t){var e=this.uf;if(e!==t){var i=this.toPort;i!==null&&Ki(i),nf(this),this.uf=t;var n=this.toPort;n!==null&&Ki(n);var r=this.diagram;if(r!==null){var o=this.data,s=r.model;o!==null&&s.pj()&&s.Hw(o,t)}i!==n&&(this.Xf=null,this.Ua(),o=this.toPortChanged,o!==null&&(s=!0,r!==null&&(s=r.Z,r.Z=!0),o(this,i,n),r!==null&&(r.Z=s))),ef(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.tf;return t===null?null:t.It(this.uf)}},toPortChanged:{get:function(){return this.iq},set:function(t){var e=this.iq;e!==t&&(this.iq=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return this.O!==null?this.O.bh:ni},set:function(t){this.Lc();var e=this.O.bh;e.w(t)||(t=t.G(),this.O.bh=t,this.g("fromSpot",e,t),(e.Pc()||t.Pc())&&this.fromNode!==null&&Ki(this.fromPort),this.Ua())}},fromEndSegmentLength:{get:function(){return this.O!==null?this.O.$g:NaN},set:function(t){this.Lc();var e=this.O.$g;e!==t&&(0>t&&lt(t,">= 0",z,"fromEndSegmentLength"),this.O.$g=t,this.g("fromEndSegmentLength",e,t),this.Ua())}},fromShortLength:{get:function(){return this.O!==null?this.O.ah:NaN},set:function(t){this.Lc();var e=this.O.ah;e!==t&&(this.O.ah=t,this.dc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return this.O!==null?this.O.Bh:ni},set:function(t){this.Lc();var e=this.O.Bh;e.w(t)||(t=t.G(),this.O.Bh=t,this.g("toSpot",e,t),(e.Pc()||t.Pc())&&this.toNode!==null&&Ki(this.toPort),this.Ua())}},toEndSegmentLength:{get:function(){return this.O!==null?this.O.zh:NaN},set:function(t){this.Lc();var e=this.O.zh;e!==t&&(0>t&&lt(t,">= 0",z,"toEndSegmentLength"),this.O.zh=t,this.g("toEndSegmentLength",e,t),this.Ua())}},toShortLength:{get:function(){return this.O!==null?this.O.Ah:NaN},set:function(t){this.Lc();var e=this.O.Ah;e!==t&&(this.O.Ah=t,this.dc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return this.od===null?!1:0<this.od.count}},labelNodes:{get:function(){return this.od===null?Bn:this.od.iterator}},relinkableFrom:{get:function(){return(this.Fa&1)!=0},set:function(t){var e=(this.Fa&1)!=0;e!==t&&(this.Fa^=1,this.g("relinkableFrom",e,t),this.Mb())}},relinkableTo:{get:function(){return(this.Fa&2)!=0},set:function(t){var e=(this.Fa&2)!=0;e!==t&&(this.Fa^=2,this.g("relinkableTo",e,t),this.Mb())}},resegmentable:{get:function(){return(this.Fa&4)!=0},set:function(t){var e=(this.Fa&4)!=0;e!==t&&(this.Fa^=4,this.g("resegmentable",e,t),this.Mb())}},isTreeLink:{get:function(){return(this.Fa&8)!=0},set:function(t){var e=(this.Fa&8)!=0;e!==t&&(this.Fa^=8,this.g("isTreeLink",e,t),this.fromNode!==null&&tf(this.fromNode),this.toNode!==null&&tf(this.toNode))}},path:{get:function(){var t=this.rb();return t instanceof gt?t:null}},routeBounds:{get:function(){this.wj();var t=this.Wl,e=Infinity,i=Infinity,n=this.pointsCount;if(n===0)t.h(NaN,NaN,0,0);else{if(n===1)n=this.i(0),e=Math.min(n.x,e),i=Math.min(n.y,i),t.h(n.x,n.y,0,0);else if(n===2){n=this.i(0);var r=this.i(1);e=Math.min(n.x,r.x),i=Math.min(n.y,r.y),t.h(n.x,n.y,0,0),t.Oe(r)}else if(this.computeCurve()===rn&&3<=n&&!this.isOrthogonal)if(r=this.i(0),e=r.x,i=r.y,t.h(e,i,0,0),n===3){n=this.i(1),e=Math.min(n.x,e),i=Math.min(n.y,i);var o=this.i(2);e=Math.min(o.x,e),i=Math.min(o.y,i),j.sm(r.x,r.y,n.x,n.y,n.x,n.y,o.x,o.y,.5,t)}else for(o=3;o<n;o+=3){var s=this.i(o-2);o+3>=n&&(o=n-1);var u=this.i(o-1),a=this.i(o);j.sm(r.x,r.y,s.x,s.y,u.x,u.y,a.x,a.y,.5,t),e=Math.min(a.x,e),i=Math.min(a.y,i),r=a}else for(r=this.i(0),o=this.i(1),e=Math.min(r.x,o.x),i=Math.min(r.y,o.y),t.h(r.x,r.y,0,0),t.Oe(o),r=2;r<n;r++)o=this.i(r),e=Math.min(o.x,e),i=Math.min(o.y,i),t.Oe(o);this.tv.h(e-t.x,i-t.y)}return t}},midPoint:{get:function(){return this.wj(),this.computeMidPoint(new k)}},midAngle:{get:function(){return this.wj(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(this.$r===null){this.kd||Up(this);for(var t=this.$r=[],e=this.pointsCount,i=0;i<e-1;i++){var n=this.i(i),r=this.i(i+1);j.aa(n.x,r.x)?(n=r.y-n.y,0>n&&(n=-n)):j.aa(n.y,r.y)?(n=r.x-n.x,0>n&&(n=-n)):n=Math.sqrt(n.Ge(r)),t.push(n)}}return this.$r}},flattenedTotalLength:{get:function(){var t=this.Nu;if(isNaN(t)){for(var e=this.flattenedLengths,i=e.length,n=t=0;n<i;n++)t+=e[n];this.Nu=t}return t}},points:{get:function(){return this.Bb},set:function(t){var e=this.Bb;if(e!==t){var i=null;if(Array.isArray(t)){var n=t.length%2==0;if(n){for(var r=0;r<t.length;r++)if(typeof t[r]!="number"||isNaN(t[r])){n=!1;break}}if(n)for(i=new J,n=0;n<t.length/2;n++)r=new k(t[2*n],t[2*n+1]).freeze(),i.add(r);else{for(n=!0,r=0;r<t.length;r++){var o=t[r];if(!at(o)||typeof o.x!="number"||isNaN(o.x)||typeof o.y!="number"||isNaN(o.y)){n=!1;break}}if(n)for(i=new J,n=0;n<t.length;n++)r=t[n],i.add(new k(r.x,r.y).freeze())}}else if(t instanceof J)for(i=t.copy(),t=i.iterator;t.next();)t.value.freeze();else E("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.Bb=i,this.dc(),Up(this),t=this.diagram,t!==null&&(t.oj||t.undoManager.isUndoingRedoing||t.Wt.add(this),t.animationManager.sc&&(this.sg=i)),this.g("points",e,i)}}},pointsCount:{get:function(){return this.Bb.count}},kd:{get:function(){return(this.Fa&16)!=0},set:function(t){(this.Fa&16)!=0!==t&&(this.Fa^=16)}},suspendsRouting:{get:function(){return(this.Fa&32)!=0},set:function(t){(this.Fa&32)!=0!==t&&(this.Fa^=32)}},At:{get:function(){return(this.Fa&64)!=0},set:function(t){(this.Fa&64)!=0!==t&&(this.Fa^=64)}},defaultFromPoint:{get:function(){return this.v},set:function(t){this.v=t.copy()}},defaultToPoint:{get:function(){return this.I},set:function(t){this.I=t.copy()}},isOrthogonal:{get:function(){return(this.ak.value&2)==2}},isAvoiding:{get:function(){return(this.ak.value&4)==4}},Xm:{get:function(){return(this.Fa&128)!=0},set:function(t){(this.Fa&128)!=0!==t&&(this.Fa^=128)}},geometry:{get:function(){return this.Xm||(this.wj(),this.na=this.makeGeometry()),this.na}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!ph(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return t===0?0:2>=t?t-1:this.isOrthogonal||!ph(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.Wk},set:function(t){var e=this.Wk;e!==t&&(this.Wk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.En},set:function(t){var e=this.En;e!==t&&(this.En=t,this.dc(),this.g("corner",e,t))}},curve:{get:function(){return this.Gn},set:function(t){var e=this.Gn;e!==t&&(this.Gn=t,this.Ua(),this.dc(),b0(this,e===zo||e===dh||t===zo||t===dh),this.g("curve",e,t))}},curviness:{get:function(){return this.Hn},set:function(t){var e=this.Hn;e!==t&&(this.Hn=t,this.Ua(),this.dc(),this.g("curviness",e,t))}},routing:{get:function(){return this.ak},set:function(t){var e=this.ak;e!==t&&(this.ak=t,this.Xf=null,this.Ua(),b0(this,(e.value&2)==2||(t.value&2)==2),this.g("routing",e,t))}},smoothness:{get:function(){return this.Vp},set:function(t){var e=this.Vp;e!==t&&(this.Vp=t,this.dc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(t!==null&&t.model.pj())return t.model.Wb(this.data)}}}),z.prototype.invalidateOtherJumpOvers=z.prototype.Lq,z.prototype.findClosestSegment=z.prototype.Sz,z.prototype.updateRoute=z.prototype.wj,z.prototype.invalidateRoute=z.prototype.Ua,z.prototype.rollbackRoute=z.prototype.yw,z.prototype.commitRoute=z.prototype.zf,z.prototype.startRoute=z.prototype.Sh,z.prototype.clearPoints=z.prototype.mk,z.prototype.removePoint=z.prototype.tw,z.prototype.addPointAt=z.prototype.xf,z.prototype.addPoint=z.prototype.$d,z.prototype.insertPointAt=z.prototype.m,z.prototype.insertPoint=z.prototype.wA,z.prototype.setPointAt=z.prototype.L,z.prototype.setPoint=z.prototype.Rc,z.prototype.getPoint=z.prototype.i,z.prototype.getOtherPort=z.prototype.nA,z.prototype.getOtherNode=z.prototype.Gq;var Rl=null,Fl=null,tm=new K(z,"Normal",1),ST=new K(z,"Orthogonal",2),kT=new K(z,"AvoidsNodes",6),aS=new K(z,"AvoidsNodesStraight",7),ji=new K(z,"None",0),rn=new K(z,"Bezier",9),zo=new K(z,"JumpGap",10),dh=new K(z,"JumpOver",11),rf=new K(z,"End",17),Hp=new K(z,"Scale",18),Wp=new K(z,"Stretch",19),of=new K(z,"OrientAlong",21),sf=new K(z,"OrientPlus90",22),lf=new K(z,"OrientMinus90",23),em=new K(z,"OrientOpposite",24),Kp=new K(z,"OrientUpright",25),uf=new K(z,"OrientPlus90Upright",26),hf=new K(z,"OrientMinus90Upright",27),_p=new K(z,"OrientUpright45",28),fS=16,cS=14,af=8;z.className="Link",z.Normal=tm,z.Orthogonal=ST,z.AvoidsNodes=kT,z.AvoidsNodesStraight=aS,z.None=ji,z.Bezier=rn,z.JumpGap=zo,z.JumpOver=dh,z.End=rf,z.Scale=Hp,z.Stretch=Wp,z.OrientAlong=of,z.OrientPlus90=sf,z.OrientMinus90=lf,z.OrientOpposite=em,z.OrientUpright=Kp,z.OrientPlus90Upright=uf,z.OrientMinus90Upright=hf,z.OrientUpright45=_p,z.EndSegmentStep=8,z.CurvinessStart=fS,z.SpacingMin=cS,z.OrthoShortCut=af,z.AvoidanceCell=8,z.AvoidanceLimit=999;function $p(t,e,i,n){Oe(this),this.qe=this.hs=!1,this.Zt=t,this.Oy=e,this.jw=i,this.Py=n,this.links=[]}$p.prototype.Am=function(){if(!this.hs){var t=this.links;0<t.length&&(t=t[0].diagram,t!==null&&(t.Pu.add(this),this.qe=t.undoManager.isUndoingRedoing))}this.hs=!0},$p.prototype.Vw=function(){if(this.hs){this.hs=!1;var t=this.links;if(0<t.length){var e=t[0],i=e.diagram;i=i===null||i.oj&&!this.qe,this.qe=!1,e.arrangeBundledLinks(t,i),t.length===1&&(e.Of=null,t.length=0)}t.length===0&&(t=this.Zt,this!==null&&t.Te!==null&&t.Te.remove(this),t=this.jw,this!==null&&t.Te!==null&&t.Te.remove(this))}},$p.className="LinkBundle";function ff(){Oe(this),this.Xy=this.group=null,this.Qt=!0,this.abort=!1,this.Ad=this.zd=1,this.Mo=this.Lo=-1,this.gc=this.fc=8,this.Rb=null,this.Zi=this.Yi=0,this.Yy=11,this.Iy=124}ff.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,i=t.x+t.width,n=t.y+t.height;if(this.zd=Math.floor((t.x-this.fc)/this.fc)*this.fc,this.Ad=Math.floor((e-this.gc)/this.gc)*this.gc,this.Lo=Math.ceil((i+2*this.fc)/this.fc)*this.fc,this.Mo=Math.ceil((n+2*this.gc)/this.gc)*this.gc,t=1+(Math.ceil((this.Lo-this.zd)/this.fc)|0),e=1+(Math.ceil((this.Mo-this.Ad)/this.gc)|0),this.Rb===null||this.Yi<t-1||this.Zi<e-1){for(i=[],n=0;n<=t;n++)i[n]=new Uint32Array(e);this.Rb=i,this.Yi=t-1,this.Zi=e-1}if(t=im,this.Rb!==null)for(e=0;e<=this.Yi;e++)if(i=this.Rb[e],i.fill)i.fill(t);else for(n=0;n<=this.Zi;n++)i[n]=t}};function gh(t,e,i){return t.zd<=e&&e<=t.Lo&&t.Ad<=i&&i<=t.Mo}function Vl(t,e,i){return gh(t,e,i)?(e-=t.zd,e/=t.fc,i-=t.Ad,i/=t.gc,t.Rb[e|0][i|0]):im}function pS(t){if(t.Rb!==null)for(var e=0;e<=t.Yi;e++)for(var i=t.Rb[e],n=0;n<=t.Zi;n++)i[n]>=zl&&(i[n]=im)}ff.prototype.Ak=function(t,e,i,n){if(t>this.Lo||t+i<this.zd||e>this.Mo||e+n<this.Ad)return!0;t=(t-this.zd)/this.fc|0,e=(e-this.Ad)/this.gc|0,i=Math.max(0,i)/this.fc+1|0;var r=Math.max(0,n)/this.gc+1|0;if(0>t&&(i+=t,t=0),0>e&&(r+=e,e=0),0>i||0>r)return!0;for(n=Math.min(t+i-1,this.Yi)|0,i=Math.min(e+r-1,this.Zi)|0;t<=n;t++){r=this.Rb[t];for(var o=e;o<=i;o++)if(r[o]===Uo)return!1}return!0};function Or(t,e,i,n,r,o,s,u,a){if(!(e<o||e>s||i<u||i>a)){var f=e|0,c=i|0,d=t.Rb[f][c];if(d>=zl&&d<yh)for(r?c+=n:f+=n,d+=1;o<=f&&f<=s&&u<=c&&c<=a&&!(d>=t.Rb[f][c]);)t.Rb[f][c]=d,d+=1,r?c+=n:f+=n;if(f=r?c:f,r)if(0<n)for(i+=n;i<f;i+=n)Or(t,e,i,1,!r,o,s,u,a),Or(t,e,i,-1,!r,o,s,u,a);else for(i+=n;i>f;i+=n)Or(t,e,i,1,!r,o,s,u,a),Or(t,e,i,-1,!r,o,s,u,a);else if(0<n)for(e+=n;e<f;e+=n)Or(t,e,i,1,!r,o,s,u,a),Or(t,e,i,-1,!r,o,s,u,a);else for(e+=n;e>f;e+=n)Or(t,e,i,1,!r,o,s,u,a),Or(t,e,i,-1,!r,o,s,u,a)}}function Zp(t,e,i,n,r,o,s,u,a){e|=0,i|=0;var f=Uo,c=zl;for(t.Rb[e][i]=c;f===Uo&&e>o&&e<s&&i>u&&i<a;)c+=1,t.Rb[e][i]=c,r?i+=n:e+=n,f=t.Rb[e][i]}function Jp(t,e,i,n,r,o,s,u,a){e|=0,i|=0;var f=Uo,c=yh;for(t.Rb[e][i]=c;f===Uo&&e>o&&e<s&&i>u&&i<a;)t.Rb[e][i]=c,r?i+=n:e+=n,f=t.Rb[e][i]}function dS(t,e,i,n,r,o,s){if(t.Rb!==null){t.abort=!1;var u=e.x,a=e.y;if(gh(t,u,a)){u-=t.zd,u/=t.fc,a-=t.Ad,a/=t.gc;var f=n.x,c=n.y;if(gh(t,f,c))if(f-=t.zd,f/=t.fc,c-=t.Ad,c/=t.gc,1>=Math.abs(u-f)&&1>=Math.abs(a-c))t.abort=!0;else{var d=o.x;n=o.y,e=o.x+o.width;var g=o.y+o.height;d-=t.zd,d/=t.fc,n-=t.Ad,n/=t.gc,e-=t.zd,e/=t.fc,g-=t.Ad,g/=t.gc,o=Math.max(0,Math.min(t.Yi,d|0)),e=Math.min(t.Yi,Math.max(0,e|0)),d=Math.max(0,Math.min(t.Zi,n|0)),g=Math.min(t.Zi,Math.max(0,g|0)),n=t.Rb,u|=0,a|=0,f|=0,c|=0;var m=i===0||i===90?1:-1;if(i=i===90||i===270,n[u][a]===Uo?(Zp(t,u,a,m,i,o,e,d,g),Zp(t,u,a,1,!i,o,e,d,g),Zp(t,u,a,-1,!i,o,e,d,g)):Zp(t,u,a,m,i,u,a,u,a),n[f][c]===Uo?(Jp(t,f,c,r===0||r===90?1:-1,r===90||r===270,o,e,d,g),Jp(t,f,c,1,!(r===90||r===270),o,e,d,g),Jp(t,f,c,-1,!(r===90||r===270),o,e,d,g)):Jp(t,f,c,m,i,f,c,f,c),i=Dt(),s&&gS(t,f,c,r,u,a,i))for((i[0]!==f||i[1]!==c)&&(i.unshift(c),i.unshift(f)),(i[i.length-2]!==u||i[i.length-1]!==a)&&(i.push(u),i.push(a)),t=zl,r=i[i.length-2],s=i[i.length-1],n[r][s]=t++,o=i.length-4;0<=o;o-=2)for(r=i[o+2],s=i[o+3],e=i[o],f=i[o+1];e>r?r++:e<r?r--:f>s?s++:f<s&&s--,n[r][s]=t++,r!==e||s!==f;);else Or(t,u,a,1,!1,o,e,d,g),Or(t,u,a,-1,!1,o,e,d,g),Or(t,u,a,1,!0,o,e,d,g),Or(t,u,a,-1,!0,o,e,d,g);Xt(i)}}}}function gS(t,e,i,n,r,o,s){for(var u=t.Rb,a=e,f=i;;){if(a===r&&f===o)return!0;var c=a,d=f;if(n===0)if(c<r)c++;else break;else if(n===90)if(d<o)d++;else break;else if(n===180)if(c>r)c--;else break;else if(d>o)d--;else break;var g=u[c][d];if(g===0||g===nm)break;a=c,f=d}for(;;){if(c=n,d=a,g=f,n===0?g<o?(c=90,g++):g>o&&(c=270,g--):n===90?d<r?(c=0,d++):d>r&&(c=180,d--):n===180?g<o?(c=90,g++):g>o&&(c=270,g--):d<r?(c=0,d++):d>r&&(c=180,d--),d=u[d][g],c!==n&&d!==0&&d!==nm){if(s.push(a),s.push(f),gS(t,a,f,c,r,o,s))return!0;s.pop(),s.pop()}if(u[a][f]=nm,n===0){if(a===e)return!1;a--}else if(n===90){if(f===i)return!1;f--}else if(n===180){if(a===e)return!1;a++}else{if(f===i)return!1;f++}}}X.Object.defineProperties(ff.prototype,{bounds:{get:function(){return new I(this.zd,this.Ad,this.Lo-this.zd,this.Mo-this.Ad)}},vq:{get:function(){return this.fc},set:function(t){0<t&&t!==this.fc&&(this.fc=t,this.initialize(this.bounds))}},uq:{get:function(){return this.gc},set:function(t){0<t&&t!==this.gc&&(this.gc=t,this.initialize(this.bounds))}}});var Uo=0,zl=1,yh=999999,im=yh+1,nm=yh+2;ff.className="PositionArray";function Ul(){Oe(this),this.port=this.node=null,this.be=[],this.Qq=!1}Ul.prototype.toString=function(){for(var t=this.be,e=this.node.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var n=t[i];n!==null&&(e+=`
  `+n.toString())}return e};function PT(t,e,i,n){switch(e=e.offsetY,e){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<i?270:90;case 6:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return i>t&&i<=180+t?180:270;case 5:return i>180-t&&i<=360-t?270:0;case 12:return i>t&&i<=180+t?90:0;case 10:return i>180-t&&i<=360-t?180:90;case 7:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case 13:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case 14:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case 11:return i>180-t&&i<=180+t?180:i>180+t?270:90}return n&&e!==15&&(i-=15,0>i&&(i+=360)),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}Ul.prototype.Am=function(){this.be.length=0};function yS(t,e){var i=t.be;if(i.length===0){t:if(!t.Qq){i=t.Qq,t.Qq=!0;var n=null,r=t.node,o=r instanceof dt?r:null;if(o===null||o.isSubGraphExpanded)var s=r.isTreeExpanded?r.findLinksConnected(t.port.portId):r.qy();else{if(!o.actualBounds.u()){t.Qq=i;break t}n=o,s=n.Pv()}o=t.be.length=0;var u=t.port.da(mi,k.alloc()),a=t.port.da(Tr,k.alloc());for(r=I.allocAt(u.x,u.y,0,0),r.Oe(a),k.free(u),k.free(a),u=k.allocAt(r.x+r.width/2,r.y+r.height/2),a=t.port.kj(),s=s.iterator;s.next();){var f=s.value;if(f.isVisible()&&f.fromPort!==f.toPort){var c=f.fromPort===t.port||f.fromNode!==null&&f.fromNode.Hd(n),d=f.computeSpot(c,t.port);if(d.Pc()&&(c=c?f.toPort:f.fromPort,c!==null)){var g=c.part;if(g!==null){var m=g.findVisibleNode();m!==null&&m!==g&&(g=m,c=g.port),c=f.computeOtherPoint(g,c),g=u.Sa(c),g-=a,0>g?g+=360:360<=g&&(g-=360),d=PT(r,d,g,f.isOrthogonal),d===0?(d=4,180<g&&(g-=360)):d===90?(d=8,270<g&&(g-=360)):d===180?d=2:(d=1,90>g&&(g+=360)),m=t.be[o],m===void 0?(m=new rm(f,g,d),t.be[o]=m):(m.link=f,m.angle=g,m.Bc=d),m.mw.set(c),o++}}}}for(k.free(u),t.be.sort(Ul.prototype.l),a=t.be.length,n=-1,o=u=0;o<a;o++)s=t.be[o],s!==void 0&&(s.Bc!==n&&(n=s.Bc,u=0),s.Hq=u,u++);for(n=-1,u=0,o=a-1;0<=o;o--)a=t.be[o],a!==void 0&&(a.Bc!==n&&(n=a.Bc,u=a.Hq+1),a.tm=u);if(o=t.be,d=t.port,n=t.node.portSpreading,u=k.alloc(),a=k.alloc(),s=k.alloc(),f=k.alloc(),d.da(mi,u),d.da(Cu,a),d.da(Tr,s),d.da(Lu,f),m=g=c=d=0,n===K0)for(var y=0;y<o.length;y++){var x=o[y];if(x!==null){var M=x.link.computeThickness();switch(x.Bc){case 8:g+=M;break;case 2:m+=M;break;case 1:d+=M;break;default:case 4:c+=M}}}var S=y=0,N=1,T=x=0;for(M=0;M<o.length;M++){var C=o[M];if(C!==null){if(y!==C.Bc){switch(y=C.Bc,y){case 8:var D=s;S=f;break;case 2:D=f,S=u;break;case 1:D=u,S=a;break;default:case 4:D=a,S=s}switch(x=S.x-D.x,T=S.y-D.y,y){case 8:g>Math.abs(x)?(N=Math.abs(x)/g,g=Math.abs(x)):N=1;break;case 2:m>Math.abs(T)?(N=Math.abs(T)/m,m=Math.abs(T)):N=1;break;case 1:d>Math.abs(x)?(N=Math.abs(x)/d,d=Math.abs(x)):N=1;break;default:case 4:c>Math.abs(T)?(N=Math.abs(T)/c,c=Math.abs(T)):N=1}S=0}var F=C.Oq;if(n===K0){switch(C=C.link.computeThickness(),C*=N,F.set(D),y){case 8:F.x=D.x+x/2+g/2-S-C/2;break;case 2:F.y=D.y+T/2+m/2-S-C/2;break;case 1:F.x=D.x+x/2-d/2+S+C/2;break;default:case 4:F.y=D.y+T/2-c/2+S+C/2}S+=C}else{var $=.5;n===W0&&($=(C.Hq+1)/(C.tm+1)),F.x=D.x+x*$,F.y=D.y+T*$}}}for(k.free(u),k.free(a),k.free(s),k.free(f),D=t.be,o=0;o<D.length;o++)n=D[o],n!==null&&(n.Nv=t.computeEndSegmentLength(n));t.Qq=i,I.free(r)}i=t.be}for(t=0;t<i.length;t++)if(r=i[t],r!==null&&r.link===e)return r;return null}Ul.prototype.l=function(t,e){return t===e?0:t===null?-1:e===null?1:t.Bc<e.Bc?-1:t.Bc>e.Bc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},Ul.prototype.computeEndSegmentLength=function(t){var e=t.link,i=e.computeEndSegmentLength(this.node,this.port,qe,e.fromPort===this.port),n=t.Hq;if(0>n)return i;var r=t.tm;if(1>=r||!e.isOrthogonal)return i;e=t.mw;var o=t.Oq;return(t.Bc===2||t.Bc===8)&&(n=r-1-n),((t=t.Bc===2||t.Bc===4)?e.y<o.y:e.x<o.x)?i+8*n:(t?e.y===o.y:e.x===o.x)?i:i+8*(r-1-n)},Ul.className="Knot";function rm(t,e,i){this.link=t,this.angle=e,this.Bc=i,this.mw=new k,this.tm=this.Hq=0,this.Oq=new k,this.Nv=0}rm.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Bc.toString()+":"+this.Hq.toString()+"/"+this.tm.toString()+" "+this.Oq.toString()+" "+this.Nv.toString()+" "+this.mw.toString()},rm.className="LinkInfo";function cf(){this.Bh=this.bh=ni,this.Ah=this.ah=this.zh=this.$g=NaN,this.gq=this.$n=null,this.hq=this.ao=Infinity}cf.prototype.copy=function(){var t=new cf;return t.bh=this.bh.G(),t.Bh=this.Bh.G(),t.$g=this.$g,t.zh=this.zh,t.ah=this.ah,t.Ah=this.Ah,t.$n=this.$n,t.gq=this.gq,t.ao=this.ao,t.hq=this.hq,t},cf.className="LinkSettings";function It(){Oe(this),this.v=this.B=null,this.xi=this.ro=!0,this.wo=!1,this.kn=new k(0,0).freeze(),this.to=!0,this.sn=this.so=null,this.vo=!1,this.l=null,this.I=0,this.No=this.mq=null,this.ut=!1,this.zg=this.ck=null,this.jt=!1}It.prototype.cloneProtected=function(t){t.ro=this.ro,t.xi=this.xi,t.wo=this.wo,t.kn.assign(this.kn),t.to=this.to,t.so=this.so,t.sn=this.sn,t.vo=!0,t.No=this.No,t.mq=this.mq},It.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},It.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},It.prototype.deserializeLayoutProperties=function(t){t!==null&&(this.arrangementOrigin=new k(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},It.prototype.jb=function(){},It.prototype.toString=function(){var t=Ee(this.constructor);return t+="(",this.group!==null&&(t+=" in "+this.group),this.diagram!==null&&(t+=" for "+this.diagram),t+")"},It.prototype.C=function(){if(this.isValidLayout){var t=this.diagram;if(t!==null&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.Sc(),this.isOngoing&&t.oj||this.isInitial&&!t.oj)&&(this.isValidLayout=!1,t.Eb())}}},It.prototype.createNetwork=function(){return new $t(this)},It.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof O?(e.Bg(t.nodes,!0),e.Bg(t.links,!0)):t instanceof dt?e.Bg(t.memberParts):e.Bg(t.iterator),e},It.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(t===null&&this.network!==null)for(var e=this.network.vertexes.iterator;e.next();){var i=e.value.node;if(i!==null&&(t=i.diagram,t!==null))break}try{t!==null&&t.xa("Layout"),this.commitLayout()}finally{t!==null&&t.Wa("Layout")}}},It.prototype.commitLayout=function(){if(this.network!==null){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},It.prototype.doLayout=function(t){var e=new W;t instanceof O?(ms(this,e,t.nodes,!0,this.Qh,!0,!1,!0),ms(this,e,t.parts,!0,this.Qh,!0,!1,!0)):t instanceof dt?ms(this,e,t.memberParts,!1,this.Qh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(t=this.diagram,t!==null&&t.xa("Layout"),this.doMinimalNoNetworkLayout(e),t!==null&&t.Wa("Layout")),this.isValidLayout=!0},It.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var i=this.arrangementOrigin.x,n=i,r=this.arrangementOrigin.y,o=0,s=0;for(t=t.iterator;t.next();){var u=t.value;pf(u);var a=u.measuredBounds,f=a.width;a=a.height,u.moveTo(n,r),u instanceof dt&&(u.Qh=!1),n+=Math.max(f,50)+20,s=Math.max(s,Math.max(a,50)),o>=e-1?(o=0,n=i,r+=s+20,s=0):o++}},It.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,i=e,n=this.arrangementOrigin.y,r=0,o=0,s=this.network.vertexes.iterator;s.next();){var u=s.value.node;if(!(u===null||u instanceof z)&&(pf(u),this.Qh(u))){var a=u.measuredBounds,f=a.width;a=a.height,u.moveTo(i,n),u instanceof dt&&(u.Qh=!1),i+=Math.max(f,50)+20,o=Math.max(o,Math.max(a,50)),r>=t-1?(r=0,i=e,n+=o+20,o=0):r++}}},It.prototype.Qh=function(t){return!!(!t.location.u()||t instanceof dt&&t.Qh)};function ms(t,e,i,n,r,o,s,u){for(i=i.iterator;i.next();){var a=i.value;n&&!a.isTopLevel||r!==null&&!r(a)||!a.canLayout()||(o&&a instanceof Z?a.isLinkLabel||(a instanceof dt&&a.layout===null?ms(t,e,a.memberParts,!1,r,o,s,u):(pf(a),e.add(a))):s&&a instanceof z?e.add(a):!u||!a.Oc()||a instanceof Z||(pf(a),e.add(a)))}}function pf(t){var e=t.actualBounds;(e.width===0||e.height===0||isNaN(e.width)||isNaN(e.height))&&t.Ta()}It.prototype.mj=function(t,e){var i=this.boundsComputation;return i!==null?(e||(e=new I),i(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},It.prototype.by=function(t){var e=new W;return t instanceof O?(ms(this,e,t.nodes,!0,null,!0,!0,!0),ms(this,e,t.links,!0,null,!0,!0,!0),ms(this,e,t.parts,!0,null,!0,!0,!0)):t instanceof dt?ms(this,e,t.memberParts,!1,null,!0,!0,!0):ms(this,e,t.iterator,!1,null,!0,!0,!0),e},It.prototype.initialOrigin=function(t){var e=this.group;if(e!==null){var i=e.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),e=e.placeholder,e!==null&&(i=e.da(mi),(isNaN(i.x)||isNaN(i.y))&&i.set(t),t=e.padding,i.x+=t.left,i.y+=t.top),i}return t},It.prototype.mayUseWorker=function(){return this.mayUseWorkerFunction?this.mayUseWorkerFunction(this):!1},It.prototype.workerLayout=function(){return!1};function Qp(t,e){if(t.workerStateChanged!==null){var i={key:t.group?t.group.key:null};e!==void 0&&(i.time=e),t.ck!==null&&(i.running=mS(t.ck)),t.zg!==null&&(i.waiting=mS(t.zg)),t.workerStateChanged(i,t)}}function mS(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}It.prototype.zz=function(){var t=df(this.constructor);t&&(t.Pe!==null&&t.Pe.terminate(),t.Pe=null,t.Dm.iteratorValues.each(function(e){e.ut=!1,e.ck=null,e.zg=null,e.jt=!1,Qp(e)}),t.Dm.clear())};function qp(t,e){var i=df(t);if(i){if(e)for(var n in e)i[n]=e[n]}else throw Error("Unknown Layout class: "+t)}function df(t){var e=null;if(typeof t=="function"){if(e=mh.get(t),!e){var i=Ee(t);e=mh.get(i),e||(e=new NT,e.Jv=t,e.name=i,e.l=t.name,e.Dy=MS,mh.set(i,e),mh.set(t,e),mh.set(t.name,e))}}else typeof t=="string"&&(e=mh.get(t));return e}It.prototype.Uw=function(){if(typeof Worker=="undefined"||!SS||typeof self=="undefined"||typeof self.DedicatedWorkerGlobalScope!="undefined")return!1;if(!this.mayUseWorker())return this.ut&&(this.jt=!0,this.zg=this.ck=null,Qp(this)),!1;var t=df(this.constructor);return t===null?!1:(t.Pe===null&&(t.Pe=new Worker(SS),t.Pe.onerror=function(e){e.preventDefault(),wt("Worker Error at: "+e.filename+" "+e.lineno+" "+e.colno+`
  `+e.message)},t.Pe.l=function(e){wt("Worker serialization error: "+e)},t.Pe.onmessage=function(e){var i=e.data;if(i._GoJS==="_GoJS"){if(i.version)wt("GoJS v"+O.version+"  Worker v"+i.version);else if(e=t.Dm.get(i.id)){if(t.Dm.remove(i.id),e.ut=!1,e.ck=null,e.jt)e.jt=!1,e.zg=null;else{var n=wS(e,i,!1);e.network=n,e.updateParts(),e.network=null,e.isValidLayout=!0}if(Qp(e,i.time),i=e.zg,i!==null)e.zg=null;else for(n=t.Dm.iteratorValues;n.next();){var r=n.value;if(i=r.zg,i!==null){r.zg=null;break}}i!==null&&vS(e,i)}}},t.Pe.postMessage({_GoJS:"_GoJS",url:t.Dy}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Pe.postMessage({_GoJS:"_GoJS",url:e})}),t.Pe.postMessage({_GoJS:"_GoJS",version:-1})),this.ck!==null?this.zg=this.network:vS(this,this.network),Qp(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)};function vS(t,e){t.ut=!0;var i=df(t.constructor),n=xS(t,e,!0);n._GoJS="_GoJS",i.Pe.postMessage(n),i.Dm.set(Ne(t),t),t.ck=e}function xS(t,e,i){t.onNetworkSerialization(1,i,e,null);var n={};t.serializeLayoutProperties(n,i);var r=[];e.vertexes.each(function(s){var u={};s.serializeVertexProperties(u,i),r.push(u)});var o=[];return e.edges.each(function(s){var u={};s.serializeEdgeProperties(u,i),o.push(u)}),n={id:i?Ne(t):t.id,layout:Ee(t.constructor),p:n,gB:r,Qz:o},t.onNetworkSerialization(2,i,e,n),n}function wS(t,e,i){i&&(t.id=e.id);var n=t.diagram,r=t.createNetwork();t.onNetworkSerialization(3,i,r,e);var o=e.gB,s=new ct;o&&o.forEach(function(f){var c=null;f.key===null||n===null||i||(c=n.Db(f.key)),c!==null?c=r.kk(c):(c=r.createVertex(),f.key!==null&&(c.data=c),r.Cg(c)),i&&c.data!==null&&(c.data.Bi=f.key),s.set(f.id,c)});var u=e.Qz,a=new ct;return u&&u.forEach(function(f){var c=null;f.key===null||n===null||i||(c=n.findLinkForKey(f.key)),c!==null?c=r.Wx(c):(c=r.createEdge(),f.key!==null&&(c.data=c),r.qm(c)),i&&c.data!==null&&(c.data.Bi=f.key),a.set(f.id,c)}),t.deserializeLayoutProperties(e.p,s,a,i),o&&o.forEach(function(f){var c=s.get(f.id);c&&c.yq(f,s,a,i)}),u&&u.forEach(function(f){var c=a.get(f.id);c&&c.deserializeEdgeProperties(f,s,a,i)}),t.onNetworkSerialization(4,i,r,e),r}It.prototype.onNetworkSerialization=function(){},X.Object.defineProperties(It.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},group:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t,t!==null&&(this.B=t.diagram))}},isOngoing:{get:function(){return this.ro},set:function(t){this.ro!==t&&(this.ro=t)}},isInitial:{get:function(){return this.xi},set:function(t){this.xi=t,t||(this.vo=!0)}},isViewportSized:{get:function(){return this.wo},set:function(t){this.wo!==t&&(this.wo=t)&&this.C()}},isRouting:{get:function(){return this.to},set:function(t){this.to!==t&&(this.to=t)}},isRealtime:{get:function(){return this.so},set:function(t){this.so!==t&&(this.so=t)}},isValidLayout:{get:function(){return this.vo},set:function(t){this.vo!==t&&(this.vo=t,t||(t=this.diagram,t!==null&&(t.Og=!0)))}},network:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,t!==null&&(t.layout=this))}},boundsComputation:{get:function(){return this.sn},set:function(t){this.sn!==t&&(this.sn=t,this.C())}},arrangementOrigin:{get:function(){return this.kn},set:function(t){this.kn.w(t)||(this.kn.assign(t),this.C())}},id:{get:function(){return this.I},set:function(t){this.I=t}},mayUseWorkerFunction:{get:function(){return this.No},set:function(t){this.No!==t&&(this.No=t)}},workerStateChanged:{get:function(){return this.mq},set:function(t){this.mq!==t&&(this.mq=t)}}}),It.prototype.useWorker=It.prototype.Uw,It.declareWorkerLayout=qp,It.prototype.cancelWorker=It.prototype.zz,It.prototype.collectParts=It.prototype.by,It.prototype.getLayoutBounds=It.prototype.mj,It.prototype.invalidateLayout=It.prototype.C;var mh=new ct,MS=typeof Y.document=="object"&&Y.document.currentScript?Y.document.currentScript.src:"",SS=typeof URL!="undefined"&&typeof URL.createObjectURL=="function"&&typeof Blob=="function"?URL.createObjectURL(new Blob([`self.onmessage=function(e){if(e.data.url){
importScripts(e.data.url);}}`],{type:"text/javascript"})):"";It.className="Layout",It.GoJSScriptURL=MS,It.declareWorkerLayout=qp,typeof self!="undefined"&&typeof self.DedicatedWorkerGlobalScope!="undefined"&&typeof self!="undefined"&&typeof self.DedicatedWorkerGlobalScope!="undefined"&&(self.onmessage=function(t){if(t=t.data,t._GoJS==="_GoJS")if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:O.version},void 0);else{var e=performance.now(),i=null;t.layout&&(i=df(t.layout));var n=null;if(i&&i.Jv&&(n=new i.Jv),!n)throw Error("no registered Worker Layout: "+t.layout);n.network=wS(n,t,!0),n.workerLayout=function(){var r=xS(n,n.network,!1);return r._GoJS="_GoJS",r.time=performance.now()-e,self.postMessage(r,void 0),!0},n.doLayout(new J)}});function NT(){this.Jv=null,this.Dy=this.l=this.name="",this.scripts=[],this.Pe=null,this.Dm=new ct}function $t(t){Oe(this),this.lc=t,this.vf=new W,this.je=new W,this.$t=new ct,this.Vt=new ct}$t.prototype.clear=function(){if(this.vf)for(var t=this.vf.iterator;t.next();)t.value.clear();if(this.je)for(t=this.je.iterator;t.next();)t.value.clear();this.vf=new W,this.je=new W,this.$t=new ct,this.Vt=new ct},$t.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutNetwork"+(this.layout!==null?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.vf.count+" edges: "+this.je.count,1<t){for(var i=this.vf.iterator;i.next();)e+=`
    `+i.value.toString(t-1);for(i=this.je.iterator;i.next();)e+=`
    `+i.value.toString(t-1)}return e},$t.prototype.createVertex=function(){return new xe(this)},$t.prototype.createEdge=function(){return new Ze(this)},$t.prototype.Bg=function(t,e,i){if(t!==null){for(e===void 0&&(e=!1),i===void 0&&(i=null),i===null&&(i=function(s){if(s instanceof Z)return!s.isLinkLabel;if(s instanceof z){var u=s.fromNode;return u===null||u.isLinkLabel?!1:(s=s.toNode,!(s===null||s.isLinkLabel))}return!1}),t=t.iterator;t.next();){var n=t.value;if(n instanceof Z&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)){if(n instanceof dt&&n.layout===null)this.Bg(n.memberParts,!1);else if(this.jj(n)===null){var r=this.createVertex();r.node=n,this.Cg(r)}}}for(t.reset();t.next();)if(n=t.value,n instanceof z&&(!e||n.isTopLevel)&&n.canLayout()&&i(n)&&this.Aq(n)===null){var o=n.fromNode;r=n.toNode,o!==null&&r!==null&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),o!==null&&r!==null&&this.Bk(o,r,n))}}},$t.prototype.findGroupVertex=function(t){if(t===null)return null;var e=t.findVisibleNode();if(e===null)return null;if(t=this.jj(e),t!==null)return t;for(e=e.containingGroup;e!==null;){if(t=this.jj(e),t!==null)return t;e=e.containingGroup}return null},l=$t.prototype,l.Cg=function(t){if(t!==null){this.vf.add(t);var e=t.node;e!==null&&this.$t.add(e,t),t.network=this}},l.kk=function(t){if(t===null)return null;var e=this.jj(t);return e===null&&(e=this.createVertex(),e.node=t,this.Cg(e)),e},l.Mv=function(t){if(t!==null&&kS(this,t)){for(var e=t.Ne,i=e.count-1;0<=i;i--){var n=e.J(i);this.tk(n)}for(e=t.Fe,t=e.count-1;0<=t;t--)i=e.J(t),this.tk(i)}};function kS(t,e){if(e===null)return!1;var i=t.vf.remove(e);return i&&(e=e.node,e!==null&&t.$t.remove(e)),i}l.Lz=function(t){t!==null&&(t=this.jj(t),t!==null&&this.Mv(t))},l.jj=function(t){return t===null?null:this.$t.H(t)},l.qm=function(t){if(t!==null){om(this,t);var e=t.toVertex;e!==null&&e.Cv(t),e=t.fromVertex,e!==null&&e.Av(t)}};function om(t,e){if(e!==null){t.je.add(e);var i=e.link;i!==null&&t.Aq(i)===null&&t.Vt.add(i,e),e.network=t}}l.Wx=function(t){if(t===null)return null;var e=t.fromNode,i=t.toNode,n=this.Aq(t);return n===null?(n=this.createEdge(),n.link=t,e!==null&&(n.fromVertex=this.kk(e)),i!==null&&(n.toVertex=this.kk(i)),this.qm(n)):(e!==null?n.fromVertex=this.kk(e):n.fromVertex=null,i!==null?n.toVertex=this.kk(i):n.toVertex=null),n},l.tk=function(t){if(t!==null){var e=t.toVertex;e!==null&&e.Lv(t),e=t.fromVertex,e!==null&&e.Kv(t),sm(this,t)}};function sm(t,e){e!==null&&t.je.remove(e)&&(e=e.link,e!==null&&t.Vt.remove(e))}l.Kz=function(t){t!==null&&(t=this.Aq(t),t!==null&&this.tk(t))},l.Aq=function(t){return t===null?null:this.Vt.H(t)},l.Bk=function(t,e,i){if(t===null||e===null)return null;if(t.network===this&&e.network===this){var n=this.createEdge();return n.link=i,n.fromVertex=t,n.toVertex=e,this.qm(n),n}return null},l.Pm=function(t){if(t!==null){var e=t.fromVertex,i=t.toVertex;e!==null&&i!==null&&(e.Kv(t),i.Lv(t),t.Pm(),e.Cv(t),i.Av(t))}},l.xq=function(){for(var t=Dt(),e=this.je.iterator;e.next();){var i=e.value;i.fromVertex===i.toVertex&&t.push(i)}for(e=t.length,i=0;i<e;i++)this.tk(t[i]);Xt(t)},$t.prototype.deleteArtificialVertexes=function(){for(var t=Dt(),e=this.vf.iterator;e.next();){var i=e.value;i.node===null&&i.data===null&&t.push(i)}for(i=t.length,e=0;e<i;e++)this.Mv(t[e]);for(e=Dt(),i=this.je.iterator;i.next();){var n=i.value;n.link===null&&n.data===null&&e.push(n)}for(i=e.length,n=0;n<i;n++)this.tk(e[n]);Xt(t),Xt(e)};function TT(t){for(var e=Dt(),i=t.je.iterator;i.next();){var n=i.value;n.fromVertex!==null&&n.toVertex!==null||e.push(n)}for(i=e.length,n=0;n<i;n++)t.tk(e[n]);Xt(e)}$t.prototype.Zy=function(t){t===void 0&&(t=!0),t&&(this.deleteArtificialVertexes(),TT(this),this.xq()),t=new J;for(var e=!0;e;){e=!1;for(var i=this.vf.iterator;i.next();){var n=i.value;if(0<n.Ne.count||0<n.Fe.count){e=this.layout.createNetwork(),t.add(e),lm(this,e,n),e=!0;break}}}return t.sort(function(r,o){return r===null||o===null||r===o?0:o.vertexes.count-r.vertexes.count}),t};function lm(t,e,i){if(i!==null&&i.network!==e){kS(t,i),e.Cg(i);for(var n=i.sourceEdges;n.next();){var r=n.value;r.network!==e&&(sm(t,r),om(e,r),lm(t,e,r.fromVertex))}for(n=i.destinationEdges;n.next();)i=n.value,i.network!==e&&(sm(t,i),om(e,i),lm(t,e,i.toVertex))}}$t.prototype.Rz=function(){for(var t=new W,e=this.vf.iterator;e.next();)t.add(e.value.node);for(e=this.je.iterator;e.next();)t.add(e.value.link);return t},X.Object.defineProperties($t.prototype,{layout:{get:function(){return this.lc},set:function(t){t!==null&&(this.lc=t)}},vertexes:{get:function(){return this.vf}},edges:{get:function(){return this.je}}}),$t.prototype.findAllParts=$t.prototype.Rz,$t.prototype.splitIntoSubNetworks=$t.prototype.Zy,$t.prototype.deleteSelfEdges=$t.prototype.xq,$t.prototype.reverseEdge=$t.prototype.Pm,$t.prototype.linkVertexes=$t.prototype.Bk,$t.prototype.findEdge=$t.prototype.Aq,$t.prototype.deleteLink=$t.prototype.Kz,$t.prototype.deleteEdge=$t.prototype.tk,$t.prototype.addLink=$t.prototype.Wx,$t.prototype.addEdge=$t.prototype.qm,$t.prototype.findVertex=$t.prototype.jj,$t.prototype.deleteNode=$t.prototype.Lz,$t.prototype.deleteVertex=$t.prototype.Mv,$t.prototype.addNode=$t.prototype.kk,$t.prototype.addVertex=$t.prototype.Cg,$t.prototype.addParts=$t.prototype.Bg,$t.className="LayoutNetwork";function xe(t){Oe(this),this.Vc=t,this.l=new I(0,0,10,10).freeze(),this.v=new k(5,5).freeze(),this.Ki=this.nb=null,this.Ne=new J,this.Fe=new J}xe.prototype.serializeVertexProperties=function(t){t.id=Ne(this),t.key=this.node?this.node.key:this.data?this.data.Bi:void 0,t.key===void 0&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.hB=this.bounds.width,t.tA=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.Ne.each(function(n){e.push(Ne(n))}),t.Wy=e;var i=[];this.Fe.each(function(n){i.push(Ne(n))}),t.ky=i},xe.prototype.yq=function(t,e,i){if(t!==null){this.x=t.x,this.y=t.y,this.width=t.hB,this.height=t.tA,this.focusX=t.fx,this.focusY=t.fy;var n=this;t.Wy&&t.Wy.forEach(function(r){(r=i.get(r))&&n.Ne.add(r)}),t.ky&&t.ky.forEach(function(r){(r=i.get(r))&&n.Fe.add(r)})}},xe.prototype.clear=function(){this.Ki=this.nb=null,this.Ne=new J,this.Fe=new J},xe.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutVertex#"+Ne(this);if(0<t&&(e+=this.node!==null?"("+this.node.toString()+")":"",1<t)){t="";for(var i=!0,n=this.Ne.iterator;n.next();){var r=n.value;i?i=!1:t+=",",t+=r.toString(0)}for(r="",i=!0,n=this.Fe.iterator;n.next();){var o=n.value;i?i=!1:r+=",",r+=o.toString(0)}e+=" sources: "+t+" destinations: "+r}return e},xe.prototype.commit=function(){var t=this.nb;if(t!==null){var e=this.bounds,i=t.bounds;at(i)?(i.x=e.x,i.y=e.y,i.width=e.width,i.height=e.height):t.bounds=e.copy()}else if(t=this.node,t!==null){if(e=this.bounds,!(t instanceof dt)){i=I.alloc();var n=this.network.layout.mj(t,i),r=t.locationObject.da(Wt);if(n.u()&&r.u()){t.moveTo(e.x+this.focusX-(r.x-n.x),e.y+this.focusY-(r.y-n.y)),I.free(i);return}I.free(i)}t.moveTo(e.x,e.y)}},xe.prototype.Cv=function(t){t!==null&&(this.Ne.contains(t)||this.Ne.add(t))},xe.prototype.Lv=function(t){t!==null&&this.Ne.remove(t)},xe.prototype.Av=function(t){t!==null&&(this.Fe.contains(t)||this.Fe.add(t))},xe.prototype.Kv=function(t){t!==null&&this.Fe.remove(t)};function um(t,e){return t=t.Ki,e=e.Ki,t?e?(t=t.text,e=e.text,t<e?-1:t>e?1:0):1:e!==null?-1:0}X.Object.defineProperties(xe.prototype,{sourceEdgesArrayAccess:{get:function(){return this.Ne._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Fe._dataArray}},data:{get:function(){return this.nb},set:function(t){if(this.nb=t,t!==null&&t.bounds){var e=t.bounds;t=e.x;var i=e.y,n=e.width;e=e.height,this.v.h(n/2,e/2),this.l.h(t,i,n,e)}}},node:{get:function(){return this.Ki},set:function(t){if(this.Ki!==t){this.Ki=t,t.Ta();var e=this.network.layout,i=I.alloc(),n=e.mj(t,i);e=n.x;var r=n.y,o=n.width;if(n=n.height,isNaN(e)&&(e=0),isNaN(r)&&(r=0),this.l.h(e,r,o,n),I.free(i),!(t instanceof dt)&&(t=t.locationObject.da(Wt),t.u())){this.v.h(t.x-e,t.y-r);return}this.v.h(o/2,n/2)}}},bounds:{get:function(){return this.l},set:function(t){this.l.w(t)||this.l.assign(t)}},focus:{get:function(){return this.v},set:function(t){this.v.w(t)||this.v.assign(t)}},centerX:{get:function(){return this.l.x+this.v.x},set:function(t){var e=this.l;e.x+this.v.x!==t&&(e.ea(),e.x=t-this.v.x,e.freeze())}},centerY:{get:function(){return this.l.y+this.v.y},set:function(t){var e=this.l;e.y+this.v.y!==t&&(e.ea(),e.y=t-this.v.y,e.freeze())}},focusX:{get:function(){return this.v.x},set:function(t){var e=this.v;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},focusY:{get:function(){return this.v.y},set:function(t){var e=this.v;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},x:{get:function(){return this.l.x},set:function(t){var e=this.l;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},y:{get:function(){return this.l.y},set:function(t){var e=this.l;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},width:{get:function(){return this.l.width},set:function(t){var e=this.l;e.width!==t&&(e.ea(),e.width=t,e.freeze())}},height:{get:function(){return this.l.height},set:function(t){var e=this.l;e.height!==t&&(e.ea(),e.height=t,e.freeze())}},network:{get:function(){return this.Vc},set:function(t){this.Vc=t}},sourceVertexes:{get:function(){for(var t=new W,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new W,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new W,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.Ne.iterator}},destinationEdges:{get:function(){return this.Fe.iterator}},edges:{get:function(){for(var t=new J,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.Ne.count+this.Fe.count}}}),xe.prototype.deleteDestinationEdge=xe.prototype.Kv,xe.prototype.addDestinationEdge=xe.prototype.Av,xe.prototype.deleteSourceEdge=xe.prototype.Lv,xe.prototype.addSourceEdge=xe.prototype.Cv,xe.className="LayoutVertex",xe.standardComparer=um,xe.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.Ki;var i=e.Ki;if(t!==null){if(i!==null){for(e=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),t=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),i=0;i<e.length;i++)if(t[i]!==""&&t[i]!==void 0){var n=parseFloat(e[i]),r=parseFloat(t[i]);if(isNaN(n))if(isNaN(r)){if(e[i].localeCompare(t[i])!==0)return e[i].localeCompare(t[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!=0)return n-r}}else if(e[i]!=="")return 1;return t[i]!==""&&t[i]!==void 0?-1:0}return 1}return i!==null?-1:0}return 1}return e!==null?-1:0};function Ze(t){Oe(this),this.Uc=t,this.gd=this.$c=this.Ml=this.nb=null}Ze.prototype.clear=function(){this.gd=this.$c=this.Ml=this.nb=null},Ze.prototype.serializeEdgeProperties=function(t){t.id=Ne(this),t.key=this.link?this.link.key:this.data?this.data.Bi:void 0,t.key===void 0&&(t.key=null),t.from=this.fromVertex?Ne(this.fromVertex):null,t.cB=this.toVertex?Ne(this.toVertex):null},Ze.prototype.deserializeEdgeProperties=function(t,e){if(t!==null){var i=e.get(t.from);i&&(this.fromVertex=i),(t=e.get(t.cB))&&(this.toVertex=t)}},Ze.prototype.toString=function(t){t===void 0&&(t=0);var e="LayoutEdge#"+Ne(this);return 0<t&&(e+=this.Ml!==null?"("+this.Ml.toString()+")":"",1<t&&(e+=" "+(this.$c?this.$c.toString():"null")+" --> "+(this.gd?this.gd.toString():"null"))),e},Ze.prototype.Pm=function(){var t=this.$c;this.$c=this.gd,this.gd=t},Ze.prototype.commit=function(){},Ze.prototype.Ay=function(t){return this.gd===t?this.$c:this.$c===t?this.gd:null},X.Object.defineProperties(Ze.prototype,{network:{get:function(){return this.Uc},set:function(t){this.Uc=t}},data:{get:function(){return this.nb},set:function(t){this.nb!==t&&(this.nb=t)}},link:{get:function(){return this.Ml},set:function(t){this.Ml!==t&&(this.Ml=t)}},fromVertex:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.$c=t)}},toVertex:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t)}}}),Ze.prototype.getOtherVertex=Ze.prototype.Ay,Ze.className="LayoutEdge";function Be(){It.call(this),this.isViewportSized=!0,this.nq=this.oq=NaN,this.Rg=new pt(NaN,NaN).freeze(),this.mf=new pt(10,10).freeze(),this.zb=gf,this.Fb=td,this.dd=yf,this.Yc=PS}ut(Be,It),Be.prototype.cloneProtected=function(t){It.prototype.cloneProtected.call(this,t),t.oq=this.oq,t.nq=this.nq,t.Rg.assign(this.Rg),t.mf.assign(this.mf),t.zb=this.zb,t.Fb=this.Fb,t.dd=this.dd,t.Yc=this.Yc},Be.prototype.jb=function(t){t.classType===Be?t===yf||t===id||t===hm||t===ed?this.sorting=t:t===td||t===rr?this.arrangement=t:t===gf||t===bp?this.alignment=t:E("Unknown enum value: "+t):It.prototype.jb.call(this,t)},Be.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.by(t);t=this.diagram;for(var i=e.copy().iterator;i.next();){var n=i.value;if(!n.Oh()||n.fromNode===null&&n.toNode===null){if(n.Ta(),n instanceof dt)for(n=n.memberParts;n.next();)e.remove(n.value)}else e.remove(n)}var r=e.ma();if(r.length!==0){switch(this.sorting){case ed:r.reverse();break;case yf:r.sort(this.comparer);break;case id:r.sort(this.comparer),r.reverse()}var o=this.wrappingColumn;isNaN(o)&&(o=0);var s=this.wrappingWidth;switch(isNaN(s)&&t!==null?(e=t.padding,s=Math.max(t.viewportBounds.width-e.left-e.right,0)):s=Math.max(this.wrappingWidth,0),0>=o&&0>=s&&(o=1),e=this.spacing.width,isFinite(e)||(e=0),i=this.spacing.height,isFinite(i)||(i=0),t!==null&&t.xa("Layout"),n=[],this.alignment){case bp:var u=e,a=i,f=I.alloc(),c=Math.max(this.cellSize.width,1);if(!isFinite(c))for(var d=c=0;d<r.length;d++){var g=this.mj(r[d],f);c=Math.max(c,g.width)}if(c=Math.max(c+u,1),d=Math.max(this.cellSize.height,1),!isFinite(d))for(g=d=0;g<r.length;g++){var m=this.mj(r[g],f);d=Math.max(d,m.height)}d=Math.max(d+a,1),g=this.arrangement;for(var y=m=this.arrangementOrigin.x,x=this.arrangementOrigin.y,M=0,S=0,N=0;N<r.length;N++){var T=r[N],C=this.mj(T,f),D=Math.ceil((C.width+u)/c)*c,F=Math.ceil((C.height+a)/d)*d;switch(g){case rr:var $=Math.abs(y-C.width);break;default:$=y+C.width}switch((0<o&&M>o-1||0<s&&0<M&&$-m>s)&&(n.push(new I(0,x,s+u,S)),M=0,y=m,x+=S,S=0),S=Math.max(S,F),g){case rr:C=-C.width;break;default:C=0}switch(T.moveTo(y+C,x),g){case rr:y-=D;break;default:y+=D}M++}n.push(new I(0,x,s+u,S)),I.free(f);break;case gf:for(a=s,c=o,d=e,g=i,s=I.alloc(),m=Math.max(this.cellSize.width,1),o=x=f=0,u=k.alloc(),y=0;y<r.length;y++)S=r[y],M=this.mj(S,s),S=S.Ff(S.locationObject,S.locationSpot,u),f=Math.max(f,S.x),x=Math.max(x,M.width-S.x),o=Math.max(o,S.y);switch(y=this.arrangement,y){case rr:f+=d;break;default:x+=d}m=isFinite(m)?Math.max(m+d,1):Math.max(f+x,1);var G=S=this.arrangementOrigin.x;for(N=this.arrangementOrigin.y,x=0,a>=f&&(a-=f),f=T=0,D=Math.max(this.cellSize.height,1),C=o=0,F=!0,M=k.alloc(),$=0;$<r.length;$++){var nt=r[$],q=this.mj(nt,s),R=nt.Ff(nt.locationObject,nt.locationSpot,u);if(0<x)switch(y){case rr:G=(G-S-(q.width-R.x))/m,G=j.aa(Math.round(G),G)?Math.round(G):Math.floor(G),G=G*m+S;break;default:G=(G-S+R.x)/m,G=j.aa(Math.round(G),G)?Math.round(G):Math.ceil(G),G=G*m+S}else switch(y){case rr:T=G+R.x+q.width;break;default:T=G-R.x}switch(y){case rr:var Lt=-(G+R.x)+T;break;default:Lt=G+q.width-R.x-T}if(0<c&&x>c-1||0<a&&0<x&&Lt>a){for(n.push(new I(0,F?N-o:N,a+d,C+o+g)),G=0;G<x&&$!==x;G++){Lt=r[$-x+G];var mt=Lt.Ff(Lt.locationObject,Lt.locationSpot,M);Lt.moveTo(Lt.position.x,Lt.position.y+o-mt.y)}C+=g,N=F?N+C:N+(C+o),x=C=o=0,G=S,F=!1}switch(G===S&&(f=y===rr?Math.max(f,q.width-R.x):Math.min(f,-R.x)),o=Math.max(o,R.y),C=Math.max(C,q.height-R.y),isFinite(D)&&(C=Math.max(C,Math.max(q.height,D)-R.y)),F?nt.moveTo(G-R.x,N-R.y):nt.moveTo(G-R.x,N),y){case rr:G-=R.x+d;break;default:G+=q.width-R.x+d}x++}if(n.push(new I(0,N,a+d,(F?C:C+o)+g)),r.length!==x)for(a=0;a<x;a++)c=r[r.length-x+a],d=c.Ff(c.locationObject,c.locationSpot,u),c.moveTo(c.position.x,c.position.y+o-d.y);if(k.free(u),k.free(M),y===rr)for(r=0;r<n.length;r++)o=n[r],o.width+=f,o.x-=f;else for(r=0;r<n.length;r++)o=n[r],o.x>f&&(o.width+=o.x-f,o.x=f);I.free(s)}for(u=o=s=r=0;u<n.length;u++)a=n[u],r=Math.min(r,a.x),s=Math.min(s,a.y),o=Math.max(o,a.x+a.width);this.arrangement===rr?this.commitLayers(n,new k(r+e/2-(o+r),s-i/2)):this.commitLayers(n,new k(r-e/2,s-i/2)),t!==null&&t.Wa("Layout"),this.isValidLayout=!0}},Be.prototype.commitLayers=function(){};function PS(t,e){return t=t.text,e=e.text,t<e?-1:t>e?1:0}X.Object.defineProperties(Be.prototype,{wrappingWidth:{get:function(){return this.oq},set:function(t){this.oq!==t&&(0<t||isNaN(t))&&(this.oq=t,this.isViewportSized=isNaN(t),this.C())}},wrappingColumn:{get:function(){return this.nq},set:function(t){this.nq!==t&&(0<t||isNaN(t))&&(this.nq=t,this.C())}},cellSize:{get:function(){return this.Rg},set:function(t){this.Rg.w(t)||(this.Rg.assign(t),this.C())}},spacing:{get:function(){return this.mf},set:function(t){this.mf.w(t)||(this.mf.assign(t),this.C())}},alignment:{get:function(){return this.zb},set:function(t){this.zb===t||t!==gf&&t!==bp||(this.zb=t,this.C())}},arrangement:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==td&&t!==rr||(this.Fb=t,this.C())}},sorting:{get:function(){return this.dd},set:function(t){this.dd===t||t!==hm&&t!==ed&&t!==yf&&t!==id||(this.dd=t,this.C())}},comparer:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t,this.C())}}});var bp=new K(Be,"Position",0),gf=new K(Be,"Location",1),td=new K(Be,"LeftToRight",2),rr=new K(Be,"RightToLeft",3),hm=new K(Be,"Forward",4),ed=new K(Be,"Reverse",5),yf=new K(Be,"Ascending",6),id=new K(Be,"Descending",7);Be.className="GridLayout",Be.standardComparer=PS,Be.smartComparer=function(t,e){if(t!==null){if(e!==null){t=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);for(var i=0;i<t.length;i++)if(e[i]!==""&&e[i]!==void 0){var n=parseFloat(t[i]),r=parseFloat(e[i]);if(isNaN(n))if(isNaN(r)){if(t[i].localeCompare(e[i])!==0)return t[i].localeCompare(e[i])}else return 1;else{if(isNaN(r))return-1;if(n-r!=0)return n-r}}else if(t[i]!=="")return 1;return e[i]!==""&&e[i]!==void 0?-1:0}return 1}return e!==null?-1:0},Be.Position=bp,Be.Location=gf,Be.LeftToRight=td,Be.RightToLeft=rr,Be.Forward=hm,Be.Reverse=ed,Be.Ascending=yf,Be.Descending=id;function zt(){this.fp=new W,this.Ho=new W,this.Da=new W,this.Ve=new ct,this.Ue=new ct,this.Oj=new ct,this.B=null,this.mr=!1}l=zt.prototype,l.clear=function(){this.fp.clear(),this.Ho.clear(),this.Da.clear(),this.Ve.clear(),this.Ue.clear(),this.Oj.clear()},l.ce=function(t){this.B=t},l.nj=function(t){if(t instanceof Z){if(this.fp.add(t),t instanceof dt){var e=t.containingGroup;e===null?this.B.Ch.add(t):e.Rl.add(t),e=t.layout,e!==null&&(e.diagram=this.B)}}else t instanceof z?this.Ho.add(t):t instanceof Ct||this.Da.add(t);e=t.data,e===null||t instanceof Ct||(t instanceof z?this.Ue.add(e,t):this.Ve.add(e,t))},l.Mc=function(t){if(t.lk(),t instanceof Z){if(this.fp.remove(t),t instanceof dt){var e=t.containingGroup;e===null?this.B.Ch.remove(t):e.Rl.remove(t),e=t.layout,e!==null&&(e.diagram=null)}}else t instanceof z?this.Ho.remove(t):t instanceof Ct||this.Da.remove(t);e=t.data,e===null||t instanceof Ct||(t instanceof z?this.Ue.remove(e):this.Ve.remove(e))},l.Kd=function(){for(var t=this.B.nodeTemplateMap.iterator;t.next();){var e=t.value,i=t.key;(!e.Oc()||e instanceof dt)&&E('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.B.groupTemplateMap.iterator;t.next();)e=t.value,i=t.key,e instanceof dt||E('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+e);for(t=this.B.linkTemplateMap.iterator;t.next();)e=t.value,i=t.key,e instanceof z||E('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+e);for(t=Dt(),e=this.B.selection.iterator;e.next();)(i=e.value.data)&&t.push(i);for(e=Dt(),i=this.B.highlighteds.iterator;i.next();){var n=i.value.data;n&&e.push(n)}for(i=Dt(),n=this.nodes.iterator;n.next();){var r=n.value;r.data!==null&&(i.push(r.data),i.push(r.location))}for(n=this.links.iterator;n.next();)r=n.value,r.data!==null&&(i.push(r.data),i.push(r.location));for(n=this.parts.iterator;n.next();)r=n.value,r.data!==null&&(i.push(r.data),i.push(r.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),n=0;n<t.length;n++)r=this.zc(t[n]),r!==null&&(r.isSelected=!0);for(n=0;n<e.length;n++)r=this.zc(e[n]),r!==null&&(r.isHighlighted=!0);for(n=0;n<i.length;n+=2)r=this.zc(i[n]),r!==null&&(r.location=i[n+1]);Xt(t),Xt(e),Xt(i)},zt.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},zt.prototype.addModeledParts=function(t,e){var i=this,n=this.diagram.model;t.forEach(function(r){n.$a(r)&&NS(i,r,!1)}),t.forEach(function(r){n.$a(r)&&i.resolveReferencesForData(r)}),e!==!1&&bc(this.diagram,!1)};function NS(t,e,i){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){i===void 0&&(i=!0);t:{if(e!=null&&!t.B.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){var n=t.Eq(e),r=TS(t,e,n);if(r!==null&&(Tn(r),r=r.copy(),r!==null)){var o=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,r.Pf=n,r.nb=e,t.mr&&(r.ih="Tool"),t.diagram.add(r),r.nb=null,r.data=e,t.diagram.skipsModelSourceBindings=o,n=r;break t}}n=null}n!==null&&i&&t.resolveReferencesForData(e)}}zt.prototype.insertLink=function(){return null},zt.prototype.resolveReferencesForData=function(){},zt.prototype.Eq=function(t){return this.B.model.Eq(t)};function TS(t,e,i){t=t.B;var n=t.model;return n.zk()&&n.dw(e)?(e=t.groupTemplateMap.H(i),e===null&&(e=t.groupTemplateMap.H(""),e===null&&(jS||(jS=!0,wt('No Group template found for category "'+i+'"'),wt("  Using default group template")),e=t.Bu))):(e=t.nodeTemplateMap.H(i),e===null&&(e=t.nodeTemplateMap.H(""),e===null&&(LS||(LS=!0,wt('No Node template found for category "'+i+'"'),wt("  Using default node template")),e=t.Du))),e}zt.prototype.getLinkCategoryForData=function(){return""},zt.prototype.setLinkCategoryForData=function(){},zt.prototype.setFromNodeForLink=function(){},zt.prototype.setToNodeForLink=function(){},zt.prototype.findLinkTemplateForCategory=function(t){var e=this.B.linkTemplateMap.H(t);return e===null&&(e=this.B.linkTemplateMap.H(""),e===null&&(DS||(DS=!0,wt('No Link template found for category "'+t+'"'),wt("  Using default link template")),e=this.B.Cu)),e},zt.prototype.removeAllModeledParts=function(){this.du(this.diagram.model.nodeDataArray)},zt.prototype.du=function(t){var e=this;t.forEach(function(i){e.Zq(i)})},zt.prototype.Zq=function(t){t=this.zc(t),t!==null&&(Zy(this.diagram,t,!1),this.unresolveReferencesForPart(t))},zt.prototype.unresolveReferencesForPart=function(){},zt.prototype.removeDataForLink=function(){},zt.prototype.findPartForKey=function(t){return t==null?null:(t=this.B.model.Lb(t),t!==null?this.Ve.H(t):null)},zt.prototype.Db=function(t){return t==null||(t=this.B.model.Lb(t),t===null)?null:(t=this.Ve.H(t),t instanceof Z?t:null)},zt.prototype.findLinkForKey=function(){return null},l=zt.prototype,l.zc=function(t){if(t===null)return null;var e=this.Ve.H(t);return e!==null?e:e=this.Ue.H(t)},l.fj=function(t){return t===null?null:(t=this.Ve.H(t),t instanceof Z?t:null)},l.yc=function(t){return t===null?null:this.Ue.H(t)},l.Ht=function(t){for(var e=0;e<arguments.length;++e);e=new W;for(var i=this.fp.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var o=0;o<arguments.length;o++){var s=arguments[o];if(at(s)&&am(this,r,s)){e.add(n);break}}}return e.iterator},l.Gt=function(t){for(var e=0;e<arguments.length;++e);e=new W;for(var i=this.Ho.iterator;i.next();){var n=i.value,r=n.data;if(r!==null)for(var o=0;o<arguments.length;o++){var s=arguments[o];if(at(s)&&am(this,r,s)){e.add(n);break}}}return e.iterator};function am(t,e,i){for(var n in i){var r=e[n],o=i[n];if(jt(o)){if(!jt(r)||r.length<o.length)return!1;for(var s=0;s<r.length;s++){var u=o[s];if(u!==void 0&&!CS(t,r[s],u))return!1}}else if(!CS(t,r,o))return!1}return!0}function CS(t,e,i){if(typeof i=="function"){if(!i(e))return!1}else if(i instanceof RegExp){if(!e||!i.test(e.toString()))return!1}else if(at(e)&&at(i)){if(!am(t,e,i))return!1}else if(e!==i)return!1;return!0}zt.prototype.doModelChanged=function(t){if(this.B){var e=this.B;if(t.model===e.model){var i=t.change;if(e.doModelChanged(t),e.Z){e.Z=!1;try{var n=t.modelChange;if(n!=="")if(i===le){if(n==="nodeCategory"){var r=this.zc(t.object),o=t.newValue;r!==null&&typeof o=="string"&&(r.category=o)}else n==="nodeDataArray"&&(this.du(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(i===Te){var s=t.newValue;n==="nodeDataArray"&&at(s)&&NS(this,s),e.isModified=!0}else if(i===Ce){var u=t.oldValue;n==="nodeDataArray"&&at(u)&&this.Zq(u),e.isModified=!0}else i===Qn&&(n==="SourceChanged"?t.object!==null?this.updateDataBindings(t.object,t.propertyName):(this.ir(),this.updateAllTargetBindings()):n==="ModelDisplaced"&&this.Kd());else if(i===le){var a=t.propertyName,f=t.object;f===e.model?(a==="nodeKeyProperty"||a==="nodeCategoryProperty")&&(e.undoManager.isUndoingRedoing||this.Kd()):this.updateDataBindings(f,a),e.isModified=!0}else if(i===Te||i===Ce){var c=t.change===Te,d=c?t.newParam:t.oldParam,g=c?t.newValue:t.oldValue,m=this.Oj.H(t.object);if(Array.isArray(m))for(t=0;t<m.length;t++){var y=m[t];if(c)wM(y,g,d);else if(!(0>d)){var x=d+Mp(y);y.Mc(x,!0),MM(y,x,d)}}e.isModified=!0}}finally{e.Z=!0}}}}},zt.prototype.updateAllTargetBindings=function(t){t===void 0&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ca(t);for(e=this.nodes.iterator;e.next();)e.value.Ca(t);for(e=this.links.iterator;e.next();)e.value.Ca(t)},zt.prototype.ir=function(){for(var t=this.B.model,e=new W,i=t.nodeDataArray,n=0;n<i.length;n++)e.add(i[n]);var r=[];for(this.nodes.each(function(s){s.data===null||e.contains(s.data)||r.push(s.data)}),this.parts.each(function(s){s.data===null||e.contains(s.data)||r.push(s.data)}),r.forEach(function(s){zS(t,s,!1)}),n=0;n<i.length;n++){var o=i[n];this.zc(o)===null&&VS(t,o,!1)}for(this.refreshDataBoundLinks(),i=this.parts.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.nodes.iterator;i.next();)i.value.updateRelationshipsFromData();for(i=this.links.iterator;i.next();)i.value.updateRelationshipsFromData()},zt.prototype.refreshDataBoundLinks=function(){},zt.prototype.updateRelationshipsFromData=function(){},zt.prototype.updateDataBindings=function(t,e){if(typeof e=="string"){var i=this.zc(t);if(i!==null)i.Ca(e);else{i=null;for(var n=this.Oj.iterator;n.next();){for(var r=n.value,o=0;o<r.length;o++){var s=r[o].sy(t);s!==null&&(i===null&&(i=Dt()),i.push(s))}if(i!==null)break}if(i!==null){for(n=0;n<i.length;n++)i[n].Ca(e);Xt(i)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}};function fm(t,e){var i=e.Ai;if(jt(i)){var n=t.Oj.H(i);if(n===null)n=[],n.push(e),t.Oj.add(i,n);else{for(t=0;t<n.length;t++)if(n[t]===e)return;n.push(e)}}}function cm(t,e,i){Xs(e,function(s){s=s.W.j;for(var u=s.length,a=0;a<u;a++)e0(i,s[a])});var n=e.Ai;if(jt(n)){var r=t.Oj.H(n);if(r!==null){for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),r.length===0&&t.Oj.remove(n);break}}}}zt.prototype.rk=function(t,e,i){i===void 0&&(i=!1);var n=new ct;if(jt(t))for(var r=0;r<t.length;r++)nd(this,t[r],e,n,i);else for(t=t.iterator;t.next();)nd(this,t.value,e,n,i);if(e!==null){i=e.model,t=e.toolManager.findTool("Dragging"),t=t!==null?t.dragOptions.dragsLink:e.il.dragsLink,r=new W;for(var o=new ct,s=n.iterator;s.next();){var u=s.value;if(u instanceof z)t||u.fromNode!==null&&u.toNode!==null||r.add(u);else if(u instanceof Z&&u.data!==null&&i.Cm()){var a=u;u=s.key;var f=u.Gg();f!==null&&(f=n.H(f),f!==null?(i.de(a.data,i.ja(f.data)),a=e.yc(a.data),u=u.ij(),u!==null&&a!==null&&o.add(u,a)):i.de(a.data,void 0))}}if(0<r.count&&e.eu(r,!1),0<o.count)for(i=o.iterator;i.next();)n.add(i.key,i.value)}if(e!==null&&this.B!==null&&(e=e.model,i=e.afterCopyFunction,i!==null)){var c=new ct;n.each(function(d){d.key.data!==null&&c.add(d.key.data,d.value.data)}),i(c,e,this.B.model)}for(e=n.iterator;e.next();)e.value.Ca();return n};function nd(t,e,i,n,r){if(e===null||r&&!e.canCopy())return null;if(n.contains(e))return n.H(e);var o=t.copyPartData(e,i);if(!(o instanceof rt))return null;if(o.isSelected=!1,o.isHighlighted=!1,n.add(e,o),e instanceof Z){for(var s=e.linksConnected;s.next();){var u=s.value;if(u.fromNode===e){var a=n.H(u);a!==null&&(a.fromNode=o)}u.toNode===e&&(u=n.H(u),u!==null&&(u.toNode=o))}if(e instanceof dt&&o instanceof dt)for(e=e.memberParts;e.next();)s=nd(t,e.value,i,n,r),s instanceof z||s===null||(s.containingGroup=o)}else if(e instanceof z&&o instanceof z)for(s=e.fromNode,s!==null&&(s=n.H(s),s!==null&&(o.fromNode=s)),s=e.toNode,s!==null&&(s=n.H(s),s!==null&&(o.toNode=s)),e=e.labelNodes;e.next();)s=nd(t,e.value,i,n,r),s!==null&&s instanceof Z&&(s.labeledLink=o);return o}zt.prototype.copyPartData=function(t,e){var i=null,n=t.data;if(n!==null&&e!==null){var r=e.model;t instanceof z||(n=r.copyNodeData(n),at(n)&&(r.wf(n),i=e.zc(n)))}else Tn(t),i=t.copy(),i!==null&&(r=this.B,e!==null?e.add(i):n!==null&&r!==null&&r.commandHandler!==null&&r.commandHandler.copiesClipboardData&&(e=r.model,r=null,i instanceof z||(r=e.copyNodeData(n)),at(r)&&(i.data=r)));return i},X.Object.defineProperties(zt.prototype,{nodes:{get:function(){return this.fp}},links:{get:function(){return this.Ho}},parts:{get:function(){return this.Da}},diagram:{get:function(){return this.B}},addsToTemporaryLayer:{get:function(){return this.mr},set:function(t){this.mr=t}}}),zt.prototype.updateAllRelationshipsFromData=zt.prototype.ir,zt.prototype.findLinksByExample=zt.prototype.Gt,zt.prototype.findNodesByExample=zt.prototype.Ht,zt.prototype.findLinkForData=zt.prototype.yc,zt.prototype.findNodeForData=zt.prototype.fj,zt.prototype.findPartForData=zt.prototype.zc,zt.prototype.findNodeForKey=zt.prototype.Db,zt.prototype.removeModeledPart=zt.prototype.Zq,zt.prototype.removeModeledParts=zt.prototype.du,zt.prototype.rebuildParts=zt.prototype.Kd;var LS=!1,jS=!1,DS=!1;zt.className="PartManager";function Le(t){zt.apply(this,arguments)}ut(Le,zt),Le.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),ES(this,t.linkDataArray)},Le.prototype.addModeledParts=function(t){for(zt.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)ch(t.value);bc(this.diagram,!1)};function ES(t,e){e.forEach(function(i){OS(t,i)}),bc(t.diagram,!1)}function OS(t,e){if(e!=null&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ue.contains(e)){var i=t.getLinkCategoryForData(e),n=t.findLinkTemplateForCategory(i);if(n!==null){Tn(n);var r=n.copy();if(r!==null){n=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,r.Pf=i,r.nb=e,i=t.diagram.model;var o=hd(i,e,!0);o!==""&&(r.fromPortId=o),o=on(i,e,!0),o!==void 0&&(o=t.Db(o),o instanceof Z&&(r.fromNode=o)),o=hd(i,e,!1),o!==""&&(r.toPortId=o),o=on(i,e,!1),o!==void 0&&(o=t.Db(o),o instanceof Z&&(r.toNode=o)),i=i.Df(e),Array.isArray(i)&&i.forEach(function(s){s=t.Db(s),s!==null&&(s.labeledLink=r)}),t.mr&&(r.ih="Tool"),t.diagram.add(r),r.nb=null,r.data=e,t.diagram.skipsModelSourceBindings=n}}}}Le.prototype.removeAllModeledParts=function(){var t=this.diagram.model;AS(this,t.linkDataArray),this.du(t.nodeDataArray)};function AS(t,e){e.forEach(function(i){t.Zq(i)})}Le.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Kt(t)},Le.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.br(t,e)},Le.prototype.setFromNodeForLink=function(t,e){var i=this.diagram.model;i.Bw(t.data,i.ja(e!==null?e.data:null))},Le.prototype.setToNodeForLink=function(t,e){var i=this.diagram.model;i.Gw(t.data,i.ja(e!==null?e.data:null))},Le.prototype.removeDataForLink=function(t){this.diagram.model.Km(t.data)},Le.prototype.findPartForKey=function(t){var e=zt.prototype.findPartForKey.call(this,t);return e===null&&(t=this.diagram.model.Eg(t),t!==null)?this.Ue.H(t):e},Le.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.Eg(t),t!==null?this.Ue.H(t):null)},Le.prototype.doModelChanged=function(t){var e=this;if(zt.prototype.doModelChanged.call(this,t),this.diagram){var i=this.diagram;if(t.model===i.model){var n=t.change;if(i.Z){i.Z=!1;try{var r=t.modelChange;if(r!==""){if(n===le){if(r==="linkFromKey"){var o=this.yc(t.object);if(o!==null){var s=this.Db(t.newValue);o.fromNode=s}}else if(r==="linkToKey"){var u=this.yc(t.object);if(u!==null){var a=this.Db(t.newValue);u.toNode=a}}else if(r==="linkFromPortId"){var f=this.yc(t.object);if(f!==null){var c=t.newValue;typeof c=="string"&&(f.fromPortId=c)}}else if(r==="linkToPortId"){var d=this.yc(t.object);if(d!==null){var g=t.newValue;typeof g=="string"&&(d.toPortId=g)}}else if(r==="nodeGroupKey"){var m=this.zc(t.object);if(m!==null){var y=t.newValue;if(y!==void 0){var x=this.Db(y);x instanceof dt?m.containingGroup=x:m.containingGroup=null}else m.containingGroup=null}}else if(r==="linkLabelKeys"){var M=this.yc(t.object);if(M!==null){var S=t.oldValue,N=t.newValue;Array.isArray(S)&&S.forEach(function(R){0<=N.indexOf(R)||(R=e.Db(R),R!==null&&(R.labeledLink=null))}),Array.isArray(N)&&N.forEach(function(R){R=e.Db(R),R!==null&&(R.labeledLink=M)})}}else if(r==="linkCategory"){var T=this.yc(t.object),C=t.newValue;T!==null&&typeof C=="string"&&(T.category=C)}else r==="linkDataArray"&&(AS(this,t.oldValue),ES(this,t.newValue));i.isModified=!0}else if(n===Te){var D=t.newValue;if(r==="linkDataArray"&&typeof D=="object"&&D!==null)OS(this,D);else if(r==="linkLabelKeys"&&vs(D)){var F=this.yc(t.object),$=this.Db(D);F!==null&&$!==null&&($.labeledLink=F)}i.isModified=!0}else if(n===Ce){var G=t.oldValue;if(r==="linkDataArray"&&typeof G=="object"&&G!==null)this.Zq(G);else if(r==="linkLabelKeys"&&vs(G)){var nt=this.Db(G);nt!==null&&(nt.labeledLink=null)}i.isModified=!0}}else if(n===le){var q=t.propertyName;t.object!==i.model||q!=="linkFromKeyProperty"&&q!=="linkToKeyProperty"&&q!=="linkFromPortIdProperty"&&q!=="linkToPortIdProperty"&&q!=="linkLabelKeysProperty"&&q!=="nodeIsGroupProperty"&&q!=="nodeGroupKeyProperty"&&q!=="linkCategoryProperty"||i.undoManager.isUndoingRedoing||this.Kd(),i.isModified=!0}}finally{i.Z=!0}}}}},Le.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,i=new W,n=e.linkDataArray;n.forEach(function(o){i.add(o)});var r=[];this.links.each(function(o){o.data===null||i.contains(o.data)||r.push(o.data)}),r.forEach(function(o){WS(e,o,!1)}),n.forEach(function(o){t.yc(o)===null&&HS(e,o,!1)})},Le.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;if(t instanceof z){var r=on(n,e,!0);if(r=i.Db(r),t.fromNode=r,r=on(n,e,!1),r=i.Db(r),t.toNode=r,e=n.Df(e),0<e.length||0<t.labelNodes.count){if(e.length===1&&t.labelNodes.count===1){r=e[0];var o=t.labelNodes.first();if(n.ja(o.data)===r)return}r=new W().addAll(e);var s=new W;t.labelNodes.each(function(u){u.data!==null&&(u=n.ja(u.data),u!==void 0&&s.add(u))}),e=s.copy(),e.Yq(r),r=r.copy(),r.Yq(s),(0<e.count||0<r.count)&&(e.each(function(u){u=i.Db(u),u!==null&&u.labeledLink===t&&(u.labeledLink=null)}),r.each(function(u){u=i.Db(u),u!==null&&u.labeledLink!==t&&(u.labeledLink=t)}))}}else!(t instanceof Ct)&&(e=n.Kh(e),e=i.findPartForKey(e),e===null||e instanceof dt)&&(t.containingGroup=e)}}},Le.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.ja(t);if(i!==void 0){var n=mf(e,i),r=this.zc(t);if(n!==null&&r!==null){n=n.iterator;for(var o={};n.next();){var s=n.value;e.$a(s)?r instanceof dt&&e.Kh(s)===i&&(s=this.zc(s),s!==null&&(s.containingGroup=r)):(o.link=this.yc(s),o.link!==null&&r instanceof Z&&(on(e,s,!0)===i&&(o.link.fromNode=r),on(e,s,!1)===i&&(o.link.toNode=r),s=e.Df(s),Array.isArray(s)&&s.some(function(u){return function(a){return a===i?(r.labeledLink=u.link,!0):!1}}(o)))),o={link:o.link}}sr(e,i)}t=e.Kh(t),t!==void 0&&(t=this.Db(t),t instanceof dt&&(r.containingGroup=t))}},Le.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Z){var i=e.ja(t.data);if(i!==void 0){for(var n=t.linksConnected;n.next();)or(e,i,n.value.data);if(t.isLinkLabel&&(n=t.labeledLink,n!==null&&or(e,i,n.data)),t instanceof dt)for(t=t.memberParts;t.next();)n=t.value.data,e.$a(n)&&or(e,i,n)}}},Le.prototype.copyPartData=function(t,e){var i=zt.prototype.copyPartData.call(this,t,e);if(t instanceof z)if(t=t.data,t!==null&&e!==null){var n=e.model;t=n.wq(t),typeof t=="object"&&t!==null&&(n.aj(t),i=e.yc(t))}else i!==null&&(e=this.diagram,t!==null&&e!==null&&e.commandHandler!==null&&e.commandHandler.copiesClipboardData&&(e=e.model.wq(t),typeof e=="object"&&e!==null&&(i.data=e)));return i},Le.prototype.insertLink=function(t,e,i,n){var r=this.diagram,o=r.model,s=r.toolManager.findTool("Linking"),u="";if(t!==null&&(e===null&&(e=t),u=e.portId,u===null&&(u="")),e="",i!==null&&(n===null&&(n=i),e=n.portId,e===null&&(e="")),n=s.archetypeLinkData,n instanceof z){if(Tn(n),o=n.copy(),o!==null)return o.fromNode=t,o.fromPortId=u,o.toNode=i,o.toPortId=e,r.add(o),t=s.archetypeLabelNodeData,t instanceof Z&&(Tn(t),t=t.copy(),t!==null&&(t.labeledLink=o,r.add(t))),o}else if(n!==null&&(n=o.wq(n),typeof n=="object"&&n!==null))return t!==null&&Mh(o,n,o.ja(t.data),!0),Sh(o,n,u,!0),i!==null&&Mh(o,n,o.ja(i.data),!1),Sh(o,n,e,!1),o.aj(n),t=s.archetypeLabelNodeData,t===null||t instanceof Z||(t=o.copyNodeData(t),typeof t=="object"&&t!==null&&(o.wf(t),t=o.ja(t),t!==void 0&&o.Bv(n,t))),r.yc(n);return null},Le.prototype.findLinkForKey=Le.prototype.findLinkForKey,Le.prototype.findPartForKey=Le.prototype.findPartForKey,Le.prototype.removeAllModeledParts=Le.prototype.removeAllModeledParts,Le.prototype.addModeledParts=Le.prototype.addModeledParts,Le.prototype.addAllModeledParts=Le.prototype.addAllModeledParts,Le.className="GraphLinksPartManager";function dn(){zt.apply(this,arguments),this.rh=null}ut(dn,zt);function rd(t,e,i){if(e!==null&&i!==null){var n=t.diagram.toolManager.findTool("Linking"),r=e,o=i;if(t.diagram.isTreePathToChildren){for(e=o.linksConnected;e.next();)if(e.value.toNode===o)return}else for(r=i,o=e,e=r.linksConnected;e.next();)if(e.value.fromNode===r)return;if((n===null||!Ca(n,r,o,null,!0))&&(n=t.getLinkCategoryForData(i.data),e=t.findLinkTemplateForCategory(n),e!==null&&(Tn(e),e=e.copy(),e!==null))){var s=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,e.Pf=n,e.nb=i.data,e.fromNode=r,e.toNode=o,t.diagram.add(e),e.nb=null,e.data=i.data,t.diagram.skipsModelSourceBindings=s}}}dn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Nt(t)},dn.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.iu(t,e)},dn.prototype.setFromNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren)n.de(t.data,n.ja(e));else{var r=this.rh;this.rh=t,i!==null&&n.de(i.data,void 0),n.de(e,n.ja(t.toNode!==null?t.toNode.data:null)),this.rh=r}},dn.prototype.setToNodeForLink=function(t,e,i){var n=this.diagram.model;if(i===void 0&&(i=null),e=e!==null?e.data:null,this.diagram.isTreePathToChildren){var r=this.rh;this.rh=t,i!==null&&n.de(i.data,void 0),n.de(e,n.ja(t.fromNode!==null?t.fromNode.data:null)),this.rh=r}else n.de(t.data,n.ja(e))},dn.prototype.removeDataForLink=function(t){this.diagram.model.de(t.data,void 0)},dn.prototype.findLinkForKey=function(t){return t==null?null:(t=this.diagram.model.Lb(t),t!==null?this.Ue.H(t):null)},dn.prototype.doModelChanged=function(t){if(zt.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var i=t.change;if(e.Z){e.Z=!1;try{var n=t.modelChange;if(n!==""){if(i===le){if(n==="nodeParentKey"){var r=t.object,o=this.Db(t.newValue),s=this.fj(r);if(this.rh!==null)o!==null&&(this.rh.data=r,this.rh.category=this.getLinkCategoryForData(r));else if(s!==null){var u=s.ij();u!==null?o===null?e.remove(u):e.isTreePathToChildren?u.fromNode=o:u.toNode=o:rd(this,o,s)}}else if(n==="parentLinkCategory"){var a=this.fj(t.object),f=t.newValue;if(a!==null&&typeof f=="string"){var c=a.ij();c!==null&&(c.category=f)}}e.isModified=!0}}else if(i===le){var d=t.propertyName;t.object===e.model&&d==="nodeParentKeyProperty"&&(e.undoManager.isUndoingRedoing||this.Kd()),e.isModified=!0}}finally{e.Z=!0}}}}},dn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(e!==null){var i=t.diagram;if(i!==null){var n=i.model;t instanceof Z&&(e=n.Lh(e),e=i.Db(e),n=t.Gg(),e!==n&&(n=t.ij(),e!==null?n!==null?i.isTreePathToChildren?n.fromNode=e:n.toNode=e:rd(this,e,t):n!==null&&Zy(i,n,!1)))}}},dn.prototype.updateDataBindings=function(t,e){zt.prototype.updateDataBindings.call(this,t,e),typeof e=="string"&&this.zc(t)!==null&&(t=this.yc(t),t!==null&&t.Ca(e))},dn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,i=e.ja(t);if(i!==void 0){var n=mf(e,i),r=this.zc(t);if(n!==null&&r!==null){for(n=n.iterator;n.next();){var o=n.value;e.$a(o)&&r instanceof Z&&e.Lh(o)===i&&rd(this,r,this.fj(o))}sr(e,i)}t=e.Lh(t),t!==void 0&&r instanceof Z&&(t=this.Db(t),rd(this,t,r))}},dn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof Z){var i=e.ja(t.data),n=this.yc(t.data);if(n!==null){n.isSelected=!1,n.isHighlighted=!1;var r=n.layer;if(r!==null){var o=r.Mc(-1,n,!1);0<=o&&this.diagram.bb(Ce,"parts",r,n,null,o,null),o=n.layerChanged,o!==null&&o(n,r,null)}}for(n=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)r=t.value,r=(n?r.toNode:r.fromNode).data,e.$a(r)&&or(e,i,r)}},dn.prototype.insertLink=function(t,e,i){e=this.diagram.model;var n=t,r=i;return this.diagram.isTreePathToChildren||(n=i,r=t),n!==null&&r!==null?(e.de(r.data,e.ja(n.data)),r.ij()):null},dn.prototype.findLinkForKey=dn.prototype.findLinkForKey,dn.className="TreePartManager";function b(t){this.Mi=new W,this.Ji=new W,this.qu=`,
  "insertedNodeKeys": `,this.lx=`,
  "modifiedNodeData": `,this.su=`,
  "removedNodeKeys": `,this.Xh=null,Oe(this),this.In=this.Qa="",this.bg=!1,this.l={},this.Gc=[],this.Va=new ct,this.Li="key",this.gl=this.Ol=null,this.zn=this.An=!1,this.Cn=!0,this.gn=null,this.Wj="category",this.Vf=new ct,this.$u=new J,this.wg=!1,this.v=null,this.undoManager=new de,t!==void 0&&(this.nodeDataArray=t)}b.prototype.cloneProtected=function(t){t.Qa=this.Qa,t.In=this.In,t.bg=this.bg,t.Li=this.Li,t.Ol=this.Ol,t.gl=this.gl,t.An=this.An,t.zn=this.zn,t.Cn=this.Cn,t.gn=this.gn,t.Wj=this.Wj},b.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},b.prototype.clear=function(){this.Gc=[],this.Va.clear(),this.Vf.clear(),this.undoManager.clear()},b.prototype.toString=function(t){if(t===void 0&&(t=0),1<t)return this.fr();var e=(this.name!==""?this.name:"")+" Model";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.ja(r)+":"+Xe(r)}}return e},b.prototype.dB=function(t){t.change!==Qn&&E("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Ye?(BS(this,e),t=this.Yw(e,t.propertyName==="FinishedUndo"),this.Xh=null,t):null},b.prototype.Yw=function(t,e){var i=this,n=!1,r=new W,o=new W,s=new W,u=this.Xh;t.changes.each(function(d){d.model===i&&(d.modelChange==="nodeDataArray"?d.change===Te?r.add(d.newValue):d.change===Ce&&s.add(d.oldValue):i.$a(d.object)?o.add(d.object):d.change!==le||i.modelData!==d.object&&d.propertyName!=="modelData"?d.object!==null&&(u&&u.contains(d.object)?u.get(d.object).each(function(g){i.$a(g)&&o.add(g)}):d.object instanceof b||i.pj()&&i.xc(d.object)||RS(i,d.object).each(function(g){o.add(g)})):n=!0)});var a=this.Ji;a.clear(),r.each(function(d){a.add(i.ja(d)),e||o.add(d)});var f=this.Mi;f.clear(),s.each(function(d){f.add(i.ja(d)),e&&o.add(d)}),t=i.cloneDeep(o.ma());var c=null;return n&&(c===null&&(c={}),c.modelData=this.cloneDeep(this.modelData)),0<a.count&&(c===null&&(c={}),e?c.removedNodeKeys=a.ma():c.insertedNodeKeys=a.ma()),0<t.length&&(c===null&&(c={}),c.modifiedNodeData=t),0<f.count&&(c===null&&(c={}),e?c.insertedNodeKeys=f.ma():c.removedNodeKeys=f.ma()),f.clear(),a.clear(),c},b.prototype.cloneDeep=function(t){return vh(this,t,!0)};function vh(t,e,i,n,r,o){function s(d,g){u?(d.__gohashid===void 0&&o.push(d),n.set(d,g)):(d=ko++,n.set(d,g),r.set(d,e))}if(!at(e))return e;o||(o=[]);var u=Object.isExtensible(e);if(n||(n=new ct),u){var a=n.get(e);if(a)return a}else for(r||(r=new ct),a=r.iterator;a.next();){var f=a.key;if(a.value===e&&(f=n.get(f)))return f}if(Array.isArray(e)){a=[],s(e,a);for(var c=0;c<e.length;c++)a.push(vh(t,e[c],!1,n,r,o))}else if(e instanceof k||e instanceof pt||e instanceof I||e instanceof Rt||e instanceof st)a=e.copy(),s(e,a);else{if(e instanceof At||e instanceof Mt||e instanceof K)return e;if(e instanceof J)a=new J().addAll(vh(t,e.ma(),!1,n,r,o)),s(e,a);else if(e instanceof W)a=new W().addAll(vh(t,e.ma(),!1,n,r,o)),s(e,a);else if(e instanceof ct)a=new ct().addAll(vh(t,e.ma(),!1,n,r,o)),s(e,a);else if(e instanceof Date)a=new Date(e.getTime()),s(e,a);else if(e instanceof RegExp)a=new RegExp(e),s(e,a),a.lastIndex=e.lastIndex;else if(typeof e.copy=="function")a=e.copy(),s(e,a);else for(c in a={},s(e,a),e)c!=="__gohashid"&&(a[c]=vh(t,e[c],!1,n,r,o))}return i&&o.forEach(function(d){delete d.__gohashid}),a}l=b.prototype,l.Sk=function(){var t="";return this.name!==""&&(t+=`,
  "name": `+this.quote(this.name)),this.dataFormat!==""&&(t+=`,
  "dataFormat": `+this.quote(this.dataFormat)),this.isReadOnly&&(t+=`,
  "isReadOnly": `+this.isReadOnly),this.nodeKeyProperty!=="key"&&typeof this.nodeKeyProperty=="string"&&(t+=`,
  "nodeKeyProperty": `+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=`,
  "copiesArrays": true`),this.copiesArrayObjects&&(t+=`,
  "copiesArrayObjects": true`),this.copiesKey||(t+=`,
  "copiesKey": false`),this.nodeCategoryProperty!=="category"&&typeof this.nodeCategoryProperty=="string"&&(t+=`,
  "nodeCategoryProperty": `+this.quote(this.nodeCategoryProperty)),t},l.Wq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),t.copiesKey===!1&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)};function pm(t){return`,
  "modelData": `+FS(t,t.modelData)}function IS(t,e){e=e.modelData,at(e)&&(t.Mm(e),t.modelData=e)}l.Zw=function(){var t=this.modelData,e=!1,i;for(i in t)if(!sd(i,t[i])){e=!0;break}return t="",e&&(t=pm(this)),t+`,
  "nodeDataArray": `+Un(this,this.nodeDataArray,!0)},l.pw=function(t){IS(this,t),t=t.nodeDataArray,jt(t)&&(this.Mm(t),this.nodeDataArray=t)};function xh(t,e,i,n){if(e===i)return!0;if(typeof e!=typeof i||typeof e=="function"||typeof i=="function")return!1;if(Array.isArray(e)&&Array.isArray(i)){if(n.H(e)===i)return!0;if(n.add(e,i),e.length!==i.length)return!1;for(var r=0;r<e.length;r++)if(!xh(t,e[r],i[r],n))return!1;return!0}if(at(e)&&at(i)){if(n.H(e)===i)return!0;n.add(e,i);for(var o in e){var s=e[o];if(!sd(o,s)){var u=i[o];if(u===void 0||!xh(t,s,u,n))return!1}}for(r in i)if(o=i[r],!sd(r,o)&&(s=e[r],s===void 0||!xh(t,s,o,n)))return!1;return!0}return!1}function Ks(t,e,i){t[i]!==e[i]&&E("Model.computeJsonDifference: Model."+i+' is not the same in both models: "'+t[i]+'" and "'+e[i]+'"')}l.kr=function(t){Ks(this,t,"nodeKeyProperty");var e=this.Ji;e.clear();var i=new W,n=this.Mi;n.clear(),n.addAll(this.Va.iteratorKeys);for(var r=new ct,o=t.nodeDataArray,s=o.length,u=0;u<s;u++){var a=o[u],f=t.ja(a);if(f!==void 0){n.remove(f);var c=this.Lb(f);c===null?(e.add(f),i.add(a)):xh(this,c,a,r)||i.add(a)}else this.Xt(a),f=this.ja(a),e.add(f),i.add(a)}return o="",xh(this,this.modelData,t.modelData,r)||(o+=pm(this)),0<e.count&&(o+=this.qu+Un(this,e.ma(),!0)),0<i.count&&(o+=this.lx+Un(this,i.ma(),!0)),0<n.count&&(o+=this.su+Un(this,n.ma(),!0)),n.clear(),e.clear(),o},l.Dz=function(t,e){return e===void 0&&(e=wh(this,this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.Sk()+this.kr(t)+"}"};function BS(t,e){function i(r,o){if((o=o.part)&&(o=o.data,r!==o)){var s=n.get(r);s===null?(s=new W,s.add(o),n.add(r,s)):s.add(o)}}var n=t.Xh;n===null&&(n=new ct,e.changes.each(function(r){if(r.diagram!==null){var o=r.change;o===le?(r=r.object.panel)&&(o=r.data)&&i(o,r):(o===Te||o===Ce)&&(r=r.object,(o=r.itemArray)&&i(o,r))}}),t.Xh=n)}function RS(t,e){for(var i=new W,n=0;n<t.nodeDataArray.length;n++){var r=t.nodeDataArray[n];od(t,e,r,r,i)}return i}function od(t,e,i,n,r){if(Array.isArray(i))for(var o=0;o<i.length;o++){var s=i[o];if(s===e)return r.add(n),!0;if(od(t,e,s,n,r))return!0}else if(at(i)&&Object.getPrototypeOf(i)===Object.prototype)for(o in i){if(s=i[o],s===e)return r.add(n),!0;if(od(t,e,s,n,r))return!0}return!1}l.Xw=function(t,e){var i=this,n=!1,r=new W,o=new W,s=new W,u=this.Xh;t.changes.each(function(c){c.model===i&&(c.modelChange==="nodeDataArray"?c.change===Te?r.add(c.newValue):c.change===Ce&&s.add(c.oldValue):i.$a(c.object)?o.add(c.object):c.change!==le||i.modelData!==c.object&&c.propertyName!=="modelData"?c.object!==null&&(u&&u.contains(c.object)?u.get(c.object).each(function(d){i.$a(d)&&o.add(d)}):c.object instanceof b||i.pj()&&i.xc(c.object)||RS(i,c.object).each(function(d){o.add(d)})):n=!0)});var a=this.Ji;a.clear(),r.each(function(c){a.add(i.ja(c)),e||o.add(c)});var f=this.Mi;return f.clear(),s.each(function(c){f.add(i.ja(c)),e&&o.add(c)}),t="",n&&(t+=pm(this)),0<a.count&&(t+=(e?this.su:this.qu)+Un(this,a.ma(),!0)),0<o.count&&(t+=this.lx+Un(this,o.ma(),!0)),0<f.count&&(t+=(e?this.qu:this.su)+Un(this,f.ma(),!0)),f.clear(),a.clear(),t},l.Vq=function(t){(t.name!==void 0&&t.name!==this.name||t.dataFormat!==void 0&&t.dataFormat!==this.dataFormat||t.isReadOnly!==void 0&&t.isReadOnly!==this.isReadOnly||t.nodeKeyProperty!==void 0&&t.nodeKeyProperty!==this.nodeKeyProperty||t.copiesArrays!==void 0&&t.copiesArrays!==this.copiesArrays||t.copiesArrayObjects!==void 0&&t.copiesArrayObjects!==this.copiesArrayObjects||t.copiesKey!==void 0&&t.copiesKey!==this.copiesKey||t.nodeCategoryProperty!==void 0&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&E("applyIncrementalJson cannot change Model properties"),IS(this,t);var e=t.insertedNodeKeys,i=t.modifiedNodeData,n=new ct;if(Array.isArray(i))for(var r=0;r<i.length;r++){var o=i[r],s=this.ja(o);s!=null&&n.set(s,o)}if(Array.isArray(e))for(r=e.length,o=0;o<r;o++){s=e[o];var u=this.Lb(s);u===null&&(u=(u=n.get(s))?u:this.copyNodeData({}),this.Tm(u,s),this.wf(u))}if(Array.isArray(i)){for(e=i.length,n=0;n<e;n++)if(r=i[n],o=this.ja(r),o=this.Lb(o),o!==null){for(var a in r)a==="__gohashid"||a===this.nodeKeyProperty||this.yk()&&a===this.nodeIsGroupProperty||this.setDataProperty(o,a,r[a]);this.Um(r,o)}}if(t=t.removedNodeKeys,Array.isArray(t))for(i=t.length,a=0;a<i;a++)e=this.Lb(t[a]),e!==null&&this.Lm(e)},l.$y=function(t,e){t.change!==Qn&&E("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.isTransactionFinished&&i instanceof Ye?(e===void 0&&(e=wh(this,this)),BS(this,i),t=this.Xw(i,t.propertyName==="FinishedUndo"),this.Xh=null,e==="2"?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.Sk()+t+"}"):'{ "incremental": 0 }'},l.eB=function(t,e){return this.$y(t,e)},l.fr=function(t){return t===void 0&&(t=wh(this,this)),'{ "class": '+this.quote(t)+this.Sk()+this.Zw()+"}"},l.toJSON=function(t){return this.fr(t)},l.Zx=function(t){var e=null;if(typeof t=="string")try{e=Y.JSON.parse(t)}catch(n){}else typeof t=="object"?e=t:E("Unable to modify a Model from: "+t);var i=e.incremental;typeof i!="number"&&E("Unable to apply non-incremental changes to Model: "+t),i!==0&&(this.xa("applyIncrementalJson"),this.Vq(e),this.Wa("applyIncrementalJson"))},l.vz=function(t){return this.Zx(t)},b.constructGraphLinksModel=function(){return new b},l=b.prototype,l.Mm=function(t){if(jt(t))for(var e=t.length,i=0;i<e;i++){var n=t[i];if(at(n)){var r=i;n=this.Mm(n),Array.isArray(t)?t[r]=n:E("Cannot replace an object in an HTMLCollection or NodeList at "+r)}}else if(at(t)){for(i in t)if(r=t[i],at(r)&&(r=this.Mm(r),t[i]=r,i==="points"&&Array.isArray(r))){n=r.length%2==0;for(var o=0;o<r.length;o++)if(typeof r[o]!="number"){n=!1;break}if(n){for(n=new J,o=0;o<r.length/2;o++)n.add(new k(r[2*o],r[2*o+1]));n.freeze(),t[i]=n}}if(typeof t=="object"){if(i=t,r=t.class||"",r.indexOf("go.")===0&&(r=r.substr(3)),r==="NaN")i=NaN;else if(r==="Date")i=new Date(t.value);else if(r==="Point")i=new k(Mi(t.x),Mi(t.y));else if(r==="Size")i=new pt(Mi(t.width),Mi(t.height));else if(r==="Rect")i=new I(Mi(t.x),Mi(t.y),Mi(t.width),Mi(t.height));else if(r==="Margin")i=new Rt(Mi(t.top),Mi(t.right),Mi(t.bottom),Mi(t.left));else if(r==="Spot")typeof t.enum=="string"?i=Sy(t.enum):i=new st(Mi(t.x),Mi(t.y),Mi(t.offsetX),Mi(t.offsetY));else if(r==="Brush"){if(i=new At,i.type=br(At,t.type),typeof t.color=="string"&&(i.color=t.color),t.start instanceof st&&(i.start=t.start),t.end instanceof st&&(i.end=t.end),typeof t.startRadius=="number"&&(i.startRadius=Mi(t.startRadius)),typeof t.endRadius=="number"&&(i.endRadius=Mi(t.endRadius)),t=t.colorStops,at(t))for(e in t)i.addColorStop(parseFloat(e),t[e])}else r==="Geometry"?(e=null,typeof t.path=="string"?e=Au(t.path):e=new Mt,e.type=br(Mt,t.type),typeof t.startX=="number"&&(e.startX=Mi(t.startX)),typeof t.startY=="number"&&(e.startY=Mi(t.startY)),typeof t.endX=="number"&&(e.endX=Mi(t.endX)),typeof t.endY=="number"&&(e.endY=Mi(t.endY)),t.spot1 instanceof st&&(e.spot1=t.spot1),t.spot2 instanceof st&&(e.spot2=t.spot2),i=e):r==="EnumValue"&&(e=t.classType,e.indexOf("go.")===0&&(e=e.substr(3)),e=gm(e),typeof e=="function"&&(i=br(e,t.name)));t=i}}return t},l.quote=function(t){for(var e="",i=t.length,n=0;n<i;n++){var r=t[n];if(r==='"'||r==="\\")e+="\\"+r;else if(r==="\b")e+="\\b";else if(r==="\f")e+="\\f";else if(r===`
`)e+="\\n";else if(r==="\r")e+="\\r";else if(r==="	")e+="\\t";else{var o=t.charCodeAt(n);e=16>o?e+("\\u000"+t.charCodeAt(n).toString(16)):32>o?e+("\\u00"+t.charCodeAt(n).toString(16)):o===8232?e+"\\u2028":o===8233?e+"\\u2029":e+r}}return'"'+e+'"'},l.Zm=function(t){return t===void 0?"undefined":t===null?"null":t===!0?"true":t===!1?"false":typeof t=="string"?this.quote(t):typeof t=="number"?t===Infinity?"9e9999":t===-Infinity?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Zm(t.valueOf()):jt(t)?Un(this,t):at(t)?FS(this,t):typeof t=="function"?"null":t.toString()};function Un(t,e,i){i===void 0&&(i=!1);var n=e.length;if(0>=n)return"[]";var r=new Ac;r.add("["),i&&1<n&&r.add(`
`);for(var o=0;o<n;o++){var s=e[o];s!==void 0&&(0<o&&(r.add(","),i&&r.add(`
`)),r.add(t.Zm(s)))}return i&&1<n&&r.add(`
`),r.add("]"),r.toString()}function sd(t,e){return e===void 0||t==="__gohashid"||t[0]==="_"||typeof e=="function"}function wi(t){return isNaN(t)?"NaN":t===Infinity?"9e9999":t===-Infinity?"-9e9999":t}function FS(t,e){var i=e;if(i instanceof k)e={class:"go.Point",x:wi(i.x),y:wi(i.y)};else if(i instanceof pt)e={class:"go.Size",width:wi(i.width),height:wi(i.height)};else if(i instanceof I)e={class:"go.Rect",x:wi(i.x),y:wi(i.y),width:wi(i.width),height:wi(i.height)};else if(i instanceof Rt)e={class:"go.Margin",top:wi(i.top),right:wi(i.right),bottom:wi(i.bottom),left:wi(i.left)};else if(i instanceof st)i.kb()?e={class:"go.Spot",x:wi(i.x),y:wi(i.y),offsetX:wi(i.offsetX),offsetY:wi(i.offsetY)}:e={class:"go.Spot",enum:i.toString()};else if(i instanceof At){if(e={class:"go.Brush",type:i.type.name},i.type===Bo?e.color=i.color:(i.type===ho||i.type===Wi)&&(e.start=i.start,e.end=i.end,i.type===Wi&&(i.startRadius!==0&&(e.startRadius=wi(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=wi(i.endRadius)))),i.colorStops!==null){var n={};for(i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof Mt?(e={class:"go.Geometry",type:i.type.name},i.startX!==0&&(e.startX=wi(i.startX)),i.startY!==0&&(e.startY=wi(i.startY)),i.endX!==0&&(e.endX=wi(i.endX)),i.endY!==0&&(e.endY=wi(i.endY)),i.spot1.w(mi)||(e.spot1=i.spot1),i.spot2.w(Tr)||(e.spot2=i.spot2),i.type===an&&(e.path=Bx(i))):i instanceof K&&(e={class:"go.EnumValue",classType:wh(t,i.classType),name:i.name});n="{",i=!0;for(var r in e){var o=ge(e,r);if(!sd(r,o))if(i?i=!1:n+=",",n+='"'+r+'":',r==="points"&&o instanceof J){var s="[";for(o=o.iterator;o.next();){var u=o.value;1<s.length&&(s+=","),s+=t.Zm(u.x),s+=",",s+=t.Zm(u.y)}s+="]",n+=s}else n+=t.Zm(o)}return n+"}"}function Mi(t){return typeof t=="number"?t:t==="NaN"?NaN:t==="9e9999"?Infinity:t==="-9e9999"?-Infinity:parseFloat(t)}l.Gh=function(t){this.$u.add(t)},l.Pk=function(t){this.$u.remove(t)},l.xt=function(t){this.skipsUndoManager||this.undoManager.Zv(t);for(var e=this.$u,i=e.length,n=0;n<i;n++)e.J(n)(t)},l.bb=function(t,e,i,n,r,o,s){we(this,"",t,e,i,n,r,o,s)},l.g=function(t,e,i,n,r){we(this,"",le,t,this,e,i,n,r)},l.bu=function(t,e,i,n,r,o){we(this,"",le,e,t,i,n,r,o)};function we(t,e,i,n,r,o,s,u,a){u===void 0&&(u=null),a===void 0&&(a=null);var f=new ae;f.model=t,f.change=i,f.modelChange=e,f.propertyName=n,f.object=r,f.oldValue=o,f.oldParam=u,f.newValue=s,f.newParam=a,t.xt(f)}b.prototype.changeState=function(t,e){if(t!==null&&t.model===this)if(t.change===le){var i=t.object,n=t.propertyName,r=t.H(e);n===this.nodeKeyProperty&&this.$a(i)&&(e=t.H(!e),e!==void 0&&this.Va.remove(e),r!==void 0&&this.Va.add(r,i)),bt(i,n,r)}else t.change===Te?(i=t.newParam,t.modelChange==="nodeDataArray"?(t=t.newValue,at(t)&&typeof i=="number"&&(n=this.ja(t),e?(this.Gc[i]===t&&Ve(this.Gc,i),n!==void 0&&this.Va.remove(n)):(this.Gc[i]!==t&&In(this.Gc,i,t),n!==void 0&&this.Va.add(n,t)))):t.modelChange===""?((n=t.object)&&!jt(n)&&t.propertyName&&(n=ge(t.object,t.propertyName)),jt(n)&&typeof i=="number"&&(t=t.newValue,e?Ve(n,i):In(n,i,t))):E("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===Ce?(i=t.oldParam,t.modelChange==="nodeDataArray"?(t=t.oldValue,at(t)&&typeof i=="number"&&(n=this.ja(t),e?(this.Gc[i]!==t&&In(this.Gc,i,t),n!==void 0&&this.Va.add(n,t)):(this.Gc[i]===t&&Ve(this.Gc,i),n!==void 0&&this.Va.remove(n)))):t.modelChange===""?((n=t.object)&&!jt(n)&&t.propertyName&&(n=ge(t.object,t.propertyName)),jt(n)&&typeof i=="number"&&(t=t.oldValue,e?In(n,i,t):Ve(n,i))):E("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==Qn&&E("unknown ChangedEvent: "+t.toString())},b.prototype.xa=function(t){return this.undoManager.xa(t)},b.prototype.Wa=function(t){return this.undoManager.Wa(t)},b.prototype.Kf=function(){return this.undoManager.Kf()},b.prototype.commit=function(t,e){e===void 0&&(e="");var i=this.skipsUndoManager;e===null&&(this.skipsUndoManager=!0,e=""),this.undoManager.xa(e);var n=!1;try{t(this),n=!0}finally{n?this.undoManager.Wa(e):this.undoManager.Kf(),this.skipsUndoManager=i}},l=b.prototype,l.Ca=function(t,e){e===void 0&&(e=""),we(this,"SourceChanged",Qn,e,t,null,null)},l.ja=function(t){if(t!==null){var e=this.Li;if(e!==""&&(e=ge(t,e),e!==void 0)){if(vs(e))return e;E("Key value for node data "+t+" is not a number or a string: "+e)}}},l.Tm=function(t,e){if(t!==null){var i=this.Li;if(i!=="")if(this.$a(t)){var n=ge(t,i);n!==e&&this.Lb(e)===null&&(bt(t,i,e),n!==void 0&&this.Va.remove(n),this.Va.add(e,t),we(this,"nodeKey",le,i,t,n,e),typeof i=="string"&&this.Ca(t,i),this.$q(n,e))}else bt(t,i,e)}};function vs(t){return typeof t=="number"||typeof t=="string"}l.$a=function(t){var e=this.ja(t);return e===void 0?!1:this.Va.H(e)===t},l.Lb=function(t){return t===null&&E("Model.findNodeDataForKey:key must not be null"),t!==void 0&&vs(t)?this.Va.H(t):null},l.Xt=function(t){if(t!==null){var e=this.Li;if(e!==""){var i=this.ja(t);if(i===void 0||this.Va.contains(i)){var n=this.Ol;if(n!==null&&(i=n(this,t),i!=null&&!this.Va.contains(i))){bt(t,e,i);return}if(typeof i=="string"){for(n=2;this.Va.contains(i+n);)n++;bt(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.Va.count-1;this.Va.contains(i);)i--;bt(t,e,i)}}}}},l.wf=function(t){t!==null&&(xl(t),this.$a(t)||VS(this,t,!0))};function VS(t,e,i){var n=t.ja(e);(n===void 0||t.Va.H(n)!==e)&&(t.Xt(e),n=t.ja(e),n===void 0?E("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."):(t.Va.add(n,e),n=null,i&&(n=t.Gc.length,In(t.Gc,n,e)),we(t,"nodeDataArray",Te,"nodeDataArray",t,null,e,null,n),t.Om(e),t.Nm(e)))}l.qz=function(t){if(jt(t))for(var e=t.length,i=0;i<e;i++)this.wf(t[i]);else for(t=t.iterator;t.next();)this.wf(t.value)},l.Lm=function(t){t!==null&&zS(this,t,!0)};function zS(t,e,i){var n=t.ja(e);if(n!==void 0&&t.Va.remove(n),n=null,i){t:if(i=t.Gc,Array.isArray(i))n=i.indexOf(e);else{n=i.length;for(var r=0;r<n;r++)if(i[r]===e){n=r;break t}n=-1}if(0>n)return;Ve(t.Gc,n)}we(t,"nodeDataArray",Ce,"nodeDataArray",t,e,null,n,null),t.hr(e)}l.UA=function(t){if(jt(t))for(var e=t.length,i=0;i<e;i++)this.Lm(t[i]);else for(t=t.iterator;t.next();)this.Lm(t.value)},l.KA=function(t){if(t!==this.nodeDataArray&&jt(t)){var e=this.Mi;e.clear(),e.addAll(this.Va.iteratorKeys);var i=this.Ji;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],s=this.ja(o);if(s!==void 0){i.add(s);var u=this.Lb(s);u!==o&&(u!==null?(this.rq(u,o),this.Um(o,u)):(o=this.cloneDeep(o),this.Tm(o,s),this.wf(o)))}else s=this.cloneDeep(o),this.wf(s),i.add(this.ja(s))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.Lb(n))&&this.Lm(n);e.clear(),i.clear()}},l.$q=function(t,e){e!==void 0&&(t=mf(this,t),t instanceof W&&this.Vf.add(e,t))},l.Sw=function(){},l.Om=function(){},l.Nm=function(){},l.hr=function(){};function or(t,e,i){if(e!==void 0){var n=t.Vf.H(e);n===null&&(n=new W,t.Vf.add(e,n)),n.add(i)}}function sr(t,e,i){if(e!==void 0){var n=t.Vf.H(e);n instanceof W&&(i==null?t.Vf.remove(e):(n.remove(i),n.count===0&&t.Vf.remove(e)))}}function mf(t,e){return e===void 0?null:(t=t.Vf.H(e),t instanceof W?t:null)}l.Cz=function(t){t===void 0?this.Vf.clear():this.Vf.remove(t)},b.prototype.copyNodeData=function(t){if(t===null)return null;var e=this.gl;return t=e!==null?e(t,this):ld(this,t,!0),at(t)&&Oe(t),t};function ld(t,e,i){if(t.copiesArrays&&Array.isArray(e)){var n=[];for(i=0;i<e.length;i++){var r=ld(t,e[i],t.copiesArrayObjects);n.push(r)}return Oe(n),n}if(i&&at(e)){i=(i=e.constructor)?new i:{},r=t.copiesKey||typeof t.nodeKeyProperty!="string"?null:t.nodeKeyProperty;for(n in e)if(n==="__gohashid")i.__gohashid=void 0;else if(n===r)i[r]=void 0;else{var o=ge(e,n),s=wh(t,o);s==="GraphObject"||s==="Diagram"||s==="Layer"||s==="RowColumnDefinition"||s==="AnimationManager"||s==="Tool"||s==="CommandHandler"||s==="Layout"||s==="InputEvent"||s==="DiagramEvent"||o instanceof b||o instanceof de||o instanceof Ye||o instanceof ae||(o=ld(t,o,!1)),bt(i,n,o)}return Oe(i),i}return e instanceof k||e instanceof pt||e instanceof I||e instanceof st||e instanceof Rt?e.copy():e}b.prototype.setDataProperty=function(t,e,i){if(this.$a(t)){if(e===this.nodeKeyProperty){this.Tm(t,i);return}if(e===this.nodeCategoryProperty){this.Sm(t,i);return}}else!US&&t instanceof ot&&(US=!0,wt('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),wt("  Is that really your intent?"));var n=ge(t,e);n!==i&&(bt(t,e,i),this.bu(t,e,n,i))},l=b.prototype,l.set=function(t,e,i){this.setDataProperty(t,e,i)},l.rq=function(t,e){if(e){var i=this.$a(t),n;for(n in e)n==="__gohashid"||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},l.nz=function(t,e){this.Ot(t,-1,e)},l.Ot=function(t,e,i){0>e&&(e=t.length),In(t,e,i),we(this,"",Te,"",t,null,i,null,e)},l.rw=function(t,e){e===void 0&&(e=-1),t===this.Gc&&E("Model.removeArrayItem should not be called on the Model.nodeDataArray"),e===-1&&(e=t.length-1);var i=t[e];Ve(t,e),we(this,"",Ce,"",t,i,null,e,null)},l.Eq=function(t){if(t===null)return"";var e=this.Wj;return e===""||(e=ge(t,e),e===void 0)?"":typeof e=="string"?e:(E("getCategoryForNodeData found a non-string category for "+t+": "+e),"")},l.Sm=function(t,e){if(t!==null){var i=this.Wj;if(i!=="")if(this.$a(t)){var n=ge(t,i);n===void 0&&(n=""),n!==e&&(bt(t,i,e),we(this,"nodeCategory",le,i,t,n,e))}else bt(t,i,e)}},l.Um=function(t,e){this.Sm(e,this.Eq(t))},l.Cm=function(){return!1},l.yk=function(){return!1},l.pj=function(){return!1},l.Tt=function(){return!1},l.zk=function(){return!1};function dm(){return new b}function wh(t,e){if(typeof e=="function"){if(e.className)return e.className;if(e.name)return e.name}else if(typeof e=="object"&&e!==null&&e.constructor)return wh(t,e.constructor);return typeof e}function gm(t){return Yn[t]?Yn[t]:Y.go!==void 0&&Y.go[t]?Y.go[t]:null}function ge(t,e){if(!t||!e)return null;try{if(typeof e=="function")var i=e(t);else typeof t.getAttribute=="function"?(i=t.getAttribute(e),i===null&&(i=void 0)):i=t[e]}catch(n){}return i}function bt(t,e,i){if(t&&e)try{typeof e=="function"?e(t,i):typeof t.setAttribute=="function"?t.setAttribute(e,i):t[e]=i}catch(n){}}X.Object.defineProperties(b.prototype,{name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.In},set:function(t){var e=this.In;e!==t&&(this.In=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.bg},set:function(t){var e=this.bg;e!==t&&(this.bg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.g("modelData",e,t),this.Ca(t))}},undoManager:{get:function(){return this.v},set:function(t){var e=this.v;e!==t&&(e!==null&&e.Ry(this),this.v=t,t!==null&&t.Xx(this))}},skipsUndoManager:{get:function(){return this.wg},set:function(t){this.wg=t}},nodeKeyProperty:{get:function(){return this.Li},set:function(t){var e=this.Li;e!==t&&(t===""&&E("Model.nodeKeyProperty may not be the empty string"),0<this.Va.count&&E("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Li=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Ol},set:function(t){var e=this.Ol;e!==t&&(this.Ol=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Gc},set:function(t){var e=this.Gc;if(e!==t){this.Va.clear(),this.Sw();for(var i=t.length,n=0;n<i;n++){var r=t[n];if(!at(r)){E("Model.nodeDataArray must only contain Objects, not: "+r);return}xl(r)}for(this.Gc=t,n=new J,r=0;r<i;r++){var o=t[r],s=this.ja(o);s===void 0||this.Va.H(s)!==null?n.add(o):this.Va.add(s,o)}for(n=n.iterator;n.next();)r=n.value,this.Xt(r),o=this.ja(r),o!==void 0&&this.Va.add(o,r);for(we(this,"nodeDataArray",le,"nodeDataArray",this,e,t),e=0;e<i;e++)n=t[e],this.Om(n),this.Nm(n);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.gl},set:function(t){var e=this.gl;e!==t&&(this.gl=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.An},set:function(t){var e=this.An;e!==t&&(this.An=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.zn},set:function(t){var e=this.zn;e!==t&&(this.zn=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.Cn},set:function(t){var e=this.Cn;e!==t&&(this.Cn=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.gn},set:function(t){var e=this.gn;e!==t&&(this.gn=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.Wj},set:function(t){var e=this.Wj;e!==t&&(this.Wj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),b.prototype.setCategoryForNodeData=b.prototype.Sm,b.prototype.getCategoryForNodeData=b.prototype.Eq,b.prototype.removeArrayItem=b.prototype.rw,b.prototype.insertArrayItem=b.prototype.Ot,b.prototype.addArrayItem=b.prototype.nz,b.prototype.assignAllDataProperties=b.prototype.rq,b.prototype.set=b.prototype.set,b.prototype.clearUnresolvedReferences=b.prototype.Cz,b.prototype.mergeNodeDataArray=b.prototype.KA,b.prototype.removeNodeDataCollection=b.prototype.UA,b.prototype.removeNodeData=b.prototype.Lm,b.prototype.addNodeDataCollection=b.prototype.qz,b.prototype.addNodeData=b.prototype.wf,b.prototype.makeNodeDataKeyUnique=b.prototype.Xt,b.prototype.findNodeDataForKey=b.prototype.Lb,b.prototype.containsNodeData=b.prototype.$a,b.prototype.setKeyForNodeData=b.prototype.Tm,b.prototype.getKeyForNodeData=b.prototype.ja,b.prototype.updateTargetBindings=b.prototype.Ca,b.prototype.commit=b.prototype.commit,b.prototype.rollbackTransaction=b.prototype.Kf,b.prototype.commitTransaction=b.prototype.Wa,b.prototype.startTransaction=b.prototype.xa,b.prototype.raiseDataChanged=b.prototype.bu,b.prototype.raiseChanged=b.prototype.g,b.prototype.raiseChangedEvent=b.prototype.bb,b.prototype.removeChangedListener=b.prototype.Pk,b.prototype.addChangedListener=b.prototype.Gh,b.prototype.writeJsonValue=b.prototype.Zm,b.prototype.replaceJsonObjects=b.prototype.Mm,b.prototype.applyIncrementalJSON=b.prototype.vz,b.prototype.applyIncrementalJson=b.prototype.Zx,b.prototype.toJSON=b.prototype.toJSON,b.prototype.toJson=b.prototype.fr,b.prototype.toIncrementalJSON=b.prototype.eB,b.prototype.toIncrementalJson=b.prototype.$y,b.prototype.computeJsonDifference=b.prototype.Dz,b.prototype.toIncrementalData=b.prototype.dB,b.prototype.clear=b.prototype.clear;var US=!1,Yn={};b.className="Model",b.fromJSON=b.fromJson=function(t,e){e===void 0&&(e=null);var i=null;if(typeof t=="string")try{i=Y.JSON.parse(t)}catch(o){}else typeof t=="object"?i=t:E("Unable to construct a Model from: "+t);if(e===null){t=null;var n=i.class;if(typeof n=="string")try{var r=null;n.indexOf("go.")===0?(n=n.substr(3),r=gm(n)):(r=gm(n),r===null&&(r=Y[n])),typeof r=="function"&&(t=new r)}catch(o){}t===null||t instanceof b?e=t:E("Unable to construct a Model of declared class: "+i.class)}return e===null&&(e=b.constructGraphLinksModel()),e.Wq(i),e.pw(i),e},b.safePropertyValue=ge,b.safePropertySet=bt,Yn.Brush=At,Yn.ChangedEvent=ae,Yn.Geometry=Mt,Yn.Margin=Rt,Yn.Panel=V,Yn.Point=k,Yn.Rect=I,Yn.Size=pt,Yn.Spot=st,Yn.Transaction=Ye,Yn.UndoManager=de;function Me(t,e,i){Oe(this),this.s=!1,t===void 0&&(t=""),e===void 0&&(e=t),i===void 0&&(i=null),this.l=-1,this.qd=null,this.mm=t,this.lm=this.cq=0,this.ft=null,this.uo=!1,this.em=e,this.yn=i,this.To=GS,this.rn=null,this.Lu=new W}Me.prototype.copy=function(){var t=new Me;return t.mm=this.mm,t.cq=this.cq,t.lm=this.lm,t.ft=this.ft,t.uo=this.uo,t.em=this.em,t.yn=this.yn,t.To=this.To,t.rn=this.rn,t},l=Me.prototype,l.jb=function(t){t.classType===Me&&(this.mode=t)},l.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(this.vj!==-1?" "+this.vj:"")+" "+this.mode.name+")"},l.freeze=function(){return this.s=!0,this},l.ea=function(){return this.s=!1,this},l.Ky=function(t){return t===void 0&&(t=null),this.mode=ud,this.backConverter=t,this},l.Sq=function(t){return t===void 0&&(t=""),this.sourceName=t,this.isToModel=!1,this},l.MA=function(){return this.sourceName=null,this.isToModel=!0,this};function YS(t,e,i){return t=t.sourceName,t===null||t===""?e:t==="/"?i.part:t==="."?i:t===".."?i.panel:e.ab(t)}l.Tw=function(t,e,i){var n=this.em;if(i===void 0||n===""||n===i){i=this.mm;var r=this.yn;if(r===null&&i==="")wt("Binding error: target property is the empty string: "+this.toString());else{var o=e;if(n!==""&&(o=ge(e,n)),o!==void 0)if(r===null)i!==""&&bt(t,i,o);else try{if(i!==""){var s=r(o,t);bt(t,i,s)}else r(o,t)}catch(u){}}}},l.jr=function(t,e,i,n){if(this.To===ud){var r=this.mm;if(i===void 0||r===i){i=this.em;var o=this.rn,s=t;if(r!==""&&(s=ge(t,r)),s!==void 0&&!this.Lu.contains(t))try{this.Lu.add(t);var u=n!==null?n.diagram:null,a=u!==null?u.model:null;if(o===null){if(i!=="")a!==null?a.setDataProperty(e,i,s):bt(e,i,s);else if(a!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var f=n.itemIndex,c=n.panel.itemArray;a.rw(c,f),a.Ot(c,f,s)}}else try{if(i!==""){var d=o(s,e,a);a!==null?a.setDataProperty(e,i,d):bt(e,i,d)}else{var g=o(s,e,a);if(g!==void 0&&a!==null&&n!==null&&0<=n.itemIndex&&n.panel!==null&&Array.isArray(n.panel.itemArray)){var m=n.itemIndex,y=n.panel.itemArray;a.rw(y,m),a.Ot(y,m,g)}}}catch(x){}}finally{this.Lu.remove(t)}}}},X.Object.defineProperties(Me.prototype,{vj:{get:function(){return this.l},set:function(t){this.s&&et(this),this.l=t}},targetProperty:{get:function(){return this.mm},set:function(t){this.s&&et(this),this.mm=t}},sourceName:{get:function(){return this.ft},set:function(t){this.s&&et(this),this.ft=t,t!==null&&(this.uo=!1)}},isToModel:{get:function(){return this.uo},set:function(t){this.s&&et(this),this.uo=t}},sourceProperty:{get:function(){return this.em},set:function(t){this.s&&et(this),this.em=t}},converter:{get:function(){return this.yn},set:function(t){this.s&&et(this),this.yn=t}},backConverter:{get:function(){return this.rn},set:function(t){this.s&&et(this),this.rn=t}},mode:{get:function(){return this.To},set:function(t){this.s&&et(this),this.To=t}}}),Me.prototype.updateSource=Me.prototype.jr,Me.prototype.updateTarget=Me.prototype.Tw,Me.prototype.ofModel=Me.prototype.MA,Me.prototype.ofObject=Me.prototype.Sq,Me.prototype.makeTwoWay=Me.prototype.Ky;var CT="Binding",GS=new K(Me,"OneWay",1),ud=new K(Me,"TwoWay",2);Me.className="Binding",Me.parseEnum=function(t,e){return function(i){return i=br(t,i),i===null?e:i}},Me.toString=Xe,Me.OneWay=GS,Me.TwoWay=ud;function Pt(t,e){b.call(this),this.pu=`,
  "insertedLinkKeys": `,this.kx=`,
  "modifiedLinkData": `,this.ru=`,
  "removedLinkKeys": `,this.bd=[],this.cg=new W,this.gb=new ct,this.Fi="",this.yj=this.fl=this.Pl=null,this.bf="from",this.cf="to",this.Tj=this.Sj="",this.Rj="category",this.Yd="",this.Tl="isGroup",this.xe="group",this.Bn=!1,t!==void 0&&(this.nodeDataArray=t),e!==void 0&&(this.linkDataArray=e)}ut(Pt,b),Pt.constructGraphLinksModel=b.constructGraphLinksModel,Pt.prototype.cloneProtected=function(t){b.prototype.cloneProtected.call(this,t),t.Fi=this.Fi,t.Pl=this.Pl,t.fl=this.fl,t.bf=this.bf,t.cf=this.cf,t.Sj=this.Sj,t.Tj=this.Tj,t.Rj=this.Rj,t.Yd=this.Yd,t.Tl=this.Tl,t.xe=this.xe,t.Bn=this.Bn},l=Pt.prototype,l.clear=function(){b.prototype.clear.call(this),this.bd=[],this.gb.clear(),this.cg.clear()},l.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.fr();var e=(this.name!==""?this.name:"")+" GraphLinksModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;var i=t.length,n;for(n=0;n<i;n++){var r=t[n];e+=" "+this.ja(r)+":"+Xe(r)}for(e+=`
 link data:`,t=this.linkDataArray,i=t.length,n=0;n<i;n++)r=t[n],e+=" "+on(this,r,!0)+"-->"+on(this,r,!1)}return e},l.Yw=function(t,e){this.linkKeyProperty===""&&E("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var i=b.prototype.Yw.call(this,t,e),n=this,r=new W,o=new W,s=new W,u=this.Xh;t.changes.each(function(c){c.model===n&&(c.modelChange==="linkDataArray"?c.change===Te?r.add(c.newValue):c.change===Ce&&s.add(c.oldValue):n.xc(c.object)?o.add(c.object):c.object!==null&&(c.object!==null&&u&&u.contains(c.object)?u.get(c.object).each(function(d){n.xc(d)&&o.add(d)}):c.object instanceof b||n.$a(c.object)||XS(n,c.object).each(function(d){o.add(d)})))});var a=this.Ji;a.clear(),r.each(function(c){a.add(n.Wb(c)),e||o.add(c)});var f=this.Mi;return f.clear(),s.each(function(c){f.add(n.Wb(c)),e&&o.add(c)}),t=n.cloneDeep(o.ma()),0<a.count&&(i===null&&(i={}),e?i.removedLinkKeys=a.ma():i.insertedLinkKeys=a.ma()),0<t.length&&(i===null&&(i={}),i.modifiedLinkData=t),0<f.count&&(i===null&&(i={}),e?i.insertedLinkKeys=f.ma():i.removedLinkKeys=f.ma()),f.clear(),a.clear(),i},l.Sk=function(){var t=b.prototype.Sk.call(this),e="";return this.linkCategoryProperty!=="category"&&typeof this.linkCategoryProperty=="string"&&(e+=`,
  "linkCategoryProperty": `+this.quote(this.linkCategoryProperty)),this.linkKeyProperty!==""&&typeof this.linkKeyProperty=="string"&&(e+=`,
  "linkKeyProperty": `+this.quote(this.linkKeyProperty)),this.linkFromKeyProperty!=="from"&&typeof this.linkFromKeyProperty=="string"&&(e+=`,
  "linkFromKeyProperty": `+this.quote(this.linkFromKeyProperty)),this.linkToKeyProperty!=="to"&&typeof this.linkToKeyProperty=="string"&&(e+=`,
  "linkToKeyProperty": `+this.quote(this.linkToKeyProperty)),this.linkFromPortIdProperty!==""&&typeof this.linkFromPortIdProperty=="string"&&(e+=`,
  "linkFromPortIdProperty": `+this.quote(this.linkFromPortIdProperty)),this.linkToPortIdProperty!==""&&typeof this.linkToPortIdProperty=="string"&&(e+=`,
  "linkToPortIdProperty": `+this.quote(this.linkToPortIdProperty)),this.linkLabelKeysProperty!==""&&typeof this.linkLabelKeysProperty=="string"&&(e+=`,
  "linkLabelKeysProperty": `+this.quote(this.linkLabelKeysProperty)),this.nodeIsGroupProperty!=="isGroup"&&typeof this.nodeIsGroupProperty=="string"&&(e+=`,
  "nodeIsGroupProperty": `+this.quote(this.nodeIsGroupProperty)),this.nodeGroupKeyProperty!=="group"&&typeof this.nodeGroupKeyProperty=="string"&&(e+=`,
  "nodeGroupKeyProperty": `+this.quote(this.nodeGroupKeyProperty)),t+e},l.Wq=function(t){b.prototype.Wq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},l.Zw=function(){var t=b.prototype.Zw.call(this),e=`,
  "linkDataArray": `+Un(this,this.linkDataArray,!0);return t+e},l.pw=function(t){b.prototype.pw.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Mm(t),this.linkDataArray=t)},l.kr=function(t){if(!(t instanceof Pt))return E("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";this.linkKeyProperty===""&&E("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var e=b.prototype.kr.call(this,t);Ks(this,t,"linkKeyProperty"),Ks(this,t,"linkFromKeyProperty"),Ks(this,t,"linkToKeyProperty"),Ks(this,t,"linkLabelKeysProperty"),Ks(this,t,"nodeIsGroupProperty"),Ks(this,t,"nodeGroupKeyProperty");var i=this.Ji;i.clear();var n=new W,r=this.Mi;r.clear(),r.addAll(this.gb.iteratorKeys);for(var o=new ct,s=t.linkDataArray,u=s.length,a=0;a<u;a++){var f=s[a],c=t.Wb(f);if(c!==void 0){r.remove(c);var d=this.Eg(c);d===null?(i.add(c),n.add(f)):xh(this,d,f,o)||n.add(f)}else this.Pq(f),c=this.Wb(f),i.add(c),n.add(f)}return t=e,0<i.count&&(t+=this.pu+Un(this,i.ma(),!0)),0<n.count&&(t+=this.kx+Un(this,n.ma(),!0)),0<r.count&&(t+=this.ru+Un(this,r.ma(),!0)),r.clear(),i.clear(),t};function XS(t,e){for(var i=new W,n=0;n<t.linkDataArray.length;n++){var r=t.linkDataArray[n];od(t,e,r,r,i)}return i}l.Xw=function(t,e){this.linkKeyProperty===""&&E("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=b.prototype.Xw.call(this,t,e),n=this,r=new W,o=new W,s=new W,u=this.Xh;t.changes.each(function(c){c.model===n&&(c.modelChange==="linkDataArray"?c.change===Te?r.add(c.newValue):c.change===Ce&&s.add(c.oldValue):n.xc(c.object)?o.add(c.object):c.object!==null&&(c.object!==null&&u&&u.contains(c.object)?u.get(c.object).each(function(d){n.xc(d)&&o.add(d)}):c.object instanceof b||n.$a(c.object)||XS(n,c.object).each(function(d){o.add(d)})))});var a=this.Ji;a.clear(),r.each(function(c){a.add(n.Wb(c)),e||o.add(c)});var f=this.Mi;return f.clear(),s.each(function(c){f.add(n.Wb(c)),e&&o.add(c)}),t=i,0<a.count&&(t+=(e?this.ru:this.pu)+Un(this,a.ma(),!0)),0<o.count&&(t+=this.kx+Un(this,o.ma(),!0)),0<f.count&&(t+=(e?this.pu:this.ru)+Un(this,f.ma(),!0)),f.clear(),a.clear(),t},l.Vq=function(t){(t.linkCategoryProperty!==void 0&&t.linkCategoryProperty!==this.linkCategoryProperty||t.linkKeyProperty!==void 0&&t.linkKeyProperty!==this.linkKeyProperty||t.linkFromKeyProperty!==void 0&&t.linkFromKeyProperty!==this.linkFromKeyProperty||t.linkToKeyProperty!==void 0&&t.linkToKeyProperty!==this.linkToKeyProperty||t.linkFromPortIdProperty!==void 0&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||t.linkToPortIdProperty!==void 0&&t.linkToPortIdProperty!==this.linkToPortIdProperty||t.linkLabelKeysProperty!==void 0&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||t.nodeIsGroupProperty!==void 0&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||t.nodeGroupKeyProperty!==void 0&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&E("applyIncrementalJson cannot change Model properties"),b.prototype.Vq.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.Eg(r);o===null&&(o=this.wq({}),this.gu(o,r),this.aj(o))}if(e=t.modifiedLinkData,Array.isArray(e)){for(i=e.length,n=0;n<i;n++)if(r=e[n],o=this.Wb(r),o=this.Eg(o),o!==null){for(var s in r)s!=="__gohashid"&&s!==this.linkKeyProperty&&this.setDataProperty(o,s,r[s]);KS(this,r,o)}}if(t=t.removedLinkKeys,Array.isArray(t))for(s=t.length,e=0;e<s;e++)i=this.Eg(t[e]),i!==null&&this.Km(i)},Pt.prototype.changeState=function(t,e){if(t!==null&&t.model===this){if(t.change===le){var i=t.object,n=t.propertyName;if(n===this.linkKeyProperty&&this.xc(i)){var r=t.H(e);e=t.H(!e),e!==void 0&&this.gb.remove(e),r!==void 0&&this.gb.add(r,i),bt(i,n,r);return}}else if(t.change===Te){if(i=t.newParam,t.modelChange==="linkDataArray"){t=t.newValue,at(t)&&typeof i=="number"&&(n=this.Wb(t),e?(this.cg.remove(t),this.bd[i]===t&&this.bd.splice(i,1),n!==void 0&&this.gb.remove(n)):(this.cg.add(t),this.bd[i]!==t&&this.bd.splice(i,0,t),n!==void 0&&this.gb.add(n,t)));return}if(t.modelChange==="linkLabelKeys"){n=this.Df(t.object),Array.isArray(n)&&typeof i=="number"&&(e?(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)):0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue));return}}else if(t.change===Ce){if(i=t.oldParam,t.modelChange==="linkDataArray"){t=t.oldValue,at(t)&&typeof i=="number"&&(n=this.Wb(t),e?(this.cg.add(t),this.bd[i]!==t&&this.bd.splice(i,0,t),n!==void 0&&this.gb.add(n,t)):(this.cg.remove(t),this.bd[i]===t&&this.bd.splice(i,1),n!==void 0&&this.gb.remove(n)));return}if(t.modelChange==="linkLabelKeys"){n=this.Df(t.object),Array.isArray(n)&&typeof i=="number"&&(e?0>n.indexOf(t.newValue)&&n.splice(i,0,t.newValue):(i=n.indexOf(t.newValue),0<=i&&n.splice(i,1)));return}}b.prototype.changeState.call(this,t,e)}},l=Pt.prototype,l.Em=function(t){if(t!==void 0){var e=this.yj;if(e!==null){var i=this.Lb(t);i===null&&(i=this.copyNodeData(e),bt(i,this.nodeKeyProperty,t),this.wf(i))}return t}},l.yy=function(t){return on(this,t,!0)},l.Bw=function(t,e){Mh(this,t,e,!0)},l.By=function(t){return on(this,t,!1)},l.Gw=function(t,e){Mh(this,t,e,!1)};function on(t,e,i){if(e!==null&&(t=i?t.bf:t.cf,t!==""&&(t=ge(e,t),t!==void 0))){if(vs(t))return t;E((i?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Mh(t,e,i,n){if(i===null&&(i=void 0),e!==null){var r=n?t.bf:t.cf;if(r!=="")if(i=t.Em(i),t.xc(e)){var o=ge(e,r);o!==i&&(sr(t,o,e),bt(e,r,i),t.Lb(i)===null&&or(t,i,e),we(t,n?"linkFromKey":"linkToKey",le,r,e,o,i),typeof r=="string"&&t.Ca(e,r))}else bt(e,r,i)}}l.zy=function(t){return hd(this,t,!0)},l.Cw=function(t,e){Sh(this,t,e,!0)},l.Cy=function(t){return hd(this,t,!1)},l.Hw=function(t,e){Sh(this,t,e,!1)};function hd(t,e,i){return e===null||(t=i?t.Sj:t.Tj,t==="")?"":(e=ge(e,t),e===void 0?"":e)}function Sh(t,e,i,n){if(e!==null){var r=n?t.Sj:t.Tj;if(r!=="")if(t.xc(e)){var o=ge(e,r);o===void 0&&(o=""),o!==i&&(bt(e,r,i),we(t,n?"linkFromPortId":"linkToPortId",le,r,e,o,i),typeof r=="string"&&t.Ca(e,r))}else bt(e,r,i)}}l.Df=function(t){if(t===null)return ad;var e=this.Yd;return e===""?ad:(t=ge(t,e),t===void 0?ad:t)},l.hu=function(t,e){if(t!==null){var i=this.Yd;if(i!=="")if(this.xc(t)){var n=ge(t,i);if(n===void 0&&(n=ad),n!==e){if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)sr(this,n[o],t);for(bt(t,i,e),r=e.length,o=0;o<r;o++){var s=e[o];this.Lb(s)===null&&or(this,s,t)}we(this,"linkLabelKeys",le,i,t,n,e),typeof i=="string"&&this.Ca(t,i)}}else bt(t,i,e)}},l.Bv=function(t,e){if(e!=null&&t!==null){var i=this.Yd;if(i!==""){var n=ge(t,i);if(n===void 0)i=[],i.push(e),this.hu(t,i);else if(Array.isArray(n)){var r=n.indexOf(e);0<=r||(r=n.length,n.push(e),this.xc(t)&&(this.Lb(e)===null&&or(this,e,t),we(this,"linkLabelKeys",Te,i,t,null,e,null,r)))}else E(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},l.Qy=function(t,e){if(e!=null&&t!==null){var i=this.Yd;if(i!==""){var n=ge(t,i);if(Array.isArray(n)){var r=n.indexOf(e);0>r||(n.splice(r,1),this.xc(t)&&(sr(this,e,t),we(this,"linkLabelKeys",Ce,i,t,e,null,r,null)))}else n!==void 0&&E(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},l.Wb=function(t){if(t!==null){var e=this.Fi;if(e!==""&&(e=ge(t,e),e!==void 0)){if(vs(e))return e;E("Key value for link data "+t+" is not a number or a string: "+e)}}},l.gu=function(t,e){if(t!==null){var i=this.Fi;if(i!=="")if(this.xc(t)){var n=ge(t,i);n!==e&&this.Eg(e)===null&&(bt(t,i,e),n!==void 0&&this.gb.remove(n),this.gb.add(e,t),we(this,"linkKey",le,i,t,n,e),typeof i=="string"&&this.Ca(t,i))}else bt(t,i,e)}},l.Eg=function(t){return t===null&&E("GraphLinksModel.findLinkDataForKey:key must not be null"),t!==void 0&&vs(t)?this.gb.H(t):null},l.Pq=function(t){if(t!==null){var e=this.Fi;if(e!==""){var i=this.Wb(t);if(i===void 0||this.gb.contains(i)){var n=this.Pl;if(n!==null&&(i=n(this,t),i!=null&&!this.gb.contains(i))){bt(t,e,i);return}if(typeof i=="string"){for(n=2;this.gb.contains(i+n);)n++;bt(t,e,i+n)}else if(i===void 0||typeof i=="number"){for(i=-this.gb.count-1;this.gb.contains(i);)i--;bt(t,e,i)}}}}},l.xc=function(t){return t===null?!1:this.cg.contains(t)},l.aj=function(t){t!==null&&(xl(t),this.xc(t)||HS(this,t,!0))};function HS(t,e,i){if(t.linkKeyProperty!==""){var n=t.Wb(e);if(n!==void 0&&t.gb.H(n)===e)return;if(t.Pq(e),n=t.Wb(e),n===void 0){E("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model.");return}t.gb.add(n,e)}t.cg.add(e),n=null,i&&(n=t.bd.length,t.bd.splice(n,0,e)),we(t,"linkDataArray",Te,"linkDataArray",t,null,e,null,n),ym(t,e)}l.pz=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.aj(t[i]);else for(t=t.iterator;t.next();)this.aj(t.value)},l.Km=function(t){t!==null&&WS(this,t,!0)};function WS(t,e,i){t.cg.remove(e);var n=t.Wb(e);if(n!==void 0&&t.gb.remove(n),n=null,i){if(n=t.bd.indexOf(e),0>n)return;t.bd.splice(n,1)}if(we(t,"linkDataArray",Ce,"linkDataArray",t,e,null,n,null),i=on(t,e,!0),sr(t,i,e),i=on(t,e,!1),sr(t,i,e),n=t.Df(e),Array.isArray(n))for(var r=n.length,o=0;o<r;o++)i=n[o],sr(t,i,e)}l.SA=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)this.Km(t[i]);else for(t=t.iterator;t.next();)this.Km(t.value)},l.JA=function(t){if(this.linkKeyProperty===""&&E("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&jt(t)){var e=this.Mi;e.clear(),e.addAll(this.gb.iteratorKeys);var i=this.Ji;i.clear();for(var n=t.length,r=0;r<n;r++){var o=t[r],s=this.Wb(o);if(s!==void 0){i.add(s);var u=this.Eg(s);u!==o&&(u!==null?(this.rq(u,o),KS(this,o,u)):(o=this.cloneDeep(o),this.gu(o,s),this.aj(o)))}else s=this.cloneDeep(o),this.aj(s),i.add(this.Wb(s))}for(t=e.iterator;t.next();)n=t.value,i.contains(n)||(n=this.Eg(n))&&this.Km(n);e.clear(),i.clear()}};function ym(t,e){var i=on(t,e,!0);i=t.Em(i),t.Lb(i)===null&&or(t,i,e),i=on(t,e,!1),i=t.Em(i),t.Lb(i)===null&&or(t,i,e);var n=t.Df(e);if(Array.isArray(n))for(var r=n.length,o=0;o<r;o++)i=n[o],t.Lb(i)===null&&or(t,i,e)}l.wq=function(t){if(t===null)return null;var e=this.fl;return t=e!==null?e(t,this):ld(this,t,!0),at(t)&&(Oe(t),this.bf!==""&&bt(t,this.bf,void 0),this.cf!==""&&bt(t,this.cf,void 0),this.Yd!==""&&bt(t,this.Yd,[])),t},l.dw=function(t){if(t===null)return!1;var e=this.Tl;return e===""?!1:!!ge(t,e)},l.Kh=function(t){if(t!==null){var e=this.xe;if(e!==""&&(e=ge(t,e),e!==void 0)){if(vs(e))return e;E("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},l.cr=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.xe;if(i!=="")if(this.$a(t)){var n=ge(t,i);n!==e&&(sr(this,n,t),bt(t,i,e),this.Lb(e)===null&&or(this,e,t),we(this,"nodeGroupKey",le,i,t,n,e),typeof i=="string"&&this.Ca(t,i))}else bt(t,i,e)}},Pt.prototype.copyNodeData=function(t){return t===null?null:(t=b.prototype.copyNodeData.call(this,t),this.pk||this.xe===""||ge(t,this.xe)===void 0||bt(t,this.xe,void 0),t)},Pt.prototype.setDataProperty=function(t,e,i){if(this.$a(t)){if(e===this.nodeKeyProperty){this.Tm(t,i);return}if(e===this.nodeCategoryProperty){this.Sm(t,i);return}if(e===this.nodeGroupKeyProperty){this.cr(t,i);return}}else if(this.xc(t)){if(e===this.linkFromKeyProperty){Mh(this,t,i,!0);return}if(e===this.linkToKeyProperty){Mh(this,t,i,!1);return}if(e===this.linkFromPortIdProperty){Sh(this,t,i,!0);return}if(e===this.linkToPortIdProperty){Sh(this,t,i,!1);return}if(e===this.linkKeyProperty){this.gu(t,i);return}if(e===this.linkCategoryProperty){this.br(t,i);return}if(e===this.linkLabelKeysProperty){this.hu(t,i);return}}var n=ge(t,e);n!==i&&(bt(t,e,i),this.bu(t,e,n,i))},l=Pt.prototype,l.rq=function(t,e){if(e){var i=this.$a(t),n=this.xc(t),r;for(r in e)r==="__gohashid"||i&&r===this.nodeKeyProperty||i&&r===this.nodeIsGroupProperty&&ge(t,r)===e[r]||n&&r===this.linkKeyProperty||this.setDataProperty(t,r,e[r])}},l.$q=function(t,e){b.prototype.$q.call(this,t,e);for(var i=this.Va.iterator;i.next();)this.vw(i.value,t,e);for(i=this.cg.iterator;i.next();){var n=i.value,r=t,o=e;if(on(this,n,!0)===r){var s=this.bf;bt(n,s,o),we(this,"linkFromKey",le,s,n,r,o),typeof s=="string"&&this.Ca(n,s)}if(on(this,n,!1)===r&&(s=this.cf,bt(n,s,o),we(this,"linkToKey",le,s,n,r,o),typeof s=="string"&&this.Ca(n,s)),s=this.Df(n),Array.isArray(s))for(var u=s.length,a=this.Yd,f=0;f<u;f++)s[f]===r&&(s[f]=o,we(this,"linkLabelKeys",Te,a,n,r,o,f,f))}},l.vw=function(t,e,i){if(this.Kh(t)===e){var n=this.xe;bt(t,n,i),we(this,"nodeGroupKey",le,n,t,e,i),typeof n=="string"&&this.Ca(t,n)}},l.Sw=function(){b.prototype.Sw.call(this);for(var t=this.linkDataArray,e=t.length,i=0;i<e;i++)ym(this,t[i])},l.Om=function(t){b.prototype.Om.call(this,t),t=this.ja(t);var e=mf(this,t);if(e!==null){var i=Dt();for(e=e.iterator;e.next();){var n=e.value;if(this.$a(n)){if(this.Kh(n)===t){var r=this.xe;we(this,"nodeGroupKey",le,r,n,t,t),typeof r=="string"&&this.Ca(n,r),i.push(n)}}else if(on(this,n,!0)===t&&(r=this.bf,we(this,"linkFromKey",le,r,n,t,t),typeof r=="string"&&this.Ca(n,r),i.push(n)),on(this,n,!1)===t&&(r=this.cf,we(this,"linkToKey",le,r,n,t,t),typeof r=="string"&&this.Ca(n,r),i.push(n)),r=this.Df(n),Array.isArray(r))for(var o=r.length,s=this.Yd,u=0;u<o;u++)r[u]===t&&(we(this,"linkLabelKeys",Te,s,n,t,t,u,u),i.push(n))}for(e=0;e<i.length;e++)sr(this,t,i[e]);Xt(i)}},l.Nm=function(t){b.prototype.Nm.call(this,t);var e=this.Kh(t);this.Lb(e)===null&&or(this,e,t)},l.hr=function(t){b.prototype.hr.call(this,t);var e=this.Kh(t);sr(this,e,t)},l.Kt=function(t){if(t===null)return"";var e=this.Rj;return e===""||(e=ge(t,e),e===void 0)?"":typeof e=="string"?e:(E("getCategoryForLinkData found a non-string category for "+t+": "+e),"")},Pt.prototype.getLinkCategoryForData=function(t){return this.Kt(t)},Pt.prototype.br=function(t,e){if(t!==null){var i=this.Rj;if(i!=="")if(this.xc(t)){var n=ge(t,i);n===void 0&&(n=""),n!==e&&(bt(t,i,e),we(this,"linkCategory",le,i,t,n,e),typeof i=="string"&&this.Ca(t,i))}else bt(t,i,e)}},Pt.prototype.setLinkCategoryForData=function(t,e){this.br(t,e)},l=Pt.prototype,l.Um=function(t,e){b.prototype.Um.call(this,t,e),this.cr(e,this.Kh(t))};function KS(t,e,i){t.br(i,t.Kt(e)),t.Bw(i,t.yy(e)),t.Gw(i,t.By(e)),t.hu(i,t.Df(e)),t.Cw(i,t.zy(e)),t.Hw(i,t.Cy(e))}l.yk=function(){return!0},l.pj=function(){return!0},l.Tt=function(){return!0},l.zk=function(){return!0},X.Object.defineProperties(Pt.prototype,{archetypeNodeData:{get:function(){return this.yj},set:function(t){var e=this.yj;e!==t&&(this.yj=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.bf},set:function(t){var e=this.bf;e!==t&&(this.bf=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.cf},set:function(t){var e=this.cf;e!==t&&(this.cf=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.Sj},set:function(t){var e=this.Sj;e!==t&&(this.Sj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.Tj},set:function(t){var e=this.Tj;e!==t&&(this.Tj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.Yd},set:function(t){var e=this.Yd;e!==t&&(this.Yd=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.bd},set:function(t){var e=this.bd;if(e!==t){this.gb.clear();for(var i=t.length,n=0;n<i;n++){var r=t[n];if(!at(r)){E("GraphLinksModel.linkDataArray must only contain Objects, not: "+r);return}xl(r)}if(this.bd=t,this.linkKeyProperty!==""){for(n=new J,r=0;r<i;r++){var o=t[r],s=this.Wb(o);s===void 0||this.gb.H(s)!==null?n.add(o):this.gb.add(s,o)}for(n=n.iterator;n.next();)r=n.value,this.Pq(r),o=this.Wb(r),o!==void 0&&this.gb.add(o,r)}for(n=new W,r=0;r<i;r++)n.add(t[r]);for(this.cg=n,we(this,"linkDataArray",le,"linkDataArray",this,e,t),e=0;e<i;e++)ym(this,t[e])}}},linkKeyProperty:{get:function(){return this.Fi},set:function(t){var e=this.Fi;if(e!==t){this.Fi=t,this.gb.clear();for(var i=this.linkDataArray.length,n=0;n<i;n++){var r=this.linkDataArray[n],o=this.Wb(r);o===void 0&&(this.Pq(r),o=this.Wb(r)),o!==void 0&&this.gb.add(o,r)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Pl},set:function(t){var e=this.Pl;e!==t&&(this.Pl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.fl},set:function(t){var e=this.fl;e!==t&&(this.fl=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Tl},set:function(t){var e=this.Tl;e!==t&&(this.Tl=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.xe},set:function(t){var e=this.xe;e!==t&&(this.xe=t,this.g("nodeGroupKeyProperty",e,t))}},pk:{get:function(){return this.Bn},set:function(t){this.Bn!==t&&(this.Bn=t)}},linkCategoryProperty:{get:function(){return this.Rj},set:function(t){var e=this.Rj;e!==t&&(this.Rj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Pt.prototype.setCategoryForLinkData=Pt.prototype.br,Pt.prototype.getCategoryForLinkData=Pt.prototype.Kt,Pt.prototype.assignAllDataProperties=Pt.prototype.rq,Pt.prototype.setGroupKeyForNodeData=Pt.prototype.cr,Pt.prototype.getGroupKeyForNodeData=Pt.prototype.Kh,Pt.prototype.isGroupForNodeData=Pt.prototype.dw,Pt.prototype.copyLinkData=Pt.prototype.wq,Pt.prototype.mergeLinkDataArray=Pt.prototype.JA,Pt.prototype.removeLinkDataCollection=Pt.prototype.SA,Pt.prototype.removeLinkData=Pt.prototype.Km,Pt.prototype.addLinkDataCollection=Pt.prototype.pz,Pt.prototype.addLinkData=Pt.prototype.aj,Pt.prototype.containsLinkData=Pt.prototype.xc,Pt.prototype.makeLinkDataKeyUnique=Pt.prototype.Pq,Pt.prototype.findLinkDataForKey=Pt.prototype.Eg,Pt.prototype.setKeyForLinkData=Pt.prototype.gu,Pt.prototype.getKeyForLinkData=Pt.prototype.Wb,Pt.prototype.removeLabelKeyForLinkData=Pt.prototype.Qy,Pt.prototype.addLabelKeyForLinkData=Pt.prototype.Bv,Pt.prototype.setLabelKeysForLinkData=Pt.prototype.hu,Pt.prototype.getLabelKeysForLinkData=Pt.prototype.Df,Pt.prototype.setToPortIdForLinkData=Pt.prototype.Hw,Pt.prototype.getToPortIdForLinkData=Pt.prototype.Cy,Pt.prototype.setFromPortIdForLinkData=Pt.prototype.Cw,Pt.prototype.getFromPortIdForLinkData=Pt.prototype.zy,Pt.prototype.setToKeyForLinkData=Pt.prototype.Gw,Pt.prototype.getToKeyForLinkData=Pt.prototype.By,Pt.prototype.setFromKeyForLinkData=Pt.prototype.Bw,Pt.prototype.getFromKeyForLinkData=Pt.prototype.yy,Pt.prototype.clear=Pt.prototype.clear;var ad=Object.freeze([]);Pt.className="GraphLinksModel",Yn.GraphLinksModel=Pt,b.constructGraphLinksModel=b.constructGraphLinksModel=function(){return new Pt},b.initDiagramModel=dm=function(){return new Pt};function Si(t){b.call(this),this.ye="parent",this.Dn=!1,this.Yj="parentLinkCategory",t!==void 0&&(this.nodeDataArray=t)}ut(Si,b),Si.constructGraphLinksModel=b.constructGraphLinksModel,Si.prototype.cloneProtected=function(t){b.prototype.cloneProtected.call(this,t),t.ye=this.ye,t.Dn=this.Dn,t.Yj=this.Yj},l=Si.prototype,l.toString=function(t){if(t===void 0&&(t=0),2<=t)return this.fr();var e=(this.name!==""?this.name:"")+" TreeModel";if(0<t){e+=`
 node data:`,t=this.nodeDataArray;for(var i=t.length,n=0;n<i;n++){var r=t[n];e+=" "+this.ja(r)+":"+Xe(r)}}return e},l.Sk=function(){var t=b.prototype.Sk.call(this),e="";return this.nodeParentKeyProperty!=="parent"&&typeof this.nodeParentKeyProperty=="string"&&(e+=`,
  "nodeParentKeyProperty": `+this.quote(this.nodeParentKeyProperty)),t+e},l.Wq=function(t){b.prototype.Wq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},l.kr=function(t){return Ks(this,t,"nodeParentKeyProperty"),b.prototype.kr.call(this,t)},l.Vq=function(t){t.nodeParentKeyProperty!==void 0&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&E("applyIncrementalJson cannot change Model properties"),b.prototype.Vq.call(this,t)},l.Em=function(t){return t},l.Lh=function(t){if(t!==null){var e=this.ye;if(e!==""&&(e=ge(t,e),e!==void 0)){if(vs(e))return e;E("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},l.de=function(t,e){if(e===null&&(e=void 0),t!==null){var i=this.ye;if(i!=="")if(e=this.Em(e),this.$a(t)){var n=ge(t,i);n!==e&&(sr(this,n,t),bt(t,i,e),this.Lb(e)===null&&or(this,e,t),we(this,"nodeParentKey",le,i,t,n,e),typeof i=="string"&&this.Ca(t,i))}else bt(t,i,e)}},l.Nt=function(t){if(t===null)return"";var e=this.Yj;return e===""||(e=ge(t,e),e===void 0)?"":typeof e=="string"?e:(E("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},Si.prototype.getLinkCategoryForData=function(t){return this.Nt(t)},Si.prototype.iu=function(t,e){if(t!==null){var i=this.Yj;if(i!=="")if(this.$a(t)){var n=ge(t,i);n===void 0&&(n=""),n!==e&&(bt(t,i,e),we(this,"parentLinkCategory",le,i,t,n,e),typeof i=="string"&&this.Ca(t,i))}else bt(t,i,e)}},Si.prototype.setLinkCategoryForData=function(t,e){this.iu(t,e)},Si.prototype.copyNodeData=function(t){return t===null?null:(t=b.prototype.copyNodeData.call(this,t),this.qk||this.ye===""||ge(t,this.ye)===void 0||bt(t,this.ye,void 0),t)},Si.prototype.setDataProperty=function(t,e,i){if(this.$a(t)){if(e===this.nodeKeyProperty){this.Tm(t,i);return}if(e===this.nodeCategoryProperty){this.Sm(t,i);return}if(e===this.nodeParentKeyProperty){this.de(t,i);return}}var n=ge(t,e);n!==i&&(bt(t,e,i),this.bu(t,e,n,i))},l=Si.prototype,l.$q=function(t,e){b.prototype.$q.call(this,t,e);for(var i=this.Va.iterator;i.next();)this.vw(i.value,t,e)},l.vw=function(t,e,i){if(this.Lh(t)===e){var n=this.ye;bt(t,n,i),we(this,"nodeParentKey",le,n,t,e,i),typeof n=="string"&&this.Ca(t,n)}},l.Om=function(t){b.prototype.Om.call(this,t),t=this.ja(t);var e=mf(this,t);if(e!==null){var i=Dt();for(e=e.iterator;e.next();){var n=e.value;if(this.$a(n)&&this.Lh(n)===t){var r=this.ye;we(this,"nodeParentKey",le,r,n,t,t),typeof r=="string"&&this.Ca(n,r),i.push(n)}}for(e=0;e<i.length;e++)sr(this,t,i[e]);Xt(i)}},l.Nm=function(t){b.prototype.Nm.call(this,t);var e=this.Lh(t);e=this.Em(e),this.Lb(e)===null&&or(this,e,t)},l.hr=function(t){b.prototype.hr.call(this,t);var e=this.Lh(t);sr(this,e,t)},l.Um=function(t,e){b.prototype.Um.call(this,t,e),this.iu(e,this.Nt(t)),this.de(e,this.Lh(t))},l.Cm=function(){return!0},l.Tt=function(){return!0},X.Object.defineProperties(Si.prototype,{nodeParentKeyProperty:{get:function(){return this.ye},set:function(t){var e=this.ye;e!==t&&(this.ye=t,this.g("nodeParentKeyProperty",e,t))}},qk:{get:function(){return this.Dn},set:function(t){this.Dn!==t&&(this.Dn=t)}},parentLinkCategoryProperty:{get:function(){return this.Yj},set:function(t){var e=this.Yj;e!==t&&(this.Yj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),Si.prototype.setParentLinkCategoryForNodeData=Si.prototype.iu,Si.prototype.getParentLinkCategoryForNodeData=Si.prototype.Nt,Si.prototype.setParentKeyForNodeData=Si.prototype.de,Si.prototype.getParentKeyForNodeData=Si.prototype.Lh,Si.className="TreeModel",Yn.TreeModel=Si;function ue(){It.call(this),this.wx=this.Rn=this.$b=0,this.Ur=360,this.vx=Gn,this.Gj=0,this.mx=new k,this.Gr=this.Zd=0,this.st=new Mf,this.yu=this.Xj=0,this.hz=600,this.tp=NaN,this.mn=1,this.Yp=0,this.jm=360,this.Fb=Gn,this.K=ki,this.dd=Ph,this.Yc=um,this.mf=6,this.cp=md}ut(ue,It),ue.prototype.cloneProtected=function(t){It.prototype.cloneProtected.call(this,t),t.tp=this.tp,t.mn=this.mn,t.Yp=this.Yp,t.jm=this.jm,t.Fb=this.Fb,t.K=this.K,t.dd=this.dd,t.Yc=this.Yc,t.mf=this.mf,t.cp=this.cp},ue.prototype.jb=function(t){t.classType===ue?t===gd||t===yd||t===pd||t===dd||t===Ph?this.sorting=t:t===_s||t===kh||t===ki||t===ws?this.direction=t:t===Yo||t===xs||t===Gn||t===Xn?this.arrangement=t:(t===Yl||t===md)&&(this.nodeDiameterFormula=t):It.prototype.jb.call(this,t)},ue.prototype.createNetwork=function(){return new Nh(this)},ue.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),t=this.network.vertexes,1>=t.count)t.count===1&&(t=t.first(),t.centerX=0,t.centerY=0);else{var e=new J;e.addAll(t.iterator),t=new J;var i=new J,n=this.sort(e),r,o,s=this.Gr,u=this.arrangement,a=this.nodeDiameterFormula,f=this.radius;(!isFinite(f)||0>=f)&&(f=NaN);var c=this.aspectRatio;(!isFinite(c)||0>=c)&&(c=1);var d=this.startAngle;isFinite(d)||(d=0);var g=this.sweepAngle;if((!isFinite(g)||360<g||1>g)&&(g=360),e=this.spacing,isFinite(e)||(e=NaN),u===Xn&&a===Yl?u=Gn:u===Xn&&a!==Yl&&(u=this.arrangement),(this.direction===_s||this.direction===kh)&&this.sorting!==Ph){for(a=0;!(a>=n.length)&&(t.add(n.J(a)),!(a+1>=n.length));a+=2)i.add(n.J(a+1));this.direction===_s?(this.arrangement===Xn&&t.reverse(),n=new J,n.addAll(t),n.addAll(i)):(this.arrangement===Xn&&i.reverse(),n=new J,n.addAll(i),n.addAll(t))}a=n.length;for(var m=o=r=0;m<n.length;m++){var y=d+g*o*(this.direction===ki?1:-1)/a,x=n.J(m).diameter;isNaN(x)&&(x=Ms(n.J(m),y)),360>g&&(m===0||m===n.length-1)&&(x/=2),r+=x,o++}if(isNaN(f)||u===Xn){if(isNaN(e)&&(e=6),u!==Gn&&u!==Xn){for(o=-Infinity,s=0;s<a;s++)m=n.J(s),r=n.J(s===a-1?0:s+1),isNaN(m.diameter)&&Ms(m,0),isNaN(r.diameter)&&Ms(r,0),o=Math.max(o,(m.diameter+r.diameter)/2);s=o+e,u===Yo?f=(o+e)/(2*Math.PI/a):f=fd(this,s*(360<=g?a:a-1),c,d*Math.PI/180,g*Math.PI/180)}else f=fd(this,r+(360<=g?a:a-1)*(u!==Xn?e:1.6*e),c,d*Math.PI/180,g*Math.PI/180);o=f*c}else if(o=f*c,m=mm(this,f,o,d*Math.PI/180,g*Math.PI/180),isNaN(e))(u===Gn||u===Xn)&&(e=(m-r)/(360<=g?a:a-1));else if(u===Gn||u===Xn)m=(m-r)/(360<=g?a:a-1),m<e?(f=fd(this,r+e*(360<=g?a:a-1),c,d*Math.PI/180,g*Math.PI/180),o=f*c):e=m;else{for(s=-Infinity,r=0;r<a;r++)y=n.J(r),x=n.J(r===a-1?0:r+1),isNaN(y.diameter)&&Ms(y,0),isNaN(x.diameter)&&Ms(x,0),s=Math.max(s,(y.diameter+x.diameter)/2);s+=e,r=fd(this,s*(360<=g?a:a-1),c,d*Math.PI/180,g*Math.PI/180),r>f?(f=r,o=f*c):s=m/(360<=g?a:a-1)}if(this.vx=u,this.$b=f,this.Rn=c,this.wx=d,this.Ur=g,this.Gj=e,this.Zd=o,this.Gr=s,e=n,n=this.vx,u=this.$b,f=this.wx,c=this.Ur,d=this.Gj,g=this.Zd,a=this.Gr,this.direction!==_s&&this.direction!==kh||n!==Xn)if(this.direction===_s||this.direction===kh){switch(s=0,n){case xs:s=180*cd(this,u,g,f,a)/Math.PI;break;case Gn:a=e=0,s=t.first(),s!==null&&(e=Ms(s,Math.PI/2)),s=i.first(),s!==null&&(a=Ms(s,Math.PI/2)),s=180*cd(this,u,g,f,d+(e+a)/2)/Math.PI;break;case Yo:s=c/e.length}if(this.direction===_s){switch(n){case xs:wf(this,t,f,ws);break;case Gn:xf(this,t,f,ws);break;case Yo:vf(this,t,c/2,f,ws)}switch(n){case xs:wf(this,i,f+s,ki);break;case Gn:xf(this,i,f+s,ki);break;case Yo:vf(this,i,c/2,f+s,ki)}}else{switch(n){case xs:wf(this,i,f,ws);break;case Gn:xf(this,i,f,ws);break;case Yo:vf(this,i,c/2,f,ws)}switch(n){case xs:wf(this,t,f+s,ki);break;case Gn:xf(this,t,f+s,ki);break;case Yo:vf(this,t,c/2,f+s,ki)}}}else switch(n){case xs:wf(this,e,f,this.direction);break;case Gn:xf(this,e,f,this.direction);break;case Yo:vf(this,e,c,f,this.direction);break;case Xn:_S(this,e,c,f,this.direction)}else _S(this,e,c,f-c/2,ki)}this.updateParts(),this.network=null,this.isValidLayout=!0};function vf(t,e,i,n,r){var o=t.Ur,s=t.$b;t=t.Zd,n=n*Math.PI/180,i=i*Math.PI/180;for(var u=e.length,a=0;a<u;a++){var f=n+(r===ki?a*i/(360<=o?u:u-1):-(a*i)/u),c=e.J(a),d=s*Math.tan(f)/t;d=Math.sqrt((s*s+t*t*d*d)/(1+d*d)),c.centerX=d*Math.cos(f),c.centerY=d*Math.sin(f),c.actualAngle=180*f/Math.PI}}function xf(t,e,i,n){var r=t.$b,o=t.Zd,s=t.Gj;i=i*Math.PI/180;for(var u=e.length,a=0;a<u;a++){var f=e.J(a),c=e.J(a===u-1?0:a+1),d=o*Math.sin(i);f.centerX=r*Math.cos(i),f.centerY=d,f.actualAngle=180*i/Math.PI,isNaN(f.diameter)&&Ms(f,0),isNaN(c.diameter)&&Ms(c,0),f=cd(t,r,o,n===ki?i:-i,(f.diameter+c.diameter)/2+s),i+=n===ki?f:-f}}function wf(t,e,i,n){var r=t.$b,o=t.Zd,s=t.Gr;i=i*Math.PI/180;for(var u=e.length,a=0;a<u;a++){var f=e.J(a);f.centerX=r*Math.cos(i),f.centerY=o*Math.sin(i),f.actualAngle=180*i/Math.PI,f=cd(t,r,o,n===ki?i:-i,s),i+=n===ki?f:-f}}function _S(t,e,i,n,r){var o=t.Ur;if(t.Xj=0,t.st=new Mf,360>i){for(o=n+(r===ki?o:-o);0>o;)o+=360;o%=360,180<o&&(o-=360),o*=Math.PI/180,t.yu=o,ZS(t,e,i,n,r)}else $S(t,e,i,n,r);t.st.commit(e)}function $S(t,e,i,n,r){var o=t.$b,s=t.Gj,u=t.Rn,a=o*Math.cos(n*Math.PI/180),f=t.Zd*Math.sin(n*Math.PI/180),c=e.ma();if(c.length===3)c[0].centerX=o,c[0].centerY=0,c[1].centerX=c[0].centerX-c[0].width/2-c[1].width/2-s,c[1].y=c[0].y,c[2].centerX=(c[0].centerX+c[1].centerX)/2,c[2].y=c[0].y-c[2].height-s;else if(c.length===4)c[0].centerX=o,c[0].centerY=0,c[2].centerX=-c[0].centerX,c[2].centerY=c[0].centerY,c[1].centerX=0,c[1].y=Math.min(c[0].y,c[2].y)-c[1].height-s,c[3].centerX=0,c[3].y=Math.max(c[0].y+c[0].height+s,c[2].y+c[2].height+s);else{o=k.alloc();for(var d=0;d<c.length&&(c[d].centerX=a,c[d].centerY=f,!(d>=c.length-1));d++)JS(t,a,f,c,d,r,o)||QS(t,a,f,c,d,r,o),a=o.x,f=o.y;if(k.free(o),t.Xj++,!(23<t.Xj)){a=c[0].centerX,f=c[0].centerY,o=c[c.length-1].centerX,d=c[c.length-1].centerY;var g=Math.abs(a-o)-((c[0].width+c[c.length-1].width)/2+s),m=Math.abs(f-d)-((c[0].height+c[c.length-1].height)/2+s);s=0,1>Math.abs(m)?Math.abs(a-o)<(c[0].width+c[c.length-1].width)/2&&(s=0):s=0<m?m:1>Math.abs(g)?0:g,a=Math.abs(o)>Math.abs(d)?0<o!=f>d:0<d!=a<o,(a=r===ki?a:!a)&&(s=-Math.abs(s),s=Math.min(s,-c[c.length-1].width),s=Math.min(s,-c[c.length-1].height)),t.st.compare(s,c),1<Math.abs(s)&&(t.$b=8>t.Xj?t.$b-s/(2*Math.PI):5>c.length&&10<s?t.$b/2:t.$b-(0<s?1.7:-2.3),t.Zd=t.$b*u,$S(t,e,i,n,r))}}}function ZS(t,e,i,n,r){for(var o=t.$b,s=t.Zd,u=t.Rn,a=o*Math.cos(n*Math.PI/180),f=s*Math.sin(n*Math.PI/180),c=k.alloc(),d=e.ma(),g=0;g<d.length&&(d[g].centerX=a,d[g].centerY=f,!(g>=d.length-1));g++)JS(t,a,f,d,g,r,c)||QS(t,a,f,d,g,r,c),a=c.x,f=c.y;if(k.free(c),t.Xj++,!(23<t.Xj)){if(a=Math.atan2(f,a),a=r===ki?t.yu-a:a-t.yu,a=Math.abs(a)<Math.abs(a-2*Math.PI)?a:a-2*Math.PI,o=a*(o+s)/2,s=t.st,Math.abs(o)<Math.abs(s.ym))for(s.ym=o,s.Tk=[],s.$m=[],a=0;a<d.length;a++)s.Tk[a]=d[a].bounds.x,s.$m[a]=d[a].bounds.y;1<Math.abs(o)&&(t.$b=8>t.Xj?t.$b-o/(2*Math.PI):t.$b-(0<o?1.7:-2.3),t.Zd=t.$b*u,ZS(t,e,i,n,r))}}function JS(t,e,i,n,r,o,s){var u=t.$b,a=t.Zd,f=0;t=(n[r].width+n[r+1].width)/2+t.Gj;var c=!1;if(0<=i!=(o===ki)){if(o=e+t,o>u){if(o=e-t,o<-u)return s.x=o,s.y=f,!1;c=!0}}else if(o=e-t,o<-u){if(o=e+t,o>u)return s.x=o,s.y=f,!1;c=!0}return f=Math.sqrt(1-Math.min(1,o*o/(u*u)))*a,0>i!==c&&(f=-f),Math.abs(i-f)>(n[r].height+n[r+1].height)/2?(s.x=o,s.y=f,!1):(s.x=o,s.y=f,!0)}function QS(t,e,i,n,r,o,s){var u=t.$b,a=t.Zd,f=0;if(t=(n[r].height+n[r+1].height)/2+t.Gj,n=!1,0<=e!=(o===ki)){if(o=i-t,o<-a){if(o=i+t,o>a){s.x=f,s.y=o;return}n=!0}}else if(o=i+t,o>a){if(o=i-t,o<-a){s.x=f,s.y=o;return}n=!0}f=Math.sqrt(1-Math.min(1,o*o/(a*a)))*u,0>e!==n&&(f=-f),s.x=f,s.y=o}ue.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},ue.prototype.commitNodes=function(){var t=this.group!==null&&this.group.placeholder!==null&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,i=this.actualCenter;t?i=new k(0,0):(i.x=this.arrangementOrigin.x+this.$b,i.y=this.arrangementOrigin.y+this.Zd);for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;r.x+=i.x,r.y+=i.y,r.commit()}t&&(this.group.Ta(),t=this.group.position.copy(),i=this.group.location.copy(),e=e.ee(i.ee(t)),this.group.move(e),this.mx=e.ee(t))},ue.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()};function mm(t,e,i,n,r){var o=t.hz;if(.001>Math.abs(t.Rn-1))return n!==void 0&&r!==void 0?r*e:2*Math.PI*e;t=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i;for(var s=0,u=n!==void 0&&r!==void 0?r/(o+1):Math.PI/(2*(o+1)),a=0,f=0;f<=o;f++){n!==void 0&&r!==void 0?a=n+f*r/o:a=f*Math.PI/(2*o);var c=Math.sin(a);s+=Math.sqrt(1-t*t*c*c)*u}return n!==void 0&&r!==void 0?(e>i?e:i)*s:4*(e>i?e:i)*s}function fd(t,e,i,n,r){return e/(n!==void 0&&r!==void 0?mm(t,1,i,n,r):mm(t,1,i))}function cd(t,e,i,n,r){if(.001>Math.abs(t.Rn-1))return r/e;var o=e>i?Math.sqrt(e*e-i*i)/e:Math.sqrt(i*i-e*e)/i,s=0;t=2*Math.PI/(700*t.network.vertexes.count),e>i&&(n+=Math.PI/2);for(var u=0;;u++){var a=Math.sin(n+u*t);if(s+=(e>i?e:i)*Math.sqrt(1-o*o*a*a)*t,s>=r)return u*t}}ue.prototype.sort=function(t){switch(this.sorting){case pd:break;case dd:t.reverse();break;case gd:t.sort(this.comparer);break;case yd:t.sort(this.comparer),t.reverse();break;case Ph:return this.lw(LT(t));default:E("Invalid sorting type.")}return t};function LT(t){for(var e=[],i=0;i<t.length;i++)e.push(0);i=new J;for(var n=0;n<t.length;n++){var r=-1,o=-1;if(n===0)for(var s=0;s<t.length;s++){var u=t.J(s).edgesCount;u>r&&(r=u,o=s)}else for(s=0;s<t.length;s++)u=e[s],u>r&&(r=u,o=s);for(i.add(t.J(o)),e[o]=-1,o=t.J(o),s=o.sourceEdges;s.next();)r=t.indexOf(s.value.fromVertex),0>r||0<=e[r]&&e[r]++;for(o=o.destinationEdges;o.next();)r=t.indexOf(o.value.toVertex),0>r||0<=e[r]&&e[r]++}return i}ue.prototype.lw=function(t){for(var e=[],i=0;i<t.length;i++){var n=t.J(i);e[i]=[];for(var r,o=n.destinationEdges;o.next();)r=t.indexOf(o.value.toVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r);for(n=n.sourceEdges;n.next();)r=t.indexOf(n.value.fromVertex),r!==i&&0>e[i].indexOf(r)&&e[i].push(r)}for(o=[],i=0;i<e.length;i++)o[i]=0;i=[];var s=[],u=[];n=[],r=new J;for(var a=0,f=0;f<e.length;f++){var c=e[f].length;if(c===1)n.push(f);else if(c===0)r.add(t.J(f));else{if(a===0)i.push(f);else{for(var d=c=Infinity,g=-1,m=[],y=0;y<i.length;y++)0>e[i[y]].indexOf(i[y===i.length-1?0:y+1])&&m.push(y===i.length-1?0:y+1);if(m.length===0)for(y=0;y<i.length;y++)m.push(y);for(y=0;y<m.length;y++){for(var x=m[y],M=e[f],S=0,N=0;N<s.length;N++){var T=o[s[N]],C=o[u[N]];if(T<C){var D=T;T=C}else D=C;if(D<x&&x<=T)for(C=0;C<M.length;C++){var F=M[C];0>i.indexOf(F)||D<o[F]&&o[F]<T||D===o[F]||T===o[F]||S++}else for(C=0;C<M.length;C++)F=M[C],0>i.indexOf(F)||D<o[F]&&o[F]<T&&D!==o[F]&&T!==o[F]&&S++}for(M=S,N=S=0;N<e[f].length;N++)D=i.indexOf(e[f][N]),0<=D&&(D=Math.abs(x-(D>=x?D+1:D)),S+=D<i.length+1-D?D:i.length+1-D);for(N=0;N<s.length;N++)D=o[s[N]],T=o[u[N]],D>=x&&D++,T>=x&&T++,D>T&&(C=T,T=D,D=C),T-D<(i.length+2)/2==(D<x&&x<=T)&&S++;(M<c||M===c&&S<d)&&(c=M,d=S,g=x)}for(i.splice(g,0,f),c=0;c<i.length;c++)o[i[c]]=c;for(c=0;c<e[f].length;c++)d=e[f][c],0<=i.indexOf(d)&&(s.push(f),u.push(d))}a++}}for(s=i.length;;){for(o=!0,u=0;u<n.length;u++)if(a=n[u],f=e[a][0],c=i.indexOf(f),0<=c){for(g=d=0;g<e[f].length;g++)m=i.indexOf(e[f][g]),0>m||m===c||(y=m>c?m-c:c-m,d+=m<c!=y>s-y?1:-1);i.splice(0>d?c:c+1,0,a),n.splice(u,1),u--}else o=!1;if(o)break;i.push(n[0]),n.splice(0,1)}for(e=0;e<i.length;e++)r.add(t.J(i[e]));return r},X.Object.defineProperties(ue.prototype,{radius:{get:function(){return this.tp},set:function(t){this.tp!==t&&(0<t||isNaN(t))&&(this.tp=t,this.C())}},aspectRatio:{get:function(){return this.mn},set:function(t){this.mn!==t&&0<t&&(this.mn=t,this.C())}},startAngle:{get:function(){return this.Yp},set:function(t){this.Yp!==t&&(this.Yp=t,this.C())}},sweepAngle:{get:function(){return this.jm},set:function(t){this.jm!==t&&(0<t&&360>=t?this.jm=t:this.jm=360,this.C())}},arrangement:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==Xn&&t!==Gn&&t!==xs&&t!==Yo||(this.Fb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==ki&&t!==ws&&t!==_s&&t!==kh||(this.K=t,this.C())}},sorting:{get:function(){return this.dd},set:function(t){this.dd===t||t!==pd&&t!==dd&&t!==gd&&!yd&&t!==Ph||(this.dd=t,this.C())}},comparer:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t,this.C())}},spacing:{get:function(){return this.mf},set:function(t){this.mf!==t&&(this.mf=t,this.C())}},nodeDiameterFormula:{get:function(){return this.cp},set:function(t){this.cp===t||t!==md&&t!==Yl||(this.cp=t,this.C())}},actualXRadius:{get:function(){return this.$b}},actualYRadius:{get:function(){return this.Zd}},actualSpacing:{get:function(){return this.Gj}},actualCenter:{get:function(){return this.mx}}});var Gn=new K(ue,"ConstantSpacing",0),xs=new K(ue,"ConstantDistance",1),Yo=new K(ue,"ConstantAngle",2),Xn=new K(ue,"Packed",3),ki=new K(ue,"Clockwise",4),ws=new K(ue,"Counterclockwise",5),_s=new K(ue,"BidirectionalLeft",6),kh=new K(ue,"BidirectionalRight",7),pd=new K(ue,"Forwards",8),dd=new K(ue,"Reverse",9),gd=new K(ue,"Ascending",10),yd=new K(ue,"Descending",11),Ph=new K(ue,"Optimized",12),md=new K(ue,"Pythagorean",13),Yl=new K(ue,"Circular",14);ue.className="CircularLayout",ue.ConstantSpacing=Gn,ue.ConstantDistance=xs,ue.ConstantAngle=Yo,ue.Packed=Xn,ue.Clockwise=ki,ue.Counterclockwise=ws,ue.BidirectionalLeft=_s,ue.BidirectionalRight=kh,ue.Forwards=pd,ue.Reverse=dd,ue.Ascending=gd,ue.Descending=yd,ue.Optimized=Ph,ue.Pythagorean=md,ue.Circular=Yl;function Mf(){this.ym=-Infinity,this.$m=this.Tk=null}Mf.prototype.compare=function(t,e){if(0<t&&0>this.ym||Math.abs(t)<Math.abs(this.ym)&&!(0>t&&0<this.ym))for(this.ym=t,this.Tk=[],this.$m=[],t=0;t<e.length;t++)this.Tk[t]=e[t].bounds.x,this.$m[t]=e[t].bounds.y},Mf.prototype.commit=function(t){if(this.Tk!==null&&this.$m!==null)for(var e=0;e<this.Tk.length;e++){var i=t.J(e);i.x=this.Tk[e],i.y=this.$m[e]}},Mf.className="VertexArrangement";function Nh(t){$t.call(this,t)}ut(Nh,$t),Nh.prototype.createVertex=function(){return new Sf(this)},Nh.prototype.createEdge=function(){return new vd(this)},Nh.className="CircularNetwork";function Sf(t){xe.call(this,t),this.I=this.Ej=NaN}ut(Sf,xe);function Ms(t,e){var i=t.network;if(i===null)return NaN;if(i=i.layout,i===null)return NaN;if(i.arrangement===Xn)if(i.nodeDiameterFormula===Yl)t.Ej=Math.max(t.width,t.height);else{if(i=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),i===0)return t.width;if(e===0)return t.height;t.Ej=Math.min(t.height/i,t.width/e)}else t.Ej=i.nodeDiameterFormula===Yl?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Ej}X.Object.defineProperties(Sf.prototype,{diameter:{get:function(){return this.Ej},set:function(t){this.Ej!==t&&(this.Ej=t)}},actualAngle:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}}}),Sf.className="CircularVertex";function vd(t){Ze.call(this,t)}ut(vd,Ze),vd.className="CircularEdge";function Ae(){It.call(this),this.Eh=null,this.yo=0,this.Nd=new pt(100,100).freeze(),this.ln=!1,this.kf=!0,this.ld=!1,this.Ql=100,this.Un=1,this.Zf=1e3,this.Wo=10,this.vp=Math,this.ml=.05,this.ll=50,this.jl=150,this.kl=0,this.Ln=10,this.Kn=5}ut(Ae,It),Ae.prototype.cloneProtected=function(t){It.prototype.cloneProtected.call(this,t),t.Nd.assign(this.Nd),t.ln=this.ln,t.kf=this.kf,t.ld=this.ld,t.Ql=this.Ql,t.Un=this.Un,t.Zf=this.Zf,t.Wo=this.Wo,t.vp=this.vp,t.ml=this.ml,t.ll=this.ll,t.jl=this.jl,t.kl=this.kl,t.Ln=this.Ln,t.Kn=this.Kn},Ae.prototype.serializeLayoutProperties=function(t,e){It.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},Ae.prototype.deserializeLayoutProperties=function(t,e,i,n){It.prototype.deserializeLayoutProperties.call(this,t,e,i,n),this.arrangementSpacing=new pt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},Ae.prototype.createNetwork=function(){return new Gl(this)},Ae.prototype.doLayout=function(t){if(this.network===null&&(this.network=this.makeNetwork(t)),!this.Uw()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.xq();for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(e=this.network.edges.iterator;e.next();)i=e.value,i.stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.Dv(),this.yo=0,this.needsClusterLayout()){e=this.network,i=e.Zy();for(var n=i.iterator;n.next();){this.network=n.value;for(var r=this.network.vertexes.iterator;r.next();){var o=r.value;o.Jd=o.vertexes.count,o.Rh=1,o.nk=null,o.Me=null}qS(this,0,t)}this.network=e;var s=n=i.iterator;n=this.arrangementSpacing;var u=s.count,a=!0;o=r=0;for(var f=Dt(),c=0;c<u+e.vertexes.count+2;c++)f[c]=null;u=0,s.reset();for(var d=I.alloc();s.next();)if(c=s.value,this.computeBounds(c,d),a)a=!1,r=d.x+d.width/2,o=d.y+d.height/2,f[0]=new k(d.x+d.width+n.width,d.y),f[1]=new k(d.x,d.y+d.height+n.height),u=2;else{var g=bS(f,u,r,o,d.width,d.height,n),m=f[g],y=new k(m.x+d.width+n.width,m.y),x=new k(m.x,m.y+d.height+n.height);for(g+1<u&&f.splice(g+1,0,null),f[g]=y,f[g+1]=x,u++,g=m.x-d.x,m=m.y-d.y,c=c.vertexes.iterator;c.next();)y=c.value,y.centerX+=g,y.centerY+=m}for(I.free(d),c=e.vertexes.iterator;c.next();)s=c.value,g=s.bounds,2>u?(r=g.x+g.width/2,o=g.y+g.height/2,f[0]=new k(g.x+g.width+n.width,g.y),f[1]=new k(g.x,g.y+g.height+n.height),u=2):(a=bS(f,u,r,o,g.width,g.height,n),d=f[a],m=new k(d.x+g.width+n.width,d.y),g=new k(d.x,d.y+g.height+n.height),a+1<u&&f.splice(a+1,0,null),f[a]=m,f[a+1]=g,u++,s.centerX=d.x+s.width/2,s.centerY=d.y+s.height/2);for(Xt(f),n=i.iterator;n.next();){for(i=n.value,r=i.vertexes.iterator;r.next();)e.Cg(r.value);for(i=i.edges.iterator;i.next();)e.qm(i.value)}}e2(this,t),this.updateParts()}this.Ql=t,this.network=null,this.isValidLayout=!0}},Ae.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,i=this.network.vertexes.first().bounds,n=this.network.vertexes.iterator;n.next();){if(n.value.bounds.Nc(i)&&(t++,2<t))return!0;if(10<e)break;e++}return!1},Ae.prototype.computeBounds=function(t,e){var i=!0;for(t=t.vertexes.iterator;t.next();){var n=t.value;i?(i=!1,e.set(n.bounds)):e.Tc(n.bounds)}return e};function qS(t,e,i){if(jT(t,e)){var n=t.Zf;t.Zf*=1+1/(e+1);var r=DT(t,e),o=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(e+1)/11),10));for(t.maxIterations+=o,qS(t,e+1,i),e2(t,o),ET(t,r),e=r.vertexes.ma(),e.sort(function(s,u){return s===null||u===null||s===u?0:u.Jd-s.Jd}),i=0;i<e.length;i++)OT(t,e[i]);t.Zf=n}}function jT(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.Eh=t.network.vertexes.ma(),t=t.Eh,t.sort(function(i,n){return i===null||n===null||i===n?0:n.Jd-i.Jd}),e=t.length-1;0<=e&&1>=t[e].Jd;)e--;return 1<t.length-e}function DT(t,e){for(var i=t.network,n=new Gl(t),r=0;r<t.Eh.length;r++){var o=t.Eh[r];if(1<o.Jd){n.Cg(o);var s=new i2;s.nu=o.Jd,s.ou=o.width,s.mu=o.height,s.$w=o.focus.x,s.ax=o.focus.y,o.Me===null&&(o.Me=new J),o.Me.add(s),o.zw=o.Me.count-1}else break}for(o=i.edges.iterator;o.next();){var u=o.value;r=u.fromVertex,s=u.toVertex,r.network===n&&s.network===n?n.qm(u):r.network===n?(u=r.nk,u===null&&(u=new J,r.nk=u),u.add(s),r.Jd--,r.Rh+=s.Rh):s.network===n&&(u=s.nk,u===null&&(u=new J,s.nk=u),u.add(r),s.Jd--,s.Rh+=r.Rh)}for(r=n.edges.iterator;r.next();)o=r.value,o.length*=Math.max(1,j.sqrt((o.fromVertex.Rh+o.toVertex.Rh)/(4*e+1)));for(e=n.vertexes.iterator;e.next();){r=e.value;var a=r.nk;if(a!==null&&0<a.count&&(s=r.Me.J(r.Me.count-1).nu-r.Jd,!(0>=s))){for(var f=u=0,c=a.count-s;c<a.count;c++){var d=a.J(c),g=null;for(o=d.edges.iterator;o.next();){var m=o.value;if(m.Ay(d)===r){g=m;break}}g!==null&&(f+=g.length,u+=d.width*d.height)}o=r.centerX,a=r.centerY,c=r.width,d=r.height,g=r.focus,m=c*d,1>m&&(m=1),u=j.sqrt((u+m+f*f*4/(s*s))/m),s=(u-1)*c/2,u=(u-1)*d/2,r.bounds=new I(o-g.x-s,a-g.y-u,c+2*s,d+2*u),r.focus=new k(g.x+s,g.y+u)}}return t.network=n,i}function ET(t,e){for(var i=t.network.vertexes.iterator;i.next();){var n=i.value;if(n.network=e,n.Me!==null){var r=n.Me.J(n.zw);n.Jd=r.nu;var o=r.$w,s=r.ax;n.bounds=new I(n.centerX-o,n.centerY-s,r.ou,r.mu),n.focus=new k(o,s),n.zw--}}for(i=t.network.edges.iterator;i.next();)i.value.network=e;t.network=e}function OT(t,e){var i=e.nk;if(i!==null&&i.count!==0){var n=e.centerX,r=e.centerY,o=e.width,s=e.height;e.Me!==null&&0<e.Me.count&&(s=e.Me.J(0),o=s.ou,s=s.mu),o=j.sqrt(o*o+s*s)/2;for(var u=!1,a=s=0,f=0,c=e.vertexes.iterator;c.next();){var d=c.value;1>=d.Jd?a++:(u=!0,f++,s+=Math.atan2(e.centerY-d.centerY,e.centerX-d.centerX))}if(a!==0){for(0<f&&(s/=f),f=e=0,e=u?2*Math.PI/(a+1):2*Math.PI/a,a%2==0&&(f=e/2),1<i.count&&i.sort(function(m,y){return m===null||y===null||m===y?0:y.width*y.height-m.width*m.height}),u=a%2==0?0:1,i=i.iterator;i.next();)if(a=i.value,!(1<a.Jd||t.isFixed(a))){for(c=null,d=a.edges.iterator;d.next();){c=d.value;break}d=a.width;var g=a.height;d=j.sqrt(d*d+g*g)/2,c=o+c.length+d,d=s+(e*(u/2>>1)+f)*(u%2==0?1:-1),a.centerX=n+c*Math.cos(d),a.centerY=r+c*Math.sin(d),u++}}}}function bS(t,e,i,n,r,o,s){var u=9e19,a=-1,f=0;t:for(;f<e;f++){var c=t[f],d=c.x-i,g=c.y-n;if(d=d*d+g*g,d<u){for(g=f-1;0<=g;g--)if(t[g].y>c.y&&t[g].x-c.x<r+s.width)continue t;for(g=f+1;g<e;g++)if(t[g].x>c.x&&t[g].y-c.y<o+s.height)continue t;a=f,u=d}}return a}Ae.prototype.Dv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Ae.prototype.addComments=function(t){var e=t.node;if(e!==null)for(e=e.Qv();e.next();){var i=e.value;if(i.category==="Comment"&&i.isVisible()){var n=this.network.jj(i);n===null&&(n=this.network.kk(i)),n.charge=this.defaultCommentElectricalCharge,i=null;for(var r=n.destinationEdges;r.next();){var o=r.value;if(o.toVertex===t){i=o;break}}if(i===null){for(r=n.sourceEdges;r.next();)if(o=r.value,o.fromVertex===t){i=o;break}}i===null&&(i=this.network.Bk(t,n,null)),i.length=this.defaultCommentSpringLength}}};function t2(t,e){var i=t.bounds,n=i.x;t=i.y;var r=i.width;i=i.height;var o=e.bounds,s=o.x;e=o.y;var u=o.width;return o=o.height,n+r<s?t>e+o?(i=n+r-s,t=t-e-o,j.sqrt(i*i+t*t)):t+i<e?(n=n+r-s,t=t+i-e,j.sqrt(n*n+t*t)):s-(n+r):n>s+u?t>e+o?(i=n-s-u,t=t-e-o,j.sqrt(i*i+t*t)):t+i<e?(n=n-s-u,t=t+i-e,j.sqrt(n*n+t*t)):n-(s+u):t>e+o?t-(e+o):t+i<e?e-(t+i):.1}function e2(t,e){for(t.Eh=null,e=t.yo+e;t.yo<e&&(t.yo++,AT(t)););t.Eh=null}function AT(t){t.Eh===null&&(t.Eh=t.network.vertexes.ma());var e=t.Eh;if(0>=e.length)return!1;var i=e[0];i.forceX=0,i.forceY=0;for(var n=i.centerX,r=n,o=i=i.centerY,s=1;s<e.length;s++){var u=e[s];u.forceX=0,u.forceY=0;var a=u.centerX;u=u.centerY,n=Math.min(n,a),r=Math.max(r,a),i=Math.min(i,u),o=Math.max(o,u)}(r=r-n>o-i)?e.sort(function(x,M){return x===null||M===null||x===M?0:x.centerX-M.centerX}):e.sort(function(x,M){return x===null||M===null||x===M?0:x.centerY-M.centerY}),i=t.Zf;var f=n=u=0;for(o=0;o<e.length;o++){s=e[o],n=s.bounds,u=s.focus,a=n.x+u.x;var c=n.y+u.y;n=s.charge*t.electricalFieldX(a,c),f=s.charge*t.electricalFieldY(a,c),n+=s.mass*t.gravitationalFieldX(a,c),f+=s.mass*t.gravitationalFieldY(a,c),s.forceX+=n,s.forceY+=f;for(var d=o+1;d<e.length;d++){var g=e[d];if(g!==s){n=g.bounds,u=g.focus,f=n.x+u.x;var m=n.y+u.y;if(a-f>i||f-a>i){if(r)break}else if(c-m>i||m-c>i){if(!r)break}else{var y=t2(s,g);1>y?(n=t.randomNumberGenerator,n===null&&(t.randomNumberGenerator=n=new xd),y=n.random(),u=n.random(),a>f?(n=Math.abs(g.bounds.right-s.bounds.x),n=(1+n)*y):a<f?(n=Math.abs(g.bounds.x-s.bounds.right),n=-(1+n)*y):(n=Math.max(g.width,s.width),n=(1+n)*y-n/2),c>m?(f=Math.abs(g.bounds.bottom-s.bounds.y),f=(1+f)*u):a<f?(f=Math.abs(g.bounds.y-s.bounds.bottom),f=-(1+f)*u):(f=Math.max(g.height,s.height),f=(1+f)*u-f/2)):(u=-(s.charge*g.charge)/(y*y),n=(f-a)/y*u,f=(m-c)/y*u),s.forceX+=n,s.forceY+=f,g.forceX-=n,g.forceY-=f}}}}for(r=t.network.edges.iterator;r.next();)u=r.value,i=u.fromVertex,o=u.toVertex,s=i.bounds,a=i.focus,n=s.x+a.x,s=s.y+a.y,c=o.bounds,d=o.focus,a=c.x+d.x,c=c.y+d.y,d=t2(i,o),1>d?(d=t.randomNumberGenerator,d===null&&(t.randomNumberGenerator=d=new xd),u=d.random(),d=d.random(),n=(n>a?1:-1)*(1+(o.width>i.width?o.width:i.width))*u,f=(s>c?1:-1)*(1+(o.height>i.height?o.height:i.height))*d):(u=u.stiffness*(d-u.length),n=(a-n)/d*u,f=(c-s)/d*u),i.forceX+=n,i.forceY+=f,o.forceX-=n,o.forceY-=f;for(r=n=0;r<e.length;r++)i=e[r],t.isFixed(i)?t.moveFixedVertex(i):n=Math.max(n,t.moveVertex(i)||0);return n>t.epsilonDistance*t.epsilonDistance}Ae.prototype.moveVertex=function(t){var e=t.forceX,i=t.forceY,n=this.moveLimit;return e<-n?e=-n:e>n&&(e=n),i<-n?i=-n:i>n&&(i=n),t.centerX+=e,t.centerY+=i,e*e+i*i},Ae.prototype.moveFixedVertex=function(){},Ae.prototype.commitLayout=function(){this.Dw(),this.commitNodes(),this.isRouting&&this.commitLinks()},Ae.prototype.Dw=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e!==null&&(e.fromSpot=ni,e.toSpot=ni)}},Ae.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var i=I.alloc();this.computeBounds(this.network,i),e=this.arrangementOrigin,t=e.x-i.x,e=e.y-i.y,I.free(i)}i=I.alloc();for(var n=this.network.vertexes.iterator;n.next();){var r=n.value;(t!==0||e!==0)&&(i.assign(r.bounds),i.x+=t,i.y+=e,r.bounds=i),r.commit()}I.free(i)},Ae.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Ae.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.ml:t},Ae.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.ll:t},Ae.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.jl:t},Ae.prototype.electricalFieldX=function(){return 0},Ae.prototype.electricalFieldY=function(){return 0},Ae.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.kl:t},Ae.prototype.gravitationalFieldX=function(){return 0},Ae.prototype.gravitationalFieldY=function(){return 0},Ae.prototype.isFixed=function(t){return t.isFixed},X.Object.defineProperties(Ae.prototype,{currentIteration:{get:function(){return this.yo}},arrangementSpacing:{get:function(){return this.Nd},set:function(t){this.Nd.w(t)||(this.Nd.assign(t),this.C())}},arrangesToOrigin:{get:function(){return this.ln},set:function(t){this.ln!==t&&(this.ln=t,this.C())}},setsPortSpots:{get:function(){return this.kf},set:function(t){this.kf!==t&&(this.kf=t,this.C())}},comments:{get:function(){return this.ld},set:function(t){this.ld!==t&&(this.ld=t,this.C())}},maxIterations:{get:function(){return this.Ql},set:function(t){this.Ql!==t&&0<=t&&(this.Ql=t,this.C())}},epsilonDistance:{get:function(){return this.Un},set:function(t){this.Un!==t&&0<t&&(this.Un=t,this.C())}},infinityDistance:{get:function(){return this.Zf},set:function(t){this.Zf!==t&&1<t&&(this.Zf=t,this.C())}},moveLimit:{get:function(){return this.Wo},set:function(t){this.Wo!==t&&1<t&&(this.Wo=t,this.C())}},randomNumberGenerator:{get:function(){return this.vp},set:function(t){this.vp!==t&&(t!==null&&typeof t.random!="function"&&E('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.vp=t)}},defaultSpringStiffness:{get:function(){return this.ml},set:function(t){this.ml!==t&&(this.ml=t,this.C())}},defaultSpringLength:{get:function(){return this.ll},set:function(t){this.ll!==t&&(this.ll=t,this.C())}},defaultElectricalCharge:{get:function(){return this.jl},set:function(t){this.jl!==t&&(this.jl=t,this.C())}},defaultGravitationalMass:{get:function(){return this.kl},set:function(t){this.kl!==t&&(this.kl=t,this.C())}},defaultCommentSpringLength:{get:function(){return this.Ln},set:function(t){this.Ln!==t&&(this.Ln=t,this.C())}},defaultCommentElectricalCharge:{get:function(){return this.Kn},set:function(t){this.Kn!==t&&(this.Kn=t,this.C())}}}),Ae.className="ForceDirectedLayout";function i2(){this.ax=this.$w=this.mu=this.ou=this.nu=0}i2.className="ForceDirectedSubnet";function Gl(t){$t.call(this,t)}ut(Gl,$t),Gl.prototype.createVertex=function(){return new Xl(this)},Gl.prototype.createEdge=function(){return new Hl(this)},Gl.className="ForceDirectedNetwork";function Xl(t){xe.call(this,t),this.Ka=!1,this.eb=this.I=NaN,this.Rh=this.Jd=this.Ja=this.T=0,this.Me=this.nk=null,this.zw=0}ut(Xl,xe),Xl.prototype.serializeVertexProperties=function(t,e){xe.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},Xl.prototype.yq=function(t,e,i,n){xe.prototype.yq.call(this,t,e,i,n),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},X.Object.defineProperties(Xl.prototype,{isFixed:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},charge:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},mass:{get:function(){return this.eb},set:function(t){this.eb!==t&&(this.eb=t)}},forceX:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}},forceY:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}}}),Xl.className="ForceDirectedVertex";function Hl(t){Ze.call(this,t),this.l=this.v=NaN}ut(Hl,Ze),Hl.prototype.serializeEdgeProperties=function(t,e){Ze.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Hl.prototype.deserializeEdgeProperties=function(t,e,i,n){Ze.prototype.deserializeEdgeProperties.call(this,t,e,i,n),this.stiffness=t.stiffness,this.length=t.length},X.Object.defineProperties(Hl.prototype,{stiffness:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},length:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}}}),Hl.className="ForceDirectedEdge";function xd(){var t=0;this.seed=t,this.az=48271,this.cz=2147483647,this.Q=44488.07041494893,this.dz=3399,this.bz=1/2147483647,this.random()}xd.prototype.random=function(){var t=this.seed%this.Q*this.az-this.seed/this.Q*this.dz;return 0<t?this.seed=t:this.seed=t+this.cz,this.seed*this.bz},xd.className="RandomNumberGenerator";function Gt(){It.call(this),this.Zb=this.se=25,this.K=0,this.hl=kd,this.Ll=Pd,this.Al=Nd,this.Pj=4,this.Xk=Td,this.pg=7,this.kf=!0,this.Go=4,this.Ba=this.Hi=this.ra=-1,this.pc=this.mh=0,this.Ia=this.xd=this.yd=this.Xd=this.Ab=null,this.oh=0,this.Zo=this.Uj=null,this.Fc=0,this.$o=null,this.Xc=new k,this.ve=[],this.ve.length=100}ut(Gt,It),Gt.prototype.cloneProtected=function(t){It.prototype.cloneProtected.call(this,t),t.se=this.se,t.Zb=this.Zb,t.K=this.K,t.hl=this.hl,t.Ll=this.Ll,t.Al=this.Al,t.Pj=this.Pj,t.Xk=this.Xk,t.pg=this.pg,t.kf=this.kf,t.Go=this.Go},Gt.prototype.serializeLayoutProperties=function(t,e){It.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.ra=this.ra,t.Hi=this.Hi,t.Ba=this.Ba,t.mh=this.mh,t.pc=this.pc,t.Ab=this.Ab,t.oh=this.oh,t.Fc=this.Fc,t.Xc={x:this.Xc.x,y:this.Xc.y}},Gt.prototype.deserializeLayoutProperties=function(t,e,i,n){It.prototype.deserializeLayoutProperties.call(this,t,e,i,n),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=br(Gt,t.cycleRemoveOption),this.layeringOption=br(Gt,t.layeringOption),this.initializeOption=br(Gt,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=br(Gt,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.ra=t.ra,this.Hi=t.Hi,this.Ba=t.Ba,this.mh=t.mh,this.pc=t.pc,this.Ab=t.Ab,this.oh=t.oh,this.Fc=t.Fc,this.Xc=new k(this.Xc.x,this.Xc.y)},Gt.prototype.jb=function(t){t.classType===Gt?t.name.indexOf("Aggressive")===0?this.aggressiveOption=t:t.name.indexOf("Cycle")===0?this.cycleRemoveOption=t:t.name.indexOf("Init")===0?this.initializeOption=t:t.name.indexOf("Layer")===0?this.layeringOption=t:E("Unknown enum value: "+t):It.prototype.jb.call(this,t)},Gt.prototype.createNetwork=function(){return new Ch(this)},Gt.prototype.doLayout=function(t){for(this.network===null&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Hi=-1,this.pc=this.mh=0,this.$o=this.Zo=this.Uj=null,t=0;t<this.ve.length;t++)this.ve[t]=null;if(0<this.network.vertexes.count){if(this.network.xq(),this.Uw())return;for(this.cycleRemoveOption!==Pf&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.ra=-1,this.assignLayers(),t.reset();t.next();)this.ra=Math.max(this.ra,t.value.layer);this.cycleRemoveOption===Pf&&this.removeCycles(),t=this.network;for(var e=[],i=t.edges.iterator;i.next();){var n=i.value;n.valid=!1,e.push(n)}for(i=0;i<e.length;i++){n=e[i];var r=n.fromVertex,o=n.toVertex;if(!(n.valid||(r.node===null&&r.data===null||o.node===null&&o.data===null)&&r.layer===o.layer)){var s=0,u=0,a=0,f=0;if(n.link!==null){if(u=n.link,u===null)continue;var c=r.node;if(s=o.node,c===null||s===null)continue;var d=u.fromNode;a=u.toNode;var g=u.fromPort;if(u=u.toPort,n.rev){f=d;var m=g;d=a,g=u,a=f,u=m}var y=r.focus;f=o.focus;var x=n.rev?o.bounds:r.bounds;m=k.alloc(),c!==d?x.u()&&d.isVisible()?d.actualBounds.u()?(d.Ff(g,Wt,m),m.x+=d.actualBounds.x-x.x,m.y+=d.actualBounds.y-x.y):(d.Ff(g,Wt,m),m.u()||m.assign(y)):m.assign(y):x.u()?(d.Ff(g,Wt,m),m.u()||m.assign(y)):m.assign(y),d=n.rev?r.bounds:o.bounds,c=k.alloc(),s!==a?d.u()&&a.isVisible()?a.actualBounds.u()?(a.Ff(u,Wt,c),c.x+=a.actualBounds.x-d.x,c.y+=a.actualBounds.y-d.y):(a.Ff(u,Wt,c),c.u()||c.assign(f)):c.assign(f):d.u()?(a.Ff(u,Wt,c),c.u()||c.assign(f)):c.assign(f),this.K===90||this.K===270?(s=Math.round((m.x-y.x)/this.Zb),a=m.x,u=Math.round((c.x-f.x)/this.Zb),f=c.x):(s=Math.round((m.y-y.y)/this.Zb),a=m.y,u=Math.round((c.y-f.y)/this.Zb),f=c.y),k.free(m),k.free(c),n.portFromColOffset=s,n.portFromPos=a,n.portToColOffset=u,n.portToPos=f}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;if(m=r.layer,c=o.layer,d=0,x=n.link,x!==null){var M=x.fromPort,S=x.toPort;if(M!==null&&S!==null){var N=x.fromNode;if(g=x.toNode,N!==null&&g!==null){var T=Sd(this,!0),C=Sd(this,!1),D=this.setsPortSpots?T:x.computeSpot(!0,M);y=this.setsPortSpots?C:x.computeSpot(!1,S);var F=x.isOrthogonal;D.Pc()&&D.Gf(C)&&y.Pc()&&y.Gf(T)?d=0:(T=x.getLinkPoint(N,M,D,!0,F,g,S,k.alloc()),C=x.getLinkDirection(N,M,T,D,!0,F,g,S),k.free(T),D.Ut()||C!==f2(this,n,!0)?this.setsPortSpots&&N!==null&&N.ports.count===1&&n.rev&&(d+=1):d+=1,D=x.getLinkPoint(g,S,y,!1,F,N,M,k.alloc()),x=x.getLinkDirection(g,S,D,y,!1,F,N,M),k.free(D),y.Ut()||x!==f2(this,n,!1)?this.setsPortSpots&&g!==null&&g.ports.count===1&&n.rev&&(d+=2):d+=2)}}}if(g=d,d=g===1||g===3,(g=g===2||g===3)&&(y=t.createVertex(),y.node=null,y.yf=1,y.layer=m,y.near=r,t.Cg(y),r=t.Bk(r,y,n.link),r.valid=!1,r.rev=n.rev,r.portFromColOffset=s,r.portToColOffset=0,r.portFromPos=a,r.portToPos=0,r=y),x=1,d&&x--,m-c>x&&0<m){for(n.valid=!1,y=t.createVertex(),y.node=null,y.yf=2,y.layer=m-1,t.Cg(y),r=t.Bk(r,y,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=g?0:s,r.portToColOffset=0,r.portFromPos=g?0:a,r.portToPos=0,r=y,m--;m-c>x&&0<m;)y=t.createVertex(),y.node=null,y.yf=3,y.layer=m-1,t.Cg(y),r=t.Bk(r,y,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=y,m--;r=t.Bk(y,o,n.link),r.valid=!d,d&&(y.near=o),r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=u,r.portFromPos=0,r.portToPos=f}else n.valid=!0}}for(t=this.Ab=[],e=0;e<=this.ra;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Hi=-1,i=this.pc=this.mh=0;i<=this.ra;i++)t[i]>t[this.pc]&&(this.Hi=t[i]-1,this.pc=i),t[i]<t[this.mh]&&(this.mh=i);for(this.$o=[],i=0;i<t.length;i++)this.$o[i]=[];for(e.reset();e.next();)t=e.value,this.$o[t.layer][t.index]=t;for(this.Ba=-1,t=0;t<=this.ra;t++){for(e=Ss(this,t),i=0,n=this.Ab[t],o=0;o<n;o++)r=e[o],i+=this.nodeMinColumnSpace(r,!0),r.column=i,i+=1,i+=this.nodeMinColumnSpace(r,!1);this.Ba=Math.max(this.Ba,i-1),ks(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Gt.prototype.linkMinLength=function(){return 1};function vm(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,e===null&&t===null?8:e===null||t===null?4:1}Gt.prototype.nodeMinLayerSpace=function(t,e){return t.node===null&&t.data===null?0:this.K===90||this.K===270?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Gt.prototype.nodeMinColumnSpace=function(t,e){if(t.node===null&&t.data===null)return 0;var i=e?t.Jk:t.Ik;return i!==null?i:(i=this.K,i===90||i===270?e?t.Jk=t.focus.x/this.Zb+1|0:t.Ik=(t.bounds.width-t.focus.x)/this.Zb+1|0:e?t.Jk=t.focus.y/this.Zb+1|0:t.Ik=(t.bounds.height-t.focus.y)/this.Zb+1|0)};function Di(t){t.Uj===null&&(t.Uj=[]);for(var e=0,i=t.network.vertexes.iterator;i.next();){var n=i.value;t.Uj[e]=n.layer,e++,t.Uj[e]=n.column,e++,t.Uj[e]=n.index,e++}return t.Uj}function gn(t,e){var i=0;for(t=t.network.vertexes.iterator;t.next();){var n=t.value;n.layer=e[i],i++,n.column=e[i],i++,n.index=e[i],i++}}function n2(t,e,i){var n=Ss(t,e),r=t.Ab[e];(t.Zo===null||t.Zo.length<r*r)&&(t.Zo=[]);for(var o=t.Zo,s=0;s<r;s++){var u=0,a=n[s],f=a.near;if(f!==null&&f.layer===a.layer)if(a=f.index,a>s)for(var c=s+1;c<a;c++){var d=n[c];d.near===f&&d.yf===f.yf||u++}else for(c=s-1;c>a;c--)d=n[c],d.near===f&&d.yf===f.yf||u++;var g;if(0<=i)for(a=n[s].sourceEdgesArrayAccess,f=0;f<a.length;f++){var m=a[f];if(m.valid&&m.fromVertex.layer!==e)for(d=m.fromVertex.index,c=m.portToPos,m=m.portFromPos,g=f+1;g<a.length;g++){var y=a[g];if(y.valid&&y.fromVertex.layer!==e){var x=y.fromVertex.index,M=y.portToPos;y=y.portFromPos,c<M&&(d>x||d===x&&m>y)&&u++,M<c&&(x>d||x===d&&y>m)&&u++}}}if(0>=i){for(a=n[s].destinationEdgesArrayAccess,f=0;f<a.length;f++)if(m=a[f],m.valid&&m.toVertex.layer!==e)for(d=m.toVertex.index,c=m.portToPos,m=m.portFromPos,g=f+1;g<a.length;g++)y=a[g],y.valid&&y.toVertex.layer!==e&&(x=y.toVertex.index,M=y.portToPos,y=y.portFromPos,m<y&&(d>x||d===x&&c>M)&&u++,y<m&&(x>d||x===d&&M>c)&&u++)}for(o[s*r+s]=u,a=s+1;a<r;a++){var S=0,N=0;if(0<=i){u=n[s].sourceEdgesArrayAccess;var T=n[a].sourceEdgesArrayAccess;for(f=0;f<u.length;f++)if(m=u[f],m.valid&&m.fromVertex.layer!==e)for(d=m.fromVertex.index,m=m.portFromPos,g=0;g<T.length;g++)y=T[g],y.valid&&y.fromVertex.layer!==e&&(x=y.fromVertex.index,y=y.portFromPos,(d<x||d===x&&m<y)&&N++,(x<d||x===d&&y<m)&&S++)}if(0>=i){for(u=n[s].destinationEdgesArrayAccess,T=n[a].destinationEdgesArrayAccess,f=0;f<u.length;f++)if(m=u[f],m.valid&&m.toVertex.layer!==e)for(d=m.toVertex.index,c=m.portToPos,g=0;g<T.length;g++)y=T[g],y.valid&&y.toVertex.layer!==e&&(x=y.toVertex.index,M=y.portToPos,(d<x||d===x&&c<M)&&N++,(x<d||x===d&&M<c)&&S++)}o[s*r+a]=S,o[a*r+s]=N}}return ks(t,e,n),o}Gt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.ra;e++)for(var i=n2(this,e,1),n=this.Ab[e],r=0;r<n;r++)for(var o=r;o<n;o++)t+=i[r*n+o];return t};function wd(t){for(var e=0,i=0;i<=t.ra;i++){for(var n=t,r=i,o=Ss(n,r),s=n.Ab[r],u=0,a=0;a<s;a++){var f=o[a].destinationEdgesArrayAccess;if(f!==null)for(var c=0;c<f.length;c++){var d=f[c];if(d.valid&&d.toVertex.layer!==r){var g=d.fromVertex.column+d.portFromColOffset,m=d.toVertex.column+d.portToColOffset;u+=(Math.abs(g-m)+1)*vm(d)}}}ks(n,r,o),e+=u}return e}Gt.prototype.normalize=function(){var t=Infinity;this.Ba=-1;for(var e=this.network.vertexes.iterator;e.next();){var i=e.value;t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0)),this.Ba=Math.max(this.Ba,i.column+this.nodeMinColumnSpace(i,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ba-=t};function xm(t,e,i){for(var n=Ss(t,e),r=t.Ab[e],o=[],s=0;s<r;s++){var u=n[s],a=null;0>=i&&(a=u.sourceEdgesArrayAccess);var f=null;0<=i&&(f=u.destinationEdgesArrayAccess);var c=0,d=0,g=u.near;if(g!==null&&g.layer===u.layer&&(c+=g.column-1,d++),a!==null)for(g=0;g<a.length;g++){u=a[g];var m=u.fromVertex;u.valid&&!u.rev&&m.layer!==e&&(c+=m.column,d++)}if(f!==null)for(a=0;a<f.length;a++)u=f[a],g=u.toVertex,u.valid&&!u.rev&&g.layer!==e&&(c+=g.column,d++);o[s]=d===0?-1:c/d}return ks(t,e,n),o}function r2(t,e,i){for(var n=Ss(t,e),r=t.Ab[e],o=[],s=0;s<r;s++){var u=n[s],a=null;0>=i&&(a=u.sourceEdgesArrayAccess);var f=null;0<=i&&(f=u.destinationEdgesArrayAccess);var c=0,d=[],g=u.near;if(g!==null&&g.layer===u.layer&&(d[c]=g.column-1,c++),u=void 0,a!==null)for(g=0;g<a.length;g++){u=a[g];var m=u.fromVertex;u.valid&&!u.rev&&m.layer!==e&&(d[c]=m.column+u.portFromColOffset,c++)}if(f!==null)for(a=0;a<f.length;a++)u=f[a],g=u.toVertex,u.valid&&!u.rev&&g.layer!==e&&(d[c]=g.column+u.portToColOffset,c++);c===0?o[s]=-1:(d.sort(function(y,x){return y-x}),f=c>>1,o[s]=(c&1)!=0?d[f]:d[f-1]+d[f]>>1)}return ks(t,e,n),o}function kf(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var s=e.destinationEdges;s.next();){var u=s.value,a=u.toVertex,f=e.layer-a.layer;u=t.linkMinLength(u),f===u&&kf(t,a,i,n,r,o)}if(o)for(s=e.sourceEdges;s.next();)u=s.value,a=u.fromVertex,f=a.layer-e.layer,u=t.linkMinLength(u),f===u&&kf(t,a,i,n,r,o)}}function wm(t,e,i,n,r,o){if(e.component===n){if(e.component=i,r)for(var s=e.destinationEdges;s.next();)wm(t,s.value.toVertex,i,n,r,o);if(o)for(e=e.sourceEdges;e.next();)wm(t,e.value.fromVertex,i,n,r,o)}}Gt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.hl){default:case km:t=this.network;var e=0,i=t.vertexes.count-1,n=[];n.length=i+1;for(var r=t.vertexes.iterator;r.next();)r.value.valid=!0;for(;IT(t)!==null;){for(r=o2(t);r!==null;)n[i]=r,i--,r.valid=!1,r=o2(t);for(r=s2(t);r!==null;)n[e]=r,e++,r.valid=!1,r=s2(t);r=null;for(var o=0,s=this.network.vertexes.iterator;s.next();){var u=s.value;if(u.valid){for(var a=0,f=u.destinationEdges;f.next();)f.value.toVertex.valid&&a++;f=0;for(var c=u.sourceEdges;c.next();)c.value.fromVertex.valid&&f++;(r===null||o<a-f)&&(r=u,o=a-f)}}r!==null&&(n[e]=r,e++,r.valid=!1)}for(e=0;e<t.vertexes.count;e++)n[e].index=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.index>e.toVertex.index&&(t.Pm(e),e.rev=!0);break;case kd:for(n=this.network.vertexes.iterator;n.next();)t=n.value,t.Dg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.oh=0,n.reset();n.next();)e=n.value,e.sourceEdges.count===0&&Mm(this,e);for(n.reset();n.next();)e=n.value,e.Dg===-1&&Mm(this,e);for(t.reset();t.next();)n=t.value,n.forest||(e=n.fromVertex,i=e.finish,r=n.toVertex,o=r.finish,r.Dg<e.Dg&&i<o&&(this.network.Pm(n),n.rev=!0));break;case Pf:for(t=this.network,e=t.vertexes.iterator,n=Infinity;e.next();)n=Math.min(n,e.value.layer);if(Infinity>n){if(0>n)for(e.reset();e.next();)e.value.layer-=n;for(n=[],e.reset();e.next();)i=e.value,r=n[i.layer],r===void 0?n[i.layer]=[i]:r.push(i);for(i=e=0;i<n.length;i++)if(r=n[i],!r||r.length===0)e++;else if(0<i)for(o=0;o<r.length;o++)r[o].layer-=e;for(n=t.edges.iterator;n.next();)e=n.value,e.fromVertex.layer<e.toVertex.layer&&(t.Pm(e),e.rev=!0)}}};function IT(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function o2(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.destinationEdges;n.next();)if(n.value.toVertex.valid){i=!1;break}if(i)return e}}return null}function s2(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var i=!0,n=e.sourceEdges;n.next();)if(n.value.fromVertex.valid){i=!1;break}if(i)return e}}return null}function Mm(t,e){e.Dg=t.oh,t.oh++;for(var i=e.destinationEdges;i.next();){var n=i.value,r=n.toVertex;r.Dg===-1&&(n.forest=!0,Mm(t,r))}e.finish=t.oh,t.oh++}Gt.prototype.assignLayers=function(){switch(this.Ll){case Pm:l2(this);break;case Nm:for(var t,e=this.network.vertexes.iterator;e.next();)t=h2(this,e.value),this.ra=Math.max(t,this.ra);for(e.reset();e.next();)t=e.value,t.layer=this.ra-t.layer;break;default:case Pd:for(l2(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)t=e.value,t.sourceEdges.count===0&&a2(this,t);for(t=Infinity,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.ra=-1,e.reset();e.next();){var i=e.value;i.layer-=t,this.ra=Math.max(this.ra,i.layer)}}};function l2(t){for(var e=t.network.vertexes.iterator;e.next();){var i=u2(t,e.value);t.ra=Math.max(i,t.ra)}}function u2(t,e){var i=0;if(e.layer===-1){for(var n=e.destinationEdges;n.next();){var r=n.value,o=r.toVertex;r=t.linkMinLength(r),i=Math.max(i,u2(t,o)+r)}e.layer=i}else i=e.layer;return i}function h2(t,e){var i=0;if(e.layer===-1){for(var n=e.sourceEdges;n.next();){var r=n.value,o=r.fromVertex;r=t.linkMinLength(r),i=Math.max(i,h2(t,o)+r)}e.layer=i}else i=e.layer;return i}function a2(t,e){if(!e.valid){e.valid=!0;for(var i=e.destinationEdges;i.next();)a2(t,i.value.toVertex);for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(var n=e.sourceEdgesArrayAccess,r=n.length,o=0;o<r;o++){var s=n[o],u=s.fromVertex,a=s.toVertex;s=t.linkMinLength(s),u.layer-a.layer>s&&kf(t,u,0,-1,!0,!1)}for(kf(t,e,1,-1,!0,!0);e.component!==0;){for(o=0,n=Infinity,u=0,a=null,s=t.network.vertexes.iterator;s.next();){var f=s.value;if(f.component===1){var c=0,d=!1,g=f.sourceEdgesArrayAccess;r=g.length;for(var m=0;m<r;m++){var y=g[m],x=y.fromVertex;c+=1,x.component!==1&&(o+=1,x=x.layer-f.layer,y=t.linkMinLength(y),n=Math.min(n,x-y))}for(g=f.destinationEdgesArrayAccess,r=g.length,m=0;m<r;m++)y=g[m].toVertex,--c,y.component!==1?--o:d=!0;(a===null||c<u)&&!d&&(a=f,u=c)}}if(0<o){for(i.reset();i.next();)r=i.value,r.component===1&&(r.layer+=n);e.component=0}else a.component=0}for(i=t.network.vertexes.iterator;i.next();)i.value.component=-1;for(kf(t,e,1,-1,!0,!1);e.component!==0;){for(n=0,r=Infinity,o=0,u=null,a=t.network.vertexes.iterator;a.next();)if(s=a.value,s.component===1){for(f=0,c=!1,g=s.sourceEdgesArrayAccess,d=g.length,m=0;m<d;m++)y=g[m].fromVertex,f+=1,y.component!==1?n+=1:c=!0;for(g=s.destinationEdgesArrayAccess,d=g.length,m=0;m<d;m++)y=g[m],x=y.toVertex,--f,x.component!==1&&(--n,x=s.layer-x.layer,y=t.linkMinLength(y),r=Math.min(r,x-y));(u===null||f>o)&&!c&&(u=s,o=f)}if(0>n){for(i.reset();i.next();)n=i.value,n.component===1&&(n.layer-=r);e.component=0}else u.component=0}}}function f2(t,e,i){return t.K===90?i&&!e.rev||!i&&e.rev?270:90:t.K===180?i&&!e.rev||!i&&e.rev?0:180:t.K===270?i&&!e.rev||!i&&e.rev?90:270:i&&!e.rev||!i&&e.rev?180:0}Gt.prototype.initializeIndices=function(){switch(this.Al){default:case Cm:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;e.index=this.Ab[i],this.Ab[i]++}break;case Nd:for(t=this.network.vertexes.iterator,e=this.ra;0<=e;e--)for(t.reset();t.next();)i=t.value,i.layer===e&&i.index===-1&&c2(this,i);break;case Tm:for(t=this.network.vertexes.iterator,e=0;e<=this.ra;e++)for(t.reset();t.next();)i=t.value,i.layer===e&&i.index===-1&&p2(this,i)}};function c2(t,e){var i=e.layer;for(e.index=t.Ab[i],t.Ab[i]++,e=e.destinationEdgesArrayAccess,i=!0;i;){i=!1;for(var n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];r.portFromColOffset>o.portFromColOffset&&(i=!0,e[n]=o,e[n+1]=r)}}for(i=0;i<e.length;i++)n=e[i],n.valid&&(n=n.toVertex,n.index===-1&&c2(t,n))}function p2(t,e){var i=e.layer;e.index=t.Ab[i],t.Ab[i]++,e=e.sourceEdgesArrayAccess;for(var n=!0;n;)for(n=!1,i=0;i<e.length-1;i++){var r=e[i],o=e[i+1];r.portToColOffset>o.portToColOffset&&(n=!0,e[i]=o,e[i+1]=r)}for(i=0;i<e.length;i++)n=e[i],n.valid&&(n=n.fromVertex,n.index===-1&&p2(t,n))}Gt.prototype.reduceCrossings=function(){var t=this.countCrossings(),e=Di(this),i,n;for(i=0;i<this.Pj;i++){for(n=0;n<=this.ra;n++)Md(this,n,1),Cn(this,n,1);var r=this.countCrossings();for(r<t&&(t=r,e=Di(this)),n=this.ra;0<=n;n--)Md(this,n,-1),Cn(this,n,-1);r=this.countCrossings(),r<t&&(t=r,e=Di(this))}for(gn(this,e),i=0;i<this.Pj;i++){for(n=0;n<=this.ra;n++)Md(this,n,0),Cn(this,n,0);for(r=this.countCrossings(),r<t&&(t=r,e=Di(this)),n=this.ra;0<=n;n--)Md(this,n,0),Cn(this,n,0);r=this.countCrossings(),r<t&&(t=r,e=Di(this))}gn(this,e);var o,s,u;switch(this.Xk){case Lm:break;case jm:for(u=t+1;(n=this.countCrossings())<u;)for(u=n,i=this.ra;0<=i;i--)for(s=0;s<=i;s++){for(o=!0;o;)for(o=!1,n=i;n>=s;n--)o=Cn(this,n,-1)||o;for(r=this.countCrossings(),r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=s;n--)o=Cn(this,n,1)||o;for(r=this.countCrossings(),r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=s;n<=i;n++)o=Cn(this,n,1)||o;for(r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=s;n<=i;n++)o=Cn(this,n,-1)||o;for(r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=s;n--)o=Cn(this,n,0)||o;for(r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=s;n<=i;n++)o=Cn(this,n,0)||o;r>=t?gn(this,e):(t=r,e=Di(this))}break;default:case Td:for(i=this.ra,s=0,u=t+1;(n=this.countCrossings())<u;){for(u=n,o=!0;o;)for(o=!1,n=i;n>=s;n--)o=Cn(this,n,-1)||o;for(r=this.countCrossings(),r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=s;n--)o=Cn(this,n,1)||o;for(r=this.countCrossings(),r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=s;n<=i;n++)o=Cn(this,n,1)||o;for(r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=s;n<=i;n++)o=Cn(this,n,-1)||o;for(r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=i;n>=s;n--)o=Cn(this,n,0)||o;for(r>=t?gn(this,e):(t=r,e=Di(this)),o=!0;o;)for(o=!1,n=s;n<=i;n++)o=Cn(this,n,0)||o;r>=t?gn(this,e):(t=r,e=Di(this))}}gn(this,e)};function Md(t,e,i){var n=Ss(t,e),r=t.Ab[e],o=r2(t,e,i),s=xm(t,e,i);for(i=0;i<r;i++)s[i]===-1&&(s[i]=n[i].column),o[i]===-1&&(o[i]=n[i].column);for(var u=!0,a;u;)for(u=!1,i=0;i<r-1;i++)(o[i+1]<o[i]||o[i+1]===o[i]&&s[i+1]<s[i])&&(u=!0,a=o[i],o[i]=o[i+1],o[i+1]=a,a=s[i],s[i]=s[i+1],s[i+1]=a,a=n[i],n[i]=n[i+1],n[i+1]=a);for(i=o=0;i<r;i++)a=n[i],a.index=i,o+=t.nodeMinColumnSpace(a,!0),a.column=o,o+=1,o+=t.nodeMinColumnSpace(a,!1);ks(t,e,n)}function Cn(t,e,i){var n=Ss(t,e),r=t.Ab[e];i=n2(t,e,i);var o,s=[];for(o=0;o<r;o++)s[o]=-1;var u=[];for(o=0;o<r;o++)u[o]=-1;for(var a=!1,f=!0;f;)for(f=!1,o=0;o<r-1;o++){var c=i[n[o].index*r+n[o+1].index],d=i[n[o+1].index*r+n[o].index],g=0,m=0,y=n[o].column,x=n[o+1].column,M=t.nodeMinColumnSpace(n[o],!0),S=t.nodeMinColumnSpace(n[o],!1),N=t.nodeMinColumnSpace(n[o+1],!0),T=t.nodeMinColumnSpace(n[o+1],!1);M=y-M+N,S=x-S+T;var C=n[o].sourceEdges.iterator;for(C.reset();C.next();)if(N=C.value,T=N.fromVertex,N.valid&&T.layer===e){for(N=0;n[N]!==T;)N++;N<o&&(g+=2*(o-N),m+=2*(o+1-N)),N===o+1&&(g+=1),N>o+1&&(g+=4*(N-o),m+=4*(N-(o+1)))}for(C=n[o].destinationEdges.iterator,C.reset();C.next();)if(N=C.value,T=N.toVertex,N.valid&&T.layer===e){for(N=0;n[N]!==T;)N++;N===o+1&&(m+=1)}for(C=n[o+1].sourceEdges.iterator,C.reset();C.next();)if(N=C.value,T=N.fromVertex,N.valid&&T.layer===e){for(N=0;n[N]!==T;)N++;N<o&&(g+=2*(o+1-N),m+=2*(o-N)),N===o&&(m+=1),N>o+1&&(g+=4*(N-(o+1)),m+=4*(N-o))}for(C=n[o+1].destinationEdges.iterator,C.reset();C.next();)if(N=C.value,T=N.toVertex,N.valid&&T.layer===e){for(N=0;n[N]!==T;)N++;N===o&&(g+=1)}N=T=0,C=s[n[o].index];var D=u[n[o].index],F=s[n[o+1].index],$=u[n[o+1].index];C!==-1&&(T+=Math.abs(C-y),N+=Math.abs(C-S)),D!==-1&&(T+=Math.abs(D-y),N+=Math.abs(D-S)),F!==-1&&(T+=Math.abs(F-x),N+=Math.abs(F-M)),$!==-1&&(T+=Math.abs($-x),N+=Math.abs($-M)),(m<g-.5||m===g&&d<c-.5||m===g&&d===c&&N<T-.5)&&(f=a=!0,n[o].column=S,n[o+1].column=M,c=n[o],n[o]=n[o+1],n[o+1]=c)}for(o=0;o<r;o++)n[o].index=o;return ks(t,e,n),a}Gt.prototype.straightenAndPack=function(){var t=(this.pg&1)!=0,e=this.pg===7;if(1e3<this.network.edges.count&&!e&&(t=!1),t){var i=[];for(e=0;e<=this.ra;e++)i[e]=0;for(var n,r=this.network.vertexes.iterator;r.next();){var o=r.value;e=o.layer,n=o.column,o=this.nodeMinColumnSpace(o,!1),i[e]=Math.max(i[e],n+o)}for(r.reset();r.next();)o=r.value,e=o.layer,n=o.column,o.column=(8*(this.Ba-i[e])>>1)+8*n;this.Ba*=8}if((this.pg&2)!=0)for(i=!0;i;){for(i=!1,e=this.pc+1;e<=this.ra;e++)i=Th(this,e,1)||i;for(e=this.pc-1;0<=e;e--)i=Th(this,e,-1)||i;i=Th(this,this.pc,0)||i}if((this.pg&4)!=0){for(e=this.pc+1;e<=this.ra;e++)Sm(this,e,1);for(e=this.pc-1;0<=e;e--)Sm(this,e,-1);Sm(this,this.pc,0)}if(t&&(d2(this,-1),d2(this,1)),(this.pg&2)!=0)for(i=!0;i;){for(i=!1,i=Th(this,this.pc,0)||i,e=this.pc+1;e<=this.ra;e++)i=Th(this,e,0)||i;for(e=this.pc-1;0<=e;e--)i=Th(this,e,0)||i}};function Th(t,e,i){for(var n=!1;BT(t,e,i);)n=!0;return n}function BT(t,e,i){var n,r=Ss(t,e),o=t.Ab[e],s=xm(t,e,-1);if(0<i)for(n=0;n<o;n++)s[n]=-1;var u=xm(t,e,1);if(0>i)for(n=0;n<o;n++)u[n]=-1;for(var a=!1,f=!0;f;)for(f=!1,n=0;n<o;n++){var c=r[n].column,d=t.nodeMinColumnSpace(r[n],!0),g=t.nodeMinColumnSpace(r[n],!1),m=0;0>n-1||c-r[n-1].column-1>d+t.nodeMinColumnSpace(r[n-1],!1)?m=c-1:m=c,d=n+1>=o||r[n+1].column-c-1>g+t.nodeMinColumnSpace(r[n+1],!0)?c+1:c;var y=g=0,x=0;if(0>=i)for(var M=r[n].sourceEdges.iterator;M.next();){var S=M.value,N=S.fromVertex;if(S.valid&&N.layer!==e){var T=vm(S),C=S.portFromColOffset;S=S.portToColOffset,N=N.column,g+=(Math.abs(c+S-(N+C))+1)*T,y+=(Math.abs(m+S-(N+C))+1)*T,x+=(Math.abs(d+S-(N+C))+1)*T}}if(0<=i)for(M=r[n].destinationEdges.iterator;M.next();)S=M.value,N=S.toVertex,S.valid&&N.layer!==e&&(T=vm(S),C=S.portFromColOffset,S=S.portToColOffset,N=N.column,g+=(Math.abs(c+C-(N+S))+1)*T,y+=(Math.abs(m+C-(N+S))+1)*T,x+=(Math.abs(d+C-(N+S))+1)*T);S=C=T=0,M=s[r[n].index],N=u[r[n].index],M!==-1&&(T+=Math.abs(M-c),C+=Math.abs(M-m),S+=Math.abs(M-d)),N!==-1&&(T+=Math.abs(N-c),C+=Math.abs(N-m),S+=Math.abs(N-d)),y<g||y===g&&C<T?(f=a=!0,r[n].column=m):(x<g||x===g&&S<T)&&(f=a=!0,r[n].column=d)}return ks(t,e,r),t.normalize(),a}function Sm(t,e,i){var n=Ss(t,e),r=t.Ab[e],o=r2(t,e,i),s=[];for(i=0;i<r;i++)s[i]=o[i];for(o=!0;o;)for(o=!1,i=0;i<r;i++){var u=n[i].column,a=t.nodeMinColumnSpace(n[i],!0),f=t.nodeMinColumnSpace(n[i],!1),c=0;if(s[i]===-1)if(i===0&&i===r-1)c=u;else if(i===0){var d=n[i+1].column;d-u===f+t.nodeMinColumnSpace(n[i+1],!0)?c=u-1:c=u}else i===r-1?(d=n[i-1].column,c=u-d===a+t.nodeMinColumnSpace(n[i-1],!1)?u+1:u):(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,d=n[i+1].column,f=d-t.nodeMinColumnSpace(n[i+1],!0)-f-1,c=(a+f)/2|0);else i===0&&i===r-1?c=s[i]:i===0?(d=n[i+1].column,f=d-t.nodeMinColumnSpace(n[i+1],!0)-f-1,c=Math.min(s[i],f)):i===r-1?(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,c=Math.max(s[i],a)):(d=n[i-1].column,a=d+t.nodeMinColumnSpace(n[i-1],!1)+a+1,d=n[i+1].column,f=d-t.nodeMinColumnSpace(n[i+1],!0)-f-1,a<s[i]&&s[i]<f?c=s[i]:a>=s[i]?c=a:f<=s[i]&&(c=f));c!==u&&(o=!0,n[i].column=c)}ks(t,e,n),t.normalize()}function RT(t,e){for(var i=!0,n=t.network.vertexes.iterator;n.next();){var r=n.value,o=t.nodeMinColumnSpace(r,!0),s=t.nodeMinColumnSpace(r,!1);if(r.column-o<=e&&r.column+s>=e){i=!1;break}}if(t=!1,i)for(n.reset();n.next();)i=n.value,i.column>e&&(--i.column,t=!0);return t}function FT(t,e){var i=e+1,n,r=[],o=[];for(n=0;n<=t.ra;n++)r[n]=!1,o[n]=!1;for(var s=t.network.vertexes.iterator;s.next();){n=s.value;var u=n.column-t.nodeMinColumnSpace(n,!0),a=n.column+t.nodeMinColumnSpace(n,!1);u<=e&&a>=e&&(r[n.layer]=!0),u<=i&&a>=i&&(o[n.layer]=!0)}for(u=!0,i=!1,n=0;n<=t.ra;n++)u=u&&!(r[n]&&o[n]);if(u)for(s.reset();s.next();)t=s.value,t.column>e&&(--t.column,i=!0);return i}function d2(t,e){for(var i=0;i<=t.Ba;i++)for(;RT(t,i););for(t.normalize(),i=0;i<t.Ba;i++)for(;FT(t,i););t.normalize();var n;if(0<e)for(i=0;i<=t.Ba;i++){var r=Di(t),o=wd(t);for(n=o+1;o<n;){n=o,g2(t,i,1);var s=wd(t);s>o?gn(t,r):s<o&&(o=s,r=Di(t))}}if(0>e)for(i=t.Ba;0<=i;i--)for(r=Di(t),o=wd(t),n=o+1;o<n;)n=o,g2(t,i,-1),s=wd(t),s>o?gn(t,r):s<o&&(o=s,r=Di(t));t.normalize()}function g2(t,e,i){t.Fc=0;for(var n=t.network.vertexes.iterator;n.next();)n.value.component=-1;if(0<i)for(n.reset();n.next();){var r=n.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.Fc)}if(0>i)for(n.reset();n.next();)r=n.value,r.column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.Fc);for(t.Fc++,n.reset();n.next();)e=n.value,e.component===-1&&(wm(t,e,t.Fc,-1,!0,!0),t.Fc++);var o;for(e=[],o=0;o<t.Fc*t.Fc;o++)e[o]=!1;for(r=[],o=0;o<(t.ra+1)*(t.Ba+1);o++)r[o]=-1;for(n.reset();n.next();){o=n.value;for(var s=o.layer,u=Math.max(0,o.column-t.nodeMinColumnSpace(o,!0)),a=Math.min(t.Ba,o.column+t.nodeMinColumnSpace(o,!1));u<=a;u++)r[s*(t.Ba+1)+u]=o.component}for(o=0;o<=t.ra;o++){if(0<i)for(s=0;s<t.Ba;s++)r[o*(t.Ba+1)+s]!==-1&&r[o*(t.Ba+1)+s+1]!==-1&&r[o*(t.Ba+1)+s]!==r[o*(t.Ba+1)+s+1]&&(e[r[o*(t.Ba+1)+s]*t.Fc+r[o*(t.Ba+1)+s+1]]=!0);if(0>i)for(s=t.Ba;0<s;s--)r[o*(t.Ba+1)+s]!==-1&&r[o*(t.Ba+1)+s-1]!==-1&&r[o*(t.Ba+1)+s]!==r[o*(t.Ba+1)+s-1]&&(e[r[o*(t.Ba+1)+s]*t.Fc+r[o*(t.Ba+1)+s-1]]=!0)}for(r=[],o=0;o<t.Fc;o++)r[o]=!0;for(s=[],s.push(0);s.length!==0;)if(a=s[s.length-1],s.pop(),r[a])for(r[a]=!1,o=0;o<t.Fc;o++)e[a*t.Fc+o]&&s.splice(0,0,o);if(0<i)for(n.reset();n.next();)t=n.value,r[t.component]&&--t.column;if(0>i)for(n.reset();n.next();)i=n.value,r[i.component]&&(i.column+=1)}Gt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=Sd(this,!0),e=Sd(this,!1),i=this.network.edges.iterator;i.next();){var n=i.value.link;n!==null&&(n.fromSpot=t,n.toSpot=e)}this.commitNodes(),this.Gv(),this.isRouting&&this.commitLinks()};function Sd(t,e){return t.K===270?e?wn:Sn:t.K===90?e?Sn:wn:t.K===180?e?Mn:Gi:e?Gi:Mn}Gt.prototype.commitNodes=function(){this.Xd=[],this.yd=[],this.xd=[],this.Ia=[];for(var t=0;t<=this.ra;t++)this.Xd[t]=0,this.yd[t]=0,this.xd[t]=0,this.Ia[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,i=e.layer;this.Xd[i]=Math.max(this.Xd[i],this.nodeMinLayerSpace(e,!0)),this.yd[i]=Math.max(this.yd[i],this.nodeMinLayerSpace(e,!1))}e=0,i=this.se;for(var n=0;n<=this.ra;n++){var r=i;0>=this.Xd[n]+this.yd[n]&&(r=0),0<n&&(e+=r/2),this.K===90||this.K===0?(e+=this.yd[n],this.xd[n]=e,e+=this.Xd[n]):(e+=this.Xd[n],this.xd[n]=e,e+=this.yd[n]),n<this.ra&&(e+=r/2),this.Ia[n]=e}for(i=e,e=this.arrangementOrigin,n=0;n<=this.ra;n++)this.K===270?this.xd[n]=e.y+this.xd[n]:this.K===90?(this.xd[n]=e.y+i-this.xd[n],this.Ia[n]=i-this.Ia[n]):this.K===180?this.xd[n]=e.x+this.xd[n]:(this.xd[n]=e.x+i-this.xd[n],this.Ia[n]=i-this.Ia[n]);for(t.reset(),i=n=Infinity;t.next();){r=t.value;var o=r.layer,s=r.column|0;if(this.K===270||this.K===90){var u=e.x+this.Zb*s;o=this.xd[o]}else u=this.xd[o],o=e.y+this.Zb*s;r.centerX=u,r.centerY=o,n=Math.min(r.x,n),i=Math.min(r.y,i)}for(n=e.x-n,e=e.y-i,this.Xc=new k(n,e),t.reset();t.next();)i=t.value,i.x+=n,i.y+=e,i.commit()},Gt.prototype.Gv=function(){for(var t=0,e=this.se,i=0;i<=this.ra;i++)t+=this.Xd[i],t+=this.yd[i];t+=this.ra*e,e=[],i=this.Zb*this.Ba;for(var n=this.maxLayer;0<=n;n--)this.K===270?n===0?e.push(new I(0,0,i,Math.abs(this.Ia[0]))):e.push(new I(0,this.Ia[n-1],i,Math.abs(this.Ia[n-1]-this.Ia[n]))):this.K===90?n===0?e.push(new I(0,this.Ia[0],i,Math.abs(this.Ia[0]-t))):e.push(new I(0,this.Ia[n],i,Math.abs(this.Ia[n-1]-this.Ia[n]))):this.K===180?n===0?e.push(new I(0,0,Math.abs(this.Ia[0]),i)):e.push(new I(this.Ia[n-1],0,Math.abs(this.Ia[n-1]-this.Ia[n]),i)):n===0?e.push(new I(this.Ia[0],0,Math.abs(this.Ia[0]-t),i)):e.push(new I(this.Ia[n],0,Math.abs(this.Ia[n-1]-this.Ia[n]),i));this.commitLayers(e,this.Xc)},Gt.prototype.commitLayers=function(){},Gt.prototype.commitLinks=function(){for(var t=this.network.edges.iterator,e;t.next();)e=t.value.link,e!==null&&(e.Sh(),e.mk(),e.zf());for(t.reset();t.next();)e=t.value.link,e!==null&&e.wj();for(t.reset();t.next();){var i=t.value;if(e=i.link,e!==null){e.Sh();var n=e,r=n.fromNode,o=n.toNode,s=n.fromPort,u=n.toPort;if(r!==null){var a=r.findVisibleNode();a!==null&&a!==r&&(r=a,s=a.port)}o!==null&&(a=o.findVisibleNode(),a!==null&&a!==o&&(o=a,u=a.port));var f=e.computeSpot(!0,s);a=e.computeSpot(!1,u);var c=i.fromVertex,d=i.toVertex;if(i.valid){if(e.curve===rn&&e.pointsCount===4)if(c.column===d.column)i=e.getLinkPoint(r,s,f,!0,!1,o,u),s=e.getLinkPoint(o,u,a,!1,!1,r,s),i.u()||i.set(r.actualBounds.center),s.u()||s.set(o.actualBounds.center),e.mk(),e.xf(i.x,i.y),e.xf((2*i.x+s.x)/3,(2*i.y+s.y)/3),e.xf((i.x+2*s.x)/3,(i.y+2*s.y)/3),e.xf(s.x,s.y);else{var g=!1,m=!1;if(s!==null&&f===qe&&(g=!0),u!==null&&a===qe&&(m=!0),g||m){var y=e.i(0).x;i=e.i(0).y,c=e.i(3).x,n=e.i(3).y,g&&(this.K===90||this.K===270?(g=y,d=(i+n)/2):(g=(y+c)/2,d=i),e.L(1,g,d),f=e.getLinkPoint(r,s,f,!0,!1,o,u),f.u()||f.set(r.actualBounds.center),e.L(0,f.x,f.y)),m&&(this.K===90||this.K===270?(f=c,i=(i+n)/2):(f=(y+c)/2,i=n),e.L(2,f,i),r=e.getLinkPoint(o,u,a,!1,!1,r,s),r.u()||r.set(o.actualBounds.center),e.L(3,r.x,r.y))}}e.zf()}else if(c.layer===d.layer)e.zf();else{if(g=m=!1,y=e.firstPickIndex+1,e.isOrthogonal){g=!0;var x=e.pointsCount;4<x&&e.points.removeRange(2,x-3)}else if(e.curve===rn)m=!0,x=e.pointsCount,4<x&&e.points.removeRange(2,x-3),x===4&&(y=2);else{x=e.pointsCount;var M=f===qe,S=a===qe;2<x&&M&&S?e.points.removeRange(1,x-2):3<x&&M&&!S?e.points.removeRange(1,x-3):3<x&&!M&&S?e.points.removeRange(2,x-2):4<x&&!M&&!S&&e.points.removeRange(2,x-3)}if(i.rev){for(;d!==null&&c!==d;){var N=x=null;for(M=d.sourceEdges.iterator;M.next()&&(S=M.value,S.link!==i.link||(x=S.fromVertex,N=S.toVertex,x.node!==null)););if(x!==c){M=e.i(y-1).x,S=e.i(y-1).y;var T=x.centerX,C=x.centerY;if(g)this.K===180||this.K===0?y===e.firstPickIndex+1?(e.m(y++,M,S),e.m(y++,M,C)):(N!==null?N.centerY:S)!==C&&(N=this.Ia[x.layer-1]+this.Xc.x,e.m(y++,N,S),e.m(y++,N,C)):y===e.firstPickIndex+1?(e.m(y++,M,S),e.m(y++,T,S)):(N!==null?N.centerX:M)!==T&&(N=this.Ia[x.layer-1]+this.Xc.y,e.m(y++,M,N),e.m(y++,T,N));else if(y===e.firstPickIndex+1){N=Math.max(10,this.Xd[d.layer]);var D=Math.max(10,this.yd[d.layer]);if(m)this.K===180?T<=d.bounds.x?(d=d.bounds.x,e.m(y++,d-N,C),e.m(y++,d,C),e.m(y++,d+D,C)):(e.m(y++,T-N,C),e.m(y++,T,C),e.m(y++,T+D,C)):this.K===90?C>=d.bounds.bottom?(d=d.bounds.y+d.bounds.height,e.m(y++,T,d+D),e.m(y++,T,d),e.m(y++,T,d-N)):(e.m(y++,T,C+D),e.m(y++,T,C),e.m(y++,T,C-N)):this.K===270?C<=d.bounds.y?(d=d.bounds.y,e.m(y++,T,d-N),e.m(y++,T,d),e.m(y++,T,d+D)):(e.m(y++,T,C-N),e.m(y++,T,C),e.m(y++,T,C+D)):this.K===0&&(T>=d.bounds.right?(d=d.bounds.x+d.bounds.width,e.m(y++,d+D,C),e.m(y++,d,C),e.m(y++,d-N,C)):(e.m(y++,T+D,C),e.m(y++,T,C),e.m(y++,T-N,C)));else{e.m(y++,M,S);var F=0;this.K===180||this.K===0?((this.K===180?T>=d.bounds.right:T<=d.bounds.x)&&(F=(this.K===0?-N:D)/2),e.m(y++,M+F,C)):((this.K===270?C>=d.bounds.bottom:C<=d.bounds.y)&&(F=(this.K===90?-N:D)/2),e.m(y++,T,S+F)),e.m(y++,T,C)}}else N=Math.max(10,this.Xd[x.layer]),D=Math.max(10,this.yd[x.layer]),this.K===180?(m&&e.m(y++,T-N,C),e.m(y++,T,C),m&&e.m(y++,T+D,C)):this.K===90?(m&&e.m(y++,T,C+D),e.m(y++,T,C),m&&e.m(y++,T,C-N)):this.K===270?(m&&e.m(y++,T,C-N),e.m(y++,T,C),m&&e.m(y++,T,C+D)):(m&&e.m(y++,T+D,C),e.m(y++,T,C),m&&e.m(y++,T-N,C))}d=x}(u===null||f!==qe||g)&&(M=e.i(y-1).x,S=e.i(y-1).y,T=e.i(y).x,C=e.i(y).y,g?(d=this.yd[c.layer],this.K===180||this.K===0?(g=S,g>=c.bounds.y&&g<=c.bounds.bottom&&(this.K===180?T>=c.bounds.x:T<=c.bounds.right)&&(d=c.centerX+(this.K===180?-d:d),g<c.bounds.y+c.bounds.height/2?g=c.bounds.y-this.Zb/2:g=c.bounds.bottom+this.Zb/2,e.m(y++,d,S),e.m(y++,d,g)),e.m(y++,T,g)):(g=M,g>=c.bounds.x&&g<=c.bounds.right&&(this.K===270?C>=c.bounds.y:C<=c.bounds.bottom)&&(d=c.centerY+(this.K===270?-d:d),g<c.bounds.x+c.bounds.width/2?g=c.bounds.x-this.Zb/2:g=c.bounds.right+this.Zb/2,e.m(y++,M,d),e.m(y++,g,d)),e.m(y++,g,C)),e.m(y++,T,C)):m?(N=Math.max(10,this.Xd[c.layer]),D=Math.max(10,this.yd[c.layer]),this.K===180&&T>=c.bounds.x?(d=c.bounds.x+c.bounds.width,e.L(y-2,d,S),e.L(y-1,d+D,S)):this.K===90&&C<=c.bounds.bottom?(d=c.bounds.y,e.L(y-2,M,d),e.L(y-1,M,d-N)):this.K===270&&C>=c.bounds.y?(d=c.bounds.y+c.bounds.height,e.L(y-2,M,d),e.L(y-1,M,d+D)):this.K===0&&T<=c.bounds.right&&(d=c.bounds.x,e.L(y-2,d,S),e.L(y-1,d-N,S))):(N=Math.max(10,this.Xd[c.layer]),D=Math.max(10,this.yd[c.layer]),g=0,this.K===180||this.K===0?((this.K===180?T<=c.bounds.x:T>=c.bounds.right)&&(g=(this.K===0?D:-N)/2),e.m(y++,T+g,S)):((this.K===270?C<=c.bounds.y:C>=c.bounds.bottom)&&(g=(this.K===90?D:-N)/2),e.m(y++,M,C+g)),e.m(y++,T,C)))}else{for(;c!==null&&c!==d;){for(N=x=null,c=c.destinationEdges.iterator;c.next()&&(M=c.value,M.link!==i.link||(x=M.toVertex,N=M.fromVertex,N.node!==null&&(N=null),x.node!==null)););x!==d&&(M=e.i(y-1).x,S=e.i(y-1).y,T=x.centerX,C=x.centerY,g?this.K===180||this.K===0?(N!==null?N.centerY:S)!==C&&(N=this.Ia[x.layer]+this.Xc.x,y===e.firstPickIndex+1&&(N=this.K===0?Math.max(N,M):Math.min(N,M)),e.m(y++,N,S),e.m(y++,N,C)):(N!==null?N.centerX:M)!==T&&(N=this.Ia[x.layer]+this.Xc.y,y===e.firstPickIndex+1&&(N=this.K===90?Math.max(N,S):Math.min(N,S)),e.m(y++,M,N),e.m(y++,T,N)):(N=Math.max(10,this.Xd[x.layer]),D=Math.max(10,this.yd[x.layer]),this.K===180?(e.m(y++,T+D,C),m&&e.m(y++,T,C),e.m(y++,T-N,C)):this.K===90?(e.m(y++,T,C-N),m&&e.m(y++,T,C),e.m(y++,T,C+D)):this.K===270?(e.m(y++,T,C+D),m&&e.m(y++,T,C),e.m(y++,T,C-N)):(e.m(y++,T-N,C),m&&e.m(y++,T,C),e.m(y++,T+D,C)))),c=x}g&&(M=e.i(y-1).x,S=e.i(y-1).y,T=e.i(y).x,C=e.i(y).y,this.K===180||this.K===0?S!==C&&(N=this.K===0?Math.min(Math.max((T+M)/2,this.Ia[d.layer]+this.Xc.x),T):Math.max(Math.min((T+M)/2,this.Ia[d.layer]+this.Xc.x),T),e.m(y++,N,S),e.m(y++,N,C)):M!==T&&(N=this.K===90?Math.min(Math.max((C+S)/2,this.Ia[d.layer]+this.Xc.y),C):Math.max(Math.min((C+S)/2,this.Ia[d.layer]+this.Xc.y),C),e.m(y++,M,N),e.m(y++,T,N)))}n!==null&&m&&(s!==null&&(f===qe&&(f=e.i(0),n=e.i(2),f.w(n)||e.L(1,(f.x+n.x)/2,(f.y+n.y)/2)),f=e.getLinkPoint(r,s,qe,!0,!1,o,u),f.u()||f.set(r.actualBounds.center),e.L(0,f.x,f.y)),u!==null&&(a===qe&&(a=e.i(e.pointsCount-1),f=e.i(e.pointsCount-3),a.w(f)||e.L(e.pointsCount-2,(a.x+f.x)/2,(a.y+f.y)/2)),r=e.getLinkPoint(o,u,qe,!1,!1,r,s),r.u()||r.set(o.actualBounds.center),e.L(e.pointsCount-1,r.x,r.y))),e.zf(),i.commit()}}}this.avoidOrthogonalOverlaps()},Gt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new J,e=this.network.edges.iterator;e.next();){var i=e.value.link;i!==null&&i.isOrthogonal&&!t.contains(i)&&t.add(i)}if(0<t.count)if(this.K===90||this.K===270){for(e=0,i=[],t=t.iterator;t.next();){var n=t.value;if(n!==null&&n.isOrthogonal)for(var r=2;r<n.pointsCount-3;r++){var o=n.i(r),s=n.i(r+1);if(this.A(o.y,s.y)&&!this.A(o.x,s.x)){var u=new Ps;u.layer=Math.floor(o.y/2);var a=n.i(0),f=n.i(n.pointsCount-1);if(u.first=a.x*a.x+a.y,u.Xb=f.x*f.x+f.y,u.hd=Math.min(o.x,s.x),u.vc=Math.max(o.x,s.x),u.index=r,u.link=n,r+2<n.pointsCount){a=n.i(r-1),f=n.i(r+2);var c=0;a.y<o.y?c=f.y<o.y?3:o.x<s.x?2:1:a.y>o.y&&(c=f.y>o.y?0:s.x<o.x?2:1),u.l=c}i.push(u)}}}if(1<i.length)for(i.sort(this.Ty),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(s=i[o].vc,r=t+1;r<n&&i[r].hd<s;)s=Math.max(s,i[r].vc),r++;if(s=r-o,1<s){for(this.tj(i,this.fu,o,o+s),c=1,u=i[o].Xb,a=o;a<r;a++)f=i[a],f.Xb!==u&&(c++,u=f.Xb);this.tj(i,this.Sy,o,o+s);var d=1;for(u=i[o].first,a=o;a<r;a++)f=i[a],f.first!==u&&(d++,u=f.first);for(a=!0,f=d,c<d?(a=!1,f=c,u=i[o].Xb,this.tj(i,this.fu,o,o+s)):u=i[o].first,c=0,d=o;d<r;d++){var g=i[d];(a?g.first:g.Xb)!==u&&(c++,u=a?g.first:g.Xb);var m=g.link;o=m.i(g.index),s=m.i(g.index+1);var y=this.linkSpacing*(c-(f-1)/2);e++,m.Sh(),m.L(g.index,o.x,o.y+y),m.L(g.index+1,s.x,s.y+y),m.zf()}}o=r}t=n}}else{for(e=0,i=[],t=t.iterator;t.next();)if(n=t.value,n!==null&&n.isOrthogonal)for(r=2;r<n.pointsCount-3;r++)o=n.i(r),s=n.i(r+1),this.A(o.x,s.x)&&!this.A(o.y,s.y)&&(u=new Ps,u.layer=Math.floor(o.x/2),a=n.i(0),f=n.i(n.pointsCount-1),u.first=a.x+a.y*a.y,u.Xb=f.x+f.y*f.y,u.hd=Math.min(o.y,s.y),u.vc=Math.max(o.y,s.y),u.index=r,u.link=n,r+2<n.pointsCount&&(a=n.i(r-1),f=n.i(r+2),c=0,a.x<o.x?c=f.x<o.x?3:o.y<s.y?2:1:a.x>o.x&&(c=f.x>o.x?0:s.y<o.y?2:1),u.l=c),i.push(u));if(1<i.length)for(i.sort(this.Ty),t=0;t<i.length;){for(o=i[t].layer,n=t+1;n<i.length&&i[n].layer===o;)n++;if(1<n-t)for(o=t;o<n;){for(s=i[o].vc,r=t+1;r<n&&i[r].hd<s;)s=Math.max(s,i[r].vc),r++;if(s=r-o,1<s){for(this.tj(i,this.fu,o,o+s),c=1,u=i[o].Xb,a=o;a<r;a++)f=i[a],f.Xb!==u&&(c++,u=f.Xb);for(this.tj(i,this.Sy,o,o+s),d=1,u=i[o].first,a=o;a<r;a++)f=i[a],f.first!==u&&(d++,u=f.first);for(a=!0,f=d,c<d?(a=!1,f=c,u=i[o].Xb,this.tj(i,this.fu,o,o+s)):u=i[o].first,c=0,d=o;d<r;d++)g=i[d],(a?g.first:g.Xb)!==u&&(c++,u=a?g.first:g.Xb),m=g.link,o=m.i(g.index),s=m.i(g.index+1),y=this.linkSpacing*(c-(f-1)/2),e++,m.Sh(),m.L(g.index,o.x+y,o.y),m.L(g.index+1,s.x+y,s.y),m.zf()}o=r}t=n}}}},l=Gt.prototype,l.Ty=function(t,e){return t instanceof Ps&&e instanceof Ps&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.hd<e.hd?-1:t.hd>e.hd?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},l.Sy=function(t,e){return t instanceof Ps&&e instanceof Ps&&t!==e?t.first<e.first?-1:t.first>e.first||t.l<e.l?1:t.l>e.l||t.hd<e.hd?-1:t.hd>e.hd?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},l.fu=function(t,e){return t instanceof Ps&&e instanceof Ps&&t!==e?t.Xb<e.Xb?-1:t.Xb>e.Xb||t.l<e.l?1:t.l>e.l||t.hd<e.hd?-1:t.hd>e.hd?1:t.vc<e.vc?-1:t.vc>e.vc?1:0:0},l.A=function(t,e){return t-=e,-1<t&&1>t},l.tj=function(t,e,i,n){var r=t.length,o=n-i;if(!(1>=o))if((0>i||i>=r-1)&&E("not in range 0 <= from < length: "+i),o===2)n=t[i],r=t[i+1],0<e(n,r)&&(t[i]=r,t[i+1]=n);else if(i===0)if(n>=r)t.sort(e);else for(i=t.slice(0,n),i.sort(e),e=0;e<n;e++)t[e]=i[e];else if(n>=r)for(n=t.slice(i),n.sort(e),e=i;e<r;e++)t[e]=n[e-i];else for(r=t.slice(i,n),r.sort(e),e=i;e<n;e++)t[e]=r[e-i]};function Ss(t,e){var i=t.Ab[e];if(i>=t.ve.length){for(var n=[],r=0;r<t.ve.length;r++)n[r]=t.ve[r];t.ve=n}for(t.ve[i]===void 0||t.ve[i]===null?n=[]:(n=t.ve[i],t.ve[i]=null),t=t.$o[e],e=0;e<t.length;e++)i=t[e],n[i.index]=i;return n}function ks(t,e,i){t.ve[t.Ab[e]]=i}X.Object.defineProperties(Gt.prototype,{layerSpacing:{get:function(){return this.se},set:function(t){this.se!==t&&0<=t&&(this.se=t,this.C())}},columnSpacing:{get:function(){return this.Zb},set:function(t){this.Zb!==t&&0<t&&(this.Zb=t,this.C())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(t===0||t===90||t===180||t===270?(this.K=t,this.C()):E("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.hl},set:function(t){this.hl===t||t!==km&&t!==kd&&t!==Pf||(this.hl=t,this.C())}},layeringOption:{get:function(){return this.Ll},set:function(t){this.Ll===t||t!==Pd&&t!==Pm&&t!==Nm||(this.Ll=t,this.C())}},initializeOption:{get:function(){return this.Al},set:function(t){this.Al===t||t!==Nd&&t!==Tm&&t!==Cm||(this.Al=t,this.C())}},iterations:{get:function(){return this.Pj},set:function(t){this.Pj!==t&&0<=t&&(this.Pj=t,this.C())}},aggressiveOption:{get:function(){return this.Xk},set:function(t){this.Xk===t||t!==Lm&&t!==Td&&t!==jm||(this.Xk=t,this.C())}},packOption:{get:function(){return this.pg},set:function(t){this.pg!==t&&0<=t&&8>t&&(this.pg=t,this.C())}},setsPortSpots:{get:function(){return this.kf},set:function(t){this.kf!==t&&(this.kf=t,this.C())}},linkSpacing:{get:function(){return this.Go},set:function(t){this.Go!==t&&0<=t&&(this.Go=t,this.C())}},maxLayer:{get:function(){return this.ra}},maxIndex:{get:function(){return this.Hi}},maxColumn:{get:function(){return this.Ba}},minIndexLayer:{get:function(){return this.mh}},maxIndexLayer:{get:function(){return this.pc}}});var kd=new K(Gt,"CycleDepthFirst",0),km=new K(Gt,"CycleGreedy",1),Pf=new K(Gt,"CycleFromLayers",2),Pd=new K(Gt,"LayerOptimalLinkLength",0),Pm=new K(Gt,"LayerLongestPathSink",1),Nm=new K(Gt,"LayerLongestPathSource",2),Nd=new K(Gt,"InitDepthFirstOut",0),Tm=new K(Gt,"InitDepthFirstIn",1),Cm=new K(Gt,"InitNaive",2),Lm=new K(Gt,"AggressiveNone",0),Td=new K(Gt,"AggressiveLess",1),jm=new K(Gt,"AggressiveMore",2);Gt.className="LayeredDigraphLayout",Gt.CycleDepthFirst=kd,Gt.CycleGreedy=km,Gt.CycleFromLayers=Pf,Gt.LayerOptimalLinkLength=Pd,Gt.LayerLongestPathSink=Pm,Gt.LayerLongestPathSource=Nm,Gt.InitDepthFirstOut=Nd,Gt.InitDepthFirstIn=Tm,Gt.InitNaive=Cm,Gt.AggressiveNone=Lm,Gt.AggressiveLess=Td,Gt.AggressiveMore=jm,Gt.PackNone=0,Gt.PackExpand=1,Gt.PackStraighten=2,Gt.PackMedian=4,Gt.PackAll=7;function Ps(){this.index=this.vc=this.hd=this.Xb=this.first=this.layer=0,this.link=null,this.l=0}Ps.className="SegInfo";function Ch(t){$t.call(this,t)}ut(Ch,$t),Ch.prototype.createVertex=function(){return new Wl(this)},Ch.prototype.createEdge=function(){return new Kl(this)},Ch.className="LayeredDigraphNetwork";function Wl(t){xe.call(this,t),this.Pa=this.Sg=this.Di=-1,this.I=NaN,this.T=null,this.valid=!1,this.finish=this.Dg=NaN,this.yf=0,this.Ik=this.Jk=null}ut(Wl,xe),Wl.prototype.serializeVertexProperties=function(t,e){xe.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?Ne(this.near):null,t.valid=this.valid,t.Dg=this.Dg,t.finish=this.finish,t.yf=this.yf,t.Jk=this.Jk,t.Ik=this.Ik},Wl.prototype.yq=function(t,e,i,n){xe.prototype.yq.call(this,t,e,i,n),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.Dg=t.Dg,this.finish=t.finish,this.yf=t.yf,this.Jk=t.Jk,this.Ik=t.Ik},X.Object.defineProperties(Wl.prototype,{layer:{get:function(){return this.Di},set:function(t){this.Di!==t&&(this.Di=t)}},column:{get:function(){return this.Sg},set:function(t){this.Sg!==t&&(this.Sg=t)}},index:{get:function(){return this.Pa},set:function(t){this.Pa!==t&&(this.Pa=t)}},component:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},near:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}}}),Wl.className="LayeredDigraphVertex";function Kl(t){Ze.call(this,t),this.l=this.Ka=this.eb=!1,this.Ja=this.I=NaN,this.T=this.v=0}ut(Kl,Ze),Kl.prototype.serializeEdgeProperties=function(t,e){Ze.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},Kl.prototype.deserializeEdgeProperties=function(t,e,i,n){Ze.prototype.deserializeEdgeProperties.call(this,t,e,i,n),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},X.Object.defineProperties(Kl.prototype,{fromVertex:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.$c=t)}},toVertex:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t)}},valid:{get:function(){return this.eb},set:function(t){this.eb!==t&&(this.eb=t)}},rev:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},forest:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},portFromPos:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},portToPos:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}},portFromColOffset:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},portToColOffset:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}}}),Kl.className="LayeredDigraphEdge";function St(){It.call(this),this.Kb=new W,this.op=Dd,this.md=Ar,this.kq=Od,this.ts=Um,this.nx=[],this.ld=!0,this.Fb=Ad,this.Nd=new pt(10,10).freeze();var t=new Jl(this);this.U=new Ln(t),this.V=new Ln(t),this.sv=[]}ut(St,It),St.prototype.cloneProtected=function(t){It.prototype.cloneProtected.call(this,t),t.op=this.op,t.kq=this.kq,t.ts=this.ts,t.ld=this.ld,t.Fb=this.Fb,t.Nd.assign(this.Nd),t.U.copyInheritedPropertiesFrom(this.U),t.V.copyInheritedPropertiesFrom(this.V)},St.prototype.jb=function(t){t.classType===St?t.name.indexOf("Alignment")===0?this.alignment=t:t.name.indexOf("Arrangement")===0?this.arrangement=t:t.name.indexOf("Compaction")===0?this.compaction=t:t.name.indexOf("Path")===0?this.path=t:t.name.indexOf("Sorting")===0?this.sorting=t:t.name.indexOf("Style")===0?this.treeStyle=t:E("Unknown enum value: "+t):It.prototype.jb.call(this,t)},St.prototype.createNetwork=function(){return new Jl(this)},St.prototype.makeNetwork=function(t){function e(n){if(n instanceof Z)return!n.isLinkLabel&&n.category!=="Comment";if(n instanceof z){var r=n.fromNode;return r===null||r.isLinkLabel||r.category==="Comment"?!1:(n=n.toNode,!(n===null||n.isLinkLabel||n.category==="Comment"))}return!1}var i=this.createNetwork();return t instanceof O?(i.Bg(t.nodes,!0,e),i.Bg(t.links,!0,e)):t instanceof dt?i.Bg(t.memberParts,!1,e):i.Bg(t.iterator,!1,e),i},St.prototype.doLayout=function(t){this.network===null&&(this.network=this.makeNetwork(t)),this.arrangement!==Id&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(e===null&&t instanceof O&&(e=t),this.path===Dd&&e!==null?this.md=e.isTreePathToChildren?Ar:$l:this.md=this.path===Dd?Ar:this.path,0<this.network.vertexes.count){for(this.network.xq(),t=this.network.vertexes.iterator;t.next();)e=t.value,e.initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Kb.count){for(t=new W,e=this.Kb.iterator;e.next();){var i=e.value;i instanceof Z?(i=this.network.jj(i),i!==null&&t.add(i)):i instanceof Ln&&t.add(i)}this.Kb=t}for(this.Kb.count===0&&this.findRoots(),t=this.Kb.copy().iterator;t.next();)e=t.value,e.initialized||(e.initialized=!0,Dm(this,e));for(e=this.network.vertexes,t=null;t=VT(e),0<t.count;)e=y2(this,t),e!==null&&this.Kb.add(e),e.initialized=!0,Dm(this,e),e=t;for(t=this.Kb.iterator;t.next();)e=t.value,e instanceof Ln&&v2(this,e);for(t=this.Kb.iterator;t.next();)e=t.value,e instanceof Ln&&x2(this,e);for(t=this.Kb.iterator;t.next();)e=t.value,e instanceof Ln&&w2(this,e);if(this.Dv(),this.layerStyle===Bd){for(t=[],e=this.network.vertexes.iterator;e.next();){i=e.value;var n=i.parent;n===null&&(n=i),n=n.angle===0||n.angle===180;var r=t[i.level];r===void 0&&(r=0),t[i.level]=Math.max(r,n?i.width:i.height)}for(e=0;e<t.length;e++)t[e]===void 0&&(t[e]=0);for(this.nx=t,e=this.network.vertexes.iterator;e.next();)i=e.value,n=i.parent,n===null&&(n=i),n.angle===0||n.angle===180?(n.angle===180&&(i.focusX+=t[i.level]-i.width),i.width=t[i.level]):(n.angle===270&&(i.focusY+=t[i.level]-i.height),i.height=t[i.level])}else if(this.layerStyle===Ym)for(t=this.network.vertexes.iterator;t.next();){for(e=t.value,i=e.angle===0||e.angle===180,n=-1,r=0;r<e.children.length;r++){var o=e.children[r];n=Math.max(n,i?o.width:o.height)}if(0<=n)for(r=0;r<e.children.length;r++)o=e.children[r],i?(e.angle===180&&(o.focusX+=n-o.width),o.width=n):(e.angle===270&&(o.focusY+=n-o.height),o.height=n)}for(t=this.Kb.iterator;t.next();)e=t.value,e instanceof Ln&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Kb=new W,this.isValidLayout=!0};function VT(t){var e=new W;for(t=t.iterator;t.next();){var i=t.value;i.initialized||e.add(i)}return e}St.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var i=e.value;switch(this.md){case Ar:i.sourceEdges.count===0&&this.Kb.add(i);break;case $l:i.destinationEdges.count===0&&this.Kb.add(i);break;default:E("Unhandled path value "+this.md.toString())}}this.Kb.count===0&&(t=y2(this,t),t!==null&&this.Kb.add(t))};function y2(t,e){var i=999999,n=null;for(e=e.iterator;e.next();){var r=e.value;switch(t.md){case Ar:r.sourceEdges.count<i&&(i=r.sourceEdges.count,n=r);break;case $l:r.destinationEdges.count<i&&(i=r.destinationEdges.count,n=r);break;default:E("Unhandled path value "+t.md.toString())}}return n}function Dm(t,e){if(e!==null){switch(t.md){case Ar:if(0<e.destinationEdges.count){for(var i=new J,n=e.destinationVertexes;n.next();){var r=n.value;m2(t,e,r)&&i.add(r)}0<i.count&&(e.children=i.ma())}break;case $l:if(0<e.sourceEdges.count){for(i=new J,n=e.sourceVertexes;n.next();)r=n.value,m2(t,e,r)&&i.add(r);0<i.count&&(e.children=i.ma())}break;default:E("Unhandled path value"+t.md.toString())}for(i=e.children,n=i.length,r=0;r<n;r++){var o=i[r];o.initialized=!0,o.level=e.level+1,o.parent=e,t.Kb.remove(o)}for(e=0;e<n;e++)Dm(t,i[e])}}function m2(t,e,i){if(i.initialized){if(e===null)var n=!1;else{for(n=e.parent;n!==null&&n!==i;)n=n.parent;n=n===i}if(n||i.level>e.level)return!1;t.removeChild(i.parent,i)}return!0}St.prototype.removeChild=function(t,e){if(t!==null&&e!==null){for(var i=t.children,n=0,r=0;r<i.length;r++)i[r]===e&&n++;if(0<n){n=Array(i.length-n);for(var o=r=0;o<i.length;o++)i[o]!==e&&(n[r++]=i[o]);t.children=n}}};function v2(t,e){if(e!==null){t.initializeTreeVertexValues(e),e.alignment===Rr&&t.sortTreeVertexChildren(e);for(var i=0,n=e.childrenCount,r=0,o=e.children,s=o.length,u=0;u<s;u++){var a=o[u];v2(t,a),i+=a.descendantCount+1,n=Math.max(n,a.maxChildrenCount),r=Math.max(r,a.maxGenerationCount)}e.descendantCount=i,e.maxChildrenCount=n,e.maxGenerationCount=0<n?r+1:0}}function zT(t,e){switch(t.kq){default:case Od:return e.parent!==null?e.parent:t.U;case Vm:return e.parent===null?t.U:e.parent.parent===null?t.V:e.parent;case Fm:return e.parent!==null?e.parent.parent!==null?e.parent.parent:t.V:t.U;case Rm:var i=!0;if(e.childrenCount===0)i=!1;else for(var n=e.children,r=n.length,o=0;o<r;o++)if(0<n[o].childrenCount){i=!1;break}return i&&e.parent!==null?t.V:e.parent!==null?e.parent:t.U}}St.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(zT(this,t)),t.parent!==null&&t.parent.alignment===Rr){for(var e=t.angle,i=t.parent.children,n=0;n<i.length&&t!==i[n];)n++;n%2==0?n!==i.length-1&&(e=e===90?180:e===180?270:e===270?180:270):e=e===90?0:e===180?90:e===270?0:90,t.angle=e}t.initialized=!0};function x2(t,e){if(e!==null){t.assignTreeVertexValues(e),e=e.children;for(var i=e.length,n=0;n<i;n++)x2(t,e[n])}}St.prototype.assignTreeVertexValues=function(){};function w2(t,e){if(e!==null){e.alignment!==Rr&&t.sortTreeVertexChildren(e),e=e.children;for(var i=e.length,n=0;n<i;n++)w2(t,e[n])}}St.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case jh:break;case Tf:t.children.reverse();break;case Cf:t.children.sort(t.comparer);break;case Lf:t.children.sort(t.comparer),t.children.reverse();break;default:E("Unhandled sorting value "+t.sorting.toString())}},St.prototype.Dv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},St.prototype.addComments=function(t){var e=t.angle,i=t.parent,n=0,r=!1;i!==null&&(n=i.angle,r=i.alignment,r=Ns(r)),e=e===90||e===270,n=n===90||n===270,i=t.childrenCount===0;var o=0,s=0,u=0,a=t.commentSpacing;if(t.node!==null)for(var f=t.node.Qv();f.next();){var c=f.value;c.category==="Comment"&&c.canLayout()&&(t.comments===null&&(t.comments=[]),t.comments.push(c),c.Ta(),c=c.measuredBounds,e&&!i||!r&&!n&&i||r&&n&&i?(o=Math.max(o,c.width),s+=c.height+Math.abs(u)):(o+=c.width+Math.abs(u),s=Math.max(s,c.height)),u=a)}t.comments!==null&&(e&&!i||!r&&!n&&i||r&&n&&i?(o+=Math.abs(t.commentMargin),s=Math.max(0,s-t.height)):(s+=Math.abs(t.commentMargin),o=Math.max(0,o-t.width)),r=I.allocAt(0,0,t.bounds.width+o,t.bounds.height+s),t.bounds=r,I.free(r))};function Ns(t){return t===Xo||t===Rr||t===Ho||t===fo}function Nf(t){return t===Xo||t===Rr}function Em(t){var e=t.parent;if(e!==null){var i=e.alignment;if(Ns(i)){if(Nf(i)){for(e=e.children,i=0;i<e.length&&t!==e[i];)i++;return i%2==0}if(i===Ho)return!0}}return!1}St.prototype.layoutComments=function(t){if(t.comments!==null){var e=t.node.measuredBounds,i=t.parent,n=t.angle,r=0,o=!1;i!==null&&(r=i.angle,o=i.alignment,o=Ns(o)),n=n===90||n===270,i=r===90||r===270;for(var s=t.childrenCount===0,u=Em(t),a=0,f=t.comments,c=f.length,d=k.alloc(),g=0;g<c;g++){var m=f[g],y=m.measuredBounds;if(n&&!s||!o&&!i&&s||o&&i&&s){if(135<r&&!o||i&&u)if(0<=t.commentMargin)for(d.h(t.bounds.x-t.commentMargin-y.width,t.bounds.y+a),m.move(d),m=m.Fd();m.next();){var x=m.value;x.fromSpot=Mn,x.toSpot=Gi}else for(d.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+a),m.move(d),m=m.Fd();m.next();)x=m.value,x.fromSpot=Gi,x.toSpot=Mn;else if(0<=t.commentMargin)for(d.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+a),m.move(d),m=m.Fd();m.next();)x=m.value,x.fromSpot=Gi,x.toSpot=Mn;else for(d.h(t.bounds.x+t.commentMargin-y.width,t.bounds.y+a),m.move(d),m=m.Fd();m.next();)x=m.value,x.fromSpot=Mn,x.toSpot=Gi;a=0<=t.commentSpacing?a+(y.height+t.commentSpacing):a+(t.commentSpacing-y.height)}else{if(135<r&&!o||!i&&u)if(0<=t.commentMargin)for(d.h(t.bounds.x+a,t.bounds.y-t.commentMargin-y.height),m.move(d),m=m.Fd();m.next();)x=m.value,x.fromSpot=wn,x.toSpot=Sn;else for(d.h(t.bounds.x+a,t.bounds.y+2*t.focus.y-t.commentMargin),m.move(d),m=m.Fd();m.next();)x=m.value,x.fromSpot=Sn,x.toSpot=wn;else if(0<=t.commentMargin)for(d.h(t.bounds.x+a,t.bounds.y+2*t.focus.y+t.commentMargin),m.move(d),m=m.Fd();m.next();)x=m.value,x.fromSpot=Sn,x.toSpot=wn;else for(d.h(t.bounds.x+a,t.bounds.y+t.commentMargin-y.height),m.move(d),m=m.Fd();m.next();)x=m.value,x.fromSpot=wn,x.toSpot=Sn;a=0<=t.commentSpacing?a+(y.width+t.commentSpacing):a+(t.commentSpacing-y.width)}}if(k.free(d),e=a-t.commentSpacing-(n?e.height:e.width),this.md===Ar)for(t=t.destinationEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)r=t.value.link,r===null||r.isAvoiding||(r.toEndSegmentLength=0<e?e:NaN)}},St.prototype.layoutTree=function(t){if(t!==null){for(var e=t.children,i=e.length,n=0;n<i;n++)this.layoutTree(e[n]);switch(t.compaction){case Ed:M2(this,t);break;case jf:if(t.alignment===Rr)M2(this,t);else if(t.childrenCount===0)n=t.parent,i=!1,e=0,n!==null&&(e=n.angle,i=n.alignment,i=Ns(i)),n=Em(t),t.S.h(0,0),t.wa.h(t.width,t.height),t.parent===null||t.comments===null||(e!==180&&e!==270||i)&&!n?t.fa.h(0,0):e===180&&!i||(e===90||e===270)&&n?t.fa.h(t.width-2*t.focus.x,0):t.fa.h(0,t.height-2*t.focus.y),t.Nq=null,t.ar=null;else{var r=Hn(t);e=r===90||r===270;var o=0,s=t.children,u=s.length;for(i=0;i<u;i++)n=s[i],o=Math.max(o,e?n.wa.width:n.wa.height);var a=t.alignment,f=a===Br,c=Ns(a),d=Math.max(0,t.breadthLimit);i=Lh(t);var g=t.nodeSpacing,m=Go(t),y=t.rowSpacing,x=0;(a===Ir||f||t.Qm||t.Rm&&t.maxGenerationCount===1)&&(x=Math.max(0,t.rowIndent)),n=t.width;var M=t.height,S=0,N=0,T=0,C=null,D=null,F=0,$=0,G=0,nt=0,q=0,R=0,Lt=0,mt=0;if(c&&!Nf(a)&&135<r&&s.reverse(),Nf(a))if(1<u)for(var Ot=0;Ot<u;Ot++)Ot%2==0&&Ot!==u-1&&(mt=Math.max(mt,e?s[Ot].wa.width:s[Ot].wa.height));else u===1&&(mt=e?s[0].wa.width:s[0].wa.height);if(c){switch(a){case Xo:N=135>r?S2(t,s,mt,S,N):k2(t,s,mt,S,N),mt=N.x,S=N.width,N=N.height;break;case Ho:for(C=0;C<u;C++)D=s[C],d=D.wa,T=R===0?0:y,e?(D.S.h(o-d.width,nt+T),S=Math.max(S,d.width),N=Math.max(N,nt+T+d.height),nt+=T+d.height):(D.S.h(G+T,o-d.height),S=Math.max(S,G+T+d.width),N=Math.max(N,d.height),G+=T+d.width),R++;break;case fo:for(C=0;C<u;C++)D=s[C],o=D.wa,d=R===0?0:y,e?(D.S.h(g/2+t.focus.x,nt+d),S=Math.max(S,o.width),N=Math.max(N,nt+d+o.height),nt+=d+o.height):(D.S.h(G+d,g/2+t.focus.y),S=Math.max(S,G+d+o.width),N=Math.max(N,o.height),G+=d+o.width),R++}C=Vi(this,2),D=Vi(this,2),e?(C[0].h(0,0),C[1].h(0,N),D[0].h(S,0)):(C[0].h(0,0),C[1].h(S,0),D[0].h(0,N)),D[1].h(S,N)}else for(Ot=0;Ot<u;Ot++){var re=s[Ot],je=re.wa;if(e){0<d&&0<R&&G+g+je.width>d&&(G<o&&$s(t,a,o-G,0,Lt,Ot-1),q++,R=0,Lt=Ot,T=N,G=0,nt=135<r?-N-y:N+y),Ld(this,re,0,nt);var oe=0;if(R===0)C=re.Nq,D=re.ar,F=je.width,$=je.height,(C===null||D===null||r!==Hn(re))&&(C=Vi(this,2),D=Vi(this,2),C[0].h(0,0),C[1].h(0,$),D[0].h(F,0),D[1].h(F,$));else{var se=Dt();$=P2(this,t,re,C,D,F,$,se),oe=$.x,C=se[0],D=se[1],F=$.width,$=$.height,Xt(se),G<je.width&&0>oe&&(_l(t,-oe,0,Lt,Ot-1),jd(C,-oe,0),jd(D,-oe,0),oe=0)}re.S.h(oe,nt),S=Math.max(S,F),N=Math.max(N,T+(q===0?0:y)+je.height),G=F}else 0<d&&0<R&&nt+g+je.height>d&&(nt<o&&$s(t,a,0,o-nt,Lt,Ot-1),q++,R=0,Lt=Ot,T=S,nt=0,G=135<r?-S-y:S+y),Ld(this,re,G,0),oe=0,R===0?(C=re.Nq,D=re.ar,F=je.width,$=je.height,(C===null||D===null||r!==Hn(re))&&(C=Vi(this,2),D=Vi(this,2),C[0].h(0,0),C[1].h(F,0),D[0].h(0,$),D[1].h(F,$))):(se=Dt(),$=P2(this,t,re,C,D,F,$,se),oe=$.x,C=se[0],D=se[1],F=$.width,$=$.height,Xt(se),nt<je.height&&0>oe&&(_l(t,0,-oe,Lt,Ot-1),jd(C,0,-oe),jd(D,0,-oe),oe=0)),re.S.h(G,oe),N=Math.max(N,$),S=Math.max(S,T+(q===0?0:y)+je.width),nt=$;R++}switch(0<q&&(e?(N+=Math.max(0,i),G<S&&$s(t,a,S-G,0,Lt,u-1),0<x&&(f||_l(t,x,0,0,u-1),S+=x)):(S+=Math.max(0,i),nt<N&&$s(t,a,0,N-nt,Lt,u-1),0<x&&(f||_l(t,0,x,0,u-1),N+=x))),x=f=0,a){case Dh:e?f+=S/2-t.focus.x-m/2:x+=N/2-t.focus.y-m/2;break;case Zl:0<q?e?f+=S/2-t.focus.x-m/2:x+=N/2-t.focus.y-m/2:e?(mt=s[0].S.x+s[0].fa.x,f+=mt+(s[u-1].S.x+s[u-1].fa.x+2*s[u-1].focus.x-mt)/2-t.focus.x-m/2):(mt=s[0].S.y+s[0].fa.y,x+=mt+(s[u-1].S.y+s[u-1].fa.y+2*s[u-1].focus.y-mt)/2-t.focus.y-m/2);break;case Ir:e?(f-=m,S+=m):(x-=m,N+=m);break;case Br:e?(f+=S-t.width+m,S+=m):(x+=N-t.height+m,N+=m);break;case Xo:e?1<u?f+=mt+g/2-t.focus.x:f+=s[0].focus.x-t.focus.x+s[0].fa.x:1<u?x+=mt+g/2-t.focus.y:x+=s[0].focus.y-t.focus.y+s[0].fa.y;break;case Ho:e?f+=S+g/2-t.focus.x:x+=N+g/2-t.focus.y;break;case fo:break;default:E("Unhandled alignment value "+a.toString())}for(m=0;m<u;m++)mt=s[m],e?mt.S.h(mt.S.x+mt.fa.x-f,mt.S.y+(135<r?(c?-N:-mt.wa.height)+mt.fa.y-i:M+i+mt.fa.y)):mt.S.h(mt.S.x+(135<r?(c?-S:-mt.wa.width)+mt.fa.x-i:n+i+mt.fa.x),mt.S.y+mt.fa.y-x);if(u=s=0,c?e?(S=Om(t,S,f),0>f&&(f=0),135<r&&(x+=N+i),N+=M+i,a===fo&&(s+=g/2+t.focus.x),u+=M+i):(135<r&&(f+=S+i),S+=n+i,N=Am(t,N,x),0>x&&(x=0),a===fo&&(u+=g/2+t.focus.y),s+=n+i):e?(t.comments===null?n>S&&(S=Im(a,n-S,0),s=S.x,u=S.y,S=n,f=0):S=Om(t,S,f),0>f&&(s-=f,f=0),135<r&&(x+=N+i),N=Math.max(Math.max(N,M),N+M+i),u+=M+i):(135<r&&(f+=S+i),S=Math.max(Math.max(S,n),S+n+i),t.comments===null?M>N&&(N=Im(a,0,M-N),s=N.x,u=N.y,N=M,x=0):N=Am(t,N,x),0>x&&(u-=x,x=0),s+=n+i),0<q)r=Vi(this,4),q=Vi(this,4),e?(r[2].h(0,M+i),r[3].h(r[2].x,N),q[2].h(S,r[2].y),q[3].h(q[2].x,r[3].y)):(r[2].h(n+i,0),r[3].h(S,r[2].y),q[2].h(r[2].x,N),q[3].h(r[3].x,q[2].y));else{for(r=Vi(this,C.length+2),q=Vi(this,D.length+2),a=0;a<C.length;a++)c=C[a],r[a+2].h(c.x+s,c.y+u);for(a=0;a<D.length;a++)c=D[a],q[a+2].h(c.x+s,c.y+u)}e?(r[0].h(f,0),r[1].h(r[0].x,M),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),q[0].h(f+n,0),q[1].h(q[0].x,M),q[2].y<q[1].y&&(q[2].x<q[0].x?q[2].assign(q[1]):q[1].assign(q[2])),q[3].y<q[2].y&&(q[3].x<q[0].x?q[3].assign(q[2]):q[2].assign(q[3])),r[2].y-=i/2,q[2].y-=i/2):(r[0].h(0,x),r[1].h(n,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),q[0].h(0,x+M),q[1].h(n,q[0].y),q[2].x<q[1].x&&(q[2].y<q[0].y?q[2].assign(q[1]):q[1].assign(q[2])),q[3].x<q[2].x&&(q[3].y<q[0].y?q[3].assign(q[2]):q[2].assign(q[3])),r[2].x-=i/2,q[2].x-=i/2),lr(this,C),lr(this,D),t.Nq=r,t.ar=q,t.fa.h(f,x),t.wa.h(S,N)}break;default:E("Unhandled compaction value "+t.compaction.toString())}}};function M2(t,e){if(e.childrenCount===0){var i=!1,n=0;e.parent!==null&&(n=e.parent.angle,i=e.parent.alignment,i=Ns(i));var r=Em(e);e.S.h(0,0),e.wa.h(e.width,e.height),e.parent===null||e.comments===null||(n!==180&&n!==270||i)&&!r?e.fa.h(0,0):n===180&&!i||(n===90||n===270)&&r?e.fa.h(e.width-2*e.focus.x,0):e.fa.h(0,e.height-2*e.focus.y)}else{n=Hn(e),i=n===90||n===270;var o=0;r=e.children;for(var s=r.length,u=0;u<s;u++){var a=r[u];o=Math.max(o,i?a.wa.width:a.wa.height)}var f=e.alignment,c=f===Ir,d=f===Br;u=Ns(f);var g=Math.max(0,e.breadthLimit);a=Lh(e);var m=e.nodeSpacing,y=Go(e),x=c||d?0:y/2,M=e.rowSpacing,S=0;(c||d||e.Qm||e.Rm&&e.maxGenerationCount===1)&&(S=Math.max(0,e.rowIndent)),c=e.width;var N=e.height,T=0,C=0,D=0,F=0,$=0,G=0,nt=0,q=0,R=0;if(u&&!Nf(f)&&135<n&&r.reverse(),Nf(f))if(1<s)for(var Lt=0;Lt<s;Lt++){var mt=r[Lt],Ot=mt.wa;Lt%2==0&&Lt!==s-1&&(R=Math.max(R,(i?Ot.width:Ot.height)+Ts(mt)-m))}else s===1&&(R=i?r[0].wa.width:r[0].wa.height);if(u)switch(f){case Xo:case Rr:C=135>n?S2(e,r,R,T,C):k2(e,r,R,T,C),R=C.x,T=C.width,C=C.height;break;case Ho:for(t=0;t<s;t++)g=r[t],x=g.wa,D=nt===0?0:M,i?(g.S.h(o-x.width,$+D),T=Math.max(T,x.width),C=Math.max(C,$+D+x.height),$+=D+x.height):(g.S.h(F+D,o-x.height),T=Math.max(T,F+D+x.width),C=Math.max(C,x.height),F+=D+x.width),nt++;break;case fo:for(o=0;o<s;o++)t=r[o],g=t.wa,x=nt===0?0:M,i?(t.S.h(m/2+e.focus.x,$+x),T=Math.max(T,g.width),C=Math.max(C,$+x+g.height),$+=x+g.height):(t.S.h(F+x,m/2+e.focus.y),T=Math.max(T,F+x+g.width),C=Math.max(C,g.height),F+=x+g.width),nt++}else for(Lt=0;Lt<s;Lt++){if(mt=r[Lt],Ot=mt.wa,i){0<g&&0<nt&&F+m+Ot.width>g&&(F<o&&$s(e,f,o-F,0,q,Lt-1),G++,nt=0,q=Lt,D=C,F=0,$=135<n?-C-M:C+M);var re=nt===0?x:m;Ld(t,mt,0,$),mt.S.h(F+re,$),T=Math.max(T,F+re+Ot.width),C=Math.max(C,D+(G===0?0:M)+Ot.height),F+=re+Ot.width}else 0<g&&0<nt&&$+m+Ot.height>g&&($<o&&$s(e,f,0,o-$,q,Lt-1),G++,nt=0,q=Lt,D=T,$=0,F=135<n?-T-M:T+M),re=nt===0?x:m,Ld(t,mt,F,0),mt.S.h(F,$+re),C=Math.max(C,$+re+Ot.height),T=Math.max(T,D+(G===0?0:M)+Ot.width),$+=re+Ot.height;nt++}switch(0<G&&(i?(C+=Math.max(0,a),F<T&&$s(e,f,T-F,0,q,s-1),0<S&&(d||_l(e,S,0,0,s-1),T+=S)):(T+=Math.max(0,a),$<C&&$s(e,f,0,C-$,q,s-1),0<S&&(d||_l(e,0,S,0,s-1),C+=S))),S=d=0,f){case Dh:i?d+=T/2-e.focus.x-y/2:S+=C/2-e.focus.y-y/2;break;case Zl:0<G?i?d+=T/2-e.focus.x-y/2:S+=C/2-e.focus.y-y/2:i?(f=r[0].S.x+r[0].fa.x,d+=f+(r[s-1].S.x+r[s-1].fa.x+2*r[s-1].focus.x-f)/2-e.focus.x-y/2):(f=r[0].S.y+r[0].fa.y,S+=f+(r[s-1].S.y+r[s-1].fa.y+2*r[s-1].focus.y-f)/2-e.focus.y-y/2);break;case Ir:i?(d-=y,T+=y):(S-=y,C+=y);break;case Br:i?(d+=T-e.width+y,T+=y):(S+=C-e.height+y,C+=y);break;case Xo:case Rr:i?1<s?d+=R+m/2-e.focus.x:d+=r[0].focus.x-e.focus.x+r[0].fa.x:1<s?S+=R+m/2-e.focus.y:S+=r[0].focus.y-e.focus.y+r[0].fa.y;break;case Ho:i?d+=T+m/2-e.focus.x:S+=C+m/2-e.focus.y;break;case fo:break;default:E("Unhandled alignment value "+f.toString())}for(y=0;y<s;y++)f=r[y],i?f.S.h(f.S.x+f.fa.x-d,f.S.y+(135<n?(u?-C:-f.wa.height)+f.fa.y-a:N+a+f.fa.y)):f.S.h(f.S.x+(135<n?(u?-T:-f.wa.width)+f.fa.x-a:c+a+f.fa.x),f.S.y+f.fa.y-S);i?(T=Om(e,T,d),0>d&&(d=0),135<n&&(S+=C+a),C=Math.max(Math.max(C,N),C+N+a)):(135<n&&(d+=T+a),T=Math.max(Math.max(T,c),T+c+a),C=Am(e,C,S),0>S&&(S=0)),e.fa.h(d,S),e.wa.h(T,C)}}function S2(t,e,i,n,r){var o=e.length;if(o===0)return new I(i,0,n,r);if(o===1)return t=e[0],n=t.wa.width,r=t.wa.height,new I(i,0,n,r);for(var s=t.nodeSpacing,u=t.rowSpacing,a=Hn(t)===90,f=0,c=0,d=0,g=0;g<o;g++)if(!(g%2!=0||1<o&&g===o-1)){var m=e[g],y=m.wa,x=f===0?0:u;if(a){var M=Ts(m)-s;m.S.h(i-(y.width+M),d+x),n=Math.max(n,y.width+M),r=Math.max(r,d+x+y.height),d+=x+y.height}else M=Ts(m)-s,m.S.h(c+x,i-(y.height+M)),r=Math.max(r,y.height+M),n=Math.max(n,c+x+y.width),c+=x+y.width;f++}for(f=0,m=c,g=d,a?(c=i+s,d=0):(c=0,d=i+s),y=0;y<o;y++)if(y%2!=0){x=e[y],M=x.wa;var S=f===0?0:u;if(a){var N=Ts(x)-s;x.S.h(c+N,d+S),n=Math.max(n,c+M.width+N),r=Math.max(r,d+S+M.height),d+=S+M.height}else N=Ts(x)-s,x.S.h(c+S,d+N),n=Math.max(n,c+S+M.width),r=Math.max(r,d+M.height+N),c+=S+M.width;f++}return 1<o&&o%2==1&&(e=e[o-1],o=e.wa,u=e.parent===null?0:e.parent.rowSpacing,a?(e.S.h(i+s/2-e.focus.x-e.fa.x,r+u),a=i+s/2-e.focus.x-e.fa.x,n=Math.max(n,a+o.width),0>a&&(n-=a),r=Math.max(r,Math.max(g,d)+u+o.height),0>e.S.x&&(i=Cd(t,e.S.x,!1,i,s))):(e.S.h(n+u,i+s/2-e.focus.y-e.fa.y),n=Math.max(n,Math.max(m,c)+u+o.width),d=i+s/2-e.focus.y-e.fa.y,r=Math.max(r,d+o.height),0>d&&(r-=d),0>e.S.y&&(i=Cd(t,e.S.y,!0,i,s)))),new I(i,0,n,r)}function k2(t,e,i,n,r){var o=e.length;if(o===0)return new I(i,0,n,r);if(o===1)return e=e[0],n=e.wa.width,r=e.wa.height,new I(i,0,n,r);for(var s=t.nodeSpacing,u=t.rowSpacing,a=Hn(t)===270,f=0,c=0,d=0,g=0;g<o;g++)if(!(g%2!=0||1<o&&g===o-1)){var m=e[g],y=m.wa,x=f===0?0:u;if(a){var M=Ts(m)-s;d-=x+y.height,m.S.h(i-(y.width+M),d),n=Math.max(n,y.width+M),r=Math.max(r,Math.abs(d))}else M=Ts(m)-s,c-=x+y.width,m.S.h(c,i-(y.height+M)),r=Math.max(r,y.height+M),n=Math.max(n,Math.abs(c));f++}for(f=0,m=c,g=d,a?(c=i+s,d=0):(c=0,d=i+s),y=0;y<o;y++)if(y%2!=0){x=e[y],M=x.wa;var S=f===0?0:u;if(a){var N=Ts(x)-s;d-=S+M.height,x.S.h(c+N,d),n=Math.max(n,c+M.width+N),r=Math.max(r,Math.abs(d))}else N=Ts(x)-s,c-=S+M.width,x.S.h(c,d+N),r=Math.max(r,d+M.height+N),n=Math.max(n,Math.abs(c));f++}for(1<o&&o%2==1&&(u=e[o-1],f=u.wa,y=u.parent===null?0:u.parent.rowSpacing,a?(u.S.h(i+s/2-u.focus.x-u.fa.x,-r-f.height-y),c=i+s/2-u.focus.x-u.fa.x,n=Math.max(n,c+f.width),0>c&&(n-=c),r=Math.max(r,Math.abs(Math.min(g,d))+y+f.height),0>u.S.x&&(i=Cd(t,u.S.x,!1,i,s))):(u.S.h(-n-f.width-y,i+s/2-u.focus.y-u.fa.y),n=Math.max(n,Math.abs(Math.min(m,c))+y+f.width),d=i+s/2-u.focus.y-u.fa.y,r=Math.max(r,d+f.height),0>d&&(r-=d),0>u.S.y&&(i=Cd(t,u.S.y,!0,i,s)))),t=0;t<o;t++)s=e[t],a?s.S.h(s.S.x,s.S.y+r):s.S.h(s.S.x+n,s.S.y);return new I(i,0,n,r)}function Ts(t){return t.parent===null?0:t.parent.nodeSpacing}function Cd(t,e,i,n,r){t=t.children;for(var o=t.length,s=0;s<o;s++)i?t[s].S.h(t[s].S.x,t[s].S.y-e):t[s].S.h(t[s].S.x-e,t[s].S.y);return e=t[o-1],Math.max(n,i?e.fa.y+e.focus.y-r/2:e.fa.x+e.focus.x-r/2)}function Om(t,e,i){switch(t.alignment){case Zl:case Dh:return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case Ir:return t.width>e?t.width:e;case Br:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case Xo:case Rr:return Math.max(t.width,Math.max(e,i+t.width)-Math.min(0,i));case Ho:return t.width-t.focus.x+t.nodeSpacing/2+e;case fo:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function Am(t,e,i){switch(t.alignment){case Zl:case Dh:return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case Ir:return t.height>e?t.height:e;case Br:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case Xo:case Rr:return Math.max(t.height,Math.max(e,i+t.height)-Math.min(0,i));case Ho:return t.height-t.focus.y+t.nodeSpacing/2+e;case fo:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function Im(t,e,i){switch(t){case Dh:e/=2,i/=2;break;case Zl:e/=2,i/=2;break;case Ir:i=e=0;break;case Br:break;default:E("Unhandled alignment value "+t.toString())}return new k(e,i)}function $s(t,e,i,n,r,o){e=Im(e,i,n),_l(t,e.x,e.y,r,o)}function _l(t,e,i,n,r){if(e!==0||i!==0)for(t=t.children;n<=r;n++){var o=t[n].S;o.x+=e,o.y+=i}}function Ld(t,e,i,n){var r=e.parent;switch(t.md){case Ar:for(t=e.sourceEdges;t.next();)e=t.value,e.fromVertex===r&&e.relativePoint.h(i,n);break;case $l:for(t=e.destinationEdges;t.next();)e=t.value,e.toVertex===r&&e.relativePoint.h(i,n);break;default:E("Unhandled path value "+t.md.toString())}}function jd(t,e,i){for(var n=0;n<t.length;n++){var r=t[n];r.x+=e,r.y+=i}}function P2(t,e,i,n,r,o,s,u){var a=Hn(e),f=a===90||a===270,c=e.nodeSpacing;e=n;var d=r;n=o;var g=s,m=i.Nq,y=i.ar;s=i.wa;var x=f?Math.max(g,s.height):Math.max(n,s.width);if((m===null||a!==Hn(i))&&(m=Vi(t,2),y=Vi(t,2),f?(m[0].h(0,0),m[1].h(0,s.height),y[0].h(s.width,0),y[1].h(y[0].x,m[1].y)):(m[0].h(0,0),m[1].h(s.width,0),y[0].h(0,s.height),y[1].h(m[1].x,y[0].y))),f){if(g=9999999,!(d===null||2>d.length||m===null||2>m.length))for(r=i=0;i<d.length&&r<m.length;){o=d[i];var M=m[r];a=M.x,f=M.y,a+=n;var S=o;i+1<d.length&&(S=d[i+1]);var N=M;M=N.x,N=N.y,r+1<m.length&&(N=m[r+1],M=N.x,N=N.y,M+=n);var T=g;o.y===f?T=a-o.x:o.y>f&&o.y<N?T=a+(o.y-f)/(N-f)*(M-a)-o.x:f>o.y&&f<S.y&&(T=a-(o.x+(f-o.y)/(S.y-o.y)*(S.x-o.x))),T<g&&(g=T),S.y<=o.y?i++:N<=f?r++:(S.y<=N&&i++,N<=S.y&&r++)}if(g=n-g,g+=c,i=m,r=g,e===null||2>e.length||i===null||2>i.length)n=null;else{for(c=Vi(t,e.length+i.length),n=o=a=0;o<i.length&&i[o].y<e[0].y;)f=i[o++],c[n++].h(f.x+r,f.y);for(;a<e.length;)f=e[a++],c[n++].h(f.x,f.y);for(a=e[e.length-1].y;o<i.length&&i[o].y<=a;)o++;for(;o<i.length&&i[o].y>a;)f=i[o++],c[n++].h(f.x+r,f.y);for(i=Vi(t,n),a=0;a<n;a++)i[a].assign(c[a]);lr(t,c),n=i}if(o=y,a=g,d===null||2>d.length||o===null||2>o.length)r=null;else{for(c=Vi(t,d.length+o.length),r=f=i=0;i<d.length&&d[i].y<o[0].y;)S=d[i++],c[r++].h(S.x,S.y);for(;f<o.length;)S=o[f++],c[r++].h(S.x+a,S.y);for(o=o[o.length-1].y;i<d.length&&d[i].y<=o;)i++;for(;i<d.length&&d[i].y>o;)a=d[i++],c[r++].h(a.x,a.y);for(o=Vi(t,r),i=0;i<r;i++)o[i].assign(c[i]);lr(t,c),r=o}return o=Math.max(0,g)+s.width,s=x,lr(t,e),lr(t,m),lr(t,d),lr(t,y),u[0]=n,u[1]=r,new I(g,0,o,s)}if(n=9999999,!(d===null||2>d.length||m===null||2>m.length))for(r=i=0;i<d.length&&r<m.length;)o=d[i],M=m[r],a=M.x,f=M.y,f+=g,S=o,i+1<d.length&&(S=d[i+1]),N=M,M=N.x,N=N.y,r+1<m.length&&(N=m[r+1],M=N.x,N=N.y,N+=g),T=n,o.x===a?T=f-o.y:o.x>a&&o.x<M?T=f+(o.x-a)/(M-a)*(N-f)-o.y:a>o.x&&a<S.x&&(T=f-(o.y+(a-o.x)/(S.x-o.x)*(S.y-o.y))),T<n&&(n=T),S.x<=o.x?i++:M<=a?r++:(S.x<=M&&i++,M<=S.x&&r++);if(g-=n,g+=c,i=m,r=g,e===null||2>e.length||i===null||2>i.length)n=null;else{for(c=Vi(t,e.length+i.length),n=o=a=0;o<i.length&&i[o].x<e[0].x;)f=i[o++],c[n++].h(f.x,f.y+r);for(;a<e.length;)f=e[a++],c[n++].h(f.x,f.y);for(a=e[e.length-1].x;o<i.length&&i[o].x<=a;)o++;for(;o<i.length&&i[o].x>a;)f=i[o++],c[n++].h(f.x,f.y+r);for(i=Vi(t,n),a=0;a<n;a++)i[a].assign(c[a]);lr(t,c),n=i}if(o=y,a=g,d===null||2>d.length||o===null||2>o.length)r=null;else{for(c=Vi(t,d.length+o.length),r=f=i=0;i<d.length&&d[i].x<o[0].x;)S=d[i++],c[r++].h(S.x,S.y);for(;f<o.length;)S=o[f++],c[r++].h(S.x,S.y+a);for(o=o[o.length-1].x;i<d.length&&d[i].x<=o;)i++;for(;i<d.length&&d[i].x>o;)a=d[i++],c[r++].h(a.x,a.y);for(o=Vi(t,r),i=0;i<r;i++)o[i].assign(c[i]);lr(t,c),r=o}return o=x,s=Math.max(0,g)+s.height,lr(t,e),lr(t,m),lr(t,d),lr(t,y),u[0]=n,u[1]=r,new I(g,0,o,s)}function Vi(t,e){if(t=t.sv[e],t!==void 0&&(t=t.pop(),t!==void 0))return t;t=[];for(var i=0;i<e;i++)t[i]=new k;return t}function lr(t,e){var i=e.length,n=t.sv[i];n===void 0&&(n=[],t.sv[i]=n),n.push(e)}St.prototype.arrangeTrees=function(){if(this.Fb===Id)for(var t=this.Kb.iterator;t.next();){var e=t.value;if(e instanceof Ln){var i=e.node;if(i!==null){var n=i.position;i=n.x,n=n.y,isFinite(i)||(i=0),isFinite(n)||(n=0),Bm(this,e,i,n)}}}else{for(t=[],e=this.Kb.iterator;e.next();)i=e.value,i instanceof Ln&&t.push(i);switch(this.sorting){case jh:break;case Tf:t.reverse();break;case Cf:t.sort(this.comparer);break;case Lf:t.sort(this.comparer),t.reverse();break;default:E("Unhandled sorting value "+this.sorting.toString())}for(i=this.arrangementOrigin,e=i.x,i=i.y,n=0;n<t.length;n++){var r=t[n];switch(Bm(this,r,e+r.fa.x,i+r.fa.y),this.Fb){case Ad:i+=r.wa.height+this.Nd.height;break;case zm:e+=r.wa.width+this.Nd.width;break;default:E("Unhandled arrangement value "+this.Fb.toString())}}}};function Bm(t,e,i,n){if(e!==null){e.x=i,e.y=n,e=e.children;for(var r=e.length,o=0;o<r;o++){var s=e[o];Bm(t,s,i+s.S.x,n+s.S.y)}}}St.prototype.commitLayout=function(){this.Dw(),this.commitNodes(),this.Gv(),this.isRouting&&this.commitLinks()},St.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},St.prototype.Gv=function(){if(this.layerStyle===Bd){for(var t=this.nx,e=[],i=null,n=this.network.vertexes.iterator;n.next();){var r=n.value;i===null?i=r.bounds.copy():i.Tc(r.bounds);var o=e[r.level];o===void 0?o=Lh(r):o=Math.max(o,Lh(r)),e[r.level]=o}for(n=0;n<e.length;n++)e[n]===void 0&&(e[n]=0);if(this.angle===90||this.angle===270?(i.Kc(this.nodeSpacing/2,this.layerSpacing),n=new k(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.Kc(this.layerSpacing,this.nodeSpacing/2),n=new k(-this.layerSpacing/2,-this.nodeSpacing/2)),r=[],i=this.angle===90||this.angle===270?i.width:i.height,o=0,this.angle===180||this.angle===270)for(var s=0;s<t.length;s++)o+=t[s]+e[s];for(s=0;s<t.length;s++){var u=t[s]+e[s];this.angle===270?(o-=u,r.push(new I(0,o,i,u))):this.angle===90?(r.push(new I(0,o,i,u)),o+=u):this.angle===180?(o-=u,r.push(new I(o,0,u,i))):(r.push(new I(o,0,u,i)),o+=u)}this.commitLayers(r,n)}},St.prototype.commitLayers=function(){},St.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},St.prototype.Dw=function(){for(var t=this.Kb.iterator;t.next();){var e=t.value;e instanceof Ln&&N2(this,e)}};function N2(t,e){if(e!==null){t.setPortSpots(e),e=e.children;for(var i=e.length,n=0;n<i;n++)N2(t,e[n])}}St.prototype.setPortSpots=function(t){var e=t.alignment;if(Ns(e)){var i=this.md===Ar,n=Hn(t);switch(n){case 0:var r=Gi;break;case 90:r=Sn;break;case 180:r=Mn;break;default:r=wn}var o=t.children,s=o.length;switch(e){case Xo:case Rr:for(e=0;e<s;e++){var u=o[e];if(u=(i?u.sourceEdges:u.destinationEdges).first(),u!==null&&(u=u.link,u!==null)){var a=n===90||n===270?Mn:wn;if(s===1||e===s-1&&s%2==1)switch(n){case 0:a=Mn;break;case 90:a=wn;break;case 180:a=Gi;break;default:a=Sn}else e%2==0&&(a=n===90||n===270?Gi:Sn);i?(t.setsPortSpot&&(u.fromSpot=r),t.setsChildPortSpot&&(u.toSpot=a)):(t.setsPortSpot&&(u.fromSpot=a),t.setsChildPortSpot&&(u.toSpot=r))}}break;case Ho:for(n=n===90||n===270?Gi:Sn,o=i?t.destinationEdges:t.sourceEdges;o.next();)s=o.value.link,s!==null&&(i?(t.setsPortSpot&&(s.fromSpot=r),t.setsChildPortSpot&&(s.toSpot=n)):(t.setsPortSpot&&(s.fromSpot=n),t.setsChildPortSpot&&(s.toSpot=r)));break;case fo:for(n=n===90||n===270?Mn:wn,o=i?t.destinationEdges:t.sourceEdges;o.next();)s=o.value.link,s!==null&&(i?(t.setsPortSpot&&(s.fromSpot=r),t.setsChildPortSpot&&(s.toSpot=n)):(t.setsPortSpot&&(s.fromSpot=n),t.setsChildPortSpot&&(s.toSpot=r)))}}else if(i=Hn(t),this.md===Ar){for(r=t.destinationEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.Nb())switch(i){case 0:n.fromSpot=Gi;break;case 90:n.fromSpot=Sn;break;case 180:n.fromSpot=Mn;break;default:n.fromSpot=wn}else n.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Nb())switch(i){case 0:n.toSpot=Mn;break;case 90:n.toSpot=wn;break;case 180:n.toSpot=Gi;break;default:n.toSpot=Sn}else n.toSpot=t.childPortSpot}}else for(r=t.sourceEdges;r.next();)if(n=r.value.link,n!==null){if(t.setsPortSpot)if(t.portSpot.Nb())switch(i){case 0:n.toSpot=Gi;break;case 90:n.toSpot=Sn;break;case 180:n.toSpot=Mn;break;default:n.toSpot=wn}else n.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Nb())switch(i){case 0:n.fromSpot=Mn;break;case 90:n.fromSpot=wn;break;case 180:n.fromSpot=Gi;break;default:n.fromSpot=Sn}else n.fromSpot=t.childPortSpot}};function Hn(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function Lh(t){var e=Hn(t);e=e===90||e===270;var i=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var n=Math.min(1,t.layerSpacingParentOverlap);i-=e?t.height*n:t.width*n}return i<(e?-t.height:-t.width)&&(i=e?-t.height:-t.width),i}function Go(t){var e=Hn(t),i=t.nodeIndent;if(0<t.nodeIndentPastParent){var n=Math.min(1,t.nodeIndentPastParent);i+=e===90||e===270?t.width*n:t.height*n}return i=Math.max(0,i)}X.Object.defineProperties(St.prototype,{roots:{get:function(){return this.Kb},set:function(t){this.Kb!==t&&(this.Kb=t,this.C())}},path:{get:function(){return this.op},set:function(t){this.op!==t&&(this.op=t,this.C())}},treeStyle:{get:function(){return this.kq},set:function(t){this.Fb===t||t!==Od&&t!==Fm&&t!==Rm&&t!==Vm||(this.kq=t,this.C())}},layerStyle:{get:function(){return this.ts},set:function(t){this.Fb===t||t!==Um&&t!==Ym&&t!==Bd||(this.ts=t,this.C())}},comments:{get:function(){return this.ld},set:function(t){this.ld!==t&&(this.ld=t,this.C())}},arrangement:{get:function(){return this.Fb},set:function(t){this.Fb===t||t!==Ad&&t!==zm&&t!==Id||(this.Fb=t,this.C())}},arrangementSpacing:{get:function(){return this.Nd},set:function(t){this.Nd.w(t)||(this.Nd.assign(t),this.C())}},rootDefaults:{get:function(){return this.U},set:function(t){this.U!==t&&(this.U=t,this.C())}},alternateDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.C())}},sorting:{get:function(){return this.U.sorting},set:function(t){this.U.sorting===t||t!==jh&&t!==Tf&&t!==Cf&&!Lf||(this.U.sorting=t,this.C())}},comparer:{get:function(){return this.U.comparer},set:function(t){this.U.comparer!==t&&(this.U.comparer=t,this.C())}},angle:{get:function(){return this.U.angle},set:function(t){this.U.angle!==t&&(t===0||t===90||t===180||t===270?(this.U.angle=t,this.C()):E("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.U.alignment},set:function(t){this.U.alignment!==t&&(this.U.alignment=t,this.C())}},nodeIndent:{get:function(){return this.U.nodeIndent},set:function(t){this.U.nodeIndent!==t&&0<=t&&(this.U.nodeIndent=t,this.C())}},nodeIndentPastParent:{get:function(){return this.U.nodeIndentPastParent},set:function(t){this.U.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.U.nodeIndentPastParent=t,this.C())}},nodeSpacing:{get:function(){return this.U.nodeSpacing},set:function(t){this.U.nodeSpacing!==t&&(this.U.nodeSpacing=t,this.C())}},layerSpacing:{get:function(){return this.U.layerSpacing},set:function(t){this.U.layerSpacing!==t&&(this.U.layerSpacing=t,this.C())}},layerSpacingParentOverlap:{get:function(){return this.U.layerSpacingParentOverlap},set:function(t){this.U.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.U.layerSpacingParentOverlap=t,this.C())}},compaction:{get:function(){return this.U.compaction},set:function(t){this.U.compaction===t||t!==Ed&&t!==jf||(this.U.compaction=t,this.C())}},breadthLimit:{get:function(){return this.U.breadthLimit},set:function(t){this.U.breadthLimit!==t&&0<=t&&(this.U.breadthLimit=t,this.C())}},rowSpacing:{get:function(){return this.U.rowSpacing},set:function(t){this.U.rowSpacing!==t&&(this.U.rowSpacing=t,this.C())}},rowIndent:{get:function(){return this.U.rowIndent},set:function(t){this.U.rowIndent!==t&&0<=t&&(this.U.rowIndent=t,this.C())}},commentSpacing:{get:function(){return this.U.commentSpacing},set:function(t){this.U.commentSpacing!==t&&(this.U.commentSpacing=t,this.C())}},commentMargin:{get:function(){return this.U.commentMargin},set:function(t){this.U.commentMargin!==t&&(this.U.commentMargin=t,this.C())}},setsPortSpot:{get:function(){return this.U.setsPortSpot},set:function(t){this.U.setsPortSpot!==t&&(this.U.setsPortSpot=t,this.C())}},portSpot:{get:function(){return this.U.portSpot},set:function(t){this.U.portSpot.w(t)||(this.U.portSpot=t,this.C())}},setsChildPortSpot:{get:function(){return this.U.setsChildPortSpot},set:function(t){this.U.setsChildPortSpot!==t&&(this.U.setsChildPortSpot=t,this.C())}},childPortSpot:{get:function(){return this.U.childPortSpot},set:function(t){this.U.childPortSpot.w(t)||(this.U.childPortSpot=t,this.C())}},alternateSorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==jh&&t!==Tf&&t!==Cf&&!Lf||(this.V.sorting=t,this.C())}},alternateComparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.C())}},alternateAngle:{get:function(){return this.V.angle},set:function(t){this.V.angle===t||t!==0&&t!==90&&t!==180&&t!==270||(this.V.angle=t,this.C())}},alternateAlignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.C())}},alternateNodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.C())}},alternateNodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.C())}},alternateNodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.C())}},alternateLayerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.C())}},alternateLayerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.C())}},alternateCompaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==Ed&&t!==jf||(this.V.compaction=t,this.C())}},alternateBreadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.C())}},alternateRowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.C())}},alternateRowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.C())}},alternateCommentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.C())}},alternateCommentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.C())}},alternateSetsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.C())}},alternatePortSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.w(t)||(this.V.portSpot=t,this.C())}},alternateSetsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.C())}},alternateChildPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.w(t)||(this.V.childPortSpot=t,this.C())}}});var Dd=new K(St,"PathDefault",-1),Ar=new K(St,"PathDestination",0),$l=new K(St,"PathSource",1),jh=new K(St,"SortingForwards",10),Tf=new K(St,"SortingReverse",11),Cf=new K(St,"SortingAscending",12),Lf=new K(St,"SortingDescending",13),Dh=new K(St,"AlignmentCenterSubtrees",20),Zl=new K(St,"AlignmentCenterChildren",21),Ir=new K(St,"AlignmentStart",22),Br=new K(St,"AlignmentEnd",23),Xo=new K(St,"AlignmentBus",24),Rr=new K(St,"AlignmentBusBranching",25),Ho=new K(St,"AlignmentTopLeftBus",26),fo=new K(St,"AlignmentBottomRightBus",27),Ed=new K(St,"CompactionNone",30),jf=new K(St,"CompactionBlock",31),Od=new K(St,"StyleLayered",40),Rm=new K(St,"StyleLastParents",41),Fm=new K(St,"StyleAlternating",42),Vm=new K(St,"StyleRootOnly",43),Ad=new K(St,"ArrangementVertical",50),zm=new K(St,"ArrangementHorizontal",51),Id=new K(St,"ArrangementFixedRoots",52),Um=new K(St,"LayerIndividual",60),Ym=new K(St,"LayerSiblings",61),Bd=new K(St,"LayerUniform",62);St.className="TreeLayout",St.PathDefault=Dd,St.PathDestination=Ar,St.PathSource=$l,St.SortingForwards=jh,St.SortingReverse=Tf,St.SortingAscending=Cf,St.SortingDescending=Lf,St.AlignmentCenterSubtrees=Dh,St.AlignmentCenterChildren=Zl,St.AlignmentStart=Ir,St.AlignmentEnd=Br,St.AlignmentBus=Xo,St.AlignmentBusBranching=Rr,St.AlignmentTopLeftBus=Ho,St.AlignmentBottomRightBus=fo,St.CompactionNone=Ed,St.CompactionBlock=jf,St.StyleLayered=Od,St.StyleLastParents=Rm,St.StyleAlternating=Fm,St.StyleRootOnly=Vm,St.ArrangementVertical=Ad,St.ArrangementHorizontal=zm,St.ArrangementFixedRoots=Id,St.LayerIndividual=Um,St.LayerSiblings=Ym,St.LayerUniform=Bd;function Jl(t){$t.call(this,t)}ut(Jl,$t),Jl.prototype.createVertex=function(){return new Ln(this)},Jl.prototype.createEdge=function(){return new Eh(this)},Jl.className="TreeNetwork";function Ln(t){xe.call(this,t),this.Ja=!1,this.Cc=null,this.I=[],this.Uc=this.eb=this.T=this.Ka=0,this.ld=null,this.S=new k(0,0),this.wa=new pt(0,0),this.fa=new k(0,0),this.Rm=this.Qm=this.WA=!1,this.ar=this.Nq=null,this.dd=jh,this.Yc=um,this.Yb=0,this.zb=Zl,this.Ds=this.Cs=0,this.Es=20,this.se=50,this.ss=0,this.Er=jf,this.wr=0,this.Rs=25,this.Dr=this.Qs=10,this.Cr=20,this.dt=!0,this.Ns=ni,this.ct=!0,this.zr=ni}ut(Ln,xe),Ln.prototype.copyInheritedPropertiesFrom=function(t){t!==null&&(this.dd=t.sorting,this.Yc=t.comparer,this.Yb=t.angle,this.zb=t.alignment,this.Cs=t.nodeIndent,this.Ds=t.nodeIndentPastParent,this.Es=t.nodeSpacing,this.se=t.layerSpacing,this.ss=t.layerSpacingParentOverlap,this.Er=t.compaction,this.wr=t.breadthLimit,this.Rs=t.rowSpacing,this.Qs=t.rowIndent,this.Dr=t.commentSpacing,this.Cr=t.commentMargin,this.dt=t.setsPortSpot,this.Ns=t.portSpot,this.ct=t.setsChildPortSpot,this.zr=t.childPortSpot)},X.Object.defineProperties(Ln.prototype,{initialized:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}},parent:{get:function(){return this.Cc},set:function(t){this.Cc!==t&&(this.Cc=t)}},children:{get:function(){return this.I},set:function(t){if(this.I!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.I=t}}},level:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},descendantCount:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}},maxChildrenCount:{get:function(){return this.eb},set:function(t){this.eb!==t&&(this.eb=t)}},maxGenerationCount:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},comments:{get:function(){return this.ld},set:function(t){if(this.ld!==t){if(t!==null)for(var e=t.length,i=0;i<e;i++);this.ld=t}}},sorting:{get:function(){return this.dd},set:function(t){this.dd!==t&&(this.dd=t)}},comparer:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t)}},angle:{get:function(){return this.Yb},set:function(t){this.Yb!==t&&(this.Yb=t)}},alignment:{get:function(){return this.zb},set:function(t){this.zb!==t&&(this.zb=t)}},nodeIndent:{get:function(){return this.Cs},set:function(t){this.Cs!==t&&(this.Cs=t)}},nodeIndentPastParent:{get:function(){return this.Ds},set:function(t){this.Ds!==t&&(this.Ds=t)}},nodeSpacing:{get:function(){return this.Es},set:function(t){this.Es!==t&&(this.Es=t)}},layerSpacing:{get:function(){return this.se},set:function(t){this.se!==t&&(this.se=t)}},layerSpacingParentOverlap:{get:function(){return this.ss},set:function(t){this.ss!==t&&(this.ss=t)}},compaction:{get:function(){return this.Er},set:function(t){this.Er!==t&&(this.Er=t)}},breadthLimit:{get:function(){return this.wr},set:function(t){this.wr!==t&&(this.wr=t)}},rowSpacing:{get:function(){return this.Rs},set:function(t){this.Rs!==t&&(this.Rs=t)}},rowIndent:{get:function(){return this.Qs},set:function(t){this.Qs!==t&&(this.Qs=t)}},commentSpacing:{get:function(){return this.Dr},set:function(t){this.Dr!==t&&(this.Dr=t)}},commentMargin:{get:function(){return this.Cr},set:function(t){this.Cr!==t&&(this.Cr=t)}},setsPortSpot:{get:function(){return this.dt},set:function(t){this.dt!==t&&(this.dt=t)}},portSpot:{get:function(){return this.Ns},set:function(t){this.Ns.w(t)||(this.Ns=t)}},setsChildPortSpot:{get:function(){return this.ct},set:function(t){this.ct!==t&&(this.ct=t)}},childPortSpot:{get:function(){return this.zr},set:function(t){this.zr.w(t)||(this.zr=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.wa},set:function(t){this.wa.set(t)}},subtreeOffset:{get:function(){return this.fa},set:function(t){this.fa.set(t)}}}),Ln.className="TreeVertex";function Eh(t){Ze.call(this,t),this.iv=new k(0,0)}ut(Eh,Ze),Eh.prototype.commit=function(){var t=this.link;if(t!==null&&!t.isAvoiding){var e=this.network.layout,i=null,n=null;switch(e.md){case Ar:i=this.fromVertex,n=this.toVertex;break;case $l:i=this.toVertex,n=this.fromVertex;break;default:E("Unhandled path value "+e.md.toString())}if(i!==null&&n!==null)if(e=this.iv,e.x!==0||e.y!==0||i.WA){n=i.bounds;var r=Hn(i),o=Lh(i),s=i.rowSpacing;t.wj();var u=t.curve===rn,a=t.isOrthogonal,f;if(t.Sh(),a||u){for(f=2;4<t.pointsCount;)t.tw(2);var c=t.i(1),d=t.i(2)}else{for(f=1;3<t.pointsCount;)t.tw(1);c=t.i(0),d=t.i(t.pointsCount-1)}var g=t.i(t.pointsCount-1);r===0?(i.alignment===Br?(r=n.bottom+e.y,e.y===0&&c.y>g.y+i.rowIndent&&(r=Math.min(r,Math.max(c.y,r-Go(i))))):i.alignment===Ir?(r=n.top+e.y,e.y===0&&c.y<g.y-i.rowIndent&&(r=Math.max(r,Math.min(c.y,r+Go(i))))):r=i.Qm||i.Rm&&i.maxGenerationCount===1?n.top-i.fa.y+e.y:n.y+n.height/2+e.y,u?(t.m(f,c.x,r),f++,t.m(f,n.right+o,r),f++,t.m(f,n.right+o+(e.x-s)/3,r),f++,t.m(f,n.right+o+2*(e.x-s)/3,r),f++,t.m(f,n.right+o+(e.x-s),r),f++,t.m(f,d.x,r)):(a&&(t.m(f,n.right+o/2,c.y),f++),t.m(f,n.right+o/2,r),f++,t.m(f,n.right+o+e.x-(a?s/2:s),r),f++,a&&t.m(f,t.i(f-1).x,d.y))):r===90?(i.alignment===Br?(r=n.right+e.x,e.x===0&&c.x>g.x+i.rowIndent&&(r=Math.min(r,Math.max(c.x,r-Go(i))))):i.alignment===Ir?(r=n.left+e.x,e.x===0&&c.x<g.x-i.rowIndent&&(r=Math.max(r,Math.min(c.x,r+Go(i))))):r=i.Qm||i.Rm&&i.maxGenerationCount===1?n.left-i.fa.x+e.x:n.x+n.width/2+e.x,u?(t.m(f,r,c.y),f++,t.m(f,r,n.bottom+o),f++,t.m(f,r,n.bottom+o+(e.y-s)/3),f++,t.m(f,r,n.bottom+o+2*(e.y-s)/3),f++,t.m(f,r,n.bottom+o+(e.y-s)),f++,t.m(f,r,d.y)):(a&&(t.m(f,c.x,n.bottom+o/2),f++),t.m(f,r,n.bottom+o/2),f++,t.m(f,r,n.bottom+o+e.y-(a?s/2:s)),f++,a&&t.m(f,d.x,t.i(f-1).y))):r===180?(i.alignment===Br?(r=n.bottom+e.y,e.y===0&&c.y>g.y+i.rowIndent&&(r=Math.min(r,Math.max(c.y,r-Go(i))))):i.alignment===Ir?(r=n.top+e.y,e.y===0&&c.y<g.y-i.rowIndent&&(r=Math.max(r,Math.min(c.y,r+Go(i))))):r=i.Qm||i.Rm&&i.maxGenerationCount===1?n.top-i.fa.y+e.y:n.y+n.height/2+e.y,u?(t.m(f,c.x,r),f++,t.m(f,n.left-o,r),f++,t.m(f,n.left-o+(e.x+s)/3,r),f++,t.m(f,n.left-o+2*(e.x+s)/3,r),f++,t.m(f,n.left-o+(e.x+s),r),f++,t.m(f,d.x,r)):(a&&(t.m(f,n.left-o/2,c.y),f++),t.m(f,n.left-o/2,r),f++,t.m(f,n.left-o+e.x+(a?s/2:s),r),f++,a&&t.m(f,t.i(f-1).x,d.y))):r===270?(i.alignment===Br?(r=n.right+e.x,e.x===0&&c.x>g.x+i.rowIndent&&(r=Math.min(r,Math.max(c.x,r-Go(i))))):i.alignment===Ir?(r=n.left+e.x,e.x===0&&c.x<g.x-i.rowIndent&&(r=Math.max(r,Math.min(c.x,r+Go(i))))):r=i.Qm||i.Rm&&i.maxGenerationCount===1?n.left-i.fa.x+e.x:n.x+n.width/2+e.x,u?(t.m(f,r,c.y),f++,t.m(f,r,n.top-o),f++,t.m(f,r,n.top-o+(e.y+s)/3),f++,t.m(f,r,n.top-o+2*(e.y+s)/3),f++,t.m(f,r,n.top-o+(e.y+s)),f++,t.m(f,r,d.y)):(a&&(t.m(f,c.x,n.top-o/2),f++),t.m(f,r,n.top-o/2),f++,t.m(f,r,n.top-o+e.y+(a?s/2:s)),f++,a&&t.m(f,d.x,t.i(f-1).y))):E("Invalid angle "+r),t.zf()}else t=this.link,o=Hn(i),o!==Hn(n)&&(s=Lh(i),u=i.bounds,i=n.bounds,o===0&&i.left-u.right<s+1||o===90&&i.top-u.bottom<s+1||o===180&&u.left-i.right<s+1||o===270&&u.top-i.bottom<s+1||(t.wj(),i=t.curve===rn,e=t.isOrthogonal,n=Ns(this.fromVertex.alignment),t.Sh(),o===0?(o=u.right+s/2,i?t.pointsCount===4&&(i=t.i(3).y,t.L(1,o-20,t.i(1).y),t.m(2,o-20,i),t.m(3,o,i),t.m(4,o+20,i),t.L(5,t.i(5).x,i)):e?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,o,t.i(2).y),t.L(3,o,t.i(3).y)):t.pointsCount===4?t.m(2,o,t.i(2).y):t.pointsCount===3?t.L(1,o,t.i(2).y):t.pointsCount===2&&t.m(1,o,t.i(1).y)):o===90?(o=u.bottom+s/2,i?t.pointsCount===4&&(i=t.i(3).x,t.L(1,t.i(1).x,o-20),t.m(2,i,o-20),t.m(3,i,o),t.m(4,i,o+20),t.L(5,i,t.i(5).y)):e?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,t.i(2).x,o),t.L(3,t.i(3).x,o)):t.pointsCount===4?t.m(2,t.i(2).x,o):t.pointsCount===3?t.L(1,t.i(2).x,o):t.pointsCount===2&&t.m(1,t.i(1).x,o)):o===180?(o=u.left-s/2,i?t.pointsCount===4&&(i=t.i(3).y,t.L(1,o+20,t.i(1).y),t.m(2,o+20,i),t.m(3,o,i),t.m(4,o-20,i),t.L(5,t.i(5).x,i)):e?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,o,t.i(2).y),t.L(3,o,t.i(3).y)):t.pointsCount===4?t.m(2,o,t.i(2).y):t.pointsCount===3?t.L(1,o,t.i(2).y):t.pointsCount===2&&t.m(1,o,t.i(1).y)):o===270&&(o=u.top-s/2,i?t.pointsCount===4&&(i=t.i(3).x,t.L(1,t.i(1).x,o+20),t.m(2,i,o+20),t.m(3,i,o),t.m(4,i,o-20),t.L(5,i,t.i(5).y)):e?n?t.L(3,t.i(2).x,t.i(4).y):t.pointsCount===6&&(t.L(2,t.i(2).x,o),t.L(3,t.i(3).x,o)):t.pointsCount===4?t.m(2,t.i(2).x,o):t.pointsCount===3?t.L(1,t.i(2).x,o):t.pointsCount===2&&t.m(1,t.i(1).x,o)),t.zf()))}},X.Object.defineProperties(Eh.prototype,{fromVertex:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.$c=t)}},toVertex:{get:function(){return this.gd},set:function(t){this.gd!==t&&(this.gd=t)}},relativePoint:{get:function(){return this.iv},set:function(t){this.iv.set(t)}}}),Eh.className="TreeEdge",he.prototype.initializeStandardTools=function(){this.Xa("Action",new No,this.mouseDownTools),this.Xa("Relinking",new kn,this.mouseDownTools),this.Xa("LinkReshaping",new Se,this.mouseDownTools),this.Xa("Rotating",new cn,this.mouseDownTools),this.Xa("Resizing",new Ti,this.mouseDownTools),this.Xa("Linking",new Ri,this.mouseMoveTools),this.Xa("Dragging",new fe,this.mouseMoveTools),this.Xa("DragSelecting",new Cr,this.mouseMoveTools),this.Xa("Panning",new Lr,this.mouseMoveTools),this.Xa("ContextMenu",new qi,this.mouseUpTools),this.Xa("TextEditing",new ie,this.mouseUpTools),this.Xa("ClickCreating",new Fs,this.mouseUpTools),this.Xa("ClickSelecting",new Uu,this.mouseUpTools)},wr("Horizontal",new ap),wr("Spot",new cp),wr("Table",new dp),wr("Viewbox",new mp),wr("TableRow",new gp),wr("TableColumn",new yp),wr("Graduated",new Za),wr("Grid",new $a),tp.add("GraphLinksModel",Le),tp.add("TreeModel",dn),qp(Ae,null),qp(Gt,null);var Rd=Y.go,Fd={get licenseKey(){return O.licenseKey},set licenseKey(t){O.licenseKey=t},get version(){return O.version},Group:dt,EnumValue:K,List:J,Set:W,Map:ct,Point:k,Size:pt,Rect:I,Margin:Rt,Spot:st,Geometry:Mt,PathFigure:be,PathSegment:Ht,InputEvent:Bi,DiagramEvent:Sl,ChangedEvent:ae,Model:b,GraphLinksModel:Pt,TreeModel:Si,Binding:Me,Transaction:Ye,UndoManager:de,CommandHandler:_t,Tool:Ft,DraggingTool:fe,DraggingInfo:cs,DraggingOptions:Cl,LinkingBaseTool:ti,LinkingTool:Ri,RelinkingTool:kn,LinkReshapingTool:Se,ResizingTool:Ti,RotatingTool:cn,ClickSelectingTool:Uu,ActionTool:No,ClickCreatingTool:Fs,HTMLInfo:To,ContextMenuTool:qi,DragSelectingTool:Cr,PanningTool:Lr,TextEditingTool:ie,ToolManager:he,Animation:oi,AnimationManager:bi,AnimationTrigger:jr,Layer:si,Diagram:O,Palette:np,Overview:Do,Brush:At,GraphObject:ot,Panel:V,RowColumnDefinition:ke,Shape:gt,TextBlock:qt,TextBlockMetrics:Ep,Picture:nr,Part:rt,Adornment:Ct,Node:Z,Link:z,Placeholder:xi,Layout:It,LayoutNetwork:$t,LayoutVertex:xe,LayoutEdge:Ze,GridLayout:Be,PanelLayout:$e,CircularLayout:ue,CircularNetwork:Nh,CircularVertex:Sf,CircularEdge:vd,ForceDirectedLayout:Ae,ForceDirectedNetwork:Gl,ForceDirectedVertex:Xl,ForceDirectedEdge:Hl,LayeredDigraphLayout:Gt,LayeredDigraphNetwork:Ch,LayeredDigraphVertex:Wl,LayeredDigraphEdge:Kl,TreeLayout:St,TreeNetwork:Jl,TreeVertex:Ln,TreeEdge:Eh};typeof Rd=="object"&&Rd.version&&E("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Rd?"debug ":"")+"version: "+Rd.version+", replaced with version: "+Fd.version),O.prototype.go=Fd,Y.go=Fd,(typeof Y=="undefined"||typeof Y.module=="undefined"||typeof Y.module.exports!="object")&&Y.define&&typeof Y.define=="function"&&Y.define.amd&&Y.define(Fd),h.exports=typeof Qo!="undefined"?Qo.go:self.go})()});var jD=yt.ActionTool,DD=yt.Adornment,ED=yt.Animation,OD=yt.AnimationManager,AD=yt.AnimationTrigger,rs=yt.Binding,ID=yt.Brush,BD=yt.ChangedEvent,RD=yt.CircularEdge,FD=yt.CircularLayout,VD=yt.CircularNetwork,zD=yt.CircularVertex,UD=yt.ClickCreatingTool,YD=yt.ClickSelectingTool,GD=yt.CommandHandler,XD=yt.ContextMenuTool,b1=yt.Diagram,HD=yt.DiagramEvent,WD=yt.DragSelectingTool,KD=yt.DraggingInfo,_D=yt.DraggingOptions,$D=yt.DraggingTool,ZD=yt.EnumValue,JD=yt.ForceDirectedEdge,QD=yt.ForceDirectedLayout,qD=yt.ForceDirectedNetwork,bD=yt.ForceDirectedVertex,tE=yt.Geometry,BN=yt.GraphLinksModel,tx=yt.GraphObject,eE=yt.GridLayout,iE=yt.Group,nE=yt.HTMLInfo,rE=yt.InputEvent,oE=yt.Layer,sE=yt.LayeredDigraphEdge,lE=yt.LayeredDigraphLayout,uE=yt.LayeredDigraphNetwork,hE=yt.LayeredDigraphVertex,aE=yt.Layout,fE=yt.LayoutEdge,cE=yt.LayoutNetwork,pE=yt.LayoutVertex,ex=yt.Link,dE=yt.LinkReshapingTool,gE=yt.LinkingBaseTool,yE=yt.LinkingTool,mE=yt.List,vE=yt.Map,xE=yt.Margin,wE=yt.Model,RN=yt.Node,ME=yt.Overview,SE=yt.Palette,kE=yt.Panel,PE=yt.PanelLayout,NE=yt.PanningTool,TE=yt.Part,CE=yt.PathFigure,LE=yt.PathSegment,jE=yt.Picture,DE=yt.Placeholder,ix=yt.Point,EE=yt.Rect,OE=yt.RelinkingTool,AE=yt.ResizingTool,IE=yt.RotatingTool,BE=yt.RowColumnDefinition,RE=yt.Set,nx=yt.Shape,FN=yt.Size,Pu=yt.Spot,VN=yt.TextBlock,FE=yt.TextBlockMetrics,VE=yt.TextEditingTool,zE=yt.Tool,UE=yt.ToolManager,YE=yt.Transaction,GE=yt.TreeEdge,XE=yt.TreeLayout,HE=yt.TreeModel,WE=yt.TreeNetwork,KE=yt.TreeVertex,_E=yt.UndoManager,$E=yt.licenseKey,ZE=yt.version;var rx=function(h,l){return rx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,v){p.__proto__=v}||function(p,v){for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(p[w]=v[w])},rx(h,l)};function ox(h,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");rx(h,l);function p(){this.constructor=h}h.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)}var zN=function(h){ox(l,h);function l(p){var v=h.call(this,p)||this;return v.modelChangedListener=null,v.divRef=Zt.createRef(),v}return l.prototype.getDiagram=function(){return this.divRef.current===null?null:yt.Diagram.fromDiv(this.divRef.current)},l.prototype.componentDidMount=function(){var p=this;if(this.divRef.current!==null){var v=this.props.initDiagram();v.div=this.divRef.current,this.modelChangedListener=function(w){if(w.isTransactionFinished&&w.model&&!w.model.isReadOnly&&p.props.onModelChange){var P=w.model.toIncrementalData(w);P!==null&&p.props.onModelChange(P)}},v.addModelChangedListener(this.modelChangedListener),v.delayInitialization(function(){var w=v.model;w.commit(function(P){p.props.modelData!==void 0&&P.assignAllDataProperties(P.modelData,p.props.modelData),P.mergeNodeDataArray(p.props.nodeDataArray),p.props.linkDataArray!==void 0&&P instanceof yt.GraphLinksModel&&P.mergeLinkDataArray(p.props.linkDataArray)},"gojs-react init merge")})}},l.prototype.componentWillUnmount=function(){var p=this.getDiagram();p!==null&&(p.div=null,this.modelChangedListener!==null&&(p.removeModelChangedListener(this.modelChangedListener),this.modelChangedListener=null))},l.prototype.shouldComponentUpdate=function(p,v){return!(p.skipsDiagramUpdate||p.nodeDataArray===this.props.nodeDataArray&&p.linkDataArray===this.props.linkDataArray&&p.modelData===this.props.modelData)},l.prototype.componentDidUpdate=function(p,v){var w=this.getDiagram();if(w!==null){var P=w.model;P.startTransaction("update data"),this.props.modelData!==void 0&&P.assignAllDataProperties(P.modelData,this.props.modelData),P.mergeNodeDataArray(this.props.nodeDataArray),this.props.linkDataArray!==void 0&&P instanceof yt.GraphLinksModel&&P.mergeLinkDataArray(this.props.linkDataArray),P.commitTransaction("update data")}},l.prototype.render=function(){return Zt.createElement("div",{ref:this.divRef,className:this.props.divClassName})},l}(Zt.Component),tO=function(h){ox(l,h);function l(p){var v=h.call(this,p)||this;return v.divRef=Zt.createRef(),v}return l.prototype.getOverview=function(){return this.divRef.current===null?null:yt.Diagram.fromDiv(this.divRef.current)},l.prototype.componentDidMount=function(){if(this.divRef.current!==null){var p;this.props.initOverview!==void 0?p=this.props.initOverview():(p=new yt.Overview,p.contentAlignment=yt.Spot.Center),p.div=this.divRef.current,p.observed=this.props.observedDiagram}},l.prototype.componentWillUnmount=function(){var p=this.getOverview();p!==null&&(p.div=null,p.observed=null)},l.prototype.shouldComponentUpdate=function(p,v){return p.observedDiagram!==this.props.observedDiagram},l.prototype.componentDidUpdate=function(p,v){var w=this.getOverview();w!==null&&(w.observed=this.props.observedDiagram)},l.prototype.render=function(){return Zt.createElement("div",{ref:this.divRef,className:this.props.divClassName})},l}(Zt.Component),eO=function(h){ox(l,h);function l(p){var v=h.call(this,p)||this;return v.divRef=Zt.createRef(),v}return l.prototype.getPalette=function(){return this.divRef.current===null?null:yt.Diagram.fromDiv(this.divRef.current)},l.prototype.componentDidMount=function(){var p=this;if(this.divRef.current!==null){var v=this.props.initPalette();v.div=this.divRef.current,v.delayInitialization(function(){var w=v.model;w.commit(function(P){p.props.modelData!==void 0&&P.assignAllDataProperties(P.modelData,p.props.modelData),P.mergeNodeDataArray(p.props.nodeDataArray),p.props.linkDataArray!==void 0&&P instanceof yt.GraphLinksModel&&P.mergeLinkDataArray(p.props.linkDataArray)},null)})}},l.prototype.componentWillUnmount=function(){var p=this.getPalette();p!==null&&(p.div=null)},l.prototype.shouldComponentUpdate=function(p,v){return!(p.nodeDataArray===this.props.nodeDataArray&&p.linkDataArray===this.props.linkDataArray&&p.modelData===this.props.modelData)},l.prototype.componentDidUpdate=function(p,v){var w=this.getPalette();if(w!==null){var P=w.model;P.startTransaction("update data"),this.props.modelData!==void 0&&P.assignAllDataProperties(P.modelData,this.props.modelData),P.mergeNodeDataArray(this.props.nodeDataArray),this.props.linkDataArray!==void 0&&P instanceof yt.GraphLinksModel&&P.mergeLinkDataArray(this.props.linkDataArray),P.commitTransaction("update data")}},l.prototype.render=function(){return Zt.createElement("div",{ref:this.divRef,className:this.props.divClassName})},l}(Zt.Component);var sx=(h,l)=>h==="left"?l?Pu.Left:Pu.Right:l?Pu.Right:Pu.Left,nD=()=>{let h=tx.make;b1.licenseKey="39e944e0e6604f8200ca092315396dbc59a42a33ccd31af4045210a4e55f6c12259ee87f52d589c581fc5cec086dc68c8dc3697bc74d172b";let l=h(b1,{"undoManager.isEnabled":!0,"clickCreatingTool.archetypeNodeData":{text:"new node",color:"lightblue"},model:h(BN,{linkKeyProperty:"key"}),hasHorizontalScrollbar:!1,hasVerticalScrollbar:!1});return l.nodeTemplate=h(RN,"Vertical",{selectionObjectName:"TEXT"},h(VN,{name:"TEXT",minSize:new FN(30,15),stroke:"white",editable:!1},new rs("text","text").makeTwoWay(),new rs("scale","scale").makeTwoWay(),new rs("font","font").makeTwoWay()),h(nx,"LineH",{stretch:tx.Horizontal,strokeWidth:3,height:3,portId:"",fromSpot:Pu.LeftRightSides,toSpot:Pu.LeftRightSides},new rs("stroke","brush"),new rs("fromSpot","dir",p=>sx(p,!0)),new rs("toSpot","dir",p=>sx(p,!1))),new rs("location","loc",ix.parse).makeTwoWay(ix.stringify),new rs("locationSpot","dir",function(p){return sx(p,!1)})),l.linkTemplate=h(ex,{curve:ex.Bezier,fromShortLength:-2,toShortLength:-2,selectable:!1},h(nx,{strokeWidth:3},new rs("stroke","toNode",function(p){return p.data.brush?p.data.brush:"black"}).ofObject())),l},rD=h=>{console.log("GoJS model changed!",h)},UN=h=>Zt.createElement(zN,{initDiagram:nD,divClassName:"diagram-component",skipsDiagramUpdate:!1,nodeDataArray:[{key:0,text:"Mind Map",loc:"0 0"},{key:1,parent:0,text:"Getting more time",brush:"skyblue",dir:"right",loc:"77 -22"},{key:11,parent:1,text:"Wake up early",brush:"skyblue",dir:"right",loc:"200 -48"},{key:12,parent:1,text:"Delegate",brush:"skyblue",dir:"right",loc:"200 -22"},{key:13,parent:1,text:"Simplify",brush:"skyblue",dir:"right",loc:"200 4"},{key:2,parent:0,text:"More effective use",brush:"darkseagreen",dir:"right",loc:"77 43"},{key:21,parent:2,text:"Planning",brush:"darkseagreen",dir:"right",loc:"203 30"},{key:211,parent:21,text:"Priorities",brush:"darkseagreen",dir:"right",loc:"274 17"},{key:212,parent:21,text:"Ways to focus",brush:"darkseagreen",dir:"right",loc:"274 43"},{key:22,parent:2,text:"Goals",brush:"darkseagreen",dir:"right",loc:"203 56"},{key:3,parent:0,text:"Time wasting",brush:"palevioletred",dir:"left",loc:"-20 -31.75"},{key:31,parent:3,text:"Too many meetings",brush:"palevioletred",dir:"left",loc:"-117 -64.25"},{key:32,parent:3,text:"Too much time spent on details",brush:"palevioletred",dir:"left",loc:"-117 -25.25"},{key:33,parent:3,text:"Message fatigue",brush:"palevioletred",dir:"left",loc:"-117 0.75"},{key:331,parent:31,text:"Check messages less",brush:"palevioletred",dir:"left",loc:"-251 -77.25"},{key:332,parent:31,text:"Message filters",brush:"palevioletred",dir:"left",loc:"-251 -51.25"},{key:4,parent:0,text:"Key issues",brush:"coral",dir:"left",loc:"-20 52.75"},{key:41,parent:4,text:"Methods",brush:"coral",dir:"left",loc:"-103 26.75"},{key:42,parent:4,text:"Deadlines",brush:"coral",dir:"left",loc:"-103 52.75"},{key:43,parent:4,text:"Checkpoints",brush:"coral",dir:"left",loc:"-103 78.75"}],onModelChange:rD});var oD=Zt.createElement(Zt.Fragment,null,Zt.createElement("div",{className:"leftPanel"},Zt.createElement(IN,{defaultValue:"# comment"})),Zt.createElement("div",{className:"rightPanel"},Zt.createElement(UN,null)));dN(oD,document.getElementById("root"));
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
//# sourceMappingURL=App.js.map
